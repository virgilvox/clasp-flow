import{d as F,r as C,k as I,w as B,A as $,s as z,a as L,o as A,p as Z,f as J,b,K as R,$ as N,F as ee,E as te,n as oe}from"./index-Dj5qWYk1.js";const ae={key:0,class:"knob-label"},le={key:1,class:"knob-value"},se=F({__name:"RotaryKnob",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},label:{},accentColor:{default:"#ff6b35"},size:{default:"medium"},showValue:{type:Boolean,default:!0},valueFormat:{type:Function,default:g=>g.toFixed(2)}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(!1),y=C(0),x=C(0),E=I(()=>{switch(n.size){case"small":return{canvas:40,stroke:2,arcStroke:2.5,centerRadius:12};case"large":return{canvas:72,stroke:2.5,arcStroke:4,centerRadius:24};default:return{canvas:56,stroke:2,arcStroke:3,centerRadius:18}}}),M=I(()=>(n.modelValue-n.min)/(n.max-n.min)),T=Math.PI*.75,S=Math.PI*2.25,_=S-T,P=I(()=>T+M.value*_);function s(){if(!c.value)return;const t=c.value.getContext("2d");if(!t)return;const l=E.value.canvas,a=window.devicePixelRatio||1;c.value.width=l*a,c.value.height=l*a,c.value.style.width=l+"px",c.value.style.height=l+"px",t.scale(a,a);const i=l/2,d=l/2,r=l/2-4,{stroke:h,arcStroke:p,centerRadius:w}=E.value;t.clearRect(0,0,l,l),t.beginPath(),t.arc(i,d,r,T,S),t.strokeStyle="#333",t.lineWidth=h,t.lineCap="round",t.stroke(),M.value>.001&&(t.beginPath(),t.arc(i,d,r,T,P.value),t.strokeStyle=n.accentColor,t.lineWidth=p,t.lineCap="round",t.stroke()),t.beginPath(),t.arc(i,d,w,0,Math.PI*2),t.fillStyle="#1a1a1a",t.fill(),t.strokeStyle="#333",t.lineWidth=1,t.stroke();const V=w-4,D=P.value,Y=i+Math.cos(D)*4,G=d+Math.sin(D)*4,X=i+Math.cos(D)*V,ne=d+Math.sin(D)*V;t.beginPath(),t.moveTo(Y,G),t.lineTo(X,ne),t.strokeStyle=n.accentColor,t.lineWidth=2,t.lineCap="round",t.stroke(),t.beginPath(),t.arc(i,d,2,0,Math.PI*2),t.fillStyle="#666",t.fill()}function m(t){v.value=!0,y.value=t.clientY,x.value=n.modelValue,window.addEventListener("mousemove",u),window.addEventListener("mouseup",f),t.preventDefault()}function u(t){if(!v.value)return;const l=y.value-t.clientY,a=(n.max-n.min)/150;let i=x.value+l*a;i=Math.round(i/n.step)*n.step,i=Math.max(n.min,Math.min(n.max,i)),k("update:modelValue",i)}function f(){v.value=!1,window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",f)}function e(t){t.preventDefault();const l=t.deltaY<0?1:-1,a=t.shiftKey?10:1;let i=n.modelValue+l*n.step*a;i=Math.round(i/n.step)*n.step,i=Math.max(n.min,Math.min(n.max,i)),k("update:modelValue",i)}function o(){const t=(n.min+n.max)/2;k("update:modelValue",t)}return B([()=>n.modelValue,()=>n.accentColor,()=>n.size],s),$(()=>{s()}),z(()=>{v.value&&(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",f))}),(t,l)=>(A(),L("div",{class:Z(["rotary-knob",[g.size,{dragging:v.value}]])},[g.label?(A(),L("span",ae,R(g.label),1)):J("",!0),b("canvas",{ref_key:"canvas",ref:c,class:"knob-canvas",onMousedown:m,onWheel:e,onDblclick:o},null,544),g.showValue?(A(),L("span",le,R(g.valueFormat(g.modelValue)),1)):J("",!0)],2))}}),we=N(se,[["__scopeId","data-v-9468de6a"]]),ie={class:"envelope-editor"},ce={class:"envelope-values"},U=2,K=2,Q=5,ue=F({__name:"EnvelopeEditor",props:{modelValue:{},width:{default:200},height:{default:100},accentColor:{default:"#ff6b35"}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(null),y=U+K+Q,x=I(()=>{const s=n.width,m=n.height,u=12,f=u+n.modelValue.attack/y*(s-u*2),e=f+n.modelValue.decay/y*(s-u*2),o=(s-u*2)*.2,t=e+o,l=s-u,a=u,i=m-u,d=a+(1-n.modelValue.sustain)*(i-a);return{start:{x:u,y:i},attack:{x:f,y:a},decay:{x:e,y:d},sustain:{x:t,y:d},release:{x:l,y:i},padding:u,top:a,bottom:i}});function E(){if(!c.value)return;const s=c.value.getContext("2d");if(!s)return;const m=n.width,u=n.height,f=window.devicePixelRatio||1;c.value.width=m*f,c.value.height=u*f,c.value.style.width=m+"px",c.value.style.height=u+"px",s.scale(f,f),s.clearRect(0,0,m,u),s.fillStyle="#0a0a0a",s.fillRect(0,0,m,u),s.strokeStyle="#1a1a1a",s.lineWidth=1;for(let t=0;t<=4;t++){const l=x.value.padding+t/4*(u-x.value.padding*2);s.beginPath(),s.moveTo(0,l),s.lineTo(m,l),s.stroke()}const e=x.value;s.beginPath(),s.moveTo(e.start.x,e.start.y),s.lineTo(e.attack.x,e.attack.y),s.lineTo(e.decay.x,e.decay.y),s.lineTo(e.sustain.x,e.sustain.y),s.lineTo(e.release.x,e.release.y),s.strokeStyle=n.accentColor,s.lineWidth=2,s.stroke(),s.lineTo(e.release.x,e.bottom),s.lineTo(e.start.x,e.bottom),s.closePath(),s.fillStyle=n.accentColor+"20",s.fill();const o=(t,l,a)=>{s.beginPath(),s.arc(t,l,a?7:5,0,Math.PI*2),s.fillStyle=a?n.accentColor:"#1a1a1a",s.fill(),s.strokeStyle=n.accentColor,s.lineWidth=2,s.stroke()};o(e.attack.x,e.attack.y,v.value==="attack"),o(e.decay.x,e.decay.y,v.value==="decay"),o(e.sustain.x,e.sustain.y,v.value==="sustain"),s.fillStyle="#666",s.font="9px monospace",s.textAlign="center",s.fillText("A",e.attack.x,u-2),s.fillText("D",e.decay.x,u-2),s.fillText("S",e.sustain.x,u-2),s.fillText("R",e.release.x,u-2)}function M(s,m){const u=x.value,f=12,e=(o,t)=>Math.sqrt((s-o)**2+(m-t)**2);return e(u.attack.x,u.attack.y)<f?"attack":e(u.decay.x,u.decay.y)<f?"decay":e(u.sustain.x,u.sustain.y)<f?"sustain":null}function T(s){if(!c.value)return;const m=c.value.getBoundingClientRect(),u=s.clientX-m.left,f=s.clientY-m.top,e=M(u,f);e&&(v.value=e,window.addEventListener("mousemove",S),window.addEventListener("mouseup",_),s.preventDefault())}function S(s){if(!v.value||!c.value)return;const m=c.value.getBoundingClientRect(),u=s.clientX-m.left,f=s.clientY-m.top,e=n.width,o=n.height,t=x.value.padding,l=Math.max(0,Math.min(1,(u-t)/(e-t*2))),a=Math.max(0,Math.min(1,(f-t)/(o-t*2))),i={...n.modelValue};switch(v.value){case"attack":i.attack=l*U;break;case"decay":{const d=n.modelValue.attack/y,r=Math.max(d,l)-d;i.decay=r*y,i.decay=Math.min(K,Math.max(.001,i.decay)),i.sustain=1-a;break}case"sustain":i.sustain=1-a;break}i.attack=Math.max(.001,Math.min(U,i.attack)),i.decay=Math.max(.001,Math.min(K,i.decay)),i.sustain=Math.max(0,Math.min(1,i.sustain)),i.release=Math.max(.001,Math.min(Q,i.release)),k("update:modelValue",i)}function _(){v.value=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",_)}function P(s){s.preventDefault();const m=s.deltaY<0?.1:-.1,u=Math.max(.001,Math.min(Q,n.modelValue.release+m));k("update:modelValue",{...n.modelValue,release:u})}return B(()=>n.modelValue,E,{deep:!0}),$(()=>{E()}),z(()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",_)}),(s,m)=>(A(),L("div",ie,[b("canvas",{ref_key:"canvas",ref:c,class:"envelope-canvas",onMousedown:T,onWheel:P},null,544),b("div",ce,[b("span",null,"A: "+R(g.modelValue.attack.toFixed(2))+"s",1),b("span",null,"D: "+R(g.modelValue.decay.toFixed(2))+"s",1),b("span",null,"S: "+R((g.modelValue.sustain*100).toFixed(0))+"%",1),b("span",null,"R: "+R(g.modelValue.release.toFixed(2))+"s",1)])]))}}),ye=N(ue,[["__scopeId","data-v-207d5d27"]]),re={class:"eq-editor"},de={class:"eq-values"},H=20,O=2e4,W=-24,j=24,me=F({__name:"EQEditor",props:{modelValue:{},width:{default:240},height:{default:120},accentColor:{default:"#a855f7"}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(null),y=["#ef4444","#22c55e","#3b82f6"];function x(e){const t=Math.log10(H),l=Math.log10(O);return 10+(Math.log10(e)-t)/(l-t)*(n.width-10*2)}function E(e){const t=Math.log10(H),l=Math.log10(O),a=(e-10)/(n.width-10*2);return Math.pow(10,t+a*(l-t))}function M(e){const t=(e-W)/(j-W);return n.height-10-t*(n.height-10*2)}function T(e){const t=(n.height-10-e)/(n.height-20);return W+t*(j-W)}function S(e){let o=0;for(const t of n.modelValue.bands){const l=Math.log2(e/t.frequency),a=1/t.q,i=t.gain*Math.exp(-(l*l)/(2*a*a));o+=i}return o}function _(){if(!c.value)return;const e=c.value.getContext("2d");if(!e)return;const o=n.width,t=n.height,l=window.devicePixelRatio||1;c.value.width=o*l,c.value.height=t*l,c.value.style.width=o+"px",c.value.style.height=t+"px",e.scale(l,l),e.clearRect(0,0,o,t),e.fillStyle="#0a0a0a",e.fillRect(0,0,o,t);const a=10;e.strokeStyle="#1a1a1a",e.lineWidth=1;for(let r=-24;r<=24;r+=12){const h=M(r);e.beginPath(),e.moveTo(a,h),e.lineTo(o-a,h),e.stroke()}e.strokeStyle="#333";const i=M(0);e.beginPath(),e.moveTo(a,i),e.lineTo(o-a,i),e.stroke(),e.strokeStyle="#1a1a1a";for(const r of[100,1e3,1e4]){const h=x(r);e.beginPath(),e.moveTo(h,a),e.lineTo(h,t-a),e.stroke()}e.beginPath();let d=!0;for(let r=a;r<=o-a;r+=2){const h=E(r),p=S(h),w=M(p);d?(e.moveTo(r,w),d=!1):e.lineTo(r,w)}e.strokeStyle=n.accentColor,e.lineWidth=2,e.stroke(),e.lineTo(o-a,i),e.lineTo(a,i),e.closePath(),e.fillStyle=n.accentColor+"15",e.fill();for(let r=0;r<n.modelValue.bands.length;r++){const h=n.modelValue.bands[r];e.beginPath();let p=!0;for(let w=a;w<=o-a;w+=2){const V=E(w),D=Math.log2(V/h.frequency),Y=1/h.q,G=h.gain*Math.exp(-(D*D)/(2*Y*Y)),X=M(G);p?(e.moveTo(w,X),p=!1):e.lineTo(w,X)}e.strokeStyle=y[r]+"60",e.lineWidth=1,e.stroke()}for(let r=0;r<n.modelValue.bands.length;r++){const h=n.modelValue.bands[r],p=x(h.frequency),w=M(h.gain),V=v.value===r;e.beginPath(),e.arc(p,w,V?8:6,0,Math.PI*2),e.fillStyle=V?y[r]:"#1a1a1a",e.fill(),e.strokeStyle=y[r],e.lineWidth=2,e.stroke(),e.fillStyle="#666",e.font="9px monospace",e.textAlign="center",e.fillText(`${r+1}`,p,w+3)}e.fillStyle="#444",e.font="8px monospace",e.textAlign="center",e.fillText("100",x(100),t-2),e.fillText("1k",x(1e3),t-2),e.fillText("10k",x(1e4),t-2)}function P(e,o){for(let l=0;l<n.modelValue.bands.length;l++){const a=n.modelValue.bands[l],i=x(a.frequency),d=M(a.gain);if(Math.sqrt((e-i)**2+(o-d)**2)<15)return l}return null}function s(e){if(!c.value)return;const o=c.value.getBoundingClientRect(),t=e.clientX-o.left,l=e.clientY-o.top,a=P(t,l);a!==null&&(v.value=a,window.addEventListener("mousemove",m),window.addEventListener("mouseup",u),e.preventDefault())}function m(e){if(v.value===null||!c.value)return;const o=c.value.getBoundingClientRect(),t=e.clientX-o.left,l=e.clientY-o.top,a=[...n.modelValue.bands];a[v.value]={...a[v.value],frequency:Math.max(H,Math.min(O,E(t))),gain:Math.max(W,Math.min(j,T(l)))},k("update:modelValue",{bands:a})}function u(){v.value=null,window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}function f(e){if(!c.value)return;const o=c.value.getBoundingClientRect(),t=e.clientX-o.left,l=e.clientY-o.top,a=P(t,l);if(a!==null){e.preventDefault();const i=e.deltaY<0?.2:-.2,d=[...n.modelValue.bands];d[a]={...d[a],q:Math.max(.1,Math.min(10,d[a].q+i))},k("update:modelValue",{bands:d})}}return B(()=>n.modelValue,_,{deep:!0}),$(()=>{_()}),z(()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}),(e,o)=>(A(),L("div",re,[b("canvas",{ref_key:"canvas",ref:c,class:"eq-canvas",onMousedown:s,onWheel:f},null,544),b("div",de,[(A(!0),L(ee,null,te(g.modelValue.bands,(t,l)=>(A(),L("span",{key:l,style:oe({color:y[l]})},R(Math.round(t.frequency))+"Hz "+R(t.gain>0?"+":"")+R(t.gain.toFixed(1))+"dB ",5))),128))])]))}}),xe=N(me,[["__scopeId","data-v-1249679b"]]),he={class:"waveform-editor"},ve={class:"waveform-presets"},fe=["onClick"],pe=F({__name:"WaveformEditor",props:{modelValue:{},width:{default:200},height:{default:80},accentColor:{default:"#22c55e"},sampleCount:{default:64}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(!1),y=C(null),x={sine:(e,o)=>Math.sin(e/o*Math.PI*2),square:(e,o)=>e<o/2?1:-1,sawtooth:(e,o)=>2*(e/o)-1,triangle:(e,o)=>{const t=e/o;return t<.5?4*t-1:3-4*t}};function E(e){const o=x[e];return o?Array.from({length:n.sampleCount},(t,l)=>o(l,n.sampleCount)):n.modelValue.samples}const M=I(()=>{if(n.modelValue.samples.length===n.sampleCount)return n.modelValue.samples;const e=[];for(let o=0;o<n.sampleCount;o++){const t=o/n.sampleCount*n.modelValue.samples.length,l=Math.floor(t),a=Math.min(l+1,n.modelValue.samples.length-1),i=t-l;e.push(n.modelValue.samples[l]*(1-i)+n.modelValue.samples[a]*i)}return e});function T(){if(!c.value)return;const e=c.value.getContext("2d");if(!e)return;const o=n.width,t=n.height,l=window.devicePixelRatio||1;c.value.width=o*l,c.value.height=t*l,c.value.style.width=o+"px",c.value.style.height=t+"px",e.scale(l,l),e.clearRect(0,0,o,t),e.fillStyle="#0a0a0a",e.fillRect(0,0,o,t);const a=4,i=o-a*2,d=t-a*2,r=t/2;e.strokeStyle="#1a1a1a",e.lineWidth=1,e.beginPath(),e.moveTo(a,r),e.lineTo(o-a,r),e.stroke(),e.strokeStyle="#151515";for(const p of[.25,.75])e.beginPath(),e.moveTo(a,a+p*d),e.lineTo(o-a,a+p*d),e.stroke();e.beginPath();const h=M.value;for(let p=0;p<h.length;p++){const w=a+p/(h.length-1)*i,V=r-h[p]*(d/2);p===0?e.moveTo(w,V):e.lineTo(w,V)}if(e.strokeStyle=n.accentColor,e.lineWidth=2,e.stroke(),e.lineTo(o-a,r),e.lineTo(a,r),e.closePath(),e.fillStyle=n.accentColor+"20",e.fill(),v.value)for(let p=0;p<h.length;p++){const w=a+p/(h.length-1)*i,V=r-h[p]*(d/2);e.beginPath(),e.arc(w,V,2,0,Math.PI*2),e.fillStyle=n.accentColor,e.fill()}}function S(e){const t=n.width-8,l=(e-4)/t;return Math.max(0,Math.min(n.sampleCount-1,Math.round(l*(n.sampleCount-1))))}function _(e){const o=n.height/2,t=(n.height-8)/2;return Math.max(-1,Math.min(1,(o-e)/t))}function P(e,o){const t=S(e),l=_(o),a=[...M.value];if(y.value!==null){const i=S(y.value);if(i!==t){const d=t>i?1:-1;for(let r=i;r!==t;r+=d){const h=(r-i)/(t-i);a[r]=a[i]*(1-h)+l*h}}}a[t]=l,y.value=e,k("update:modelValue",{samples:a,preset:"custom"})}function s(e){if(!c.value)return;const o=c.value.getBoundingClientRect(),t=e.clientX-o.left,l=e.clientY-o.top;v.value=!0,y.value=null,P(t,l),window.addEventListener("mousemove",m),window.addEventListener("mouseup",u),e.preventDefault()}function m(e){if(!v.value||!c.value)return;const o=c.value.getBoundingClientRect(),t=e.clientX-o.left,l=e.clientY-o.top;P(t,l)}function u(){v.value=!1,y.value=null,window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}function f(e){const o=E(e);k("update:modelValue",{samples:o,preset:e})}return B(()=>n.modelValue,T,{deep:!0}),$(()=>{T()}),z(()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}),(e,o)=>(A(),L("div",he,[b("canvas",{ref_key:"canvas",ref:c,class:"waveform-canvas",onMousedown:s},null,544),b("div",ve,[(A(),L(ee,null,te(["sine","square","sawtooth","triangle"],t=>b("button",{key:t,class:Z(["preset-btn",{active:g.modelValue.preset===t}]),onClick:l=>f(t)},R(t.charAt(0).toUpperCase()),11,fe)),64))])]))}}),Me=N(pe,[["__scopeId","data-v-80c3bfe2"]]);export{ye as E,we as R,Me as W,xe as a};
