import{d as F,r as C,k as I,w as B,A as $,a as L,o as A,p as Z,f as J,b,K as R,$ as z,s as j,F as ee,E as te,n as ae}from"./index-D7aCSx4k.js";const oe={key:0,class:"knob-label"},le={key:1,class:"knob-value"},se=F({__name:"RotaryKnob",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},label:{},accentColor:{default:"#ff6b35"},size:{default:"medium"},showValue:{type:Boolean,default:!0},valueFormat:{type:Function,default:g=>g.toFixed(2)}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(!1),w=C(0),x=C(0),T=I(()=>{switch(n.size){case"small":return{canvas:40,stroke:2,arcStroke:2.5,centerRadius:12};case"large":return{canvas:72,stroke:2.5,arcStroke:4,centerRadius:24};default:return{canvas:56,stroke:2,arcStroke:3,centerRadius:18}}}),M=I(()=>(n.modelValue-n.min)/(n.max-n.min)),E=Math.PI*.75,S=Math.PI*2.25,_=S-E,P=I(()=>E+M.value*_);function s(){if(!c.value)return;const t=c.value.getContext("2d");if(!t)return;const l=T.value.canvas,o=window.devicePixelRatio||1;c.value.width=l*o,c.value.height=l*o,c.value.style.width=l+"px",c.value.style.height=l+"px",t.scale(o,o);const i=l/2,d=l/2,r=l/2-4,{stroke:h,arcStroke:f,centerRadius:y}=T.value;t.clearRect(0,0,l,l),t.beginPath(),t.arc(i,d,r,E,S),t.strokeStyle="#333",t.lineWidth=h,t.lineCap="round",t.stroke(),M.value>.001&&(t.beginPath(),t.arc(i,d,r,E,P.value),t.strokeStyle=n.accentColor,t.lineWidth=f,t.lineCap="round",t.stroke()),t.beginPath(),t.arc(i,d,y,0,Math.PI*2),t.fillStyle="#1a1a1a",t.fill(),t.strokeStyle="#333",t.lineWidth=1,t.stroke();const V=y-4,D=P.value,Y=i+Math.cos(D)*4,N=d+Math.sin(D)*4,X=i+Math.cos(D)*V,ne=d+Math.sin(D)*V;t.beginPath(),t.moveTo(Y,N),t.lineTo(X,ne),t.strokeStyle=n.accentColor,t.lineWidth=2,t.lineCap="round",t.stroke(),t.beginPath(),t.arc(i,d,2,0,Math.PI*2),t.fillStyle="#666",t.fill()}function m(t){v.value=!0,w.value=t.clientY,x.value=n.modelValue,window.addEventListener("mousemove",u),window.addEventListener("mouseup",p),t.preventDefault()}function u(t){if(!v.value)return;const l=w.value-t.clientY,o=(n.max-n.min)/150;let i=x.value+l*o;i=Math.round(i/n.step)*n.step,i=Math.max(n.min,Math.min(n.max,i)),k("update:modelValue",i)}function p(){v.value=!1,window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",p)}function e(t){t.preventDefault();const l=t.deltaY<0?1:-1,o=t.shiftKey?10:1;let i=n.modelValue+l*n.step*o;i=Math.round(i/n.step)*n.step,i=Math.max(n.min,Math.min(n.max,i)),k("update:modelValue",i)}function a(){const t=(n.min+n.max)/2;k("update:modelValue",t)}return B([()=>n.modelValue,()=>n.accentColor,()=>n.size],s),$(()=>{s()}),(t,l)=>(A(),L("div",{class:Z(["rotary-knob",[g.size,{dragging:v.value}]])},[g.label?(A(),L("span",oe,R(g.label),1)):J("",!0),b("canvas",{ref_key:"canvas",ref:c,class:"knob-canvas",onMousedown:m,onWheel:e,onDblclick:a},null,544),g.showValue?(A(),L("span",le,R(g.valueFormat(g.modelValue)),1)):J("",!0)],2))}}),ye=z(se,[["__scopeId","data-v-fcf8a57a"]]),ie={class:"envelope-editor"},ce={class:"envelope-values"},G=2,U=2,K=5,ue=F({__name:"EnvelopeEditor",props:{modelValue:{},width:{default:200},height:{default:100},accentColor:{default:"#ff6b35"}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(null),w=G+U+K,x=I(()=>{const s=n.width,m=n.height,u=12,p=u+n.modelValue.attack/w*(s-u*2),e=p+n.modelValue.decay/w*(s-u*2),a=(s-u*2)*.2,t=e+a,l=s-u,o=u,i=m-u,d=o+(1-n.modelValue.sustain)*(i-o);return{start:{x:u,y:i},attack:{x:p,y:o},decay:{x:e,y:d},sustain:{x:t,y:d},release:{x:l,y:i},padding:u,top:o,bottom:i}});function T(){if(!c.value)return;const s=c.value.getContext("2d");if(!s)return;const m=n.width,u=n.height,p=window.devicePixelRatio||1;c.value.width=m*p,c.value.height=u*p,c.value.style.width=m+"px",c.value.style.height=u+"px",s.scale(p,p),s.clearRect(0,0,m,u),s.fillStyle="#0a0a0a",s.fillRect(0,0,m,u),s.strokeStyle="#1a1a1a",s.lineWidth=1;for(let t=0;t<=4;t++){const l=x.value.padding+t/4*(u-x.value.padding*2);s.beginPath(),s.moveTo(0,l),s.lineTo(m,l),s.stroke()}const e=x.value;s.beginPath(),s.moveTo(e.start.x,e.start.y),s.lineTo(e.attack.x,e.attack.y),s.lineTo(e.decay.x,e.decay.y),s.lineTo(e.sustain.x,e.sustain.y),s.lineTo(e.release.x,e.release.y),s.strokeStyle=n.accentColor,s.lineWidth=2,s.stroke(),s.lineTo(e.release.x,e.bottom),s.lineTo(e.start.x,e.bottom),s.closePath(),s.fillStyle=n.accentColor+"20",s.fill();const a=(t,l,o)=>{s.beginPath(),s.arc(t,l,o?7:5,0,Math.PI*2),s.fillStyle=o?n.accentColor:"#1a1a1a",s.fill(),s.strokeStyle=n.accentColor,s.lineWidth=2,s.stroke()};a(e.attack.x,e.attack.y,v.value==="attack"),a(e.decay.x,e.decay.y,v.value==="decay"),a(e.sustain.x,e.sustain.y,v.value==="sustain"),s.fillStyle="#666",s.font="9px monospace",s.textAlign="center",s.fillText("A",e.attack.x,u-2),s.fillText("D",e.decay.x,u-2),s.fillText("S",e.sustain.x,u-2),s.fillText("R",e.release.x,u-2)}function M(s,m){const u=x.value,p=12,e=(a,t)=>Math.sqrt((s-a)**2+(m-t)**2);return e(u.attack.x,u.attack.y)<p?"attack":e(u.decay.x,u.decay.y)<p?"decay":e(u.sustain.x,u.sustain.y)<p?"sustain":null}function E(s){if(!c.value)return;const m=c.value.getBoundingClientRect(),u=s.clientX-m.left,p=s.clientY-m.top,e=M(u,p);e&&(v.value=e,window.addEventListener("mousemove",S),window.addEventListener("mouseup",_),s.preventDefault())}function S(s){if(!v.value||!c.value)return;const m=c.value.getBoundingClientRect(),u=s.clientX-m.left,p=s.clientY-m.top,e=n.width,a=n.height,t=x.value.padding,l=Math.max(0,Math.min(1,(u-t)/(e-t*2))),o=Math.max(0,Math.min(1,(p-t)/(a-t*2))),i={...n.modelValue};switch(v.value){case"attack":i.attack=l*G;break;case"decay":{const d=n.modelValue.attack/w,r=Math.max(d,l)-d;i.decay=r*w,i.decay=Math.min(U,Math.max(.001,i.decay)),i.sustain=1-o;break}case"sustain":i.sustain=1-o;break}i.attack=Math.max(.001,Math.min(G,i.attack)),i.decay=Math.max(.001,Math.min(U,i.decay)),i.sustain=Math.max(0,Math.min(1,i.sustain)),i.release=Math.max(.001,Math.min(K,i.release)),k("update:modelValue",i)}function _(){v.value=null,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",_)}function P(s){s.preventDefault();const m=s.deltaY<0?.1:-.1,u=Math.max(.001,Math.min(K,n.modelValue.release+m));k("update:modelValue",{...n.modelValue,release:u})}return B(()=>n.modelValue,T,{deep:!0}),$(()=>{T()}),j(()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",_)}),(s,m)=>(A(),L("div",ie,[b("canvas",{ref_key:"canvas",ref:c,class:"envelope-canvas",onMousedown:E,onWheel:P},null,544),b("div",ce,[b("span",null,"A: "+R(g.modelValue.attack.toFixed(2))+"s",1),b("span",null,"D: "+R(g.modelValue.decay.toFixed(2))+"s",1),b("span",null,"S: "+R((g.modelValue.sustain*100).toFixed(0))+"%",1),b("span",null,"R: "+R(g.modelValue.release.toFixed(2))+"s",1)])]))}}),we=z(ue,[["__scopeId","data-v-207d5d27"]]),re={class:"eq-editor"},de={class:"eq-values"},Q=20,H=2e4,W=-24,O=24,me=F({__name:"EQEditor",props:{modelValue:{},width:{default:240},height:{default:120},accentColor:{default:"#a855f7"}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(null),w=["#ef4444","#22c55e","#3b82f6"];function x(e){const t=Math.log10(Q),l=Math.log10(H);return 10+(Math.log10(e)-t)/(l-t)*(n.width-10*2)}function T(e){const t=Math.log10(Q),l=Math.log10(H),o=(e-10)/(n.width-10*2);return Math.pow(10,t+o*(l-t))}function M(e){const t=(e-W)/(O-W);return n.height-10-t*(n.height-10*2)}function E(e){const t=(n.height-10-e)/(n.height-20);return W+t*(O-W)}function S(e){let a=0;for(const t of n.modelValue.bands){const l=Math.log2(e/t.frequency),o=1/t.q,i=t.gain*Math.exp(-(l*l)/(2*o*o));a+=i}return a}function _(){if(!c.value)return;const e=c.value.getContext("2d");if(!e)return;const a=n.width,t=n.height,l=window.devicePixelRatio||1;c.value.width=a*l,c.value.height=t*l,c.value.style.width=a+"px",c.value.style.height=t+"px",e.scale(l,l),e.clearRect(0,0,a,t),e.fillStyle="#0a0a0a",e.fillRect(0,0,a,t);const o=10;e.strokeStyle="#1a1a1a",e.lineWidth=1;for(let r=-24;r<=24;r+=12){const h=M(r);e.beginPath(),e.moveTo(o,h),e.lineTo(a-o,h),e.stroke()}e.strokeStyle="#333";const i=M(0);e.beginPath(),e.moveTo(o,i),e.lineTo(a-o,i),e.stroke(),e.strokeStyle="#1a1a1a";for(const r of[100,1e3,1e4]){const h=x(r);e.beginPath(),e.moveTo(h,o),e.lineTo(h,t-o),e.stroke()}e.beginPath();let d=!0;for(let r=o;r<=a-o;r+=2){const h=T(r),f=S(h),y=M(f);d?(e.moveTo(r,y),d=!1):e.lineTo(r,y)}e.strokeStyle=n.accentColor,e.lineWidth=2,e.stroke(),e.lineTo(a-o,i),e.lineTo(o,i),e.closePath(),e.fillStyle=n.accentColor+"15",e.fill();for(let r=0;r<n.modelValue.bands.length;r++){const h=n.modelValue.bands[r];e.beginPath();let f=!0;for(let y=o;y<=a-o;y+=2){const V=T(y),D=Math.log2(V/h.frequency),Y=1/h.q,N=h.gain*Math.exp(-(D*D)/(2*Y*Y)),X=M(N);f?(e.moveTo(y,X),f=!1):e.lineTo(y,X)}e.strokeStyle=w[r]+"60",e.lineWidth=1,e.stroke()}for(let r=0;r<n.modelValue.bands.length;r++){const h=n.modelValue.bands[r],f=x(h.frequency),y=M(h.gain),V=v.value===r;e.beginPath(),e.arc(f,y,V?8:6,0,Math.PI*2),e.fillStyle=V?w[r]:"#1a1a1a",e.fill(),e.strokeStyle=w[r],e.lineWidth=2,e.stroke(),e.fillStyle="#666",e.font="9px monospace",e.textAlign="center",e.fillText(`${r+1}`,f,y+3)}e.fillStyle="#444",e.font="8px monospace",e.textAlign="center",e.fillText("100",x(100),t-2),e.fillText("1k",x(1e3),t-2),e.fillText("10k",x(1e4),t-2)}function P(e,a){for(let l=0;l<n.modelValue.bands.length;l++){const o=n.modelValue.bands[l],i=x(o.frequency),d=M(o.gain);if(Math.sqrt((e-i)**2+(a-d)**2)<15)return l}return null}function s(e){if(!c.value)return;const a=c.value.getBoundingClientRect(),t=e.clientX-a.left,l=e.clientY-a.top,o=P(t,l);o!==null&&(v.value=o,window.addEventListener("mousemove",m),window.addEventListener("mouseup",u),e.preventDefault())}function m(e){if(v.value===null||!c.value)return;const a=c.value.getBoundingClientRect(),t=e.clientX-a.left,l=e.clientY-a.top,o=[...n.modelValue.bands];o[v.value]={...o[v.value],frequency:Math.max(Q,Math.min(H,T(t))),gain:Math.max(W,Math.min(O,E(l)))},k("update:modelValue",{bands:o})}function u(){v.value=null,window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}function p(e){if(!c.value)return;const a=c.value.getBoundingClientRect(),t=e.clientX-a.left,l=e.clientY-a.top,o=P(t,l);if(o!==null){e.preventDefault();const i=e.deltaY<0?.2:-.2,d=[...n.modelValue.bands];d[o]={...d[o],q:Math.max(.1,Math.min(10,d[o].q+i))},k("update:modelValue",{bands:d})}}return B(()=>n.modelValue,_,{deep:!0}),$(()=>{_()}),j(()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}),(e,a)=>(A(),L("div",re,[b("canvas",{ref_key:"canvas",ref:c,class:"eq-canvas",onMousedown:s,onWheel:p},null,544),b("div",de,[(A(!0),L(ee,null,te(g.modelValue.bands,(t,l)=>(A(),L("span",{key:l,style:ae({color:w[l]})},R(Math.round(t.frequency))+"Hz "+R(t.gain>0?"+":"")+R(t.gain.toFixed(1))+"dB ",5))),128))])]))}}),xe=z(me,[["__scopeId","data-v-1249679b"]]),he={class:"waveform-editor"},ve={class:"waveform-presets"},fe=["onClick"],pe=F({__name:"WaveformEditor",props:{modelValue:{},width:{default:200},height:{default:80},accentColor:{default:"#22c55e"},sampleCount:{default:64}},emits:["update:modelValue"],setup(g,{emit:q}){const n=g,k=q,c=C(null),v=C(!1),w=C(null),x={sine:(e,a)=>Math.sin(e/a*Math.PI*2),square:(e,a)=>e<a/2?1:-1,sawtooth:(e,a)=>2*(e/a)-1,triangle:(e,a)=>{const t=e/a;return t<.5?4*t-1:3-4*t}};function T(e){const a=x[e];return a?Array.from({length:n.sampleCount},(t,l)=>a(l,n.sampleCount)):n.modelValue.samples}const M=I(()=>{if(n.modelValue.samples.length===n.sampleCount)return n.modelValue.samples;const e=[];for(let a=0;a<n.sampleCount;a++){const t=a/n.sampleCount*n.modelValue.samples.length,l=Math.floor(t),o=Math.min(l+1,n.modelValue.samples.length-1),i=t-l;e.push(n.modelValue.samples[l]*(1-i)+n.modelValue.samples[o]*i)}return e});function E(){if(!c.value)return;const e=c.value.getContext("2d");if(!e)return;const a=n.width,t=n.height,l=window.devicePixelRatio||1;c.value.width=a*l,c.value.height=t*l,c.value.style.width=a+"px",c.value.style.height=t+"px",e.scale(l,l),e.clearRect(0,0,a,t),e.fillStyle="#0a0a0a",e.fillRect(0,0,a,t);const o=4,i=a-o*2,d=t-o*2,r=t/2;e.strokeStyle="#1a1a1a",e.lineWidth=1,e.beginPath(),e.moveTo(o,r),e.lineTo(a-o,r),e.stroke(),e.strokeStyle="#151515";for(const f of[.25,.75])e.beginPath(),e.moveTo(o,o+f*d),e.lineTo(a-o,o+f*d),e.stroke();e.beginPath();const h=M.value;for(let f=0;f<h.length;f++){const y=o+f/(h.length-1)*i,V=r-h[f]*(d/2);f===0?e.moveTo(y,V):e.lineTo(y,V)}if(e.strokeStyle=n.accentColor,e.lineWidth=2,e.stroke(),e.lineTo(a-o,r),e.lineTo(o,r),e.closePath(),e.fillStyle=n.accentColor+"20",e.fill(),v.value)for(let f=0;f<h.length;f++){const y=o+f/(h.length-1)*i,V=r-h[f]*(d/2);e.beginPath(),e.arc(y,V,2,0,Math.PI*2),e.fillStyle=n.accentColor,e.fill()}}function S(e){const t=n.width-8,l=(e-4)/t;return Math.max(0,Math.min(n.sampleCount-1,Math.round(l*(n.sampleCount-1))))}function _(e){const a=n.height/2,t=(n.height-8)/2;return Math.max(-1,Math.min(1,(a-e)/t))}function P(e,a){const t=S(e),l=_(a),o=[...M.value];if(w.value!==null){const i=S(w.value);if(i!==t){const d=t>i?1:-1;for(let r=i;r!==t;r+=d){const h=(r-i)/(t-i);o[r]=o[i]*(1-h)+l*h}}}o[t]=l,w.value=e,k("update:modelValue",{samples:o,preset:"custom"})}function s(e){if(!c.value)return;const a=c.value.getBoundingClientRect(),t=e.clientX-a.left,l=e.clientY-a.top;v.value=!0,w.value=null,P(t,l),window.addEventListener("mousemove",m),window.addEventListener("mouseup",u),e.preventDefault()}function m(e){if(!v.value||!c.value)return;const a=c.value.getBoundingClientRect(),t=e.clientX-a.left,l=e.clientY-a.top;P(t,l)}function u(){v.value=!1,w.value=null,window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}function p(e){const a=T(e);k("update:modelValue",{samples:a,preset:e})}return B(()=>n.modelValue,E,{deep:!0}),$(()=>{E()}),j(()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",u)}),(e,a)=>(A(),L("div",he,[b("canvas",{ref_key:"canvas",ref:c,class:"waveform-canvas",onMousedown:s},null,544),b("div",ve,[(A(),L(ee,null,te(["sine","square","sawtooth","triangle"],t=>b("button",{key:t,class:Z(["preset-btn",{active:g.modelValue.preset===t}]),onClick:l=>p(t)},R(t.charAt(0).toUpperCase()),11,fe)),64))])]))}}),Me=z(pe,[["__scopeId","data-v-80c3bfe2"]]);export{we as E,ye as R,Me as W,xe as a};
