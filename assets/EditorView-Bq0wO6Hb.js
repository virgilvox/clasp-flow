var cs=Object.defineProperty;var ds=(e,t,n)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gt=(e,t,n)=>ds(e,typeof t!="symbol"?t+"":t,n);import{c as Be,d as ye,g as Sl,i as Ht,e as $l,w as _e,r as fe,u as zi,a as W,o as H,b as C,f as ve,h as $e,m as ho,j as B,F as Pe,k as F,l as Te,n as de,p as xe,q as Nl,s as Yt,t as pe,v as Xe,x as rn,y as ps,z as oo,A as Fe,B as Ee,C as fs,D as hs,E as ft,G as ot,H as El,I as gs,J as Et,K as Ne,L as Ri,M as ms,N as ys,O as Bt,P as kl,Q as ke,R as be,S as Oe,T as vs,U as dt,V as ci,W as bs,X as ws,Y as Xt,Z as We,_ as Ge,$ as Ke,a0 as _s,a1 as bt,a2 as Uo,a3 as lt,a4 as Zo,a5 as he,a6 as xn,a7 as Sn,a8 as vn,a9 as xs,aa as Ss,ab as go,ac as $s,ad as Ns,ae as qo,af as Es,ag as ks,ah as Cs,ai as Ms,aj as Ts,ak as Is,al as Ds}from"./index-CbF9oY04.js";import{M as Ps,A as Cl,V as As}from"./video-DtRKO9PM.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Be("BarChart3Icon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Be("BoxIcon",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Be("BugIcon",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Be("CalculatorIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Be("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Be("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Be("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Be("LayersIcon",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Be("LineChartIcon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=Be("Maximize2Icon",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Be("Minimize2Icon",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Be("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Be("MusicIcon",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Be("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Be("PuzzleIcon",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Be("Tv2Icon",[["path",{d:"M7 21h10",key:"1b0cd5"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Be("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);function $n(e){return Sl()?(oo(e),!0):!1}function pt(e){return typeof e=="function"?e():B(e)}const js=typeof window<"u"&&typeof document<"u",Js=e=>typeof e<"u",Qs=Object.prototype.toString,eu=e=>Qs.call(e)==="[object Object]",tu=()=>{};function nu(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const Ml=e=>e();function ou(e=Ml){const t=fe(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:vs(t),pause:n,resume:o,eventFilter:i}}function rr(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function iu(e,t,n={}){const{eventFilter:o=Ml,...i}=n;return _e(e,nu(o,t),i)}function Ut(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:l,resume:a,isActive:s}=ou(o);return{stop:iu(e,t,{...i,eventFilter:r}),pause:l,resume:a,isActive:s}}function ru(e,t={}){if(!Ri(e))return ms(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=ys(()=>({get(){return e.value[o]},set(i){var r;if((r=pt(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=i,e.value=a}else{const a={...e.value,[o]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=i}}));return n}function di(e,t=!1){function n(d,{flush:p="sync",deep:f=!1,timeout:N,throwOnTimeout:$}={}){let T=null;const m=[new Promise(g=>{T=_e(e,_=>{d(_)!==t&&(T==null||T(),g(_))},{flush:p,deep:f,immediate:!0})})];return N!=null&&m.push(rr(N,$).then(()=>pt(e)).finally(()=>T==null?void 0:T())),Promise.race(m)}function o(d,p){if(!Ri(d))return n(_=>_===d,p);const{flush:f="sync",deep:N=!1,timeout:$,throwOnTimeout:T}=p??{};let b=null;const g=[new Promise(_=>{b=_e([e,d],([R,P])=>{t!==(R===P)&&(b==null||b(),_(R))},{flush:f,deep:N,immediate:!0})})];return $!=null&&g.push(rr($,T).then(()=>pt(e)).finally(()=>(b==null||b(),pt(e)))),Promise.race(g)}function i(d){return n(p=>!!p,d)}function r(d){return o(null,d)}function l(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function s(d,p){return n(f=>{const N=Array.from(f);return N.includes(d)||N.includes(pt(d))},p)}function u(d){return c(1,d)}function c(d=1,p){let f=-1;return n(()=>(f+=1,f>=d),p)}return Array.isArray(pt(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return di(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:a,toBeUndefined:l,changed:u,changedTimes:c,get not(){return di(e,!t)}}}function pi(e){return di(e)}function lu(e){var t;const n=pt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Tl=js?window:void 0;function Il(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Tl):[t,n,o,i]=e,!t)return tu;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],l=()=>{r.forEach(c=>c()),r.length=0},a=(c,d,p,f)=>(c.addEventListener(d,p,f),()=>c.removeEventListener(d,p,f)),s=_e(()=>[lu(t),pt(i)],([c,d])=>{if(l(),!c)return;const p=eu(d)?{...d}:d;r.push(...n.flatMap(f=>o.map(N=>a(c,f,N,p))))},{immediate:!0,flush:"post"}),u=()=>{s(),l()};return $n(u),u}function au(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function lr(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Tl,eventName:r="keydown",passive:l=!1,dedupe:a=!1}=o,s=au(t);return Il(i,r,c=>{c.repeat&&pt(a)||s(c)&&n(c)},l)}function su(e){return JSON.parse(JSON.stringify(e))}function Wo(e,t,n,o={}){var i,r,l;const{clone:a=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:p}=o,f=rn(),N=n||(f==null?void 0:f.emit)||((i=f==null?void 0:f.$emit)==null?void 0:i.bind(f))||((l=(r=f==null?void 0:f.proxy)==null?void 0:r.$emit)==null?void 0:l.bind(f==null?void 0:f.proxy));let $=u;t||(t="modelValue"),$=$||`update:${t.toString()}`;const T=g=>a?typeof a=="function"?a(g):su(g):g,b=()=>Js(e[t])?T(e[t]):d,m=g=>{p?p(g)&&N($,g):N($,g)};if(s){const g=b(),_=fe(g);let R=!1;return _e(()=>e[t],P=>{R||(R=!0,_.value=T(P),ot(()=>R=!1))}),_e(_,P=>{!R&&(P!==e[t]||c)&&m(P)},{deep:c}),_}else return F({get(){return b()},set(g){m(g)}})}var uu={value:()=>{}};function Po(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new io(n)}function io(e){this._=e}function cu(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}io.prototype=Po.prototype={constructor:io,on:function(e,t){var n=this._,o=cu(e+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(e=o[r]).type)&&(i=du(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<l;)if(i=(e=o[r]).type)n[i]=ar(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ar(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new io(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function du(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function ar(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=uu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var fi="http://www.w3.org/1999/xhtml";const sr={svg:"http://www.w3.org/2000/svg",xhtml:fi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ao(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),sr.hasOwnProperty(t)?{space:sr[t],local:e}:e}function pu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fi&&t.documentElement.namespaceURI===fi?t.createElement(e):t.createElementNS(n,e)}}function fu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dl(e){var t=Ao(e);return(t.local?fu:pu)(t)}function hu(){}function Bi(e){return e==null?hu:function(){return this.querySelector(e)}}function gu(e){typeof e!="function"&&(e=Bi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=new Array(l),s,u,c=0;c<l;++c)(s=r[c])&&(u=e.call(s,s.__data__,c,r))&&("__data__"in s&&(u.__data__=s.__data__),a[c]=u);return new He(o,this._parents)}function mu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yu(){return[]}function Pl(e){return e==null?yu:function(){return this.querySelectorAll(e)}}function vu(e){return function(){return mu(e.apply(this,arguments))}}function bu(e){typeof e=="function"?e=vu(e):e=Pl(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var l=t[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(o.push(e.call(s,s.__data__,u,l)),i.push(s));return new He(o,i)}function Al(e){return function(){return this.matches(e)}}function zl(e){return function(t){return t.matches(e)}}var wu=Array.prototype.find;function _u(e){return function(){return wu.call(this.children,e)}}function xu(){return this.firstElementChild}function Su(e){return this.select(e==null?xu:_u(typeof e=="function"?e:zl(e)))}var $u=Array.prototype.filter;function Nu(){return Array.from(this.children)}function Eu(e){return function(){return $u.call(this.children,e)}}function ku(e){return this.selectAll(e==null?Nu:Eu(typeof e=="function"?e:zl(e)))}function Cu(e){typeof e!="function"&&(e=Al(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new He(o,this._parents)}function Rl(e){return new Array(e.length)}function Mu(){return new He(this._enter||this._groups.map(Rl),this._parents)}function mo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mo.prototype={constructor:mo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Tu(e){return function(){return e}}function Iu(e,t,n,o,i,r){for(var l=0,a,s=t.length,u=r.length;l<u;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new mo(e,r[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function Du(e,t,n,o,i,r,l){var a,s,u=new Map,c=t.length,d=r.length,p=new Array(c),f;for(a=0;a<c;++a)(s=t[a])&&(p[a]=f=l.call(s,s.__data__,a,t)+"",u.has(f)?i[a]=s:u.set(f,s));for(a=0;a<d;++a)f=l.call(e,r[a],a,r)+"",(s=u.get(f))?(o[a]=s,s.__data__=r[a],u.delete(f)):n[a]=new mo(e,r[a]);for(a=0;a<c;++a)(s=t[a])&&u.get(p[a])===s&&(i[a]=s)}function Pu(e){return e.__data__}function Au(e,t){if(!arguments.length)return Array.from(this,Pu);var n=t?Du:Iu,o=this._parents,i=this._groups;typeof e!="function"&&(e=Tu(e));for(var r=i.length,l=new Array(r),a=new Array(r),s=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],p=d.length,f=zu(e.call(c,c&&c.__data__,u,o)),N=f.length,$=a[u]=new Array(N),T=l[u]=new Array(N),b=s[u]=new Array(p);n(c,d,$,T,b,f,t);for(var m=0,g=0,_,R;m<N;++m)if(_=$[m]){for(m>=g&&(g=m+1);!(R=T[g])&&++g<N;);_._next=R||null}}return l=new He(l,o),l._enter=a,l._exit=s,l}function zu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ru(){return new He(this._exit||this._groups.map(Rl),this._parents)}function Bu(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function Ou(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,l=Math.min(i,r),a=new Array(i),s=0;s<l;++s)for(var u=n[s],c=o[s],d=u.length,p=a[s]=new Array(d),f,N=0;N<d;++N)(f=u[N]||c[N])&&(p[N]=f);for(;s<i;++s)a[s]=n[s];return new He(a,this._parents)}function Vu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function Lu(e){e||(e=Fu);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],a=l.length,s=i[r]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(s[c]=u);s.sort(t)}return new He(i,this._parents).order()}function Fu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Yu(){return Array.from(this)}function Xu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function Gu(){let e=0;for(const t of this)++e;return e}function Uu(){return!this.node()}function Zu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,l=i.length,a;r<l;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function qu(e){return function(){this.removeAttribute(e)}}function Wu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ku(e,t){return function(){this.setAttribute(e,t)}}function ju(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ju(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ec(e,t){var n=Ao(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Wu:qu:typeof t=="function"?n.local?Qu:Ju:n.local?ju:Ku)(n,t))}function Bl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tc(e){return function(){this.style.removeProperty(e)}}function nc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function oc(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ic(e,t,n){return arguments.length>1?this.each((t==null?tc:typeof t=="function"?oc:nc)(e,t,n??"")):Jt(this.node(),e)}function Jt(e,t){return e.style.getPropertyValue(t)||Bl(e).getComputedStyle(e,null).getPropertyValue(t)}function rc(e){return function(){delete this[e]}}function lc(e,t){return function(){this[e]=t}}function ac(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sc(e,t){return arguments.length>1?this.each((t==null?rc:typeof t=="function"?ac:lc)(e,t)):this.node()[e]}function Ol(e){return e.trim().split(/^|\s+/)}function Oi(e){return e.classList||new Vl(e)}function Vl(e){this._node=e,this._names=Ol(e.getAttribute("class")||"")}Vl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ll(e,t){for(var n=Oi(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Fl(e,t){for(var n=Oi(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function uc(e){return function(){Ll(this,e)}}function cc(e){return function(){Fl(this,e)}}function dc(e,t){return function(){(t.apply(this,arguments)?Ll:Fl)(this,e)}}function pc(e,t){var n=Ol(e+"");if(arguments.length<2){for(var o=Oi(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?dc:t?uc:cc)(n,t))}function fc(){this.textContent=""}function hc(e){return function(){this.textContent=e}}function gc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mc(e){return arguments.length?this.each(e==null?fc:(typeof e=="function"?gc:hc)(e)):this.node().textContent}function yc(){this.innerHTML=""}function vc(e){return function(){this.innerHTML=e}}function bc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wc(e){return arguments.length?this.each(e==null?yc:(typeof e=="function"?bc:vc)(e)):this.node().innerHTML}function _c(){this.nextSibling&&this.parentNode.appendChild(this)}function xc(){return this.each(_c)}function Sc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $c(){return this.each(Sc)}function Nc(e){var t=typeof e=="function"?e:Dl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ec(){return null}function kc(e,t){var n=typeof e=="function"?e:Dl(e),o=t==null?Ec:typeof t=="function"?t:Bi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Cc(){var e=this.parentNode;e&&e.removeChild(this)}function Mc(){return this.each(Cc)}function Tc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ic(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dc(e){return this.select(e?Ic:Tc)}function Pc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ac(e){return function(t){e.call(this,t,this.__data__)}}function zc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Rc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function Bc(e,t,n){return function(){var o=this.__on,i,r=Ac(t);if(o){for(var l=0,a=o.length;l<a;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function Oc(e,t,n){var o=zc(e+""),i,r=o.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,c;s<u;++s)for(i=0,c=a[s];i<r;++i)if((l=o[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?Bc:Rc,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function Hl(e,t,n){var o=Bl(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Vc(e,t){return function(){return Hl(this,e,t)}}function Lc(e,t){return function(){return Hl(this,e,t.apply(this,arguments))}}function Fc(e,t){return this.each((typeof t=="function"?Lc:Vc)(e,t))}function*Hc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var Yl=[null];function He(e,t){this._groups=e,this._parents=t}function Bn(){return new He([[document.documentElement]],Yl)}function Yc(){return this}He.prototype=Bn.prototype={constructor:He,select:gu,selectAll:bu,selectChild:Su,selectChildren:ku,filter:Cu,data:Au,enter:Mu,exit:Ru,join:Bu,merge:Ou,selection:Yc,order:Vu,sort:Lu,call:Hu,nodes:Yu,node:Xu,size:Gu,empty:Uu,each:Zu,attr:ec,style:ic,property:sc,classed:pc,text:mc,html:wc,raise:xc,lower:$c,append:Nc,insert:kc,remove:Mc,clone:Dc,datum:Pc,on:Oc,dispatch:Fc,[Symbol.iterator]:Hc};function Ue(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],Yl)}function Xc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function et(e,t){if(e=Xc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Gc={passive:!1},Nn={capture:!0,passive:!1};function Ko(e){e.stopImmediatePropagation()}function qt(e){e.preventDefault(),e.stopImmediatePropagation()}function Xl(e){var t=e.document.documentElement,n=Ue(e).on("dragstart.drag",qt,Nn);"onselectstart"in t?n.on("selectstart.drag",qt,Nn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gl(e,t){var n=e.document.documentElement,o=Ue(e).on("dragstart.drag",null);t&&(o.on("click.drag",qt,Nn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yn=e=>()=>e;function hi(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:l,y:a,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}hi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Uc(e){return!e.ctrlKey&&!e.button}function Zc(){return this.parentNode}function qc(e,t){return t??{x:e.x,y:e.y}}function Wc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kc(){var e=Uc,t=Zc,n=qc,o=Wc,i={},r=Po("start","drag","end"),l=0,a,s,u,c,d=0;function p(_){_.on("mousedown.drag",f).filter(o).on("touchstart.drag",T).on("touchmove.drag",b,Gc).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(_,R){if(!(c||!e.call(this,_,R))){var P=g(this,t.call(this,_,R),_,R,"mouse");P&&(Ue(_.view).on("mousemove.drag",N,Nn).on("mouseup.drag",$,Nn),Xl(_.view),Ko(_),u=!1,a=_.clientX,s=_.clientY,P("start",_))}}function N(_){if(qt(_),!u){var R=_.clientX-a,P=_.clientY-s;u=R*R+P*P>d}i.mouse("drag",_)}function $(_){Ue(_.view).on("mousemove.drag mouseup.drag",null),Gl(_.view,u),qt(_),i.mouse("end",_)}function T(_,R){if(e.call(this,_,R)){var P=_.changedTouches,Z=t.call(this,_,R),U=P.length,Q,G;for(Q=0;Q<U;++Q)(G=g(this,Z,_,R,P[Q].identifier,P[Q]))&&(Ko(_),G("start",_,P[Q]))}}function b(_){var R=_.changedTouches,P=R.length,Z,U;for(Z=0;Z<P;++Z)(U=i[R[Z].identifier])&&(qt(_),U("drag",_,R[Z]))}function m(_){var R=_.changedTouches,P=R.length,Z,U;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),Z=0;Z<P;++Z)(U=i[R[Z].identifier])&&(Ko(_),U("end",_,R[Z]))}function g(_,R,P,Z,U,Q){var G=r.copy(),V=et(Q||P,R),y,Y,h;if((h=n.call(_,new hi("beforestart",{sourceEvent:P,target:p,identifier:U,active:l,x:V[0],y:V[1],dx:0,dy:0,dispatch:G}),Z))!=null)return y=h.x-V[0]||0,Y=h.y-V[1]||0,function D(w,z,v){var E=V,x;switch(w){case"start":i[U]=D,x=l++;break;case"end":delete i[U],--l;case"drag":V=et(v||z,R),x=l;break}G.call(w,_,new hi(w,{sourceEvent:z,subject:h,target:p,identifier:U,active:x,x:V[0]+y,y:V[1]+Y,dx:V[0]-E[0],dy:V[1]-E[1],dispatch:G}),Z)}}return p.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Yn(!!_),p):e},p.container=function(_){return arguments.length?(t=typeof _=="function"?_:Yn(_),p):t},p.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Yn(_),p):n},p.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:Yn(!!_),p):o},p.on=function(){var _=r.on.apply(r,arguments);return _===r?p:_},p.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,p):Math.sqrt(d)},p}function Vi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ul(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function On(){}var En=.7,yo=1/En,Wt="\\s*([+-]?\\d+)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jc=/^#([0-9a-f]{3,8})$/,Jc=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),Qc=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),ed=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${kn}\\)$`),td=new RegExp(`^rgba\\(${it},${it},${it},${kn}\\)$`),nd=new RegExp(`^hsl\\(${kn},${it},${it}\\)$`),od=new RegExp(`^hsla\\(${kn},${it},${it},${kn}\\)$`),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vi(On,Ot,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cr,formatHex:cr,formatHex8:id,formatHsl:rd,formatRgb:dr,toString:dr});function cr(){return this.rgb().formatHex()}function id(){return this.rgb().formatHex8()}function rd(){return Zl(this).formatHsl()}function dr(){return this.rgb().formatRgb()}function Ot(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pr(t):n===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jc.exec(e))?new Ve(t[1],t[2],t[3],1):(t=Qc.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ed.exec(e))?Xn(t[1],t[2],t[3],t[4]):(t=td.exec(e))?Xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=nd.exec(e))?gr(t[1],t[2]/100,t[3]/100,1):(t=od.exec(e))?gr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?pr(ur[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function pr(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function Xn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ve(e,t,n,o)}function ld(e){return e instanceof On||(e=Ot(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function gi(e,t,n,o){return arguments.length===1?ld(e):new Ve(e,t,n,o??1)}function Ve(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Vi(Ve,gi,Ul(On,{brighter(e){return e=e==null?yo:Math.pow(yo,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?En:Math.pow(En,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ve(At(this.r),At(this.g),At(this.b),vo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fr,formatHex:fr,formatHex8:ad,formatRgb:hr,toString:hr}));function fr(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function ad(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function hr(){const e=vo(this.opacity);return`${e===1?"rgb(":"rgba("}${At(this.r)}, ${At(this.g)}, ${At(this.b)}${e===1?")":`, ${e})`}`}function vo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function At(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dt(e){return e=At(e),(e<16?"0":"")+e.toString(16)}function gr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ze(e,t,n,o)}function Zl(e){if(e instanceof Ze)return new Ze(e.h,e.s,e.l,e.opacity);if(e instanceof On||(e=Ot(e)),!e)return new Ze;if(e instanceof Ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),l=NaN,a=r-i,s=(r+i)/2;return a?(t===r?l=(n-o)/a+(n<o)*6:n===r?l=(o-t)/a+2:l=(t-n)/a+4,a/=s<.5?r+i:2-r-i,l*=60):a=s>0&&s<1?0:l,new Ze(l,a,s,e.opacity)}function sd(e,t,n,o){return arguments.length===1?Zl(e):new Ze(e,t,n,o??1)}function Ze(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Vi(Ze,sd,Ul(On,{brighter(e){return e=e==null?yo:Math.pow(yo,e),new Ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?En:Math.pow(En,e),new Ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Ve(jo(e>=240?e-240:e+120,i,o),jo(e,i,o),jo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Ze(mr(this.h),Gn(this.s),Gn(this.l),vo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vo(this.opacity);return`${e===1?"hsl(":"hsla("}${mr(this.h)}, ${Gn(this.s)*100}%, ${Gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mr(e){return e=(e||0)%360,e<0?e+360:e}function Gn(e){return Math.max(0,Math.min(1,e||0))}function jo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Li=e=>()=>e;function ud(e,t){return function(n){return e+n*t}}function cd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function dd(e){return(e=+e)==1?ql:function(t,n){return n-t?cd(t,n,e):Li(isNaN(t)?n:t)}}function ql(e,t){var n=t-e;return n?ud(e,n):Li(isNaN(e)?t:e)}const bo=function e(t){var n=dd(t);function o(i,r){var l=n((i=gi(i)).r,(r=gi(r)).r),a=n(i.g,r.g),s=n(i.b,r.b),u=ql(i.opacity,r.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function pd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function fd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hd(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),r=new Array(n),l;for(l=0;l<o;++l)i[l]=bn(e[l],t[l]);for(;l<n;++l)r[l]=t[l];return function(a){for(l=0;l<o;++l)r[l]=i[l](a);return r}}function gd(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function md(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bn(e[i],t[i]):o[i]=t[i];return function(r){for(i in n)o[i]=n[i](r);return o}}var mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jo=new RegExp(mi.source,"g");function yd(e){return function(){return e}}function vd(e){return function(t){return e(t)+""}}function Wl(e,t){var n=mi.lastIndex=Jo.lastIndex=0,o,i,r,l=-1,a=[],s=[];for(e=e+"",t=t+"";(o=mi.exec(e))&&(i=Jo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[l]?a[l]+=r:a[++l]=r),(o=o[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:tt(o,i)})),n=Jo.lastIndex;return n<t.length&&(r=t.slice(n),a[l]?a[l]+=r:a[++l]=r),a.length<2?s[0]?vd(s[0].x):yd(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)a[(d=s[c]).i]=d.x(u);return a.join("")})}function bn(e,t){var n=typeof t,o;return t==null||n==="boolean"?Li(t):(n==="number"?tt:n==="string"?(o=Ot(t))?(t=o,bo):Wl:t instanceof Ot?bo:t instanceof Date?gd:fd(t)?pd:Array.isArray(t)?hd:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?md:tt)(e,t)}var yr=180/Math.PI,yi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kl(e,t,n,o,i,r){var l,a,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,s/=a),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*yr,skewX:Math.atan(s)*yr,scaleX:l,scaleY:a}}var Un;function bd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yi:Kl(t.a,t.b,t.c,t.d,t.e,t.f)}function wd(e){return e==null||(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",e),!(e=Un.transform.baseVal.consolidate()))?yi:(e=e.matrix,Kl(e.a,e.b,e.c,e.d,e.e,e.f))}function jl(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,p,f,N){if(u!==d||c!==p){var $=f.push("translate(",null,t,null,n);N.push({i:$-4,x:tt(u,d)},{i:$-2,x:tt(c,p)})}else(d||p)&&f.push("translate("+d+t+p+n)}function l(u,c,d,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:tt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,p){u!==c?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:tt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,p,f,N){if(u!==d||c!==p){var $=f.push(i(f)+"scale(",null,",",null,")");N.push({i:$-4,x:tt(u,d)},{i:$-2,x:tt(c,p)})}else(d!==1||p!==1)&&f.push(i(f)+"scale("+d+","+p+")")}return function(u,c){var d=[],p=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,p),l(u.rotate,c.rotate,d,p),a(u.skewX,c.skewX,d,p),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,p),u=c=null,function(f){for(var N=-1,$=p.length,T;++N<$;)d[(T=p[N]).i]=T.x(f);return d.join("")}}}var _d=jl(bd,"px, ","px)","deg)"),xd=jl(wd,", ",")",")"),Sd=1e-12;function vr(e){return((e=Math.exp(e))+1/e)/2}function $d(e){return((e=Math.exp(e))-1/e)/2}function Nd(e){return((e=Math.exp(2*e))-1)/(e+1)}const ro=function e(t,n,o){function i(r,l){var a=r[0],s=r[1],u=r[2],c=l[0],d=l[1],p=l[2],f=c-a,N=d-s,$=f*f+N*N,T,b;if($<Sd)b=Math.log(p/u)/t,T=function(Z){return[a+Z*f,s+Z*N,u*Math.exp(t*Z*b)]};else{var m=Math.sqrt($),g=(p*p-u*u+o*$)/(2*u*n*m),_=(p*p-u*u-o*$)/(2*p*n*m),R=Math.log(Math.sqrt(g*g+1)-g),P=Math.log(Math.sqrt(_*_+1)-_);b=(P-R)/t,T=function(Z){var U=Z*b,Q=vr(R),G=u/(n*m)*(Q*Nd(t*U+R)-$d(R));return[a+G*f,s+G*N,u*Q/vr(t*U+R)]}}return T.duration=b*1e3*t/Math.SQRT2,T}return i.rho=function(r){var l=Math.max(.001,+r),a=l*l,s=a*a;return e(l,a,s)},i}(Math.SQRT2,2,4);var Qt=0,pn=0,an=0,Jl=1e3,wo,fn,_o=0,Vt=0,zo=0,Cn=typeof performance=="object"&&performance.now?performance:Date,Ql=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fi(){return Vt||(Ql(Ed),Vt=Cn.now()+zo)}function Ed(){Vt=0}function xo(){this._call=this._time=this._next=null}xo.prototype=ea.prototype={constructor:xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fi():+n)+(t==null?0:+t),!this._next&&fn!==this&&(fn?fn._next=this:wo=this,fn=this),this._call=e,this._time=n,vi()},stop:function(){this._call&&(this._call=null,this._time=1/0,vi())}};function ea(e,t,n){var o=new xo;return o.restart(e,t,n),o}function kd(){Fi(),++Qt;for(var e=wo,t;e;)(t=Vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qt}function br(){Vt=(_o=Cn.now())+zo,Qt=pn=0;try{kd()}finally{Qt=0,Md(),Vt=0}}function Cd(){var e=Cn.now(),t=e-_o;t>Jl&&(zo-=t,_o=e)}function Md(){for(var e,t=wo,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:wo=n);fn=e,vi(o)}function vi(e){if(!Qt){pn&&(pn=clearTimeout(pn));var t=e-Vt;t>24?(e<1/0&&(pn=setTimeout(br,e-Cn.now()-zo)),an&&(an=clearInterval(an))):(an||(_o=Cn.now(),an=setInterval(Cd,Jl)),Qt=1,Ql(br))}}function wr(e,t,n){var o=new xo;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Td=Po("start","end","cancel","interrupt"),Id=[],ta=0,_r=1,bi=2,lo=3,xr=4,wi=5,ao=6;function Ro(e,t,n,o,i,r){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Dd(e,n,{name:t,index:o,group:i,on:Td,tween:Id,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:ta})}function Hi(e,t){var n=je(e,t);if(n.state>ta)throw new Error("too late; already scheduled");return n}function at(e,t){var n=je(e,t);if(n.state>lo)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dd(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ea(r,0,n.time);function r(u){n.state=_r,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,d,p,f;if(n.state!==_r)return s();for(c in o)if(f=o[c],f.name===n.name){if(f.state===lo)return wr(l);f.state===xr?(f.state=ao,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=ao,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(wr(function(){n.state===lo&&(n.state=xr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=bi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bi){for(n.state=lo,i=new Array(p=n.tween.length),c=0,d=-1;c<p;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=wi,1),d=-1,p=i.length;++d<p;)i[d].call(e,c);n.state===wi&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=ao,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function so(e,t){var n=e.__transition,o,i,r=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){r=!1;continue}i=o.state>bi&&o.state<wi,o.state=ao,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}r&&delete e.__transition}}function Pd(e){return this.each(function(){so(this,e)})}function Ad(e,t){var n,o;return function(){var i=at(this,e),r=i.tween;if(r!==n){o=n=r;for(var l=0,a=o.length;l<a;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function zd(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=at(this,e),l=r.tween;if(l!==o){i=(o=l).slice();for(var a={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=a;break}s===u&&i.push(a)}r.tween=i}}function Rd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=je(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?Ad:zd)(n,e,t))}function Yi(e,t,n){var o=e._id;return e.each(function(){var i=at(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return je(i,o).value[t]}}function na(e,t){var n;return(typeof t=="number"?tt:t instanceof Ot?bo:(n=Ot(t))?(t=n,bo):Wl)(e,t)}function Bd(e){return function(){this.removeAttribute(e)}}function Od(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vd(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}}function Ld(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}function Fd(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function Hd(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function Yd(e,t){var n=Ao(e),o=n==="transform"?xd:na;return this.attrTween(e,typeof t=="function"?(n.local?Hd:Fd)(n,o,Yi(this,"attr."+e,t)):t==null?(n.local?Od:Bd)(n):(n.local?Ld:Vd)(n,o,t))}function Xd(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Gd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ud(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Gd(e,r)),n}return i._value=t,i}function Zd(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Xd(e,r)),n}return i._value=t,i}function qd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ao(e);return this.tween(n,(o.local?Ud:Zd)(o,t))}function Wd(e,t){return function(){Hi(this,e).delay=+t.apply(this,arguments)}}function Kd(e,t){return t=+t,function(){Hi(this,e).delay=t}}function jd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wd:Kd)(t,e)):je(this.node(),t).delay}function Jd(e,t){return function(){at(this,e).duration=+t.apply(this,arguments)}}function Qd(e,t){return t=+t,function(){at(this,e).duration=t}}function ep(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jd:Qd)(t,e)):je(this.node(),t).duration}function tp(e,t){if(typeof t!="function")throw new Error;return function(){at(this,e).ease=t}}function np(e){var t=this._id;return arguments.length?this.each(tp(t,e)):je(this.node(),t).ease}function op(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,e).ease=n}}function ip(e){if(typeof e!="function")throw new Error;return this.each(op(this._id,e))}function rp(e){typeof e!="function"&&(e=Al(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new yt(o,this._parents,this._name,this._id)}function lp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),l=new Array(o),a=0;a<r;++a)for(var s=t[a],u=n[a],c=s.length,d=l[a]=new Array(c),p,f=0;f<c;++f)(p=s[f]||u[f])&&(d[f]=p);for(;a<o;++a)l[a]=t[a];return new yt(l,this._parents,this._name,this._id)}function ap(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sp(e,t,n){var o,i,r=ap(t)?Hi:at;return function(){var l=r(this,e),a=l.on;a!==o&&(i=(o=a).copy()).on(t,n),l.on=i}}function up(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(sp(n,e,t))}function cp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function dp(){return this.on("end.remove",cp(this._id))}function pp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bi(e));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var a=o[l],s=a.length,u=r[l]=new Array(s),c,d,p=0;p<s;++p)(c=a[p])&&(d=e.call(c,c.__data__,p,a))&&("__data__"in c&&(d.__data__=c.__data__),u[p]=d,Ro(u[p],t,n,p,u,je(c,n)));return new yt(r,this._parents,t,n)}function fp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pl(e));for(var o=this._groups,i=o.length,r=[],l=[],a=0;a<i;++a)for(var s=o[a],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var p=e.call(c,c.__data__,d,s),f,N=je(c,n),$=0,T=p.length;$<T;++$)(f=p[$])&&Ro(f,t,n,$,p,N);r.push(p),l.push(c)}return new yt(r,l,t,n)}var hp=Bn.prototype.constructor;function gp(){return new hp(this._groups,this._parents)}function mp(e,t){var n,o,i;return function(){var r=Jt(this,e),l=(this.style.removeProperty(e),Jt(this,e));return r===l?null:r===n&&l===o?i:i=t(n=r,o=l)}}function oa(e){return function(){this.style.removeProperty(e)}}function yp(e,t,n){var o,i=n+"",r;return function(){var l=Jt(this,e);return l===i?null:l===o?r:r=t(o=l,n)}}function vp(e,t,n){var o,i,r;return function(){var l=Jt(this,e),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(e),Jt(this,e))),l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a))}}function bp(e,t){var n,o,i,r="style."+t,l="end."+r,a;return function(){var s=at(this,e),u=s.on,c=s.value[r]==null?a||(a=oa(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(l,i=c),s.on=o}}function wp(e,t,n){var o=(e+="")=="transform"?_d:na;return t==null?this.styleTween(e,mp(e,o)).on("end.style."+e,oa(e)):typeof t=="function"?this.styleTween(e,vp(e,o,Yi(this,"style."+e,t))).each(bp(this._id,e)):this.styleTween(e,yp(e,o,t),n).on("end.style."+e,null)}function _p(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function xp(e,t,n){var o,i;function r(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&_p(e,l,n)),o}return r._value=t,r}function Sp(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,xp(e,t,n??""))}function $p(e){return function(){this.textContent=e}}function Np(e){return function(){var t=e(this);this.textContent=t??""}}function Ep(e){return this.tween("text",typeof e=="function"?Np(Yi(this,"text",e)):$p(e==null?"":e+""))}function kp(e){return function(t){this.textContent=e.call(this,t)}}function Cp(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&kp(i)),t}return o._value=e,o}function Mp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cp(e))}function Tp(){for(var e=this._name,t=this._id,n=ia(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var c=je(s,t);Ro(s,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yt(o,this._parents,e,n)}function Ip(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var a={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var u=at(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),u.on=t}),i===0&&r()})}var Dp=0;function yt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ia(){return++Dp}var ut=Bn.prototype;yt.prototype={constructor:yt,select:pp,selectAll:fp,selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:rp,merge:lp,selection:gp,transition:Tp,call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:up,attr:Yd,attrTween:qd,style:wp,styleTween:Sp,text:Ep,textTween:Mp,remove:dp,tween:Rd,delay:jd,duration:ep,ease:np,easeVarying:ip,end:Ip,[Symbol.iterator]:ut[Symbol.iterator]};function Pp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ap={time:null,delay:0,duration:250,ease:Pp};function zp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rp(e){var t,n;e instanceof yt?(t=e._id,e=e._name):(t=ia(),(n=Ap).time=Fi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&Ro(s,e,t,u,l,n||zp(s,t));return new yt(o,this._parents,e,t)}Bn.prototype.interrupt=Pd;Bn.prototype.transition=Rp;const Zn=e=>()=>e;function Bp(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function ht(e,t,n){this.k=e,this.x=t,this.y=n}ht.prototype={constructor:ht,scale:function(e){return e===1?this:new ht(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ht(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var en=new ht(1,0,0);ht.prototype;function Qo(e){e.stopImmediatePropagation()}function sn(e){e.preventDefault(),e.stopImmediatePropagation()}function Op(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Vp(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Sr(){return this.__zoom||en}function Lp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hp(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l))}function Yp(){var e=Op,t=Vp,n=Hp,o=Lp,i=Fp,r=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],a=250,s=ro,u=Po("start","zoom","end"),c,d,p,f=500,N=150,$=0,T=10;function b(h){h.property("__zoom",Sr).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",Q).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",y).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(h,D,w,z){var v=h.selection?h.selection():h;v.property("__zoom",Sr),h!==v?R(h,D,w,z):v.interrupt().each(function(){P(this,arguments).event(z).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},b.scaleBy=function(h,D,w,z){b.scaleTo(h,function(){var v=this.__zoom.k,E=typeof D=="function"?D.apply(this,arguments):D;return v*E},w,z)},b.scaleTo=function(h,D,w,z){b.transform(h,function(){var v=t.apply(this,arguments),E=this.__zoom,x=w==null?_(v):typeof w=="function"?w.apply(this,arguments):w,L=E.invert(x),K=typeof D=="function"?D.apply(this,arguments):D;return n(g(m(E,K),x,L),v,l)},w,z)},b.translateBy=function(h,D,w,z){b.transform(h,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),l)},null,z)},b.translateTo=function(h,D,w,z,v){b.transform(h,function(){var E=t.apply(this,arguments),x=this.__zoom,L=z==null?_(E):typeof z=="function"?z.apply(this,arguments):z;return n(en.translate(L[0],L[1]).scale(x.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof w=="function"?-w.apply(this,arguments):-w),E,l)},z,v)};function m(h,D){return D=Math.max(r[0],Math.min(r[1],D)),D===h.k?h:new ht(D,h.x,h.y)}function g(h,D,w){var z=D[0]-w[0]*h.k,v=D[1]-w[1]*h.k;return z===h.x&&v===h.y?h:new ht(h.k,z,v)}function _(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function R(h,D,w,z){h.on("start.zoom",function(){P(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(z).end()}).tween("zoom",function(){var v=this,E=arguments,x=P(v,E).event(z),L=t.apply(v,E),K=w==null?_(L):typeof w=="function"?w.apply(v,E):w,te=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),ie=v.__zoom,j=typeof D=="function"?D.apply(v,E):D,A=s(ie.invert(K).concat(te/ie.k),j.invert(K).concat(te/j.k));return function(O){if(O===1)O=j;else{var q=A(O),J=te/q[2];O=new ht(J,K[0]-q[0]*J,K[1]-q[1]*J)}x.zoom(null,O)}})}function P(h,D,w){return!w&&h.__zooming||new Z(h,D)}function Z(h,D){this.that=h,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,D),this.taps=0}Z.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,D){return this.mouse&&h!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var D=Ue(this.that).datum();u.call(h,this.that,new Bp(h,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),D)}};function U(h,...D){if(!e.apply(this,arguments))return;var w=P(this,D).event(h),z=this.__zoom,v=Math.max(r[0],Math.min(r[1],z.k*Math.pow(2,o.apply(this,arguments)))),E=et(h);if(w.wheel)(w.mouse[0][0]!==E[0]||w.mouse[0][1]!==E[1])&&(w.mouse[1]=z.invert(w.mouse[0]=E)),clearTimeout(w.wheel);else{if(z.k===v)return;w.mouse=[E,z.invert(E)],so(this),w.start()}sn(h),w.wheel=setTimeout(x,N),w.zoom("mouse",n(g(m(z,v),w.mouse[0],w.mouse[1]),w.extent,l));function x(){w.wheel=null,w.end()}}function Q(h,...D){if(p||!e.apply(this,arguments))return;var w=h.currentTarget,z=P(this,D,!0).event(h),v=Ue(h.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",te,!0),E=et(h,w),x=h.clientX,L=h.clientY;Xl(h.view),Qo(h),z.mouse=[E,this.__zoom.invert(E)],so(this),z.start();function K(ie){if(sn(ie),!z.moved){var j=ie.clientX-x,A=ie.clientY-L;z.moved=j*j+A*A>$}z.event(ie).zoom("mouse",n(g(z.that.__zoom,z.mouse[0]=et(ie,w),z.mouse[1]),z.extent,l))}function te(ie){v.on("mousemove.zoom mouseup.zoom",null),Gl(ie.view,z.moved),sn(ie),z.event(ie).end()}}function G(h,...D){if(e.apply(this,arguments)){var w=this.__zoom,z=et(h.changedTouches?h.changedTouches[0]:h,this),v=w.invert(z),E=w.k*(h.shiftKey?.5:2),x=n(g(m(w,E),z,v),t.apply(this,D),l);sn(h),a>0?Ue(this).transition().duration(a).call(R,x,z,h):Ue(this).call(b.transform,x,z,h)}}function V(h,...D){if(e.apply(this,arguments)){var w=h.touches,z=w.length,v=P(this,D,h.changedTouches.length===z).event(h),E,x,L,K;for(Qo(h),x=0;x<z;++x)L=w[x],K=et(L,this),K=[K,this.__zoom.invert(K),L.identifier],v.touch0?!v.touch1&&v.touch0[2]!==K[2]&&(v.touch1=K,v.taps=0):(v.touch0=K,E=!0,v.taps=1+!!c);c&&(c=clearTimeout(c)),E&&(v.taps<2&&(d=K[0],c=setTimeout(function(){c=null},f)),so(this),v.start())}}function y(h,...D){if(this.__zooming){var w=P(this,D).event(h),z=h.changedTouches,v=z.length,E,x,L,K;for(sn(h),E=0;E<v;++E)x=z[E],L=et(x,this),w.touch0&&w.touch0[2]===x.identifier?w.touch0[0]=L:w.touch1&&w.touch1[2]===x.identifier&&(w.touch1[0]=L);if(x=w.that.__zoom,w.touch1){var te=w.touch0[0],ie=w.touch0[1],j=w.touch1[0],A=w.touch1[1],O=(O=j[0]-te[0])*O+(O=j[1]-te[1])*O,q=(q=A[0]-ie[0])*q+(q=A[1]-ie[1])*q;x=m(x,Math.sqrt(O/q)),L=[(te[0]+j[0])/2,(te[1]+j[1])/2],K=[(ie[0]+A[0])/2,(ie[1]+A[1])/2]}else if(w.touch0)L=w.touch0[0],K=w.touch0[1];else return;w.zoom("touch",n(g(x,L,K),w.extent,l))}}function Y(h,...D){if(this.__zooming){var w=P(this,D).event(h),z=h.changedTouches,v=z.length,E,x;for(Qo(h),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),E=0;E<v;++E)x=z[E],w.touch0&&w.touch0[2]===x.identifier?delete w.touch0:w.touch1&&w.touch1[2]===x.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(x=et(x,this),Math.hypot(d[0]-x[0],d[1]-x[1])<T)){var L=Ue(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return b.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Zn(+h),b):o},b.filter=function(h){return arguments.length?(e=typeof h=="function"?h:Zn(!!h),b):e},b.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:Zn(!!h),b):i},b.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Zn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),b):t},b.scaleExtent=function(h){return arguments.length?(r[0]=+h[0],r[1]=+h[1],b):[r[0],r[1]]},b.translateExtent=function(h){return arguments.length?(l[0][0]=+h[0][0],l[1][0]=+h[1][0],l[0][1]=+h[0][1],l[1][1]=+h[1][1],b):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},b.constrain=function(h){return arguments.length?(n=h,b):n},b.duration=function(h){return arguments.length?(a=+h,b):a},b.interpolate=function(h){return arguments.length?(s=h,b):s},b.on=function(){var h=u.on.apply(u,arguments);return h===u?b:h},b.clickDistance=function(h){return arguments.length?($=(h=+h)*h,b):Math.sqrt($)},b.tapDistance=function(h){return arguments.length?(T=+h,b):T},b}var ee=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ee||{}),Xi=(e=>(e.Partial="partial",e.Full="full",e))(Xi||{}),Mt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Mt||{}),kt=(e=>(e.Strict="strict",e.Loose="loose",e))(kt||{}),_i=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(_i||{}),wn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(wn||{}),ra=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ra||{});const Xp=["INPUT","SELECT","TEXTAREA"],Gp=typeof document<"u"?document:null;function xi(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,r=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return Xp.includes(o==null?void 0:o.nodeName)||i||!!r}function Up(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function $r(e,t,n,o){const i=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(l=>l.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every((l,a)=>n.has(l)&&Array.from(n.values())[a]===i[a]);return o&&n.delete(e.toLowerCase()),r}function Zp(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=qp(n.code,e);return Array.isArray(e)?e.some(i=>$r(n[o],i,t,n.type==="keyup")):$r(n[o],e,t,n.type==="keyup")}}function qp(e,t){return t.includes(e)?"code":"key"}function _n(e,t){const n=F(()=>be(t==null?void 0:t.target)??Gp),o=Et(be(e)===!0);let i=!1;const r=new Set;let l=s(be(e));_e(()=>be(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),l=s(u)},{immediate:!0}),Il(["blur","contextmenu"],a),lr((...u)=>l(...u),u=>{var c,d;const p=be(t==null?void 0:t.actInsideInputWithModifier)??!0,f=be(t==null?void 0:t.preventDefault)??!1;if(i=Up(u),(!i||i&&!p)&&xi(u))return;const $=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,T=($==null?void 0:$.nodeName)==="BUTTON"||($==null?void 0:$.nodeName)==="A";!f&&(i||!T)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),lr((...u)=>l(...u),u=>{const c=be(t==null?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!c)&&xi(u))return;i=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){i=!1,r.clear(),o.value=be(e)===!0}function s(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?Zp(u,r):u}return o}const la="vue-flow__node-desc",aa="vue-flow__edge-desc",Wp="vue-flow__aria-live",sa=["Enter"," ","Escape"],Kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function So(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function $o(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Bo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Lt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ua(e,t){return{x:Lt(e.x,t[0][0],t[1][0]),y:Lt(e.y,t[0][1],t[1][1])}}function Nr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Ct(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function zt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Ct(e)}function hn(e){return zt(e)&&"computedPosition"in e}function qn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Kp(e){return qn(e.width)&&qn(e.height)&&qn(e.x)&&qn(e.y)}function jp(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Oe({width:0,height:0}),computedPosition:Oe({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ie(e.data)?e.data:{},events:Oe(Ie(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function ca(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ie(e.data)?e.data:{},events:Oe(Ie(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function da(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,l=o==="source"?"target":"source";for(const a of n)a[l]===i&&r.add(a[o]);return t.filter(a=>r.has(a.id))}function Jp(...e){if(e.length===3){const[r,l,a]=e;return da(r,l,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>Ct(r)&&r.source===o).map(r=>n.find(l=>zt(l)&&l.id===r.target))}function Qp(...e){if(e.length===3){const[r,l,a]=e;return da(r,l,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>Ct(r)&&r.target===o).map(r=>n.find(l=>zt(l)&&l.id===r.source))}function pa({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function ef(e,t){return t.some(n=>Ct(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Mn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Tn({x:e,y:t},{x:n,y:o,zoom:i},r=!1,l=[1,1]){const a={x:(e-n)/i,y:(t-o)/i};return r?Oo(a,l):a}function fa(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function No({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function ha({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function tf(e,t){return ha(fa(No(e),No(t)))}function Gi(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=fa(t,No({...o.computedPosition,...o.dimensions}))}return ha(t)}function ga(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...Tn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},l=[];for(const a of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=a,d=s.width??a.width??null,p=s.height??a.height??null;if(i&&!u||c)continue;const f=$o(r,So(a)),N=d===null||p===null,$=o&&f>0,T=(d??0)*(p??0);(N||$||f>=T||a.dragging)&&l.push(a)}return l}function Tt(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Zt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Vn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nf(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Zt(e,n),i=Zt(e,t);return{top:o,right:i,bottom:o,left:i,x:i*2,y:o*2}}if(typeof e=="object"){const o=Zt(e.top??e.y??0,n),i=Zt(e.bottom??e.y??0,n),r=Zt(e.left??e.x??0,t),l=Zt(e.right??e.x??0,t);return{top:o,right:l,bottom:i,left:r,x:r+l,y:o+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function of(e,t,n,o,i,r){const{x:l,y:a}=Mn(e,{x:t,y:n,zoom:o}),{x:s,y:u}=Mn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=i-s,d=r-u;return{left:Math.floor(l),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function Er(e,t,n,o,i,r=.1){const l=nf(r,t,n),a=(t-l.x)/e.width,s=(n-l.y)/e.height,u=Math.min(a,s),c=Lt(u,o,i),d=e.x+e.width/2,p=e.y+e.height/2,f=t/2-d*c,N=n/2-p*c,$=of(e,f,N,c,t,n),T={left:Math.min($.left-l.left,0),top:Math.min($.top-l.top,0),right:Math.min($.right-l.right,0),bottom:Math.min($.bottom-l.bottom,0)};return{x:f-T.left+T.right,y:N-T.top+T.bottom,zoom:c}}function rf(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ma(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:ma(n,t):!1}function In(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Si(e){const t=e.ctrlKey&&Dn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function kr(e,t,n){return e<t?Lt(Math.abs(e-t),1,t)/t:e>n?-Lt(Math.abs(e-n),1,t)/t:0}function ya(e,t,n=15,o=40){const i=kr(e.x,o,t.width-o)*n,r=kr(e.y,o,t.height-o)*n;return[i,r]}function ei(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const l=Number(i.width.replace("px",""));i.width=`${l+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const l=Number(i.height.replace("px",""));i.height=`${l+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const l=t.style;return{...l(r),...i}}:t.style={...t.style,...i}}}}function Cr(e,t){var n,o;const i=e.filter(l=>l.type==="add"||l.type==="remove");for(const l of i)if(l.type==="add")t.findIndex(s=>s.id===l.item.id)===-1&&t.push(l.item);else if(l.type==="remove"){const a=t.findIndex(s=>s.id===l.id);a!==-1&&t.splice(a,1)}const r=t.map(l=>l.id);for(const l of t)for(const a of e)if(a.id===l.id)switch(a.type){case"select":l.selected=a.selected;break;case"position":if(hn(l)&&(typeof a.position<"u"&&(l.position=a.position),typeof a.dragging<"u"&&(l.dragging=a.dragging),l.expandParent&&l.parentNode)){const s=t[r.indexOf(l.parentNode)];s&&hn(s)&&ei(l,s)}break;case"dimensions":if(hn(l)&&(typeof a.dimensions<"u"&&(l.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(l.style={...l.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(l.resizing=a.resizing),l.expandParent&&l.parentNode)){const s=t[r.indexOf(l.parentNode)];s&&hn(s)&&(!!s.dimensions.width&&!!s.dimensions.height?ei(l,s):ot(()=>{ei(l,s)}))}break}return t}function _t(e,t){return{id:e,type:"select",selected:t}}function Mr(e){return{item:e,type:"add"}}function Tr(e){return{id:e,type:"remove"}}function Ir(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function St(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const l=t.has(i);!(r.selected===void 0&&!l)&&r.selected!==l&&(n&&(r.selected=l),o.push(_t(r.id,l)))}return o}const Dr=()=>{};function oe(e){const t=new Set;let n=Dr,o=()=>!1;const i=()=>t.size>0||o(),r=p=>{n=p},l=()=>{n=Dr},a=p=>{o=p},s=()=>{o=()=>!1},u=p=>{t.delete(p)};return{on:p=>{t.add(p);const f=()=>u(p);return $n(f),{off:f}},off:u,trigger:p=>{const f=[n];return i()?f.push(...t):e&&f.push(e),Promise.allSettled(f.map(N=>N(p)))},hasListeners:i,listeners:t,setEmitter:r,removeEmitter:l,setHasEmitListeners:a,removeHasEmitListeners:s}}function Pr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function lf(e,t,n,o){var i,r;const l=new Map;for(const[a,s]of e)(s.selected||s.id===o)&&(!s.parentNode||!ma(s,e))&&(s.draggable||t&&typeof s.draggable>"u")&&e.get(a)&&l.set(a,{id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((i=s.computedPosition)==null?void 0:i.x)||0,y:n.y-((r=s.computedPosition)==null?void 0:r.y)||0},from:{x:s.computedPosition.x,y:s.computedPosition.y},extent:s.extent,parentNode:s.parentNode,dimensions:{...s.dimensions},expandParent:s.expandParent});return Array.from(l.values())}function ti({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const r=n(i.id);r&&o.push(r)}return[e?o.find(i=>i.id===e):o[0],o]}function va(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function af(e,t,n){const[o,i,r,l]=typeof e!="string"?va(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function sf(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=af(i,e,o);r&&(i=r)}else t(new Ae(De.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+l],[i[1][0]+r,i[1][1]+l]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[r,l,a,s]=va(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+s,i.range[0][1]+c+r],[i.range[1][0]+u-l,i.range[1][1]+c-a]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function uf({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Ui(e,t,n,o,i){const r=uf(e.dimensions,sf(e,n,o,i)),l=ua(t,r);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function tn(e,t,n=ee.Left,o=!1){const i=((t==null?void 0:t.x)??0)+e.computedPosition.x,r=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:l,height:a}=t??ff(e);if(o)return{x:i+l/2,y:r+a/2};switch((t==null?void 0:t.position)??n){case ee.Top:return{x:i+l/2,y:r};case ee.Right:return{x:i+l,y:r+a/2};case ee.Bottom:return{x:i+l/2,y:r+a};case ee.Left:return{x:i,y:r+a/2}}}function Ar(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function cf({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:l,height:a,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=No({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:l/s.zoom,height:a/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),p=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*p)>0}function df(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),l=t(e.target);return!r||!l?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,l.computedPosition.z||0)),i)}var De=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(De||{});const zr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ae extends Error{constructor(t,...n){var o;super((o=zr[t])==null?void 0:o.call(zr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Zi(e){return"clientX"in e}function pf(e){return"sourceEvent"in e}function nt(e,t){const n=Zi(e);let o,i;return n?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}const Dn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ff(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Oo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const hf=()=>!0;function ni(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function gf(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())$o(i,So(r))>0&&o.push(r);return o}const mf=250;function yf(e,t,n,o){var i,r;let l=[],a=Number.POSITIVE_INFINITY;const s=gf(e,n,t+mf);for(const u of s){const c=[...((i=u.handleBounds)==null?void 0:i.source)??[],...((r=u.handleBounds)==null?void 0:r.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:p,y:f}=tn(u,d,d.position,!0),N=Math.sqrt((p-e.x)**2+(f-e.y)**2);N>t||(N<a?(l=[{...d,x:p,y:f}],a=N):N===a&&l.push({...d,x:p,y:f}))}}if(!l.length)return null;if(l.length>1){const u=o.type==="source"?"target":"source";return l.find(c=>c.type===u)??l[0]}return l[0]}function Rr(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:l,lib:a,flowId:s,isValidConnection:u=hf},c,d,p,f){const N=r==="target",$=t?l.querySelector(`.${a}-flow__handle[data-id="${s}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:T,y:b}=nt(e),m=l.elementFromPoint(T,b),g=m!=null&&m.classList.contains(`${a}-flow__handle`)?m:$,_={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const R=ba(void 0,g),P=g.getAttribute("data-nodeid"),Z=g.getAttribute("data-handleid"),U=g.classList.contains("connectable"),Q=g.classList.contains("connectableend");if(!P||!R)return _;const G={source:N?P:o,sourceHandle:N?Z:i,target:N?o:P,targetHandle:N?i:Z};_.connection=G;const y=U&&Q&&(n===kt.Strict?N&&R==="source"||!N&&R==="target":P!==o||Z!==i);_.isValid=y&&u(G,{nodes:d,edges:c,sourceNode:p(G.source),targetNode:p(G.target)}),_.toHandle=wa(P,R,Z,f,n,!0)}return _}function ba(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function vf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function bf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function wa(e,t,n,o,i,r=!1){var l,a,s;const u=o.get(e);if(!u)return null;const c=i===kt.Strict?(l=u.handleBounds)==null?void 0:l[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((s=u.handleBounds)==null?void 0:s.target)??[]],d=(n?c==null?void 0:c.find(p=>p.id===n):c==null?void 0:c[0])??null;return d&&r?{...d,...tn(u,d,d.position,!0)}:d}const $i={[ee.Left]:ee.Right,[ee.Right]:ee.Left,[ee.Top]:ee.Bottom,[ee.Bottom]:ee.Top},wf=["production","prod"];function Vn(e,...t){_a()&&console.warn(`[Vue Flow]: ${e}`,...t)}function _a(){return!wf.includes("production")}function Br(e,t,n,o,i){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return r!=null&&r.length?Array.from(r).map(l=>{const a=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:i,position:l.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Bo(l)}}):null}function Ni(e,t,n,o,i,r=!1,l){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),ot(()=>{l.blur()})):n([e])}function Ie(e){return typeof B(e)<"u"}function _f(e,t,n,o){if(!e||!e.source||!e.target)return n(new Ae(De.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return Ct(e)?i=e:i={...e,id:pa(e)},i=ca(i,void 0,o),ef(i,t)?!1:i}function xf(e,t,n,o,i){if(!t.source||!t.target)return i(new Ae(De.EDGE_INVALID,e.id)),!1;if(!n)return i(new Ae(De.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...l}=e;return{...l,id:o?pa(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Or(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const l=e[r];if(!zt(l)){n(new Ae(De.NODE_INVALID,l==null?void 0:l.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const a=jp(l,t(l.id),l.parentNode);l.parentNode&&(o[l.parentNode]=!0),i[r]=a}for(const r of i){const l=t(r.parentNode)||i.find(a=>a.id===r.parentNode);r.parentNode&&!l&&n(new Ae(De.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),l&&(l.isParent=!0))}return i}function Vr(e,t,n,o,i,r){let l=i;const a=o.get(l)||new Map;o.set(l,a.set(n,t)),l=`${i}-${e}`;const s=o.get(l)||new Map;if(o.set(l,s.set(n,t)),r){l=`${i}-${e}-${r}`;const u=o.get(l)||new Map;o.set(l,u.set(n,t))}}function oi(e,t,n){e.clear();for(const o of n){const{source:i,target:r,sourceHandle:l=null,targetHandle:a=null}=o,s={edgeId:o.id,source:i,target:r,sourceHandle:l,targetHandle:a},u=`${i}-${l}--${r}-${a}`,c=`${r}-${a}--${i}-${l}`;Vr("source",s,c,e,i,l),Vr("target",s,u,e,r,a)}}function Lr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ii(e,t,n,o,i,r,l,a){const s=[];for(const u of e){const c=Ct(u)?u:_f(u,a,i,r);if(!c)continue;const d=n(c.source),p=n(c.target);if(!d||!p){i(new Ae(De.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new Ae(De.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!p){i(new Ae(De.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:l,sourceNode:d,targetNode:p})){i(new Ae(De.EDGE_INVALID,c.id));continue}const f=o(c.id);s.push({...ca(c,f,r),sourceNode:d,targetNode:p})}return s}const Fr=Symbol("vueFlow"),xa=Symbol("nodeId"),Sa=Symbol("nodeRef"),Sf=Symbol("edgeId"),$f=Symbol("edgeRef"),Vo=Symbol("slots");function $a(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodeLookup:r,nodeExtent:l,nodeDragThreshold:a,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:p,findNode:f,multiSelectionActive:N,nodesSelectionActive:$,selectNodesOnDrag:T,removeSelectedElements:b,addSelectedNodes:m,updateNodePositions:g,emits:_}=Ce(),{onStart:R,onDrag:P,onStop:Z,onClick:U,el:Q,disabled:G,id:V,selectable:y,dragHandle:Y}=e,h=Et(!1);let D=[],w,z=null,v={x:void 0,y:void 0},E={x:0,y:0},x=null,L=!1,K=!1,te=0,ie=!1;const j=kf(),A=({x:ce,y:ge})=>{v={x:ce,y:ge};let k=!1;if(D=D.map(S=>{const I={x:ce-S.distance.x,y:ge-S.distance.y},{computedPosition:M}=Ui(S,n.value?Oo(I,o.value):I,_.error,l.value,S.parentNode?f(S.parentNode):void 0);return k=k||S.position.x!==M.x||S.position.y!==M.y,S.position=M,S}),K=K||k,!!k&&(g(D,!0,!0),h.value=!0,x)){const[S,I]=ti({id:V,dragItems:D,findNode:f});P({event:x,node:S,nodes:I})}},O=()=>{if(!z)return;const[ce,ge]=ya(E,z,c.value);if(ce!==0||ge!==0){const k={x:(v.x??0)-ce/s.value.zoom,y:(v.y??0)-ge/s.value.zoom};p({x:ce,y:ge})&&A(k)}te=requestAnimationFrame(O)},q=(ce,ge)=>{L=!0;const k=f(V);!T.value&&!N.value&&k&&(k.selected||b()),k&&be(y)&&T.value&&Ni(k,N.value,m,b,$,!1,ge);const S=j(ce.sourceEvent);if(v=S,D=lf(r.value,d.value,S,V),D.length){const[I,M]=ti({id:V,dragItems:D,findNode:f});R({event:ce.sourceEvent,node:I,nodes:M})}},J=(ce,ge)=>{var k;ce.sourceEvent.type==="touchmove"&&ce.sourceEvent.touches.length>1||(K=!1,a.value===0&&q(ce,ge),v=j(ce.sourceEvent),z=((k=t.value)==null?void 0:k.getBoundingClientRect())||null,E=nt(ce.sourceEvent,z))},ne=(ce,ge)=>{const k=j(ce.sourceEvent);if(!ie&&L&&u.value&&(ie=!0,O()),!L){const S=k.xSnapped-(v.x??0),I=k.ySnapped-(v.y??0);Math.sqrt(S*S+I*I)>a.value&&q(ce,ge)}(v.x!==k.xSnapped||v.y!==k.ySnapped)&&D.length&&L&&(x=ce.sourceEvent,E=nt(ce.sourceEvent,z),A(k))},ue=ce=>{let ge=!1;if(!L&&!h.value&&!N.value){const k=ce.sourceEvent,S=j(k),I=S.xSnapped-(v.x??0),M=S.ySnapped-(v.y??0),X=Math.sqrt(I*I+M*M);X!==0&&X<=a.value&&(U==null||U(k),ge=!0)}if(D.length&&!ge){K&&(g(D,!1,!1),K=!1);const[k,S]=ti({id:V,dragItems:D,findNode:f});Z({event:ce.sourceEvent,node:k,nodes:S})}D=[],h.value=!1,ie=!1,L=!1,v={x:void 0,y:void 0},cancelAnimationFrame(te)};return _e([()=>be(G),Q],([ce,ge],k,S)=>{if(ge){const I=Ue(ge);ce||(w=Kc().on("start",M=>J(M,ge)).on("drag",M=>ne(M,ge)).on("end",M=>ue(M)).filter(M=>{const X=M.target,le=be(Y);return!M.button&&(!i.value||!Pr(X,`.${i.value}`,ge)&&(!le||Pr(X,le,ge)))}),I.call(w)),S(()=>{I.on(".drag",null),w&&(w.on("start",null),w.on("drag",null),w.on("end",null))})}}),h}function Nf(){return{doubleClick:oe(),click:oe(),mouseEnter:oe(),mouseMove:oe(),mouseLeave:oe(),contextMenu:oe(),updateStart:oe(),update:oe(),updateEnd:oe()}}function Ef(e,t){const n=Nf();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function kf(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Ce();return i=>{var r;const l=((r=o.value)==null?void 0:r.getBoundingClientRect())??{left:0,top:0},a=pf(i)?i.sourceEvent:i,{x:s,y:u}=nt(a,l),c=Tn({x:s,y:u},e.value),{x:d,y:p}=n.value?Oo(c,t.value):c;return{xSnapped:d,ySnapped:p,...c}}}function Wn(){return!0}function Na({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:l}){const{id:a,vueFlowRef:s,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:p,nodesConnectable:f,autoPanOnConnect:N,autoPanSpeed:$,findNode:T,panBy:b,startConnection:m,updateConnection:g,endConnection:_,emits:R,viewport:P,edges:Z,nodes:U,isValidConnection:Q,nodeLookup:G}=Ce();let V=null,y=!1,Y=null;function h(w){var z;const v=be(n)==="target",E=Zi(w),x=Nr(w.target),L=w.currentTarget;if(L&&(E&&w.button===0||!E)){let K=function(se){k=nt(se,ue),A=yf(Tn(k,P.value,!1,[1,1]),c.value,G.value,M),S||(I(),S=!0);const me=Rr(se,{handle:A,connectionMode:u.value,fromNodeId:be(t),fromHandleId:be(e),fromType:v?"target":"source",isValidConnection:j,doc:x,lib:"vue",flowId:a,nodeLookup:G.value},Z.value,U.value,T,G.value);Y=me.handleDomNode,V=me.connection,y=bf(!!A,me.isValid);const we={...re,isValid:y,to:me.toHandle&&y?Mn({x:me.toHandle.x,y:me.toHandle.y},P.value):k,toHandle:me.toHandle,toPosition:y&&me.toHandle?me.toHandle.position:$i[M.position],toNode:me.toHandle?G.value.get(me.toHandle.nodeId):null};if(y&&A&&(re!=null&&re.toHandle)&&we.toHandle&&re.toHandle.type===we.toHandle.type&&re.toHandle.nodeId===we.toHandle.nodeId&&re.toHandle.id===we.toHandle.id&&re.to.x===we.to.x&&re.to.y===we.to.y)return;const Se=A??me.toHandle;if(g(Se&&y?Mn({x:Se.x,y:Se.y},P.value):k,Se,vf(!!Se,y)),re=we,!A&&!y&&!Y)return ni(ge);V&&V.source!==V.target&&Y&&(ni(ge),ge=Y,Y.classList.add("connecting","vue-flow__handle-connecting"),Y.classList.toggle("valid",!!y),Y.classList.toggle("vue-flow__handle-valid",!!y))},te=function(se){"touches"in se&&se.touches.length>0||((A||Y)&&V&&y&&(r?r(se,V):R.connect(V)),R.connectEnd(se),i&&(l==null||l(se)),ni(ge),cancelAnimationFrame(O),_(se),S=!1,y=!1,V=null,Y=null,x.removeEventListener("mousemove",K),x.removeEventListener("mouseup",te),x.removeEventListener("touchmove",K),x.removeEventListener("touchend",te))};const ie=T(be(t));let j=be(o)||Q.value||Wn;!j&&ie&&(j=(v?ie.isValidSourcePos:ie.isValidTargetPos)||Wn);let A,O=0;const{x:q,y:J}=nt(w),ne=ba(be(i),L),ue=(z=s.value)==null?void 0:z.getBoundingClientRect();if(!ue||!ne)return;const ce=wa(be(t),ne,be(e),G.value,u.value);if(!ce)return;let ge,k=nt(w,ue),S=!1;const I=()=>{if(!N.value)return;const[se,me]=ya(k,ue,$.value);b({x:se,y:me}),O=requestAnimationFrame(I)},M={...ce,nodeId:be(t),type:ne,position:ce.position},X=G.value.get(be(t)),ae={inProgress:!0,isValid:null,from:tn(X,M,ee.Left,!0),fromHandle:M,fromPosition:M.position,fromNode:X,to:k,toHandle:null,toPosition:$i[M.position],toNode:null};m({nodeId:be(t),id:be(e),type:ne,position:(L==null?void 0:L.getAttribute("data-handlepos"))||ee.Top,...k},{x:q-ue.left,y:J-ue.top}),R.connectStart({event:w,nodeId:be(t),handleId:be(e),handleType:ne});let re=ae;x.addEventListener("mousemove",K),x.addEventListener("mouseup",te),x.addEventListener("touchmove",K),x.addEventListener("touchend",te)}}function D(w){var z,v;if(!d.value)return;const E=be(n)==="target";if(!p.value){R.clickConnectStart({event:w,nodeId:be(t),handleId:be(e)}),m({nodeId:be(t),type:be(n),id:be(e),position:ee.Top,...nt(w)},void 0,!0);return}let x=be(o)||Q.value||Wn;const L=T(be(t));if(!x&&L&&(x=(E?L.isValidSourcePos:L.isValidTargetPos)||Wn),L&&(typeof L.connectable>"u"?f.value:L.connectable)===!1)return;const K=Nr(w.target),te=Rr(w,{handle:{nodeId:be(t),id:be(e),type:be(n),position:ee.Top,...nt(w)},connectionMode:u.value,fromNodeId:p.value.nodeId,fromHandleId:p.value.id??null,fromType:p.value.type,isValidConnection:x,doc:K,lib:"vue",flowId:a,nodeLookup:G.value},Z.value,U.value,T,G.value),ie=((z=te.connection)==null?void 0:z.source)===((v=te.connection)==null?void 0:v.target);te.isValid&&te.connection&&!ie&&R.connect(te.connection),R.clickConnectEnd(w),_(w,!0)}return{handlePointerDown:h,handleClick:D}}function Cf(){return Ht(xa,"")}function Ea(e){const t=e??Cf()??"",n=Ht(Sa,fe(null)),{findNode:o,edges:i,emits:r}=Ce(),l=o(t);return l||r.error(new Ae(De.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:F(()=>o(l.parentNode)),connectedEdges:F(()=>Tt([l],i.value))}}function Mf(){return{doubleClick:oe(),click:oe(),mouseEnter:oe(),mouseMove:oe(),mouseLeave:oe(),contextMenu:oe(),dragStart:oe(),drag:oe(),dragStop:oe()}}function Tf(e,t){const n=Mf();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function ka(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:l,emits:a}=Ce();return(s,u=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,p=u?4:1,f=s.x*c*p,N=s.y*d*p,$=[];for(const T of e.value)if(T.draggable||l&&typeof T.draggable>"u"){const b={x:T.computedPosition.x+f,y:T.computedPosition.y+N},{position:m}=Ui(T,b,a.error,t.value,T.parentNode?o(T.parentNode):void 0);$.push({id:T.id,position:m,from:T.position,distance:{x:s.x,y:s.y},dimensions:T.dimensions})}n($,!0,!1)}}const Kn=.1,If=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function wt(){return Vn("Viewport not initialized yet."),Promise.resolve(!1)}const Df={zoomIn:wt,zoomOut:wt,zoomTo:wt,fitView:wt,setCenter:wt,fitBounds:wt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:wt,setTransform:wt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Pf(e){function t(o,i){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((i==null?void 0:i.interpolate)==="linear"?bn:ro).scaleBy(ri(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{r(!0)}),o):r(!1)})}function n(o,i,r,l){return new Promise(a=>{var s;const{x:u,y:c}=ua({x:-o,y:-i},e.translateExtent),d=en.translate(-u,-c).scale(r);e.d3Selection&&e.d3Zoom?(s=e.d3Zoom)==null||s.interpolate((l==null?void 0:l.interpolate)==="linear"?bn:ro).transform(ri(e.d3Selection,l==null?void 0:l.duration,l==null?void 0:l.ease,()=>{a(!0)}),d):a(!1)})}return F(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i),zoomOut:i=>t(1/1.2,i),zoomTo:(i,r)=>new Promise(l=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((r==null?void 0:r.interpolate)==="linear"?bn:ro).scaleTo(ri(e.d3Selection,r==null?void 0:r.duration,r==null?void 0:r.ease,()=>{l(!0)}),i):l(!1)}),setViewport:(i,r)=>n(i.x,i.y,i.zoom,r),setTransform:(i,r)=>n(i.x,i.y,i.zoom,r),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Kn,includeHiddenNodes:!1,duration:0})=>{var r,l;const a=[];for(const p of e.nodes)p.dimensions.width&&p.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!p.hidden)&&(!((r=i.nodes)!=null&&r.length)||(l=i.nodes)!=null&&l.length&&i.nodes.includes(p.id))&&a.push(p);if(!a.length)return Promise.resolve(!1);const s=Gi(a),{x:u,y:c,zoom:d}=Er(s,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Kn);return n(u,c,d,i)},setCenter:(i,r,l)=>{const a=typeof(l==null?void 0:l.zoom)<"u"?l.zoom:e.maxZoom,s=e.dimensions.width/2-i*a,u=e.dimensions.height/2-r*a;return n(s,u,a,l)},fitBounds:(i,r={padding:Kn})=>{const{x:l,y:a,zoom:s}=Er(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding??Kn);return n(l,a,s,r)},project:i=>Tn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:l}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x-r,y:i.y-l};return Tn(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:l}=e.vueFlowRef.getBoundingClientRect(),a={x:i.x+r,y:i.y+l};return Mn(a,e.viewport)}return{x:0,y:0}}}:Df)}function ri(e,t=0,n=If,o=()=>{}){const i=typeof t=="number"&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function Af(e,t,n){const o=$l(!0);return o.run(()=>{const i=()=>{o.run(()=>{let $,T,b=!!(n.nodes.value.length||n.edges.value.length);$=Ut([e.modelValue,()=>{var m,g;return(g=(m=e.modelValue)==null?void 0:m.value)==null?void 0:g.length}],([m])=>{m&&Array.isArray(m)&&(T==null||T.pause(),n.setElements(m),!T&&!b&&m.length?b=!0:T==null||T.resume())}),T=Ut([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([m,g])=>{var _;(_=e.modelValue)!=null&&_.value&&Array.isArray(e.modelValue.value)&&($==null||$.pause(),e.modelValue.value=[...m,...g],ot(()=>{$==null||$.resume()}))},{immediate:b}),oo(()=>{$==null||$.stop(),T==null||T.stop()})})},r=()=>{o.run(()=>{let $,T,b=!!n.nodes.value.length;$=Ut([e.nodes,()=>{var m,g;return(g=(m=e.nodes)==null?void 0:m.value)==null?void 0:g.length}],([m])=>{m&&Array.isArray(m)&&(T==null||T.pause(),n.setNodes(m),!T&&!b&&m.length?b=!0:T==null||T.resume())}),T=Ut([n.nodes,()=>n.nodes.value.length],([m])=>{var g;(g=e.nodes)!=null&&g.value&&Array.isArray(e.nodes.value)&&($==null||$.pause(),e.nodes.value=[...m],ot(()=>{$==null||$.resume()}))},{immediate:b}),oo(()=>{$==null||$.stop(),T==null||T.stop()})})},l=()=>{o.run(()=>{let $,T,b=!!n.edges.value.length;$=Ut([e.edges,()=>{var m,g;return(g=(m=e.edges)==null?void 0:m.value)==null?void 0:g.length}],([m])=>{m&&Array.isArray(m)&&(T==null||T.pause(),n.setEdges(m),!T&&!b&&m.length?b=!0:T==null||T.resume())}),T=Ut([n.edges,()=>n.edges.value.length],([m])=>{var g;(g=e.edges)!=null&&g.value&&Array.isArray(e.edges.value)&&($==null||$.pause(),e.edges.value=[...m],ot(()=>{$==null||$.resume()}))},{immediate:b}),oo(()=>{$==null||$.stop(),T==null||T.stop()})})},a=()=>{o.run(()=>{_e(()=>t.maxZoom,()=>{t.maxZoom&&Ie(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{_e(()=>t.minZoom,()=>{t.minZoom&&Ie(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{_e(()=>t.translateExtent,()=>{t.translateExtent&&Ie(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{_e(()=>t.nodeExtent,()=>{t.nodeExtent&&Ie(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{_e(()=>t.applyDefault,()=>{Ie(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},p=()=>{o.run(()=>{const $=async T=>{let b=T;typeof t.autoConnect=="function"&&(b=await t.autoConnect(T)),b!==!1&&n.addEdges([b])};_e(()=>t.autoConnect,()=>{Ie(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),_e(n.autoConnect,(T,b,m)=>{T?n.onConnect($):n.hooks.value.connect.off($),m(()=>{n.hooks.value.connect.off($)})},{immediate:!0})})},f=()=>{const $=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const T of Object.keys(t)){const b=T;if(!$.includes(b)){const m=Ee(()=>t[b]),g=n[b];Ri(g)&&o.run(()=>{_e(m,_=>{Ie(_)&&(g.value=_)},{immediate:!0})})}}};(()=>{i(),r(),l(),s(),a(),u(),c(),d(),p(),f()})()}),()=>o.stop()}function zf(){return{edgesChange:oe(),nodesChange:oe(),nodeDoubleClick:oe(),nodeClick:oe(),nodeMouseEnter:oe(),nodeMouseMove:oe(),nodeMouseLeave:oe(),nodeContextMenu:oe(),nodeDragStart:oe(),nodeDrag:oe(),nodeDragStop:oe(),nodesInitialized:oe(),miniMapNodeClick:oe(),miniMapNodeDoubleClick:oe(),miniMapNodeMouseEnter:oe(),miniMapNodeMouseMove:oe(),miniMapNodeMouseLeave:oe(),connect:oe(),connectStart:oe(),connectEnd:oe(),clickConnectStart:oe(),clickConnectEnd:oe(),paneReady:oe(),init:oe(),move:oe(),moveStart:oe(),moveEnd:oe(),selectionDragStart:oe(),selectionDrag:oe(),selectionDragStop:oe(),selectionContextMenu:oe(),selectionStart:oe(),selectionEnd:oe(),viewportChangeStart:oe(),viewportChange:oe(),viewportChangeEnd:oe(),paneScroll:oe(),paneClick:oe(),paneContextMenu:oe(),paneMouseEnter:oe(),paneMouseMove:oe(),paneMouseLeave:oe(),edgeContextMenu:oe(),edgeMouseEnter:oe(),edgeMouseMove:oe(),edgeMouseLeave:oe(),edgeDoubleClick:oe(),edgeClick:oe(),edgeUpdateStart:oe(),edgeUpdate:oe(),edgeUpdateEnd:oe(),updateNodeInternals:oe(),error:oe(e=>Vn(e.message))}}function Rf(e,t){const n=rn();hs(()=>{for(const[i,r]of Object.entries(t.value)){const l=a=>{e(i,a)};r.setEmitter(l),$n(r.removeEmitter),r.setHasEmitListeners(()=>o(i)),$n(r.removeHasEmitListeners)}});function o(i){var r;const l=Bf(i);return!!((r=n==null?void 0:n.vnode.props)==null?void 0:r[l])}}function Bf(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(i,r)=>r.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function Ca(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Xi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:wn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Mt.Bezier,style:{}},connectionMode:kt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Dn()?"Meta":"Control",zoomActivationKeyCode:Dn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:zf(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Of=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Vf(e,t,n){const o=Pf(e),i=k=>{const S=k??[];e.hooks.updateNodeInternals.trigger(S)},r=k=>Qp(k,e.nodes,e.edges),l=k=>Jp(k,e.nodes,e.edges),a=k=>Tt(k,e.edges),s=({id:k,type:S,nodeId:I})=>{var M;const X=k?`-${S}-${k}`:`-${S}`;return Array.from(((M=e.connectionLookup.get(`${I}${X}`))==null?void 0:M.values())??[])},u=k=>{if(k)return t.value.get(k)},c=k=>{if(k)return n.value.get(k)},d=(k,S,I)=>{var M,X;const le=[];for(const ae of k){const re={id:ae.id,type:"position",dragging:I,from:ae.from};if(S&&(re.position=ae.position,ae.parentNode)){const se=u(ae.parentNode);re.position={x:re.position.x-(((M=se==null?void 0:se.computedPosition)==null?void 0:M.x)??0),y:re.position.y-(((X=se==null?void 0:se.computedPosition)==null?void 0:X.y)??0)}}le.push(re)}le!=null&&le.length&&e.hooks.nodesChange.trigger(le)},p=k=>{if(!e.vueFlowRef)return;const S=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!S)return;const I=window.getComputedStyle(S),{m22:M}=new window.DOMMatrixReadOnly(I.transform),X=[];for(const le of k){const ae=le,re=u(ae.id);if(re){const se=Bo(ae.nodeElement);if(!!(se.width&&se.height&&(re.dimensions.width!==se.width||re.dimensions.height!==se.height||ae.forceUpdate))){const we=ae.nodeElement.getBoundingClientRect();re.dimensions=se,re.handleBounds.source=Br("source",ae.nodeElement,we,M,re.id),re.handleBounds.target=Br("target",ae.nodeElement,we,M,re.id),X.push({id:re.id,type:"dimensions",dimensions:se})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),X.length&&e.hooks.nodesChange.trigger(X)},f=(k,S)=>{const I=new Set,M=new Set;for(const ae of k)zt(ae)?I.add(ae.id):Ct(ae)&&M.add(ae.id);const X=St(t.value,I,!0),le=St(n.value,M);if(e.multiSelectionActive){for(const ae of I)X.push(_t(ae,S));for(const ae of M)le.push(_t(ae,S))}X.length&&e.hooks.nodesChange.trigger(X),le.length&&e.hooks.edgesChange.trigger(le)},N=k=>{if(e.multiSelectionActive){const S=k.map(I=>_t(I.id,!0));e.hooks.nodesChange.trigger(S);return}e.hooks.nodesChange.trigger(St(t.value,new Set(k.map(S=>S.id)),!0)),e.hooks.edgesChange.trigger(St(n.value))},$=k=>{if(e.multiSelectionActive){const S=k.map(I=>_t(I.id,!0));e.hooks.edgesChange.trigger(S);return}e.hooks.edgesChange.trigger(St(n.value,new Set(k.map(S=>S.id)))),e.hooks.nodesChange.trigger(St(t.value,new Set,!0))},T=k=>{f(k,!0)},b=k=>{const I=(k||e.nodes).map(M=>(M.selected=!1,_t(M.id,!1)));e.hooks.nodesChange.trigger(I)},m=k=>{const I=(k||e.edges).map(M=>(M.selected=!1,_t(M.id,!1)));e.hooks.edgesChange.trigger(I)},g=k=>{if(!k||!k.length)return f([],!1);const S=k.reduce((I,M)=>{const X=_t(M.id,!1);return zt(M)?I.nodes.push(X):I.edges.push(X),I},{nodes:[],edges:[]});S.nodes.length&&e.hooks.nodesChange.trigger(S.nodes),S.edges.length&&e.hooks.edgesChange.trigger(S.edges)},_=k=>{var S;(S=e.d3Zoom)==null||S.scaleExtent([k,e.maxZoom]),e.minZoom=k},R=k=>{var S;(S=e.d3Zoom)==null||S.scaleExtent([e.minZoom,k]),e.maxZoom=k},P=k=>{var S;(S=e.d3Zoom)==null||S.translateExtent(k),e.translateExtent=k},Z=k=>{e.nodeExtent=k,i()},U=k=>{var S;(S=e.d3Zoom)==null||S.clickDistance(k)},Q=k=>{e.nodesDraggable=k,e.nodesConnectable=k,e.elementsSelectable=k},G=k=>{const S=k instanceof Function?k(e.nodes):k;!e.initialized&&!S.length||(e.nodes=Or(S,u,e.hooks.error.trigger))},V=k=>{const S=k instanceof Function?k(e.edges):k;if(!e.initialized&&!S.length)return;const I=ii(S,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);oi(e.connectionLookup,n.value,I),e.edges=I},y=k=>{const S=k instanceof Function?k([...e.nodes,...e.edges]):k;!e.initialized&&!S.length||(G(S.filter(zt)),V(S.filter(Ct)))},Y=k=>{let S=k instanceof Function?k(e.nodes):k;S=Array.isArray(S)?S:[S];const I=Or(S,u,e.hooks.error.trigger),M=[];for(const X of I)M.push(Mr(X));M.length&&e.hooks.nodesChange.trigger(M)},h=k=>{let S=k instanceof Function?k(e.edges):k;S=Array.isArray(S)?S:[S];const I=ii(S,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),M=[];for(const X of I)M.push(Mr(X));M.length&&e.hooks.edgesChange.trigger(M)},D=(k,S=!0,I=!1)=>{const M=k instanceof Function?k(e.nodes):k,X=Array.isArray(M)?M:[M],le=[],ae=[];function re(me){const we=a(me);for(const Se of we)(!Ie(Se.deletable)||Se.deletable)&&ae.push(Ir(Se.id,Se.source,Se.target,Se.sourceHandle,Se.targetHandle))}function se(me){const we=[];for(const Se of e.nodes)Se.parentNode===me&&we.push(Se);if(we.length){for(const Se of we)le.push(Tr(Se.id));S&&re(we);for(const Se of we)se(Se.id)}}for(const me of X){const we=typeof me=="string"?u(me):me;we&&(Ie(we.deletable)&&!we.deletable||(le.push(Tr(we.id)),S&&re([we]),I&&se(we.id)))}ae.length&&e.hooks.edgesChange.trigger(ae),le.length&&e.hooks.nodesChange.trigger(le)},w=k=>{const S=k instanceof Function?k(e.edges):k,I=Array.isArray(S)?S:[S],M=[];for(const X of I){const le=typeof X=="string"?c(X):X;le&&(Ie(le.deletable)&&!le.deletable||M.push(Ir(typeof X=="string"?X:X.id,le.source,le.target,le.sourceHandle,le.targetHandle)))}e.hooks.edgesChange.trigger(M)},z=(k,S,I=!0)=>{const M=c(k.id);if(!M)return!1;const X=e.edges.indexOf(M),le=xf(k,S,M,I,e.hooks.error.trigger);if(le){const[ae]=ii([le],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((re,se)=>se===X?ae:re),oi(e.connectionLookup,n.value,[ae]),ae}return!1},v=(k,S,I={replace:!1})=>{const M=c(k);if(!M)return;const X=typeof S=="function"?S(M):S;M.data=I.replace?X:{...M.data,...X}},E=k=>Cr(k,e.nodes),x=k=>{const S=Cr(k,e.edges);return oi(e.connectionLookup,n.value,S),S},L=(k,S,I={replace:!1})=>{const M=u(k);if(!M)return;const X=typeof S=="function"?S(M):S;I.replace?e.nodes.splice(e.nodes.indexOf(M),1,X):Object.assign(M,X)},K=(k,S,I={replace:!1})=>{const M=u(k);if(!M)return;const X=typeof S=="function"?S(M):S;M.data=I.replace?X:{...M.data,...X}},te=(k,S,I=!1)=>{I?e.connectionClickStartHandle=k:e.connectionStartHandle=k,e.connectionEndHandle=null,e.connectionStatus=null,S&&(e.connectionPosition=S)},ie=(k,S=null,I=null)=>{e.connectionStartHandle&&(e.connectionPosition=k,e.connectionEndHandle=S,e.connectionStatus=I)},j=(k,S)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,S?e.connectionClickStartHandle=null:e.connectionStartHandle=null},A=k=>{const S=Kp(k),I=S?null:hn(k)?k:u(k.id);return!S&&!I?[null,null,S]:[S?k:So(I),I,S]},O=(k,S=!0,I=e.nodes)=>{const[M,X,le]=A(k);if(!M)return[];const ae=[];for(const re of I||e.nodes){if(!le&&(re.id===X.id||!re.computedPosition))continue;const se=So(re),me=$o(se,M);(S&&me>0||me>=se.width*se.height||me>=Number(M.width)*Number(M.height))&&ae.push(re)}return ae},q=(k,S,I=!0)=>{const[M]=A(k);if(!M)return!1;const X=$o(M,S);return I&&X>0||X>=Number(M.width)*Number(M.height)},J=k=>{const{viewport:S,dimensions:I,d3Zoom:M,d3Selection:X,translateExtent:le}=e;if(!M||!X||!k.x&&!k.y)return!1;const ae=en.translate(S.x+k.x,S.y+k.y).scale(S.zoom),re=[[0,0],[I.width,I.height]],se=M.constrain()(ae,re,le),me=e.viewport.x!==se.x||e.viewport.y!==se.y||e.viewport.zoom!==se.k;return M.transform(X,se),me},ne=k=>{const S=k instanceof Function?k(e):k,I=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ie(S.defaultEdgeOptions)&&(e.defaultEdgeOptions=S.defaultEdgeOptions);const M=S.modelValue||S.nodes||S.edges?[]:void 0;M&&(S.modelValue&&M.push(...S.modelValue),S.nodes&&M.push(...S.nodes),S.edges&&M.push(...S.edges),y(M));const X=()=>{Ie(S.maxZoom)&&R(S.maxZoom),Ie(S.minZoom)&&_(S.minZoom),Ie(S.translateExtent)&&P(S.translateExtent)};for(const le of Object.keys(S)){const ae=le,re=S[ae];![...Of,...I].includes(ae)&&Ie(re)&&(e[ae]=re)}pi(()=>e.d3Zoom).not.toBeNull().then(X),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:p,setElements:y,setNodes:G,setEdges:V,addNodes:Y,addEdges:h,removeNodes:D,removeEdges:w,findNode:u,findEdge:c,updateEdge:z,updateEdgeData:v,updateNode:L,updateNodeData:K,applyEdgeChanges:x,applyNodeChanges:E,addSelectedElements:T,addSelectedNodes:N,addSelectedEdges:$,setMinZoom:_,setMaxZoom:R,setTranslateExtent:P,setNodeExtent:Z,setPaneClickDistance:U,removeSelectedElements:g,removeSelectedNodes:b,removeSelectedEdges:m,startConnection:te,updateConnection:ie,endConnection:j,setInteractive:Q,setState:ne,getIntersectingNodes:O,getIncomers:r,getOutgoers:l,getConnectedEdges:a,getHandleConnections:s,isNodeIntersecting:q,panBy:J,fitView:k=>o.value.fitView(k),zoomIn:k=>o.value.zoomIn(k),zoomOut:k=>o.value.zoomOut(k),zoomTo:(k,S)=>o.value.zoomTo(k,S),setViewport:(k,S)=>o.value.setViewport(k,S),setTransform:(k,S)=>o.value.setTransform(k,S),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(k,S,I)=>o.value.setCenter(k,S,I),fitBounds:(k,S)=>o.value.fitBounds(k,S),project:k=>o.value.project(k),screenToFlowCoordinate:k=>o.value.screenToFlowCoordinate(k),flowToScreenCoordinate:k=>o.value.flowToScreenCoordinate(k),toObject:()=>{const k=[],S=[];for(const I of e.nodes){const{computedPosition:M,handleBounds:X,selected:le,dimensions:ae,isParent:re,resizing:se,dragging:me,events:we,...Se}=I;k.push(Se)}for(const I of e.edges){const{selected:M,sourceNode:X,targetNode:le,events:ae,...re}=I;S.push(re)}return JSON.parse(JSON.stringify({nodes:k,edges:S,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:k=>new Promise(S=>{const{nodes:I,edges:M,position:X,zoom:le,viewport:ae}=k;I&&G(I),M&&V(M);const[re,se]=ae!=null&&ae.x&&(ae!=null&&ae.y)?[ae.x,ae.y]:X??[null,null];if(re&&se){const me=(ae==null?void 0:ae.zoom)||le||e.viewport.zoom;return pi(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:re,y:se,zoom:me}).then(()=>{S(!0)})})}else S(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const k=Ca();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const S=en.translate(k.defaultViewport.x??0,k.defaultViewport.y??0).scale(Lt(k.defaultViewport.zoom??1,k.minZoom,k.maxZoom)),I=e.viewportRef.getBoundingClientRect(),M=[[0,0],[I.width,I.height]],X=e.d3Zoom.constrain()(S,M,k.translateExtent);e.d3Zoom.transform(e.d3Selection,X)}ne(k)},$destroy:()=>{}}}const Lf=["data-id","data-handleid","data-nodeid","data-handlepos"],Ff={name:"Handle",compatConfig:{MODE:3}},Me=ye({...Ff,props:{id:{default:null},type:{},position:{default:()=>ee.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=fs(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ee(()=>n.type??"source"),i=Ee(()=>n.isValidConnection??null),{id:r,connectionStartHandle:l,connectionClickStartHandle:a,connectionEndHandle:s,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:p}=Ce(),{id:f,node:N,nodeEl:$,connectedEdges:T}=Ea(),b=fe(),m=Ee(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),g=Ee(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),_=Ee(()=>{var V,y,Y,h,D,w;return((V=l.value)==null?void 0:V.nodeId)===f&&((y=l.value)==null?void 0:y.id)===e.id&&((Y=l.value)==null?void 0:Y.type)===o.value||((h=s.value)==null?void 0:h.nodeId)===f&&((D=s.value)==null?void 0:D.id)===e.id&&((w=s.value)==null?void 0:w.type)===o.value}),R=Ee(()=>{var V,y,Y;return((V=a.value)==null?void 0:V.nodeId)===f&&((y=a.value)==null?void 0:y.id)===e.id&&((Y=a.value)==null?void 0:Y.type)===o.value}),{handlePointerDown:P,handleClick:Z}=Na({nodeId:f,handleId:e.id,isValidConnection:i,type:o}),U=F(()=>typeof e.connectable=="string"&&e.connectable==="single"?!T.value.some(V=>{const y=V[`${o.value}Handle`];return V[o.value]!==f?!1:y?y===e.id:!0}):typeof e.connectable=="number"?T.value.filter(V=>{const y=V[`${o.value}Handle`];return V[o.value]!==f?!1:y?y===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(N,T.value):Ie(e.connectable)?e.connectable:c.value);Fe(()=>{var V;if(!N.dimensions.width||!N.dimensions.height)return;const y=(V=N.handleBounds[o.value])==null?void 0:V.find(E=>E.id===e.id);if(!u.value||y)return;const Y=u.value.querySelector(".vue-flow__transformationpane");if(!$.value||!b.value||!Y||!e.id)return;const h=$.value.getBoundingClientRect(),D=b.value.getBoundingClientRect(),w=window.getComputedStyle(Y),{m22:z}=new window.DOMMatrixReadOnly(w.transform),v={id:e.id,position:e.position,x:(D.left-h.left)/z,y:(D.top-h.top)/z,type:o.value,nodeId:f,...Bo(b.value)};N.handleBounds[o.value]=[...N.handleBounds[o.value]??[],v]});function Q(V){const y=Zi(V);U.value&&m.value&&(y&&V.button===0||!y)&&P(V)}function G(V){!f||!a.value&&!m.value||U.value&&Z(V)}return t({handleClick:Z,handlePointerDown:P,onClick:G,onPointerDown:Q}),(V,y)=>(H(),W("div",{ref_key:"handle",ref:b,"data-id":`${B(r)}-${B(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":B(f),"data-handlepos":V.position,class:xe(["vue-flow__handle",[`vue-flow__handle-${V.position}`,`vue-flow__handle-${e.id}`,B(d),B(p),o.value,{connectable:U.value,connecting:R.value,connectablestart:m.value,connectableend:g.value,connectionindicator:U.value&&(m.value&&!_.value||g.value&&_.value)}]]),onMousedown:Q,onTouchstartPassive:Q,onClick:G},[Te(V.$slots,"default",{id:V.id})],42,Lf))}}),Lo=function({sourcePosition:e=ee.Bottom,targetPosition:t=ee.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:l}){const a=l.label??n;return[ke(Me,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof a!="string"&&a?ke(a):ke(Pe,[a]),ke(Me,{type:"source",position:e,connectable:o,isValidConnection:r})]};Lo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Lo.inheritAttrs=!1;Lo.compatConfig={MODE:3};const Hf=Lo,Fo=function({targetPosition:e=ee.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label??t;return[ke(Me,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?ke(r):ke(Pe,[r])]};Fo.props=["targetPosition","label","isValidTargetPos","connectable","data"];Fo.inheritAttrs=!1;Fo.compatConfig={MODE:3};const Yf=Fo,Ho=function({sourcePosition:e=ee.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label??t;return[typeof r!="string"&&r?ke(r):ke(Pe,[r]),ke(Me,{type:"source",position:e,connectable:n,isValidConnection:o})]};Ho.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Ho.inheritAttrs=!1;Ho.compatConfig={MODE:3};const Xf=Ho,Gf=["transform"],Uf=["width","height","x","y","rx","ry"],Zf=["y"],qf={name:"EdgeText",compatConfig:{MODE:3}},Wf=ye({...qf,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=fe({x:0,y:0,width:0,height:0}),n=fe(null),o=F(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Fe(i),_e([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,l)=>(H(),W("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(H(),W("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:de(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,Uf)):ve("",!0),C("text",ho(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[Te(r.$slots,"default",{},()=>[typeof r.label!="string"?(H(),$e(dt(r.label),{key:0})):(H(),W(Pe,{key:1},[ci(Ne(r.label),1)],64))])],16,Zf)],8,Gf))}}),Kf=["id","d","marker-end","marker-start"],jf=["d","stroke-width"],Jf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Ln=ye({...Jf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=fe(null),o=fe(null),i=fe(null),r=zi();return t({pathEl:n,interactionEl:o,labelEl:i}),(l,a)=>(H(),W(Pe,null,[C("path",ho(B(r),{id:l.id,ref_key:"pathEl",ref:n,d:l.path,class:"vue-flow__edge-path","marker-end":l.markerEnd,"marker-start":l.markerStart}),null,16,Kf),l.interactionWidth?(H(),W("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,jf)):ve("",!0),l.label&&l.labelX&&l.labelY?(H(),$e(Wf,{key:1,ref_key:"labelEl",ref:i,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ve("",!0)],64))}});function Ma({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,l=Math.abs(o-t)/2,a=o<t?o+l:o-l;return[r,a,i,l]}function Ta({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:l,targetControlY:a}){const s=e*.125+i*.375+l*.375+n*.125,u=t*.125+r*.375+a*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function jn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Hr({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let l,a;switch(e){case ee.Left:l=t-jn(t-o,r),a=n;break;case ee.Right:l=t+jn(o-t,r),a=n;break;case ee.Top:l=t,a=n-jn(n-i,r);break;case ee.Bottom:l=t,a=n+jn(i-n,r);break}return[l,a]}function Ia(e){const{sourceX:t,sourceY:n,sourcePosition:o=ee.Bottom,targetX:i,targetY:r,targetPosition:l=ee.Top,curvature:a=.25}=e,[s,u]=Hr({pos:o,x1:t,y1:n,x2:i,y2:r,c:a}),[c,d]=Hr({pos:l,x1:i,y1:r,x2:t,y2:n,c:a}),[p,f,N,$]=Ta({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${i},${r}`,p,f,N,$]}function Yr({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,l;switch(e){case ee.Left:case ee.Right:r=.5*(t+o),l=n;break;case ee.Top:case ee.Bottom:r=t,l=.5*(n+i);break}return[r,l]}function Da(e){const{sourceX:t,sourceY:n,sourcePosition:o=ee.Bottom,targetX:i,targetY:r,targetPosition:l=ee.Top}=e,[a,s]=Yr({pos:o,x1:t,y1:n,x2:i,y2:r}),[u,c]=Yr({pos:l,x1:i,y1:r,x2:t,y2:n}),[d,p,f,N]=Ta({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${s} ${u},${c} ${i},${r}`,d,p,f,N]}const Xr={[ee.Left]:{x:-1,y:0},[ee.Right]:{x:1,y:0},[ee.Top]:{x:0,y:-1},[ee.Bottom]:{x:0,y:1}};function Qf({source:e,sourcePosition:t=ee.Bottom,target:n}){return t===ee.Left||t===ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Gr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function eh({source:e,sourcePosition:t=ee.Bottom,target:n,targetPosition:o=ee.Top,center:i,offset:r}){const l=Xr[t],a=Xr[o],s={x:e.x+l.x*r,y:e.y+l.y*r},u={x:n.x+a.x*r,y:n.y+a.y*r},c=Qf({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",p=c[d];let f,N,$;const T={x:0,y:0},b={x:0,y:0},[m,g,_,R]=Ma({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[d]*a[d]===-1){N=i.x??m,$=i.y??g;const Z=[{x:N,y:s.y},{x:N,y:u.y}],U=[{x:s.x,y:$},{x:u.x,y:$}];l[d]===p?f=d==="x"?Z:U:f=d==="x"?U:Z}else{const Z=[{x:s.x,y:u.y}],U=[{x:u.x,y:s.y}];if(d==="x"?f=l.x===p?U:Z:f=l.y===p?Z:U,t===o){const Y=Math.abs(e[d]-n[d]);if(Y<=r){const h=Math.min(r-1,r-Y);l[d]===p?T[d]=(s[d]>e[d]?-1:1)*h:b[d]=(u[d]>n[d]?-1:1)*h}}if(t!==o){const Y=d==="x"?"y":"x",h=l[d]===a[Y],D=s[Y]>u[Y],w=s[Y]<u[Y];(l[d]===1&&(!h&&D||h&&w)||l[d]!==1&&(!h&&w||h&&D))&&(f=d==="x"?Z:U)}const Q={x:s.x+T.x,y:s.y+T.y},G={x:u.x+b.x,y:u.y+b.y},V=Math.max(Math.abs(Q.x-f[0].x),Math.abs(G.x-f[0].x)),y=Math.max(Math.abs(Q.y-f[0].y),Math.abs(G.y-f[0].y));V>=y?(N=(Q.x+G.x)/2,$=f[0].y):(N=f[0].x,$=(Q.y+G.y)/2)}return[[e,{x:s.x+T.x,y:s.y+T.y},...f,{x:u.x+b.x,y:u.y+b.y},n],N,$,_,R]}function th(e,t,n,o){const i=Math.min(Gr(e,t)/2,Gr(t,n)/2,o),{x:r,y:l}=t;if(e.x===r&&r===n.x||e.y===l&&l===n.y)return`L${r} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${l}Q ${r},${l} ${r},${l+i*c}`}const a=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${r},${l+i*s}Q ${r},${l} ${r+i*a},${l}`}function Eo(e){const{sourceX:t,sourceY:n,sourcePosition:o=ee.Bottom,targetX:i,targetY:r,targetPosition:l=ee.Top,borderRadius:a=5,centerX:s,centerY:u,offset:c=20}=e,[d,p,f,N,$]=eh({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:l,center:{x:s,y:u},offset:c});return[d.reduce((b,m,g)=>{let _;return g>0&&g<d.length-1?_=th(d[g-1],m,d[g+1],a):_=`${g===0?"M":"L"}${m.x} ${m.y}`,b+=_,b},""),p,f,N,$]}function nh(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,l,a,s]=Ma({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,l,a,s]}const oh=ye({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=nh(e);return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),ih=oh,rh=ye({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Eo({...e,sourcePosition:e.sourcePosition??ee.Bottom,targetPosition:e.targetPosition??ee.Top});return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),Pa=rh,lh=ye({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>ke(Pa,{...e,...t,borderRadius:0})}}),ah=lh,sh=ye({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ia({...e,sourcePosition:e.sourcePosition??ee.Bottom,targetPosition:e.targetPosition??ee.Top});return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),uh=sh,ch=ye({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Da({...e,sourcePosition:e.sourcePosition??ee.Bottom,targetPosition:e.targetPosition??ee.Top});return ke(Ln,{path:n,labelX:o,labelY:i,...t,...e})}}}),dh=ch,ph={input:Xf,default:Hf,output:Yf},fh={default:uh,straight:ih,step:ah,smoothstep:Pa,simplebezier:dh};function hh(e,t,n){const o=F(()=>$=>t.value.get($)),i=F(()=>$=>n.value.get($)),r=F(()=>{const $={...fh,...e.edgeTypes},T=Object.keys($);for(const b of e.edges)b.type&&!T.includes(b.type)&&($[b.type]=b.type);return $}),l=F(()=>{const $={...ph,...e.nodeTypes},T=Object.keys($);for(const b of e.nodes)b.type&&!T.includes(b.type)&&($[b.type]=b.type);return $}),a=F(()=>e.onlyRenderVisibleElements?ga(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=F(()=>{if(e.onlyRenderVisibleElements){const $=[];for(const T of e.edges){const b=t.value.get(T.source),m=t.value.get(T.target);cf({sourcePos:b.computedPosition||{x:0,y:0},targetPos:m.computedPosition||{x:0,y:0},sourceWidth:b.dimensions.width,sourceHeight:b.dimensions.height,targetWidth:m.dimensions.width,targetHeight:m.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&$.push(T)}return $}return e.edges}),u=F(()=>[...a.value,...s.value]),c=F(()=>{const $=[];for(const T of e.nodes)T.selected&&$.push(T);return $}),d=F(()=>{const $=[];for(const T of e.edges)T.selected&&$.push(T);return $}),p=F(()=>[...c.value,...d.value]),f=F(()=>{const $=[];for(const T of e.nodes)T.dimensions.width&&T.dimensions.height&&T.handleBounds!==void 0&&$.push(T);return $}),N=F(()=>a.value.length>0&&f.value.length===a.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:r,getNodeTypes:l,getEdges:s,getNodes:a,getSelectedElements:p,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:f,areNodesInitialized:N}}class It{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=rn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??It.instance;return It.instance=o??new It,n&&(n.config.globalProperties.$vueFlowStorage=It.instance),It.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Ca(),i=ps(o),r={};for(const[p,f]of Object.entries(i.hooks)){const N=`on${p.charAt(0).toUpperCase()+p.slice(1)}`;r[N]=f.on}const l={};for(const[p,f]of Object.entries(i.hooks))l[p]=f.trigger;const a=F(()=>{const p=new Map;for(const f of i.nodes)p.set(f.id,f);return p}),s=F(()=>{const p=new Map;for(const f of i.edges)p.set(f.id,f);return p}),u=hh(i,a,s),c=Vf(i,a,s);c.setState({...i,...n});const d={...r,...u,...c,...ru(i),nodeLookup:a,edgeLookup:s,emits:l,id:t,vueFlowVersion:"1.48.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ce(e){const t=It.getInstance(),n=Sl(),o=typeof e=="object",i=o?e:{id:e},r=i.id,l=r??(n==null?void 0:n.vueFlowId);let a;if(n){const s=Ht(Fr,null);typeof s<"u"&&s!==null&&(!l||s.id===l)&&(a=s)}if(a||l&&(a=t.get(l)),!a||l&&a.id!==l){const s=r??t.getId(),u=t.create(s,i);a=u,(n??$l(!0)).run(()=>{_e(u.applyDefault,(d,p,f)=>{const N=T=>{u.applyNodeChanges(T)},$=T=>{u.applyEdgeChanges(T)};d?(u.onNodesChange(N),u.onEdgesChange($)):(u.hooks.value.nodesChange.off(N),u.hooks.value.edgesChange.off($)),f(()=>{u.hooks.value.nodesChange.off(N),u.hooks.value.edgesChange.off($)})},{immediate:!0}),$n(()=>{if(a){const d=t.get(a.id);d?d.$destroy():Vn(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(i);if(n&&(Bt(Fr,a),n.vueFlowId=a.id),o){const s=rn();(s==null?void 0:s.type.name)!=="VueFlow"&&a.emits.error(new Ae(De.USEVUEFLOW_OPTIONS))}return a}function gh(e){const{emits:t,dimensions:n}=Ce();let o;Fe(()=>{const i=()=>{var r,l;if(!e.value||!(((l=(r=e.value).checkVisibility)==null?void 0:l.call(r))??!0))return;const a=Bo(e.value);(a.width===0||a.height===0)&&t.error(new Ae(De.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),e.value&&(o=new ResizeObserver(()=>i()),o.observe(e.value)),El(()=>{window.removeEventListener("resize",i),o&&e.value&&o.unobserve(e.value)})})}const mh={name:"UserSelection",compatConfig:{MODE:3}},yh=ye({...mh,props:{userSelectionRect:{}},setup(e){return(t,n)=>(H(),W("div",{class:"vue-flow__selection vue-flow__container",style:de({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),vh=["tabIndex"],bh={name:"NodesSelection",compatConfig:{MODE:3}},wh=ye({...bh,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:l}=Ce(),a=ka(),s=fe(null),u=$a({el:s,onStart(N){t.selectionDragStart(N),t.nodeDragStart(N)},onDrag(N){t.selectionDrag(N),t.nodeDrag(N)},onStop(N){t.selectionDragStop(N),t.nodeDragStop(N)}});Fe(()=>{var N;r.value||(N=s.value)==null||N.focus({preventScroll:!0})});const c=F(()=>Gi(o.value)),d=F(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function p(N){t.selectionContextMenu({event:N,nodes:o.value})}function f(N){r.value||Kt[N.key]&&(N.preventDefault(),a({x:Kt[N.key].x,y:Kt[N.key].y},N.shiftKey))}return(N,$)=>!B(l)&&c.value.width&&c.value.height?(H(),W("div",{key:0,class:xe(["vue-flow__nodesselection vue-flow__container",B(i)]),style:de({transform:`translate(${B(n).x}px,${B(n).y}px) scale(${B(n).zoom})`})},[C("div",{ref_key:"el",ref:s,class:xe([{dragging:B(u)},"vue-flow__nodesselection-rect"]),style:de(d.value),tabIndex:B(r)?void 0:-1,onContextmenu:p,onKeydown:f},null,46,vh)],6)):ve("",!0)}});function _h(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const xh={name:"Pane",compatConfig:{MODE:3}},Sh=ye({...xh,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:l,userSelectionRect:a,elementsSelectable:s,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:p,removeEdges:f,selectionMode:N,deleteKeyCode:$,multiSelectionKeyCode:T,multiSelectionActive:b,edgeLookup:m,nodeLookup:g,connectionLookup:_,defaultEdgeOptions:R,connectionStartHandle:P,panOnDrag:Z}=Ce(),U=Et(null),Q=Et(new Set),G=Et(new Set),V=Et(null),y=Ee(()=>s.value&&(e.isSelecting||r.value)),Y=Ee(()=>P.value!==null);let h=!1,D=!1;const w=_n($,{actInsideInputWithModifier:!1}),z=_n(T);_e(w,j=>{j&&(p(d.value),f(c.value),u.value=!1)}),_e(z,j=>{b.value=j});function v(j,A){return O=>{O.target===A&&(j==null||j(O))}}function E(j){if(h||Y.value){h=!1;return}i.paneClick(j),l(),u.value=!1}function x(j){var A;if(Array.isArray(Z.value)&&((A=Z.value)!=null&&A.includes(2))){j.preventDefault();return}i.paneContextMenu(j)}function L(j){i.paneScroll(j)}function K(j){var A,O,q;if(V.value=((A=t.value)==null?void 0:A.getBoundingClientRect())??null,!s.value||!e.isSelecting||j.button!==0||j.target!==U.value||!V.value)return;(q=(O=j.target)==null?void 0:O.setPointerCapture)==null||q.call(O,j.pointerId);const{x:J,y:ne}=_h(j,V.value);D=!0,h=!1,l(),a.value={width:0,height:0,startX:J,startY:ne,x:J,y:ne},i.selectionStart(j)}function te(j){var A;if(!V.value||!a.value)return;h=!0;const{x:O,y:q}=nt(j,V.value),{startX:J=0,startY:ne=0}=a.value,ue={startX:J,startY:ne,x:O<J?O:J,y:q<ne?q:ne,width:Math.abs(O-J),height:Math.abs(q-ne)},ce=Q.value,ge=G.value;Q.value=new Set(ga(n.value,ue,o.value,N.value===Xi.Partial,!0).map(S=>S.id)),G.value=new Set;const k=((A=R.value)==null?void 0:A.selectable)??!0;for(const S of Q.value){const I=_.value.get(S);if(I)for(const{edgeId:M}of I.values()){const X=m.value.get(M);X&&(X.selectable??k)&&G.value.add(M)}}if(!Lr(ce,Q.value)){const S=St(g.value,Q.value,!0);i.nodesChange(S)}if(!Lr(ge,G.value)){const S=St(m.value,G.value);i.edgesChange(S)}a.value=ue,r.value=!0,u.value=!1}function ie(j){var A;j.button!==0||!D||((A=j.target)==null||A.releasePointerCapture(j.pointerId),!r.value&&a.value&&j.target===U.value&&E(j),r.value=!1,a.value=null,u.value=Q.value.size>0,i.selectionEnd(j),e.selectionKeyPressed&&(h=!1),D=!1)}return(j,A)=>(H(),W("div",{ref_key:"container",ref:U,class:xe(["vue-flow__pane vue-flow__container",{selection:j.isSelecting}]),onClick:A[0]||(A[0]=O=>y.value?void 0:v(E,U.value)(O)),onContextmenu:A[1]||(A[1]=O=>v(x,U.value)(O)),onWheelPassive:A[2]||(A[2]=O=>v(L,U.value)(O)),onPointerenter:A[3]||(A[3]=O=>y.value?void 0:B(i).paneMouseEnter(O)),onPointerdown:A[4]||(A[4]=O=>y.value?K(O):B(i).paneMouseMove(O)),onPointermove:A[5]||(A[5]=O=>y.value?te(O):B(i).paneMouseMove(O)),onPointerup:A[6]||(A[6]=O=>y.value?ie(O):void 0),onPointerleave:A[7]||(A[7]=O=>B(i).paneMouseLeave(O))},[Te(j.$slots,"default"),B(r)&&B(a)?(H(),$e(yh,{key:0,"user-selection-rect":B(a)},null,8,["user-selection-rect"])):ve("",!0),B(u)&&B(d).length?(H(),$e(wh,{key:1})):ve("",!0)],34))}}),$h={name:"Transform",compatConfig:{MODE:3}},Nh=ye({...$h,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Ce(),i=F(()=>n.value?!o.value:!1),r=F(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(l,a)=>(H(),W("div",{class:"vue-flow__transformationpane vue-flow__container",style:de({transform:r.value,opacity:i.value?0:void 0})},[Te(l.$slots,"default")],4))}}),Eh={name:"Viewport",compatConfig:{MODE:3}},kh=ye({...Eh,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:l,panActivationKeyCode:a,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:p,zoomOnPinch:f,zoomOnScroll:N,preventScrolling:$,noWheelClassName:T,noPanClassName:b,emits:m,connectionStartHandle:g,userSelectionActive:_,paneDragging:R,d3Zoom:P,d3Selection:Z,d3ZoomHandler:U,viewport:Q,viewportRef:G,paneClickDistance:V}=Ce();gh(G);const y=Et(!1),Y=Et(!1);let h=null,D=!1,w=0,z={x:0,y:0,zoom:0};const v=_n(a),E=_n(l),x=_n(r),L=Ee(()=>(!E.value||E.value&&l.value===!0)&&(v.value||d.value)),K=Ee(()=>v.value||s.value),te=Ee(()=>E.value||l.value===!0&&L.value!==!0),ie=Ee(()=>g.value!==null);Fe(()=>{if(!G.value){Vn("Viewport element is missing");return}const J=G.value,ne=J.getBoundingClientRect(),ue=Yp().clickDistance(V.value).scaleExtent([t.value,n.value]).translateExtent(i.value),ce=Ue(J).call(ue),ge=ce.on("wheel.zoom"),k=en.translate(o.value.x??0,o.value.y??0).scale(Lt(o.value.zoom??1,t.value,n.value)),S=[[0,0],[ne.width,ne.height]],I=ue.constrain()(k,S,i.value);ue.transform(ce,I),ue.wheelDelta(Si),P.value=ue,Z.value=ce,U.value=ge,Q.value={x:I.x,y:I.y,zoom:I.k},ue.on("start",M=>{var X;if(!M.sourceEvent)return null;w=M.sourceEvent.button,y.value=!0;const le=O(M.transform);((X=M.sourceEvent)==null?void 0:X.type)==="mousedown"&&(R.value=!0),z=le,m.viewportChangeStart(le),m.moveStart({event:M,flowTransform:le})}),ue.on("end",M=>{if(!M.sourceEvent)return null;if(y.value=!1,R.value=!1,j(L.value,w??0)&&!D&&m.paneContextMenu(M.sourceEvent),D=!1,A(z,M.transform)){const X=O(M.transform);z=X,m.viewportChangeEnd(X),m.moveEnd({event:M,flowTransform:X})}}),ue.filter(M=>{var X;const le=x.value||N.value,ae=f.value&&M.ctrlKey,re=M.button,se=M.type==="wheel";if(re===1&&M.type==="mousedown"&&(q(M,"vue-flow__node")||q(M,"vue-flow__edge")))return!0;if(!L.value&&!le&&!K.value&&!p.value&&!f.value||_.value||ie.value&&!se||!p.value&&M.type==="dblclick"||q(M,T.value)&&se||q(M,b.value)&&(!se||K.value&&se&&!x.value)||!f.value&&M.ctrlKey&&se||!le&&!K.value&&!ae&&se)return!1;if(!f&&M.type==="touchstart"&&((X=M.touches)==null?void 0:X.length)>1)return M.preventDefault(),!1;if(!L.value&&(M.type==="mousedown"||M.type==="touchstart")||l.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&re===0||Array.isArray(d.value)&&!d.value.includes(re)&&(M.type==="mousedown"||M.type==="touchstart"))return!1;const me=Array.isArray(d.value)&&d.value.includes(re)||l.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!re||re<=1;return(!M.ctrlKey||v.value||se)&&me}),_e([_,L],()=>{_.value&&!y.value?ue.on("zoom",null):_.value||ue.on("zoom",M=>{Q.value={x:M.transform.x,y:M.transform.y,zoom:M.transform.k};const X=O(M.transform);D=j(L.value,w??0),m.viewportChange(X),m.move({event:M,flowTransform:X})})},{immediate:!0}),_e([_,K,u,x,f,$,T],()=>{K.value&&!x.value&&!_.value?ce.on("wheel.zoom",M=>{if(q(M,T.value))return!1;const X=x.value||N.value,le=f.value&&M.ctrlKey;if(!(!$.value||K.value||X||le))return!1;M.preventDefault(),M.stopImmediatePropagation();const re=ce.property("__zoom").k||1,se=Dn();if(!v.value&&M.ctrlKey&&f.value&&se){const ln=et(M),ss=Si(M),us=re*2**ss;ue.scaleTo(ce,us,ln,M);return}const me=M.deltaMode===1?20:1;let we=u.value===wn.Vertical?0:M.deltaX*me,Se=u.value===wn.Horizontal?0:M.deltaY*me;!se&&M.shiftKey&&u.value!==wn.Vertical&&!we&&Se&&(we=Se,Se=0),ue.translateBy(ce,-(we/re)*c.value,-(Se/re)*c.value);const Qe=O(ce.property("__zoom"));h&&clearTimeout(h),Y.value?(m.move({event:M,flowTransform:Qe}),m.viewportChange(Qe),h=setTimeout(()=>{m.moveEnd({event:M,flowTransform:Qe}),m.viewportChangeEnd(Qe),Y.value=!1},150)):(Y.value=!0,m.moveStart({event:M,flowTransform:Qe}),m.viewportChangeStart(Qe))},{passive:!1}):typeof ge<"u"&&ce.on("wheel.zoom",function(M,X){const le=!$.value&&M.type==="wheel"&&!M.ctrlKey,ae=x.value||N.value,re=f.value&&M.ctrlKey;if(!ae&&!s.value&&!re&&M.type==="wheel"||le||q(M,T.value))return null;M.preventDefault(),ge.call(this,M,X)},{passive:!1})},{immediate:!0})});function j(J,ne){return ne===2&&Array.isArray(J)&&J.includes(2)}function A(J,ne){return J.x!==ne.x&&!Number.isNaN(ne.x)||J.y!==ne.y&&!Number.isNaN(ne.y)||J.zoom!==ne.k&&!Number.isNaN(ne.k)}function O(J){return{x:J.x,y:J.y,zoom:J.k}}function q(J,ne){return J.target.closest(`.${ne}`)}return(J,ne)=>(H(),W("div",{ref_key:"viewportRef",ref:G,class:"vue-flow__viewport vue-flow__container"},[pe(Sh,{"is-selecting":te.value,"selection-key-pressed":B(E),class:xe({connecting:ie.value,dragging:B(R),draggable:B(d)===!0||Array.isArray(B(d))&&B(d).includes(0)})},{default:Xe(()=>[pe(Nh,null,{default:Xe(()=>[Te(J.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Ch=["id"],Mh=["id"],Th=["id"],Ih={name:"A11yDescriptions",compatConfig:{MODE:3}},Dh=ye({...Ih,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ce();return(i,r)=>(H(),W(Pe,null,[C("div",{id:`${B(la)}-${B(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Ne(B(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Ch),C("div",{id:`${B(aa)}-${B(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Mh),B(n)?ve("",!0):(H(),W("div",{key:0,id:`${B(Wp)}-${B(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Ne(B(o)),9,Th))],64))}});function Ph(){const e=Ce();_e(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Ah(e,t,n){return n===ee.Left?e-t:n===ee.Right?e+t:e}function zh(e,t,n){return n===ee.Top?e-t:n===ee.Bottom?e+t:e}const qi=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ee.Top,type:i}){return ke("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Ah(t,e,o),cy:zh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};qi.props=["radius","centerX","centerY","position","type"];qi.compatConfig={MODE:3};const Ur=qi,Rh=ye({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:l,noPanClassName:a,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:p,multiSelectionActive:f,disableKeyboardA11y:N,elementsSelectable:$,edgesUpdatable:T,edgesFocusable:b,hooks:m}=Ce(),g=F(()=>c(e.id)),{emit:_,on:R}=Ef(g.value,r),P=Ht(Vo),Z=rn(),U=fe(!1),Q=fe(!1),G=fe(""),V=fe(null),y=fe("source"),Y=fe(null),h=Ee(()=>typeof g.value.selectable>"u"?$.value:g.value.selectable),D=Ee(()=>typeof g.value.updatable>"u"?T.value:g.value.updatable),w=Ee(()=>typeof g.value.focusable>"u"?b.value:g.value.focusable);Bt(Sf,e.id),Bt($f,Y);const z=F(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),v=F(()=>g.value.style instanceof Function?g.value.style(g.value):g.value.style),E=F(()=>{const S=g.value.type||"default",I=P==null?void 0:P[`edge-${S}`];if(I)return I;let M=g.value.template??s.value[S];if(typeof M=="string"&&Z){const X=Object.keys(Z.appContext.components);X&&X.includes(S)&&(M=kl(S,!1))}return M&&typeof M!="string"?M:(r.error(new Ae(De.EDGE_TYPE_MISSING,M)),!1)}),{handlePointerDown:x}=Na({nodeId:G,handleId:V,type:y,isValidConnection:p,edgeUpdaterType:y,onEdgeUpdate:te,onEdgeUpdateEnd:ie});return()=>{const S=d(g.value.source),I=d(g.value.target),M="pathOptions"in g.value?g.value.pathOptions:{};if(!S&&!I)return r.error(new Ae(De.EDGE_SOURCE_TARGET_MISSING,g.value.id,g.value.source,g.value.target)),null;if(!S)return r.error(new Ae(De.EDGE_SOURCE_MISSING,g.value.id,g.value.source)),null;if(!I)return r.error(new Ae(De.EDGE_TARGET_MISSING,g.value.id,g.value.target)),null;if(!g.value||g.value.hidden||S.hidden||I.hidden)return null;let X;o.value===kt.Strict?X=S.handleBounds.source:X=[...S.handleBounds.source||[],...S.handleBounds.target||[]];const le=Ar(X,g.value.sourceHandle);let ae;o.value===kt.Strict?ae=I.handleBounds.target:ae=[...I.handleBounds.target||[],...I.handleBounds.source||[]];const re=Ar(ae,g.value.targetHandle),se=(le==null?void 0:le.position)||ee.Bottom,me=(re==null?void 0:re.position)||ee.Top,{x:we,y:Se}=tn(S,le,se),{x:Qe,y:ln}=tn(I,re,me);return g.value.sourceX=we,g.value.sourceY=Se,g.value.targetX=Qe,g.value.targetY=ln,ke("g",{ref:Y,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${E.value===!1?"default":g.value.type||"default"}`,a.value,z.value,{updating:U.value,selected:g.value.selected,animated:g.value.animated,inactive:!h.value&&!m.value.edgeClick.hasListeners()}],tabIndex:w.value?0:void 0,"aria-label":g.value.ariaLabel===null?void 0:g.value.ariaLabel??`Edge from ${g.value.source} to ${g.value.target}`,"aria-describedby":w.value?`${aa}-${t}`:void 0,"aria-roledescription":"edge",role:w.value?"group":"img",...g.value.domAttributes,onClick:A,onContextmenu:O,onDblclick:q,onMouseenter:J,onMousemove:ne,onMouseleave:ue,onKeyDown:w.value?k:void 0},[Q.value?null:ke(E.value===!1?s.value.default:E.value,{id:e.id,sourceNode:S,targetNode:I,source:g.value.source,target:g.value.target,type:g.value.type,updatable:D.value,selected:g.value.selected,animated:g.value.animated,label:g.value.label,labelStyle:g.value.labelStyle,labelShowBg:g.value.labelShowBg,labelBgStyle:g.value.labelBgStyle,labelBgPadding:g.value.labelBgPadding,labelBgBorderRadius:g.value.labelBgBorderRadius,data:g.value.data,events:{...g.value.events,...R},style:v.value,markerStart:`url('#${In(g.value.markerStart,t)}')`,markerEnd:`url('#${In(g.value.markerEnd,t)}')`,sourcePosition:se,targetPosition:me,sourceX:we,sourceY:Se,targetX:Qe,targetY:ln,sourceHandleId:g.value.sourceHandle,targetHandleId:g.value.targetHandle,interactionWidth:g.value.interactionWidth,...M}),[D.value==="source"||D.value===!0?[ke("g",{onMousedown:ce,onMouseenter:L,onMouseout:K},ke(Ur,{position:se,centerX:we,centerY:Se,radius:i.value,type:"source","data-type":"source"}))]:null,D.value==="target"||D.value===!0?[ke("g",{onMousedown:ge,onMouseenter:L,onMouseout:K},ke(Ur,{position:me,centerX:Qe,centerY:ln,radius:i.value,type:"target","data-type":"target"}))]:null]])};function L(){U.value=!0}function K(){U.value=!1}function te(S,I){_.update({event:S,edge:g.value,connection:I})}function ie(S){_.updateEnd({event:S,edge:g.value}),Q.value=!1}function j(S,I){S.button===0&&(Q.value=!0,G.value=I?g.value.target:g.value.source,V.value=(I?g.value.targetHandle:g.value.sourceHandle)??null,y.value=I?"target":"source",_.updateStart({event:S,edge:g.value}),x(S))}function A(S){var I;const M={event:S,edge:g.value};h.value&&(l.value=!1,g.value.selected&&f.value?(u([g.value]),(I=Y.value)==null||I.blur()):n([g.value])),_.click(M)}function O(S){_.contextMenu({event:S,edge:g.value})}function q(S){_.doubleClick({event:S,edge:g.value})}function J(S){_.mouseEnter({event:S,edge:g.value})}function ne(S){_.mouseMove({event:S,edge:g.value})}function ue(S){_.mouseLeave({event:S,edge:g.value})}function ce(S){j(S,!0)}function ge(S){j(S,!1)}function k(S){var I;!N.value&&sa.includes(S.key)&&h.value&&(S.key==="Escape"?((I=Y.value)==null||I.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Bh=Rh,Oh=ye({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:l,connectionLineStyle:a,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Ce(),p=(e=Ht(Vo))==null?void 0:e["connection-line"],f=F(()=>{var m;return d((m=o.value)==null?void 0:m.nodeId)}),N=F(()=>{var m;return d((m=i.value)==null?void 0:m.nodeId)??null}),$=F(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),T=F(()=>s.value.markerStart?`url(#${In(s.value.markerStart,t)})`:""),b=F(()=>s.value.markerEnd?`url(#${In(s.value.markerEnd,t)})`:"");return()=>{var m,g,_;if(!f.value||!o.value)return null;const R=o.value.id,P=o.value.type,Z=f.value.handleBounds;let U=(Z==null?void 0:Z[P])??[];if(n.value===kt.Loose){const v=(Z==null?void 0:Z[P==="source"?"target":"source"])??[];U=[...U,...v]}if(!U)return null;const Q=(R?U.find(v=>v.id===R):U[0])??null,G=(Q==null?void 0:Q.position)??ee.Top,{x:V,y}=tn(f.value,Q,G);let Y=null;N.value&&(n.value===kt.Strict?Y=((m=N.value.handleBounds[P==="source"?"target":"source"])==null?void 0:m.find(v=>{var E;return v.id===((E=i.value)==null?void 0:E.id)}))||null:Y=((g=[...N.value.handleBounds.source??[],...N.value.handleBounds.target??[]])==null?void 0:g.find(v=>{var E;return v.id===((E=i.value)==null?void 0:E.id)}))||null);const h=((_=i.value)==null?void 0:_.position)??(G?$i[G]:null);if(!G||!h)return null;const D=l.value??s.value.type??Mt.Bezier;let w="";const z={sourceX:V,sourceY:y,sourcePosition:G,targetX:$.value.x,targetY:$.value.y,targetPosition:h};return D===Mt.Bezier?[w]=Ia(z):D===Mt.Step?[w]=Eo({...z,borderRadius:0}):D===Mt.SmoothStep?[w]=Eo(z):D===Mt.SimpleBezier?[w]=Da(z):w=`M${V},${y} ${$.value.x},${$.value.y}`,ke("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},ke("g",{class:"vue-flow__connection"},p?ke(p,{sourceX:V,sourceY:y,sourcePosition:G,targetX:$.value.x,targetY:$.value.y,targetPosition:h,sourceNode:f.value,sourceHandle:Q,targetNode:N.value,targetHandle:Y,markerEnd:b.value,markerStart:T.value,connectionStatus:u.value}):ke("path",{d:w,class:[s.value.class,u.value,"vue-flow__connection-path"],style:{...a.value,...s.value.style},"marker-end":b.value,"marker-start":T.value})))}}}),Vh=Oh,Lh=["id","markerWidth","markerHeight","markerUnits","orient"],Fh={name:"MarkerType",compatConfig:{MODE:3}},Hh=ye({...Fh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(H(),W("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===B(_i).ArrowClosed?(H(),W("polyline",{key:0,style:de({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ve("",!0),t.type===B(_i).Arrow?(H(),W("polyline",{key:1,style:de({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ve("",!0)],8,Lh))}}),Yh={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},Xh={name:"MarkerDefinitions",compatConfig:{MODE:3}},Gh=ye({...Xh,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Ce(),r=F(()=>{const l=new Set,a=[],s=u=>{if(u){const c=In(u,t);l.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||i.value}):a.push({id:c,color:i.value,type:u}),l.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(l,a)=>(H(),W("svg",Yh,[C("defs",null,[(H(!0),W(Pe,null,ft(r.value,s=>(H(),$e(Hh,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Uh={name:"Edges",compatConfig:{MODE:3}},Zh=ye({...Uh,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Ce();return(i,r)=>(H(),W(Pe,null,[pe(Gh),(H(!0),W(Pe,null,ft(B(n),l=>(H(),W("svg",{key:l.id,class:"vue-flow__edges vue-flow__container",style:de({zIndex:B(df)(l,B(t),B(o))})},[pe(B(Bh),{id:l.id},null,8,["id"])],4))),128)),pe(B(Vh))],64))}}),qh=ye({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:l,removeSelectedNodes:a,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:p,elevateNodesOnSelect:f,disableKeyboardA11y:N,ariaLiveMessage:$,snapToGrid:T,snapGrid:b,nodeDragThreshold:m,nodesDraggable:g,elementsSelectable:_,nodesConnectable:R,nodesFocusable:P,hooks:Z}=Ce(),U=fe(null);Bt(Sa,U),Bt(xa,e.id);const Q=Ht(Vo),G=rn(),V=ka(),{node:y,parentNode:Y}=Ea(e.id),{emit:h,on:D}=Tf(y,l),w=Ee(()=>typeof y.draggable>"u"?g.value:y.draggable),z=Ee(()=>typeof y.selectable>"u"?_.value:y.selectable),v=Ee(()=>typeof y.connectable>"u"?R.value:y.connectable),E=Ee(()=>typeof y.focusable>"u"?P.value:y.focusable),x=F(()=>z.value||w.value||Z.value.nodeClick.hasListeners()||Z.value.nodeDoubleClick.hasListeners()||Z.value.nodeMouseEnter.hasListeners()||Z.value.nodeMouseMove.hasListeners()||Z.value.nodeMouseLeave.hasListeners()),L=Ee(()=>!!y.dimensions.width&&!!y.dimensions.height),K=F(()=>{const I=y.type||"default",M=Q==null?void 0:Q[`node-${I}`];if(M)return M;let X=y.template||d.value[I];if(typeof X=="string"&&G){const le=Object.keys(G.appContext.components);le&&le.includes(I)&&(X=kl(I,!1))}return X&&typeof X!="string"?X:(l.error(new Ae(De.NODE_TYPE_MISSING,X)),!1)}),te=$a({id:e.id,el:U,disabled:()=>!w.value,selectable:z,dragHandle:()=>y.dragHandle,onStart(I){h.dragStart(I)},onDrag(I){h.drag(I)},onStop(I){h.dragStop(I)},onClick(I){k(I)}}),ie=F(()=>y.class instanceof Function?y.class(y):y.class),j=F(()=>{const I=(y.style instanceof Function?y.style(y):y.style)||{},M=y.width instanceof Function?y.width(y):y.width,X=y.height instanceof Function?y.height(y):y.height;return!I.width&&M&&(I.width=typeof M=="string"?M:`${M}px`),!I.height&&X&&(I.height=typeof X=="string"?X:`${X}px`),I}),A=Ee(()=>Number(y.zIndex??j.value.zIndex??0));return c(I=>{(I.includes(e.id)||!I.length)&&q()}),Fe(()=>{_e(()=>y.hidden,(I=!1,M,X)=>{!I&&U.value&&(e.resizeObserver.observe(U.value),X(()=>{U.value&&e.resizeObserver.unobserve(U.value)}))},{immediate:!0,flush:"post"})}),_e([()=>y.type,()=>y.sourcePosition,()=>y.targetPosition],()=>{ot(()=>{u([{id:e.id,nodeElement:U.value,forceUpdate:!0}])})}),_e([()=>y.position.x,()=>y.position.y,()=>{var I;return(I=Y.value)==null?void 0:I.computedPosition.x},()=>{var I;return(I=Y.value)==null?void 0:I.computedPosition.y},()=>{var I;return(I=Y.value)==null?void 0:I.computedPosition.z},A,()=>y.selected,()=>y.dimensions.height,()=>y.dimensions.width,()=>{var I;return(I=Y.value)==null?void 0:I.dimensions.height},()=>{var I;return(I=Y.value)==null?void 0:I.dimensions.width}],([I,M,X,le,ae,re])=>{const se={x:I,y:M,z:re+(f.value&&y.selected?1e3:0)};typeof X<"u"&&typeof le<"u"?y.computedPosition=rf({x:X,y:le,z:ae},se):y.computedPosition=se},{flush:"post",immediate:!0}),_e([()=>y.extent,p],([I,M],[X,le])=>{(I!==X||M!==le)&&O()}),y.extent==="parent"||typeof y.extent=="object"&&"range"in y.extent&&y.extent.range==="parent"?pi(()=>L).toBe(!0).then(O):O(),()=>y.hidden?null:ke("div",{ref:U,"data-id":y.id,class:["vue-flow__node",`vue-flow__node-${K.value===!1?"default":y.type||"default"}`,{[n.value]:w.value,dragging:te==null?void 0:te.value,draggable:w.value,selected:y.selected,selectable:z.value,parent:y.isParent},ie.value],style:{visibility:L.value?"visible":"hidden",zIndex:y.computedPosition.z??A.value,transform:`translate(${y.computedPosition.x}px,${y.computedPosition.y}px)`,pointerEvents:x.value?"all":"none",...j.value},tabIndex:E.value?0:void 0,role:E.value?"group":void 0,"aria-describedby":N.value?void 0:`${la}-${t}`,"aria-label":y.ariaLabel,"aria-roledescription":"node",...y.domAttributes,onMouseenter:J,onMousemove:ne,onMouseleave:ue,onContextmenu:ce,onClick:k,onDblclick:ge,onKeydown:S},[ke(K.value===!1?d.value.default:K.value,{id:y.id,type:y.type,data:y.data,events:{...y.events,...D},selected:y.selected,resizing:y.resizing,dragging:te.value,connectable:v.value,position:y.computedPosition,dimensions:y.dimensions,isValidTargetPos:y.isValidTargetPos,isValidSourcePos:y.isValidSourcePos,parent:y.parentNode,parentNodeId:y.parentNode,zIndex:y.computedPosition.z??A.value,targetPosition:y.targetPosition,sourcePosition:y.sourcePosition,label:y.label,dragHandle:y.dragHandle,onUpdateNodeInternals:q})]);function O(){const I=y.computedPosition,{computedPosition:M,position:X}=Ui(y,T.value?Oo(I,b.value):I,l.error,p.value,Y.value);(y.computedPosition.x!==M.x||y.computedPosition.y!==M.y)&&(y.computedPosition={...y.computedPosition,...M}),(y.position.x!==X.x||y.position.y!==X.y)&&(y.position=X)}function q(){U.value&&u([{id:e.id,nodeElement:U.value,forceUpdate:!0}])}function J(I){te!=null&&te.value||h.mouseEnter({event:I,node:y})}function ne(I){te!=null&&te.value||h.mouseMove({event:I,node:y})}function ue(I){te!=null&&te.value||h.mouseLeave({event:I,node:y})}function ce(I){return h.contextMenu({event:I,node:y})}function ge(I){return h.doubleClick({event:I,node:y})}function k(I){z.value&&(!o.value||!w.value||m.value>0)&&Ni(y,r.value,s,a,i,!1,U.value),h.click({event:I,node:y})}function S(I){if(!(xi(I)||N.value))if(sa.includes(I.key)&&z.value){const M=I.key==="Escape";Ni(y,r.value,s,a,i,M,U.value)}else w.value&&y.selected&&Kt[I.key]&&(I.preventDefault(),$.value=`Moved selected node ${I.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.position.x}, y: ${~~y.position.y}`,V({x:Kt[I.key].x,y:Kt[I.key].y},I.shiftKey))}}}),Wh=qh;function Kh(e={includeHiddenNodes:!1}){const{nodes:t}=Ce();return F(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const jh={class:"vue-flow__nodes vue-flow__container"},Jh={name:"Nodes",compatConfig:{MODE:3}},Qh=ye({...Jh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Ce(),i=Kh(),r=fe();return _e(i,l=>{l&&ot(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),Fe(()=>{r.value=new ResizeObserver(l=>{const a=l.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));ot(()=>n(a))})}),El(()=>{var l;return(l=r.value)==null?void 0:l.disconnect()}),(l,a)=>(H(),W("div",jh,[r.value?(H(!0),W(Pe,{key:0},ft(B(t),(s,u,c,d)=>{const p=[s.id];if(d&&d.key===s.id&&gs(d,p))return d;const f=(H(),$e(B(Wh),{id:s.id,key:s.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return f.memo=p,f},a,0),128)):ve("",!0)]))}});function eg(){const{emits:e}=Ce();Fe(()=>{if(_a()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Ae(De.MISSING_STYLES))}})}const tg=C("div",{class:"vue-flow__edge-labels"},null,-1),ng={name:"VueFlow",compatConfig:{MODE:3}},og=ye({...ng,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Nl(),r=Wo(o,"modelValue",n),l=Wo(o,"nodes",n),a=Wo(o,"edges",n),s=Ce(o),u=Af({modelValue:r,nodes:l,edges:a},o,s);return Rf(n,s.hooks),Ph(),eg(),Bt(Vo,i),Yt(u),t(s),(c,d)=>(H(),W("div",{ref:B(s).vueFlowRef,class:"vue-flow"},[pe(kh,null,{default:Xe(()=>[pe(Zh),tg,pe(Qh),Te(c.$slots,"zoom-pane")]),_:3}),Te(c.$slots,"default"),pe(Dh)],512))}}),ig={name:"Panel",compatConfig:{MODE:3}},Wi=ye({...ig,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ce(),o=F(()=>`${t.position}`.split("-"));return(i,r)=>(H(),W("div",{class:xe(["vue-flow__panel",o.value]),style:de({pointerEvents:B(n)?"none":"all"})},[Te(i.$slots,"default")],6))}});var gt=(e=>(e.Lines="lines",e.Dots="dots",e))(gt||{});const Aa=function({dimensions:e,size:t,color:n}){return ke("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},za=function({radius:e,color:t}){return ke("circle",{cx:e,cy:e,r:e,fill:t})};gt.Lines+"",gt.Dots+"";const rg={[gt.Dots]:"#81818a",[gt.Lines]:"#eee"},lg=["id","x","y","width","height","patternTransform"],ag={key:2,height:"100",width:"100"},sg=["fill"],ug=["x","y","fill"],cg={name:"Background",compatConfig:{MODE:3}},dg=ye({...cg,props:{id:{},variant:{default:()=>gt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Ce(),o=F(()=>{const l=n.value.zoom,[a,s]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*l||1,s*l||1],c=e.size*l,[d,p]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],f=[d*l||1+u[0]/2,p*l||1+u[1]/2];return{scaledGap:u,offset:f,size:c}}),i=Ee(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),r=Ee(()=>e.color||e.patternColor||rg[e.variant||gt.Dots]);return(l,a)=>(H(),W("svg",{class:"vue-flow__background vue-flow__container",style:de({height:`${l.height>100?100:l.height}%`,width:`${l.width>100?100:l.width}%`})},[Te(l.$slots,"pattern-container",{id:i.value},()=>[C("pattern",{id:i.value,x:B(n).x%o.value.scaledGap[0],y:B(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Te(l.$slots,"pattern",{},()=>[l.variant===B(gt).Lines?(H(),$e(B(Aa),{key:0,size:l.lineWidth,color:r.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):l.variant===B(gt).Dots?(H(),$e(B(za),{key:1,color:r.value,radius:o.value.size/2},null,8,["color","radius"])):ve("",!0),l.bgColor?(H(),W("svg",ag,[C("rect",{width:"100%",height:"100%",fill:l.bgColor},null,8,sg)])):ve("",!0)])],8,lg)]),C("rect",{x:l.x,y:l.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,ug),Te(l.$slots,"default",{id:i.value})],4))}}),pg={name:"ControlButton",compatConfig:{MODE:3}},fg=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},hg={type:"button",class:"vue-flow__controls-button"};function gg(e,t,n,o,i,r){return H(),W("button",hg,[Te(e.$slots,"default")])}const Jn=fg(pg,[["render",gg]]),mg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},yg=C("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),vg=[yg];function bg(e,t){return H(),W("svg",mg,vg)}const wg={render:bg},_g={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},xg=C("path",{d:"M0 0h32v4.2H0z"},null,-1),Sg=[xg];function $g(e,t){return H(),W("svg",_g,Sg)}const Ng={render:$g},Eg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},kg=C("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Cg=[kg];function Mg(e,t){return H(),W("svg",Eg,Cg)}const Tg={render:Mg},Ig={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Dg=C("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Pg=[Dg];function Ag(e,t){return H(),W("svg",Ig,Pg)}const zg={render:Ag},Rg={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Bg=C("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Og=[Bg];function Vg(e,t){return H(),W("svg",Rg,Og)}const Lg={render:Vg},Fg={name:"Controls",compatConfig:{MODE:3}},Hg=ye({...Fg,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>ra.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:r,zoomIn:l,zoomOut:a,fitView:s,viewport:u,minZoom:c,maxZoom:d}=Ce(),p=Ee(()=>n.value||o.value||i.value),f=Ee(()=>u.value.zoom<=c.value),N=Ee(()=>u.value.zoom>=d.value);function $(){l(),t("zoomIn")}function T(){a(),t("zoomOut")}function b(){s(e.fitViewParams),t("fitView")}function m(){r(!p.value),t("interactionChange",!p.value)}return(g,_)=>(H(),$e(B(Wi),{class:"vue-flow__controls",position:g.position},{default:Xe(()=>[Te(g.$slots,"top"),g.showZoom?(H(),W(Pe,{key:0},[Te(g.$slots,"control-zoom-in",{},()=>[pe(Jn,{class:"vue-flow__controls-zoomin",disabled:N.value,onClick:$},{default:Xe(()=>[Te(g.$slots,"icon-zoom-in",{},()=>[(H(),$e(dt(B(wg))))])]),_:3},8,["disabled"])]),Te(g.$slots,"control-zoom-out",{},()=>[pe(Jn,{class:"vue-flow__controls-zoomout",disabled:f.value,onClick:T},{default:Xe(()=>[Te(g.$slots,"icon-zoom-out",{},()=>[(H(),$e(dt(B(Ng))))])]),_:3},8,["disabled"])])],64)):ve("",!0),g.showFitView?Te(g.$slots,"control-fit-view",{key:1},()=>[pe(Jn,{class:"vue-flow__controls-fitview",onClick:b},{default:Xe(()=>[Te(g.$slots,"icon-fit-view",{},()=>[(H(),$e(dt(B(Tg))))])]),_:3})]):ve("",!0),g.showInteractive?Te(g.$slots,"control-interactive",{key:2},()=>[g.showInteractive?(H(),$e(Jn,{key:0,class:"vue-flow__controls-interactive",onClick:m},{default:Xe(()=>[p.value?Te(g.$slots,"icon-unlock",{key:0},()=>[(H(),$e(dt(B(Lg))))]):ve("",!0),p.value?ve("",!0):Te(g.$slots,"icon-lock",{key:1},()=>[(H(),$e(dt(B(zg))))])]),_:3})):ve("",!0)]):ve("",!0),Te(g.$slots,"default")]),_:3},8,["position"]))}});var Yg={value:()=>{}};function Ki(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new uo(n)}function uo(e){this._=e}function Xg(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}uo.prototype=Ki.prototype={constructor:uo,on:function(e,t){var n=this._,o=Xg(e+"",n),i,r=-1,l=o.length;if(arguments.length<2){for(;++r<l;)if((i=(e=o[r]).type)&&(i=Gg(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<l;)if(i=(e=o[r]).type)n[i]=Zr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Zr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Gg(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Zr(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Yg,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ei="http://www.w3.org/1999/xhtml";const qr={svg:"http://www.w3.org/2000/svg",xhtml:Ei,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),qr.hasOwnProperty(t)?{space:qr[t],local:e}:e}function Ug(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ei&&t.documentElement.namespaceURI===Ei?t.createElement(e):t.createElementNS(n,e)}}function Zg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ra(e){var t=Yo(e);return(t.local?Zg:Ug)(t)}function qg(){}function ji(e){return e==null?qg:function(){return this.querySelector(e)}}function Wg(e){typeof e!="function"&&(e=ji(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=new Array(l),s,u,c=0;c<l;++c)(s=r[c])&&(u=e.call(s,s.__data__,c,r))&&("__data__"in s&&(u.__data__=s.__data__),a[c]=u);return new Ye(o,this._parents)}function Kg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jg(){return[]}function Ba(e){return e==null?jg:function(){return this.querySelectorAll(e)}}function Jg(e){return function(){return Kg(e.apply(this,arguments))}}function Qg(e){typeof e=="function"?e=Jg(e):e=Ba(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var l=t[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&(o.push(e.call(s,s.__data__,u,l)),i.push(s));return new Ye(o,i)}function Oa(e){return function(){return this.matches(e)}}function Va(e){return function(t){return t.matches(e)}}var em=Array.prototype.find;function tm(e){return function(){return em.call(this.children,e)}}function nm(){return this.firstElementChild}function om(e){return this.select(e==null?nm:tm(typeof e=="function"?e:Va(e)))}var im=Array.prototype.filter;function rm(){return Array.from(this.children)}function lm(e){return function(){return im.call(this.children,e)}}function am(e){return this.selectAll(e==null?rm:lm(typeof e=="function"?e:Va(e)))}function sm(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new Ye(o,this._parents)}function La(e){return new Array(e.length)}function um(){return new Ye(this._enter||this._groups.map(La),this._parents)}function ko(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ko.prototype={constructor:ko,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cm(e){return function(){return e}}function dm(e,t,n,o,i,r){for(var l=0,a,s=t.length,u=r.length;l<u;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new ko(e,r[l]);for(;l<s;++l)(a=t[l])&&(i[l]=a)}function pm(e,t,n,o,i,r,l){var a,s,u=new Map,c=t.length,d=r.length,p=new Array(c),f;for(a=0;a<c;++a)(s=t[a])&&(p[a]=f=l.call(s,s.__data__,a,t)+"",u.has(f)?i[a]=s:u.set(f,s));for(a=0;a<d;++a)f=l.call(e,r[a],a,r)+"",(s=u.get(f))?(o[a]=s,s.__data__=r[a],u.delete(f)):n[a]=new ko(e,r[a]);for(a=0;a<c;++a)(s=t[a])&&u.get(p[a])===s&&(i[a]=s)}function fm(e){return e.__data__}function hm(e,t){if(!arguments.length)return Array.from(this,fm);var n=t?pm:dm,o=this._parents,i=this._groups;typeof e!="function"&&(e=cm(e));for(var r=i.length,l=new Array(r),a=new Array(r),s=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],p=d.length,f=gm(e.call(c,c&&c.__data__,u,o)),N=f.length,$=a[u]=new Array(N),T=l[u]=new Array(N),b=s[u]=new Array(p);n(c,d,$,T,b,f,t);for(var m=0,g=0,_,R;m<N;++m)if(_=$[m]){for(m>=g&&(g=m+1);!(R=T[g])&&++g<N;);_._next=R||null}}return l=new Ye(l,o),l._enter=a,l._exit=s,l}function gm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mm(){return new Ye(this._exit||this._groups.map(La),this._parents)}function ym(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function vm(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,l=Math.min(i,r),a=new Array(i),s=0;s<l;++s)for(var u=n[s],c=o[s],d=u.length,p=a[s]=new Array(d),f,N=0;N<d;++N)(f=u[N]||c[N])&&(p[N]=f);for(;s<i;++s)a[s]=n[s];return new Ye(a,this._parents)}function bm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],l;--i>=0;)(l=o[i])&&(r&&l.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(l,r),r=l);return this}function wm(e){e||(e=_m);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var l=n[r],a=l.length,s=i[r]=new Array(a),u,c=0;c<a;++c)(u=l[c])&&(s[c]=u);s.sort(t)}return new Ye(i,this._parents).order()}function _m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Sm(){return Array.from(this)}function $m(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var l=o[i];if(l)return l}return null}function Nm(){let e=0;for(const t of this)++e;return e}function Em(){return!this.node()}function km(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,l=i.length,a;r<l;++r)(a=i[r])&&e.call(a,a.__data__,r,i);return this}function Cm(e){return function(){this.removeAttribute(e)}}function Mm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tm(e,t){return function(){this.setAttribute(e,t)}}function Im(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Dm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Pm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Am(e,t){var n=Yo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Mm:Cm:typeof t=="function"?n.local?Pm:Dm:n.local?Im:Tm)(n,t))}function Fa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zm(e){return function(){this.style.removeProperty(e)}}function Rm(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bm(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Om(e,t,n){return arguments.length>1?this.each((t==null?zm:typeof t=="function"?Bm:Rm)(e,t,n??"")):nn(this.node(),e)}function nn(e,t){return e.style.getPropertyValue(t)||Fa(e).getComputedStyle(e,null).getPropertyValue(t)}function Vm(e){return function(){delete this[e]}}function Lm(e,t){return function(){this[e]=t}}function Fm(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Hm(e,t){return arguments.length>1?this.each((t==null?Vm:typeof t=="function"?Fm:Lm)(e,t)):this.node()[e]}function Ha(e){return e.trim().split(/^|\s+/)}function Ji(e){return e.classList||new Ya(e)}function Ya(e){this._node=e,this._names=Ha(e.getAttribute("class")||"")}Ya.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Xa(e,t){for(var n=Ji(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ga(e,t){for(var n=Ji(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Ym(e){return function(){Xa(this,e)}}function Xm(e){return function(){Ga(this,e)}}function Gm(e,t){return function(){(t.apply(this,arguments)?Xa:Ga)(this,e)}}function Um(e,t){var n=Ha(e+"");if(arguments.length<2){for(var o=Ji(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Gm:t?Ym:Xm)(n,t))}function Zm(){this.textContent=""}function qm(e){return function(){this.textContent=e}}function Wm(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Km(e){return arguments.length?this.each(e==null?Zm:(typeof e=="function"?Wm:qm)(e)):this.node().textContent}function jm(){this.innerHTML=""}function Jm(e){return function(){this.innerHTML=e}}function Qm(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ey(e){return arguments.length?this.each(e==null?jm:(typeof e=="function"?Qm:Jm)(e)):this.node().innerHTML}function ty(){this.nextSibling&&this.parentNode.appendChild(this)}function ny(){return this.each(ty)}function oy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iy(){return this.each(oy)}function ry(e){var t=typeof e=="function"?e:Ra(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ly(){return null}function ay(e,t){var n=typeof e=="function"?e:Ra(e),o=t==null?ly:typeof t=="function"?t:ji(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function sy(){var e=this.parentNode;e&&e.removeChild(this)}function uy(){return this.each(sy)}function cy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dy(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function py(e){return this.select(e?dy:cy)}function fy(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hy(e){return function(t){e.call(this,t,this.__data__)}}function gy(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function my(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function yy(e,t,n){return function(){var o=this.__on,i,r=hy(t);if(o){for(var l=0,a=o.length;l<a;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function vy(e,t,n){var o=gy(e+""),i,r=o.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var s=0,u=a.length,c;s<u;++s)for(i=0,c=a[s];i<r;++i)if((l=o[i]).type===c.type&&l.name===c.name)return c.value}return}for(a=t?yy:my,i=0;i<r;++i)this.each(a(o[i],t,n));return this}function Ua(e,t,n){var o=Fa(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function by(e,t){return function(){return Ua(this,e,t)}}function wy(e,t){return function(){return Ua(this,e,t.apply(this,arguments))}}function _y(e,t){return this.each((typeof t=="function"?wy:by)(e,t))}function*xy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,l;i<r;++i)(l=o[i])&&(yield l)}var Za=[null];function Ye(e,t){this._groups=e,this._parents=t}function Fn(){return new Ye([[document.documentElement]],Za)}function Sy(){return this}Ye.prototype=Fn.prototype={constructor:Ye,select:Wg,selectAll:Qg,selectChild:om,selectChildren:am,filter:sm,data:hm,enter:um,exit:mm,join:ym,merge:vm,selection:Sy,order:bm,sort:wm,call:xm,nodes:Sm,node:$m,size:Nm,empty:Em,each:km,attr:Am,style:Om,property:Hm,classed:Um,text:Km,html:ey,raise:ny,lower:iy,append:ry,insert:ay,remove:uy,clone:py,datum:fy,on:vy,dispatch:_y,[Symbol.iterator]:xy};function Nt(e){return typeof e=="string"?new Ye([[document.querySelector(e)]],[document.documentElement]):new Ye([[e]],Za)}function $y(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xt(e,t){if(e=$y(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const ki={capture:!0,passive:!1};function Ci(e){e.preventDefault(),e.stopImmediatePropagation()}function Ny(e){var t=e.document.documentElement,n=Nt(e).on("dragstart.drag",Ci,ki);"onselectstart"in t?n.on("selectstart.drag",Ci,ki):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ey(e,t){var n=e.document.documentElement,o=Nt(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ci,ki),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Qi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qa(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Hn(){}var Pn=.7,Co=1/Pn,jt="\\s*([+-]?\\d+)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ky=/^#([0-9a-f]{3,8})$/,Cy=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),My=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),Ty=new RegExp(`^rgba\\(${jt},${jt},${jt},${An}\\)$`),Iy=new RegExp(`^rgba\\(${rt},${rt},${rt},${An}\\)$`),Dy=new RegExp(`^hsl\\(${An},${rt},${rt}\\)$`),Py=new RegExp(`^hsla\\(${An},${rt},${rt},${An}\\)$`),Wr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qi(Hn,zn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kr,formatHex:Kr,formatHex8:Ay,formatHsl:zy,formatRgb:jr,toString:jr});function Kr(){return this.rgb().formatHex()}function Ay(){return this.rgb().formatHex8()}function zy(){return Wa(this).formatHsl()}function jr(){return this.rgb().formatRgb()}function zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ky.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jr(t):n===3?new Le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Cy.exec(e))?new Le(t[1],t[2],t[3],1):(t=My.exec(e))?new Le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ty.exec(e))?Qn(t[1],t[2],t[3],t[4]):(t=Iy.exec(e))?Qn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dy.exec(e))?tl(t[1],t[2]/100,t[3]/100,1):(t=Py.exec(e))?tl(t[1],t[2]/100,t[3]/100,t[4]):Wr.hasOwnProperty(e)?Jr(Wr[e]):e==="transparent"?new Le(NaN,NaN,NaN,0):null}function Jr(e){return new Le(e>>16&255,e>>8&255,e&255,1)}function Qn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Le(e,t,n,o)}function Ry(e){return e instanceof Hn||(e=zn(e)),e?(e=e.rgb(),new Le(e.r,e.g,e.b,e.opacity)):new Le}function Mi(e,t,n,o){return arguments.length===1?Ry(e):new Le(e,t,n,o??1)}function Le(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Qi(Le,Mi,qa(Hn,{brighter(e){return e=e==null?Co:Math.pow(Co,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Le(Rt(this.r),Rt(this.g),Rt(this.b),Mo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qr,formatHex:Qr,formatHex8:By,formatRgb:el,toString:el}));function Qr(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}`}function By(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}${Pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function el(){const e=Mo(this.opacity);return`${e===1?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${e===1?")":`, ${e})`}`}function Mo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pt(e){return e=Rt(e),(e<16?"0":"")+e.toString(16)}function tl(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,o)}function Wa(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof Hn||(e=zn(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),l=NaN,a=r-i,s=(r+i)/2;return a?(t===r?l=(n-o)/a+(n<o)*6:n===r?l=(o-t)/a+2:l=(t-n)/a+4,a/=s<.5?r+i:2-r-i,l*=60):a=s>0&&s<1?0:l,new qe(l,a,s,e.opacity)}function Oy(e,t,n,o){return arguments.length===1?Wa(e):new qe(e,t,n,o??1)}function qe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Qi(qe,Oy,qa(Hn,{brighter(e){return e=e==null?Co:Math.pow(Co,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Le(li(e>=240?e-240:e+120,i,o),li(e,i,o),li(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new qe(nl(this.h),eo(this.s),eo(this.l),Mo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mo(this.opacity);return`${e===1?"hsl(":"hsla("}${nl(this.h)}, ${eo(this.s)*100}%, ${eo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nl(e){return e=(e||0)%360,e<0?e+360:e}function eo(e){return Math.max(0,Math.min(1,e||0))}function li(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ka=e=>()=>e;function Vy(e,t){return function(n){return e+n*t}}function Ly(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Fy(e){return(e=+e)==1?ja:function(t,n){return n-t?Ly(t,n,e):Ka(isNaN(t)?n:t)}}function ja(e,t){var n=t-e;return n?Vy(e,n):Ka(isNaN(e)?t:e)}const ol=function e(t){var n=Fy(t);function o(i,r){var l=n((i=Mi(i)).r,(r=Mi(r)).r),a=n(i.g,r.g),s=n(i.b,r.b),u=ja(i.opacity,r.opacity);return function(c){return i.r=l(c),i.g=a(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function $t(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ai=new RegExp(Ti.source,"g");function Hy(e){return function(){return e}}function Yy(e){return function(t){return e(t)+""}}function Xy(e,t){var n=Ti.lastIndex=ai.lastIndex=0,o,i,r,l=-1,a=[],s=[];for(e=e+"",t=t+"";(o=Ti.exec(e))&&(i=ai.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),a[l]?a[l]+=r:a[++l]=r),(o=o[0])===(i=i[0])?a[l]?a[l]+=i:a[++l]=i:(a[++l]=null,s.push({i:l,x:$t(o,i)})),n=ai.lastIndex;return n<t.length&&(r=t.slice(n),a[l]?a[l]+=r:a[++l]=r),a.length<2?s[0]?Yy(s[0].x):Hy(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)a[(d=s[c]).i]=d.x(u);return a.join("")})}var il=180/Math.PI,Ii={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ja(e,t,n,o,i,r){var l,a,s;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,s/=a),e*o<t*n&&(e=-e,t=-t,s=-s,l=-l),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*il,skewX:Math.atan(s)*il,scaleX:l,scaleY:a}}var to;function Gy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ii:Ja(t.a,t.b,t.c,t.d,t.e,t.f)}function Uy(e){return e==null||(to||(to=document.createElementNS("http://www.w3.org/2000/svg","g")),to.setAttribute("transform",e),!(e=to.transform.baseVal.consolidate()))?Ii:(e=e.matrix,Ja(e.a,e.b,e.c,e.d,e.e,e.f))}function Qa(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,p,f,N){if(u!==d||c!==p){var $=f.push("translate(",null,t,null,n);N.push({i:$-4,x:$t(u,d)},{i:$-2,x:$t(c,p)})}else(d||p)&&f.push("translate("+d+t+p+n)}function l(u,c,d,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:d.push(i(d)+"rotate(",null,o)-2,x:$t(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function a(u,c,d,p){u!==c?p.push({i:d.push(i(d)+"skewX(",null,o)-2,x:$t(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,p,f,N){if(u!==d||c!==p){var $=f.push(i(f)+"scale(",null,",",null,")");N.push({i:$-4,x:$t(u,d)},{i:$-2,x:$t(c,p)})}else(d!==1||p!==1)&&f.push(i(f)+"scale("+d+","+p+")")}return function(u,c){var d=[],p=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,p),l(u.rotate,c.rotate,d,p),a(u.skewX,c.skewX,d,p),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,p),u=c=null,function(f){for(var N=-1,$=p.length,T;++N<$;)d[(T=p[N]).i]=T.x(f);return d.join("")}}}var Zy=Qa(Gy,"px, ","px)","deg)"),qy=Qa(Uy,", ",")",")"),Wy=1e-12;function rl(e){return((e=Math.exp(e))+1/e)/2}function Ky(e){return((e=Math.exp(e))-1/e)/2}function jy(e){return((e=Math.exp(2*e))-1)/(e+1)}const Jy=function e(t,n,o){function i(r,l){var a=r[0],s=r[1],u=r[2],c=l[0],d=l[1],p=l[2],f=c-a,N=d-s,$=f*f+N*N,T,b;if($<Wy)b=Math.log(p/u)/t,T=function(Z){return[a+Z*f,s+Z*N,u*Math.exp(t*Z*b)]};else{var m=Math.sqrt($),g=(p*p-u*u+o*$)/(2*u*n*m),_=(p*p-u*u-o*$)/(2*p*n*m),R=Math.log(Math.sqrt(g*g+1)-g),P=Math.log(Math.sqrt(_*_+1)-_);b=(P-R)/t,T=function(Z){var U=Z*b,Q=rl(R),G=u/(n*m)*(Q*jy(t*U+R)-Ky(R));return[a+G*f,s+G*N,u*Q/rl(t*U+R)]}}return T.duration=b*1e3*t/Math.SQRT2,T}return i.rho=function(r){var l=Math.max(.001,+r),a=l*l,s=a*a;return e(l,a,s)},i}(Math.SQRT2,2,4);var on=0,gn=0,un=0,es=1e3,To,mn,Io=0,Ft=0,Xo=0,Rn=typeof performance=="object"&&performance.now?performance:Date,ts=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function er(){return Ft||(ts(Qy),Ft=Rn.now()+Xo)}function Qy(){Ft=0}function Do(){this._call=this._time=this._next=null}Do.prototype=ns.prototype={constructor:Do,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?er():+n)+(t==null?0:+t),!this._next&&mn!==this&&(mn?mn._next=this:To=this,mn=this),this._call=e,this._time=n,Di()},stop:function(){this._call&&(this._call=null,this._time=1/0,Di())}};function ns(e,t,n){var o=new Do;return o.restart(e,t,n),o}function ev(){er(),++on;for(var e=To,t;e;)(t=Ft-e._time)>=0&&e._call.call(void 0,t),e=e._next;--on}function ll(){Ft=(Io=Rn.now())+Xo,on=gn=0;try{ev()}finally{on=0,nv(),Ft=0}}function tv(){var e=Rn.now(),t=e-Io;t>es&&(Xo-=t,Io=e)}function nv(){for(var e,t=To,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:To=n);mn=e,Di(o)}function Di(e){if(!on){gn&&(gn=clearTimeout(gn));var t=e-Ft;t>24?(e<1/0&&(gn=setTimeout(ll,e-Rn.now()-Xo)),un&&(un=clearInterval(un))):(un||(Io=Rn.now(),un=setInterval(tv,es)),on=1,ts(ll))}}function al(e,t,n){var o=new Do;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var ov=Ki("start","end","cancel","interrupt"),iv=[],os=0,sl=1,Pi=2,co=3,ul=4,Ai=5,po=6;function Go(e,t,n,o,i,r){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;rv(e,n,{name:t,index:o,group:i,on:ov,tween:iv,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:os})}function tr(e,t){var n=Je(e,t);if(n.state>os)throw new Error("too late; already scheduled");return n}function st(e,t){var n=Je(e,t);if(n.state>co)throw new Error("too late; already running");return n}function Je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rv(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ns(r,0,n.time);function r(u){n.state=sl,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var c,d,p,f;if(n.state!==sl)return s();for(c in o)if(f=o[c],f.name===n.name){if(f.state===co)return al(l);f.state===ul?(f.state=po,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=po,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(al(function(){n.state===co&&(n.state=ul,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Pi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pi){for(n.state=co,i=new Array(p=n.tween.length),c=0,d=-1;c<p;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ai,1),d=-1,p=i.length;++d<p;)i[d].call(e,c);n.state===Ai&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=po,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function fo(e,t){var n=e.__transition,o,i,r=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){r=!1;continue}i=o.state>Pi&&o.state<Ai,o.state=po,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}r&&delete e.__transition}}function lv(e){return this.each(function(){fo(this,e)})}function av(e,t){var n,o;return function(){var i=st(this,e),r=i.tween;if(r!==n){o=n=r;for(var l=0,a=o.length;l<a;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function sv(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=st(this,e),l=r.tween;if(l!==o){i=(o=l).slice();for(var a={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=a;break}s===u&&i.push(a)}r.tween=i}}function uv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Je(this.node(),n).tween,i=0,r=o.length,l;i<r;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?av:sv)(n,e,t))}function nr(e,t,n){var o=e._id;return e.each(function(){var i=st(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Je(i,o).value[t]}}function is(e,t){var n;return(typeof t=="number"?$t:t instanceof zn?ol:(n=zn(t))?(t=n,ol):Xy)(e,t)}function cv(e){return function(){this.removeAttribute(e)}}function dv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pv(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}}function fv(e,t,n){var o,i=n+"",r;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}function hv(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function gv(e,t,n){var o,i,r;return function(){var l,a=n(this),s;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),s=a+"",l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a)))}}function mv(e,t){var n=Yo(e),o=n==="transform"?qy:is;return this.attrTween(e,typeof t=="function"?(n.local?gv:hv)(n,o,nr(this,"attr."+e,t)):t==null?(n.local?dv:cv)(n):(n.local?fv:pv)(n,o,t))}function yv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function vv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bv(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&vv(e,r)),n}return i._value=t,i}function wv(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&yv(e,r)),n}return i._value=t,i}function _v(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Yo(e);return this.tween(n,(o.local?bv:wv)(o,t))}function xv(e,t){return function(){tr(this,e).delay=+t.apply(this,arguments)}}function Sv(e,t){return t=+t,function(){tr(this,e).delay=t}}function $v(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xv:Sv)(t,e)):Je(this.node(),t).delay}function Nv(e,t){return function(){st(this,e).duration=+t.apply(this,arguments)}}function Ev(e,t){return t=+t,function(){st(this,e).duration=t}}function kv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Nv:Ev)(t,e)):Je(this.node(),t).duration}function Cv(e,t){if(typeof t!="function")throw new Error;return function(){st(this,e).ease=t}}function Mv(e){var t=this._id;return arguments.length?this.each(Cv(t,e)):Je(this.node(),t).ease}function Tv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;st(this,e).ease=n}}function Iv(e){if(typeof e!="function")throw new Error;return this.each(Tv(this._id,e))}function Dv(e){typeof e!="function"&&(e=Oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],l=r.length,a=o[i]=[],s,u=0;u<l;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&a.push(s);return new vt(o,this._parents,this._name,this._id)}function Pv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),l=new Array(o),a=0;a<r;++a)for(var s=t[a],u=n[a],c=s.length,d=l[a]=new Array(c),p,f=0;f<c;++f)(p=s[f]||u[f])&&(d[f]=p);for(;a<o;++a)l[a]=t[a];return new vt(l,this._parents,this._name,this._id)}function Av(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zv(e,t,n){var o,i,r=Av(t)?tr:st;return function(){var l=r(this,e),a=l.on;a!==o&&(i=(o=a).copy()).on(t,n),l.on=i}}function Rv(e,t){var n=this._id;return arguments.length<2?Je(this.node(),n).on.on(e):this.each(zv(n,e,t))}function Bv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ov(){return this.on("end.remove",Bv(this._id))}function Vv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ji(e));for(var o=this._groups,i=o.length,r=new Array(i),l=0;l<i;++l)for(var a=o[l],s=a.length,u=r[l]=new Array(s),c,d,p=0;p<s;++p)(c=a[p])&&(d=e.call(c,c.__data__,p,a))&&("__data__"in c&&(d.__data__=c.__data__),u[p]=d,Go(u[p],t,n,p,u,Je(c,n)));return new vt(r,this._parents,t,n)}function Lv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ba(e));for(var o=this._groups,i=o.length,r=[],l=[],a=0;a<i;++a)for(var s=o[a],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var p=e.call(c,c.__data__,d,s),f,N=Je(c,n),$=0,T=p.length;$<T;++$)(f=p[$])&&Go(f,t,n,$,p,N);r.push(p),l.push(c)}return new vt(r,l,t,n)}var Fv=Fn.prototype.constructor;function Hv(){return new Fv(this._groups,this._parents)}function Yv(e,t){var n,o,i;return function(){var r=nn(this,e),l=(this.style.removeProperty(e),nn(this,e));return r===l?null:r===n&&l===o?i:i=t(n=r,o=l)}}function rs(e){return function(){this.style.removeProperty(e)}}function Xv(e,t,n){var o,i=n+"",r;return function(){var l=nn(this,e);return l===i?null:l===o?r:r=t(o=l,n)}}function Gv(e,t,n){var o,i,r;return function(){var l=nn(this,e),a=n(this),s=a+"";return a==null&&(s=a=(this.style.removeProperty(e),nn(this,e))),l===s?null:l===o&&s===i?r:(i=s,r=t(o=l,a))}}function Uv(e,t){var n,o,i,r="style."+t,l="end."+r,a;return function(){var s=st(this,e),u=s.on,c=s.value[r]==null?a||(a=rs(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(l,i=c),s.on=o}}function Zv(e,t,n){var o=(e+="")=="transform"?Zy:is;return t==null?this.styleTween(e,Yv(e,o)).on("end.style."+e,rs(e)):typeof t=="function"?this.styleTween(e,Gv(e,o,nr(this,"style."+e,t))).each(Uv(this._id,e)):this.styleTween(e,Xv(e,o,t),n).on("end.style."+e,null)}function qv(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Wv(e,t,n){var o,i;function r(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&qv(e,l,n)),o}return r._value=t,r}function Kv(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Wv(e,t,n??""))}function jv(e){return function(){this.textContent=e}}function Jv(e){return function(){var t=e(this);this.textContent=t??""}}function Qv(e){return this.tween("text",typeof e=="function"?Jv(nr(this,"text",e)):jv(e==null?"":e+""))}function e0(e){return function(t){this.textContent=e.call(this,t)}}function t0(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&e0(i)),t}return o._value=e,o}function n0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,t0(e))}function o0(){for(var e=this._name,t=this._id,n=ls(),o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)if(s=l[u]){var c=Je(s,t);Go(s,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vt(o,this._parents,e,n)}function i0(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,l){var a={value:l},s={value:function(){--i===0&&r()}};n.each(function(){var u=st(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),u.on=t}),i===0&&r()})}var r0=0;function vt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ls(){return++r0}var ct=Fn.prototype;vt.prototype={constructor:vt,select:Vv,selectAll:Lv,selectChild:ct.selectChild,selectChildren:ct.selectChildren,filter:Dv,merge:Pv,selection:Hv,transition:o0,call:ct.call,nodes:ct.nodes,node:ct.node,size:ct.size,empty:ct.empty,each:ct.each,on:Rv,attr:mv,attrTween:_v,style:Zv,styleTween:Kv,text:Qv,textTween:n0,remove:Ov,tween:uv,delay:$v,duration:kv,ease:Mv,easeVarying:Iv,end:i0,[Symbol.iterator]:ct[Symbol.iterator]};function l0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var a0={time:null,delay:0,duration:250,ease:l0};function s0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function u0(e){var t,n;e instanceof vt?(t=e._id,e=e._name):(t=ls(),(n=a0).time=er(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var l=o[r],a=l.length,s,u=0;u<a;++u)(s=l[u])&&Go(s,e,t,u,l,n||s0(s,t));return new vt(o,this._parents,e,t)}Fn.prototype.interrupt=lv;Fn.prototype.transition=u0;const no=e=>()=>e;function c0(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function mt(e,t,n){this.k=e,this.x=t,this.y=n}mt.prototype={constructor:mt,scale:function(e){return e===1?this:new mt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var or=new mt(1,0,0);mt.prototype;function si(e){e.stopImmediatePropagation()}function cn(e){e.preventDefault(),e.stopImmediatePropagation()}function d0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function p0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cl(){return this.__zoom||or}function f0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function h0(){return navigator.maxTouchPoints||"ontouchstart"in this}function g0(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l))}function m0(){var e=d0,t=p0,n=g0,o=f0,i=h0,r=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],a=250,s=Jy,u=Ki("start","zoom","end"),c,d,p,f=500,N=150,$=0,T=10;function b(h){h.property("__zoom",cl).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",Q).on("dblclick.zoom",G).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",y).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(h,D,w,z){var v=h.selection?h.selection():h;v.property("__zoom",cl),h!==v?R(h,D,w,z):v.interrupt().each(function(){P(this,arguments).event(z).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},b.scaleBy=function(h,D,w,z){b.scaleTo(h,function(){var v=this.__zoom.k,E=typeof D=="function"?D.apply(this,arguments):D;return v*E},w,z)},b.scaleTo=function(h,D,w,z){b.transform(h,function(){var v=t.apply(this,arguments),E=this.__zoom,x=w==null?_(v):typeof w=="function"?w.apply(this,arguments):w,L=E.invert(x),K=typeof D=="function"?D.apply(this,arguments):D;return n(g(m(E,K),x,L),v,l)},w,z)},b.translateBy=function(h,D,w,z){b.transform(h,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),l)},null,z)},b.translateTo=function(h,D,w,z,v){b.transform(h,function(){var E=t.apply(this,arguments),x=this.__zoom,L=z==null?_(E):typeof z=="function"?z.apply(this,arguments):z;return n(or.translate(L[0],L[1]).scale(x.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof w=="function"?-w.apply(this,arguments):-w),E,l)},z,v)};function m(h,D){return D=Math.max(r[0],Math.min(r[1],D)),D===h.k?h:new mt(D,h.x,h.y)}function g(h,D,w){var z=D[0]-w[0]*h.k,v=D[1]-w[1]*h.k;return z===h.x&&v===h.y?h:new mt(h.k,z,v)}function _(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function R(h,D,w,z){h.on("start.zoom",function(){P(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(z).end()}).tween("zoom",function(){var v=this,E=arguments,x=P(v,E).event(z),L=t.apply(v,E),K=w==null?_(L):typeof w=="function"?w.apply(v,E):w,te=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),ie=v.__zoom,j=typeof D=="function"?D.apply(v,E):D,A=s(ie.invert(K).concat(te/ie.k),j.invert(K).concat(te/j.k));return function(O){if(O===1)O=j;else{var q=A(O),J=te/q[2];O=new mt(J,K[0]-q[0]*J,K[1]-q[1]*J)}x.zoom(null,O)}})}function P(h,D,w){return!w&&h.__zooming||new Z(h,D)}function Z(h,D){this.that=h,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,D),this.taps=0}Z.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,D){return this.mouse&&h!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var D=Nt(this.that).datum();u.call(h,this.that,new c0(h,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),D)}};function U(h,...D){if(!e.apply(this,arguments))return;var w=P(this,D).event(h),z=this.__zoom,v=Math.max(r[0],Math.min(r[1],z.k*Math.pow(2,o.apply(this,arguments)))),E=xt(h);if(w.wheel)(w.mouse[0][0]!==E[0]||w.mouse[0][1]!==E[1])&&(w.mouse[1]=z.invert(w.mouse[0]=E)),clearTimeout(w.wheel);else{if(z.k===v)return;w.mouse=[E,z.invert(E)],fo(this),w.start()}cn(h),w.wheel=setTimeout(x,N),w.zoom("mouse",n(g(m(z,v),w.mouse[0],w.mouse[1]),w.extent,l));function x(){w.wheel=null,w.end()}}function Q(h,...D){if(p||!e.apply(this,arguments))return;var w=h.currentTarget,z=P(this,D,!0).event(h),v=Nt(h.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",te,!0),E=xt(h,w),x=h.clientX,L=h.clientY;Ny(h.view),si(h),z.mouse=[E,this.__zoom.invert(E)],fo(this),z.start();function K(ie){if(cn(ie),!z.moved){var j=ie.clientX-x,A=ie.clientY-L;z.moved=j*j+A*A>$}z.event(ie).zoom("mouse",n(g(z.that.__zoom,z.mouse[0]=xt(ie,w),z.mouse[1]),z.extent,l))}function te(ie){v.on("mousemove.zoom mouseup.zoom",null),Ey(ie.view,z.moved),cn(ie),z.event(ie).end()}}function G(h,...D){if(e.apply(this,arguments)){var w=this.__zoom,z=xt(h.changedTouches?h.changedTouches[0]:h,this),v=w.invert(z),E=w.k*(h.shiftKey?.5:2),x=n(g(m(w,E),z,v),t.apply(this,D),l);cn(h),a>0?Nt(this).transition().duration(a).call(R,x,z,h):Nt(this).call(b.transform,x,z,h)}}function V(h,...D){if(e.apply(this,arguments)){var w=h.touches,z=w.length,v=P(this,D,h.changedTouches.length===z).event(h),E,x,L,K;for(si(h),x=0;x<z;++x)L=w[x],K=xt(L,this),K=[K,this.__zoom.invert(K),L.identifier],v.touch0?!v.touch1&&v.touch0[2]!==K[2]&&(v.touch1=K,v.taps=0):(v.touch0=K,E=!0,v.taps=1+!!c);c&&(c=clearTimeout(c)),E&&(v.taps<2&&(d=K[0],c=setTimeout(function(){c=null},f)),fo(this),v.start())}}function y(h,...D){if(this.__zooming){var w=P(this,D).event(h),z=h.changedTouches,v=z.length,E,x,L,K;for(cn(h),E=0;E<v;++E)x=z[E],L=xt(x,this),w.touch0&&w.touch0[2]===x.identifier?w.touch0[0]=L:w.touch1&&w.touch1[2]===x.identifier&&(w.touch1[0]=L);if(x=w.that.__zoom,w.touch1){var te=w.touch0[0],ie=w.touch0[1],j=w.touch1[0],A=w.touch1[1],O=(O=j[0]-te[0])*O+(O=j[1]-te[1])*O,q=(q=A[0]-ie[0])*q+(q=A[1]-ie[1])*q;x=m(x,Math.sqrt(O/q)),L=[(te[0]+j[0])/2,(te[1]+j[1])/2],K=[(ie[0]+A[0])/2,(ie[1]+A[1])/2]}else if(w.touch0)L=w.touch0[0],K=w.touch0[1];else return;w.zoom("touch",n(g(x,L,K),w.extent,l))}}function Y(h,...D){if(this.__zooming){var w=P(this,D).event(h),z=h.changedTouches,v=z.length,E,x;for(si(h),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),E=0;E<v;++E)x=z[E],w.touch0&&w.touch0[2]===x.identifier?delete w.touch0:w.touch1&&w.touch1[2]===x.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(x=xt(x,this),Math.hypot(d[0]-x[0],d[1]-x[1])<T)){var L=Nt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return b.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:no(+h),b):o},b.filter=function(h){return arguments.length?(e=typeof h=="function"?h:no(!!h),b):e},b.touchable=function(h){return arguments.length?(i=typeof h=="function"?h:no(!!h),b):i},b.extent=function(h){return arguments.length?(t=typeof h=="function"?h:no([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),b):t},b.scaleExtent=function(h){return arguments.length?(r[0]=+h[0],r[1]=+h[1],b):[r[0],r[1]]},b.translateExtent=function(h){return arguments.length?(l[0][0]=+h[0][0],l[1][0]=+h[1][0],l[0][1]=+h[0][1],l[1][1]=+h[1][1],b):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},b.constrain=function(h){return arguments.length?(n=h,b):n},b.duration=function(h){return arguments.length?(a=+h,b):a},b.interpolate=function(h){return arguments.length?(s=h,b):s},b.on=function(){var h=u.on.apply(u,arguments);return h===u?b:h},b.clickDistance=function(h){return arguments.length?($=(h=+h)*h,b):Math.sqrt($)},b.tapDistance=function(h){return arguments.length?(T=+h,b):T},b}const as=Symbol("MiniMapSlots"),y0=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],v0={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},b0=ye({...v0,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=Ht(as),i=zi(),r=Ee(()=>i.style??{});function l(d){t("click",d)}function a(d){t("dblclick",d)}function s(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,p)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(H(),W(Pe,{key:0},[B(o)[`node-${n.type}`]?(H(),$e(dt(B(o)[`node-${n.type}`]),ws(ho({key:0},{...n,...d.$attrs})),null,16)):(H(),W("rect",ho({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||r.value.background||r.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:l,onDblclick:a,onMouseenter:s,onMousemove:u,onMouseleave:c}),null,16,y0))],64)):ve("",!0)}}),w0=["width","height","viewBox","aria-labelledby"],_0=["id"],x0=["d","fill","stroke","stroke-width"],S0={name:"MiniMap",compatConfig:{MODE:3}},$0=ye({...S0,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Nl(),o=zi(),i=200,r=150,{id:l,edges:a,viewport:s,translateExtent:u,dimensions:c,emits:d,d3Selection:p,d3Zoom:f,getNodesInitialized:N}=Ce(),$=fe();Bt(as,n);const T=Ee(()=>{var v;return e.width??((v=o.style)==null?void 0:v.width)??i}),b=Ee(()=>{var v;return e.height??((v=o.style)==null?void 0:v.height)??r}),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",g=F(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),_=F(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),R=F(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),P=F(()=>Gi(N.value.filter(v=>!v.hidden))),Z=F(()=>({x:-s.value.x/s.value.zoom,y:-s.value.y/s.value.zoom,width:c.value.width/s.value.zoom,height:c.value.height/s.value.zoom})),U=F(()=>N.value&&N.value.length?tf(P.value,Z.value):Z.value),Q=F(()=>{const v=U.value.width/T.value,E=U.value.height/b.value;return Math.max(v,E)}),G=F(()=>{const v=Q.value*T.value,E=Q.value*b.value,x=e.offsetScale*Q.value;return{offset:x,x:U.value.x-(v-U.value.width)/2-x,y:U.value.y-(E-U.value.height)/2-x,width:v+x*2,height:E+x*2}}),V=F(()=>!G.value.x||!G.value.y?"":`
    M${G.value.x-G.value.offset},${G.value.y-G.value.offset}
    h${G.value.width+G.value.offset*2}
    v${G.value.height+G.value.offset*2}
    h${-G.value.width-G.value.offset*2}z
    M${Z.value.x+e.maskBorderRadius},${Z.value.y}
    h${Z.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${Z.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(Z.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(Z.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);bs(v=>{if($.value){const E=Nt($.value),x=te=>{if(te.sourceEvent.type!=="wheel"||!p.value||!f.value)return;const ie=te.sourceEvent.ctrlKey&&Dn()?10:1,j=-te.sourceEvent.deltaY*(te.sourceEvent.deltaMode===1?.05:te.sourceEvent.deltaMode?1:.002)*e.zoomStep,A=s.value.zoom*2**(j*ie);f.value.scaleTo(p.value,A)},L=te=>{if(te.sourceEvent.type!=="mousemove"||!p.value||!f.value)return;const ie=Q.value*Math.max(1,s.value.zoom)*(e.inversePan?-1:1),j={x:s.value.x-te.sourceEvent.movementX*ie,y:s.value.y-te.sourceEvent.movementY*ie},A=[[0,0],[c.value.width,c.value.height]],O=or.translate(j.x,j.y).scale(s.value.zoom),q=f.value.constrain()(O,A,u.value);f.value.transform(p.value,q)},K=m0().wheelDelta(te=>Si(te)*(e.zoomStep/10)).on("zoom",e.pannable?L:()=>{}).on("zoom.wheel",e.zoomable?x:()=>{});E.call(K),v(()=>{E.on("zoom",null)})}},{flush:"post"});function y(v){const[E,x]=xt(v);t("click",{event:v,position:{x:E,y:x}})}function Y(v,E){const x={event:v,node:E,connectedEdges:Tt([E],a.value)};d.miniMapNodeClick(x),t("nodeClick",x)}function h(v,E){const x={event:v,node:E,connectedEdges:Tt([E],a.value)};d.miniMapNodeDoubleClick(x),t("nodeDblclick",x)}function D(v,E){const x={event:v,node:E,connectedEdges:Tt([E],a.value)};d.miniMapNodeMouseEnter(x),t("nodeMouseenter",x)}function w(v,E){const x={event:v,node:E,connectedEdges:Tt([E],a.value)};d.miniMapNodeMouseMove(x),t("nodeMousemove",x)}function z(v,E){const x={event:v,node:E,connectedEdges:Tt([E],a.value)};d.miniMapNodeMouseLeave(x),t("nodeMouseleave",x)}return(v,E)=>(H(),$e(B(Wi),{position:v.position,class:xe(["vue-flow__minimap",{pannable:v.pannable,zoomable:v.zoomable}])},{default:Xe(()=>[(H(),W("svg",{ref_key:"el",ref:$,width:T.value,height:b.value,viewBox:[G.value.x,G.value.y,G.value.width,G.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${B(l)}`,onClick:y},[v.ariaLabel?(H(),W("title",{key:0,id:`vue-flow__minimap-${B(l)}`},Ne(v.ariaLabel),9,_0)):ve("",!0),(H(!0),W(Pe,null,ft(B(N),x=>(H(),$e(b0,{id:x.id,key:x.id,f:"",position:x.computedPosition,dimensions:x.dimensions,selected:x.selected,dragging:x.dragging,style:de(x.style),class:xe(R.value(x)),color:g.value(x),"border-radius":v.nodeBorderRadius,"stroke-color":_.value(x),"stroke-width":v.nodeStrokeWidth,"shape-rendering":B(m),type:x.type,hidden:x.hidden,onClick:L=>Y(L,x),onDblclick:L=>h(L,x),onMouseenter:L=>D(L,x),onMousemove:L=>w(L,x),onMouseleave:L=>z(L,x)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),C("path",{class:"vue-flow__minimap-mask",d:V.value,fill:v.maskColor,stroke:v.maskStrokeColor,"stroke-width":v.maskStrokeWidth,"fill-rule":"evenodd"},null,8,x0)],8,w0))]),_:1},8,["position","class"]))}}),N0=["d"],E0=["d"],k0=["d","stroke"],C0=["d","stroke"],M0=["d","stroke"],T0=ye({__name:"AnimatedEdge",props:{id:{},sourceNode:{},targetNode:{},source:{},target:{},type:{},label:{type:[String,Object,Function]},style:{},selected:{type:Boolean},sourcePosition:{},targetPosition:{},sourceHandleId:{},targetHandleId:{},animated:{type:Boolean},updatable:{type:Boolean},markerStart:{},markerEnd:{},curvature:{},interactionWidth:{},data:{},events:{},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{},sourceX:{},sourceY:{},targetX:{},targetY:{}},setup(e){const t=e,n=Xt(),o=We(),i=F(()=>Eo({sourceX:t.sourceX,sourceY:t.sourceY,sourcePosition:t.sourcePosition,targetX:t.targetX,targetY:t.targetY,targetPosition:t.targetPosition,borderRadius:8})),r=F(()=>{var $,T;const p=(T=($=t.sourceNode)==null?void 0:$.data)==null?void 0:T.nodeType;if(!p)return"any";const f=o.getDefinition(p);if(!f)return"any";const N=f.outputs.find(b=>b.id===t.sourceHandleId);return(N==null?void 0:N.type)??"any"}),l=F(()=>{const p=Ge[r.value];return(p==null?void 0:p.color)??"#D4D4D4"}),a=F(()=>{var p,f;return((p=t.sourceNode)==null?void 0:p.selected)||((f=t.targetNode)==null?void 0:f.selected)}),s=F(()=>{var p,f;return((p=t.targetNode)==null?void 0:p.selected)&&!((f=t.sourceNode)!=null&&f.selected)}),u=F(()=>{var p,f;return((p=t.sourceNode)==null?void 0:p.selected)&&!((f=t.targetNode)!=null&&f.selected)}),c=F(()=>n.isRunning),d=F(()=>t.selected);return(p,f)=>(H(),W("g",{class:xe(["edge-group",{selected:d.value,"connected-selected":a.value}])},[C("path",{d:i.value[0],fill:"none",stroke:"transparent","stroke-width":"20",class:"edge-interaction-area"},null,8,N0),d.value?(H(),W("path",{key:0,d:i.value[0],fill:"none",stroke:"var(--color-primary-300)","stroke-width":"6","stroke-linecap":"round",class:"edge-selection"},null,8,E0)):ve("",!0),pe(B(Ln),{id:e.id,path:i.value[0],"marker-end":e.markerEnd,style:de({stroke:l.value,strokeWidth:d.value?3:2})},null,8,["id","path","marker-end","style"]),a.value&&!d.value?(H(),W("path",{key:1,d:i.value[0],fill:"none",stroke:l.value,"stroke-width":"10","stroke-linecap":"round","stroke-dasharray":"12 24",class:xe(["edge-chase-glow",{"chase-incoming":s.value,"chase-outgoing":u.value,"chase-both":!s.value&&!u.value}])},null,10,k0)):ve("",!0),a.value&&!d.value?(H(),W("path",{key:2,d:i.value[0],fill:"none",stroke:l.value,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":"12 24",class:xe(["edge-chase",{"chase-incoming":s.value,"chase-outgoing":u.value,"chase-both":!s.value&&!u.value}])},null,10,C0)):ve("",!0),c.value?(H(),W("path",{key:3,d:i.value[0],fill:"none",stroke:l.value,"stroke-width":"4","stroke-linecap":"round",class:"edge-animation",style:{opacity:.6}},null,8,M0)):ve("",!0)],2))}}),I0=Ke(T0,[["__scopeId","data-v-fd62e63f"]]),D0={any:["any","trigger","number","string","boolean","audio","video","texture","data","array","scene3d","object3d","geometry3d","material3d","camera3d","light3d","transform3d"],trigger:["trigger","any"],number:["number","string","boolean","any"],string:["string","any"],boolean:["boolean","number","string","any"],audio:["audio","any"],video:["video","any"],texture:["texture","any"],data:["data","string","any"],array:["array","data","any"],scene3d:["scene3d","any"],object3d:["object3d","any"],geometry3d:["geometry3d","any"],material3d:["material3d","any"],camera3d:["camera3d","any"],light3d:["light3d","object3d","any"],transform3d:["transform3d","data","any"]};function P0(e,t){return t==="any"?!0:(D0[e]??[]).includes(t)}function dl(e,t,n,o){if(!e)return;if(e.id==="trigger"&&n==="output"&&t==="trigger"){const l=o==null?void 0:o.outputType;return l&&["boolean","number","string","json","timestamp"].includes(l)?l==="json"?"data":l==="timestamp"?"number":l:"trigger"}const r=(n==="input"?e.inputs:e.outputs).find(l=>l.id===t);return r==null?void 0:r.type}function A0(e,t,n){var $,T;const{source:o,sourceHandle:i,target:r,targetHandle:l}=e;if(!o||!r||!i||!l)return{valid:!1,reason:"Missing connection data"};if(o===r)return{valid:!1,reason:"Cannot connect node to itself"};const a=n(o),s=n(r);if(!a||!s)return{valid:!1,reason:"Node data not found"};const u=a.nodeType,c=s.nodeType,d=t(u),p=t(c);if(!d||!p)return{valid:!0};const f=dl(d,i,"output",a),N=dl(p,l,"input",s);if(!f||!N)return{valid:!0};if(!P0(f,N)){const b=(($=Ge[f])==null?void 0:$.label)??f,m=((T=Ge[N])==null?void 0:T.label)??N;return{valid:!1,reason:`Cannot connect ${b} to ${m}`}}return{valid:!0}}const z0=_s("history",{state:()=>({undoStacks:new Map,redoStacks:new Map,maxHistorySize:50,isUndoingOrRedoing:!1}),getters:{canUndo:e=>t=>{const n=e.undoStacks.get(t);return n?n.length>0:!1},canRedo:e=>t=>{const n=e.redoStacks.get(t);return n?n.length>0:!1},undoStackSize:e=>t=>{var n;return((n=e.undoStacks.get(t))==null?void 0:n.length)??0},redoStackSize:e=>t=>{var n;return((n=e.redoStacks.get(t))==null?void 0:n.length)??0},lastUndoDescription:e=>t=>{const n=e.undoStacks.get(t);return!n||n.length===0?null:n[n.length-1].description},lastRedoDescription:e=>t=>{const n=e.redoStacks.get(t);return!n||n.length===0?null:n[n.length-1].description}},actions:{recordChange(e,t,n,o){if(this.isUndoingOrRedoing)return;let i=this.undoStacks.get(e);i||(i=[],this.undoStacks.set(e,i));const r={flowId:e,before:t,after:n,description:o};i.push(r),i.length>this.maxHistorySize&&i.shift(),this.redoStacks.set(e,[])},undo(e){const t=this.undoStacks.get(e);if(!t||t.length===0)return null;const n=t.pop();let o=this.redoStacks.get(e);return o||(o=[],this.redoStacks.set(e,o)),o.push(n),n.before},redo(e){const t=this.redoStacks.get(e);if(!t||t.length===0)return null;const n=t.pop();let o=this.undoStacks.get(e);return o||(o=[],this.undoStacks.set(e,o)),o.push(n),n.after},setUndoingOrRedoing(e){this.isUndoingOrRedoing=e},clearHistory(e){this.undoStacks.delete(e),this.redoStacks.delete(e)},clearAllHistory(){this.undoStacks.clear(),this.redoStacks.clear()}}});function pl(e,t){return{nodes:JSON.parse(JSON.stringify(e)),edges:JSON.parse(JSON.stringify(t)),timestamp:Date.now()}}function R0(){const e=bt(),t=z0(),n=F(()=>{const f=e.activeFlowId;return f?t.canUndo(f):!1}),o=F(()=>{const f=e.activeFlowId;return f?t.canRedo(f):!1}),i=F(()=>{const f=e.activeFlowId;return f?t.lastUndoDescription(f):null}),r=F(()=>{const f=e.activeFlowId;return f?t.lastRedoDescription(f):null});function l(){return e.activeFlow?pl(e.activeFlow.nodes,e.activeFlow.edges):null}function a(f,N){if(!f||!e.activeFlow||!e.activeFlowId)return;const $=pl(e.activeFlow.nodes,e.activeFlow.edges);JSON.stringify(f)!==JSON.stringify($)&&t.recordChange(e.activeFlowId,f,$,N)}function s(f,N){const $=l(),T=N();return a($,f),T}function u(){if(!e.activeFlow||!e.activeFlowId)return!1;const f=t.undo(e.activeFlowId);if(!f)return!1;t.setUndoingOrRedoing(!0);try{e.activeFlow.nodes=JSON.parse(JSON.stringify(f.nodes)),e.activeFlow.edges=JSON.parse(JSON.stringify(f.edges))}finally{t.setUndoingOrRedoing(!1)}return!0}function c(){if(!e.activeFlow||!e.activeFlowId)return!1;const f=t.redo(e.activeFlowId);if(!f)return!1;t.setUndoingOrRedoing(!0);try{e.activeFlow.nodes=JSON.parse(JSON.stringify(f.nodes)),e.activeFlow.edges=JSON.parse(JSON.stringify(f.edges))}finally{t.setUndoingOrRedoing(!1)}return!0}function d(){return l()}function p(f,N){a(f,N)}return{canUndo:n,canRedo:o,undoDescription:i,redoDescription:r,beforeAction:l,afterAction:a,withHistory:s,undo:u,redo:c,startBatch:d,endBatch:p}}const fl=["debug","inputs","outputs","math","logic","audio","video","visual","shaders","data","ai","code","3d","connectivity","subflows","custom"],hl=["trigger","number","string","boolean","audio","video","texture","data","array","any"],gl=["web","electron"],ml=["number","text","toggle","slider","select","code","color"];class Re extends Error{constructor(t,n,o){super(t),this.field=n,this.value=o,this.name="ValidationError"}}function ze(e,t,n=1){if(typeof e!="string")throw new Re(`${t} must be a string`,t,e);if(e.length<n)throw new Re(`${t} must be at least ${n} character(s)`,t,e);return e}function dn(e,t){if(!Array.isArray(e))throw new Re(`${t} must be an array`,t,e);return e}function yl(e,t,n){if(typeof e!="object"||e===null)throw new Re(`${n}s[${t}] must be an object`,`${n}s[${t}]`,e);const o=e,i=ze(o.id,`${n}s[${t}].id`),r=ze(o.label,`${n}s[${t}].label`),l=ze(o.type,`${n}s[${t}].type`);if(!hl.includes(l))throw new Re(`${n}s[${t}].type must be one of: ${hl.join(", ")}`,`${n}s[${t}].type`,l);const a={id:i,type:l,label:r};return o.description!==void 0&&(a.description=ze(o.description,`${n}s[${t}].description`,0)),o.required!==void 0&&(a.required=!!o.required),o.multiple!==void 0&&(a.multiple=!!o.multiple),o.default!==void 0&&(a.default=o.default),a}function B0(e,t){if(typeof e!="object"||e===null)throw new Re(`controls[${t}] must be an object`,`controls[${t}]`,e);const n=e,o=ze(n.id,`controls[${t}].id`),i=ze(n.label,`controls[${t}].label`),r=ze(n.type,`controls[${t}].type`);if(!ml.includes(r))throw new Re(`controls[${t}].type must be one of: ${ml.join(", ")}`,`controls[${t}].type`,r);const l={id:o,type:r,label:i};if(n.description!==void 0&&(l.description=ze(n.description,`controls[${t}].description`,0)),n.default!==void 0&&(l.default=n.default),n.exposable!==void 0&&(l.exposable=!!n.exposable),n.bindable!==void 0&&(l.bindable=!!n.bindable),n.props!==void 0){if(typeof n.props!="object"||n.props===null)throw new Re(`controls[${t}].props must be an object`,`controls[${t}].props`,n.props);l.props=n.props}return l}function vl(e){if(typeof e!="object"||e===null)throw new Re("Definition must be an object");const t=e,n=ze(t.id,"id"),o=ze(t.name,"name"),i=ze(t.version,"version"),r=ze(t.description,"description",0),l=ze(t.icon,"icon"),a=ze(t.category,"category");if(!fl.includes(a))throw new Re(`category must be one of: ${fl.join(", ")}`,"category",a);const s=dn(t.platforms,"platforms");if(s.length===0)throw new Re("platforms must contain at least one platform","platforms",s);const u=s.map((_,R)=>{const P=ze(_,`platforms[${R}]`);if(!gl.includes(P))throw new Re(`platforms[${R}] must be one of: ${gl.join(", ")}`,`platforms[${R}]`,P);return P}),d=dn(t.inputs,"inputs").map((_,R)=>yl(_,R,"input")),f=dn(t.outputs,"outputs").map((_,R)=>yl(_,R,"output")),$=dn(t.controls,"controls").map((_,R)=>B0(_,R));if(new Set(d.map(_=>_.id)).size!==d.length)throw new Re("Duplicate input port IDs found","inputs");if(new Set(f.map(_=>_.id)).size!==f.length)throw new Re("Duplicate output port IDs found","outputs");if(new Set($.map(_=>_.id)).size!==$.length)throw new Re("Duplicate control IDs found","controls");const g={id:n,name:o,version:i,category:a,description:r,icon:l,platforms:u,inputs:d,outputs:f,controls:$};if(t.color!==void 0&&(g.color=ze(t.color,"color")),t.webFallback!==void 0&&(g.webFallback=ze(t.webFallback,"webFallback")),t.tags!==void 0){const _=dn(t.tags,"tags");g.tags=_.map((R,P)=>ze(R,`tags[${P}]`))}return g}class yn extends Error{constructor(t,n){super(t),this.originalError=n,this.name="CompilationError"}}function bl(e,t){let n=e.trim();if(n=n.replace(/export\s+default\s+function\s*\w*\s*\(/,"return function("),n=n.replace(/export\s+default\s+(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/,"return $1 =>"),!n.startsWith("return"))if(n.match(/^function\s*\w*\s*\(/))n="return "+n;else if(n.match(/^\([^)]*\)\s*=>/)||n.match(/^[a-zA-Z_$][a-zA-Z0-9_$]*\s*=>/))n="return "+n;else throw new yn(`Invalid executor format for node "${t}". Expected "export default function(ctx) { ... }" or "export default (ctx) => { ... }"`);try{const i=new Function(n)();if(typeof i!="function")throw new yn(`Executor for node "${t}" must export a function`);return async l=>{try{const a=await i(l);return a instanceof Map?a:typeof a=="object"&&a!==null&&!Array.isArray(a)?new Map(Object.entries(a)):(console.warn(`Executor for node "${t}" returned ${typeof a}, expected Map. Returning empty output.`),new Map)}catch(a){return console.error(`Error in custom executor "${t}":`,a),new Map}}}catch(o){throw o instanceof yn?o:new yn(`Failed to compile executor for node "${t}": ${o instanceof Error?o.message:String(o)}`,o instanceof Error?o:void 0)}}class O0{constructor(){Gt(this,"loadedNodes",new Map);Gt(this,"loadErrors",[]);Gt(this,"watcherCleanup",null);Gt(this,"initialized",!1);Gt(this,"onReloadCallbacks",new Set)}isElectron(){var t;return typeof window<"u"&&!!((t=window.electronAPI)!=null&&t.isElectron)}async initialize(){if(this.initialized){console.warn("CustomNodeLoader already initialized");return}if(this.initialized=!0,!this.isElectron()){console.log("CustomNodeLoader: Running in web mode, file-based custom nodes disabled");return}await this.loadAllNodes(),await this.startWatching()}async loadAllNodes(){if(!this.isElectron())return[];const t=window.electronAPI.customNodes;this.loadErrors=[];const n=await t.scanDirectory();if(!n.success)return console.warn("Failed to scan custom-nodes directory:",n.error),[];const o=[];for(const i of n.packages)try{const r=await this.loadNode(i);r&&o.push(r)}catch(r){console.error(`Failed to load custom node "${i}":`,r)}return console.log(`CustomNodeLoader: Loaded ${o.length} custom nodes`),o}async loadNode(t){if(!this.isElectron())throw new Error("Custom node loading only supported in Electron");const n=window.electronAPI.customNodes,o=await n.readDefinition(t);if(!o.success||!o.definition)return this.recordError(t,o.error??"Failed to read definition","load"),null;let i;try{i=vl(o.definition)}catch(c){const d=c instanceof Re?c.message:String(c);return this.recordError(t,d,"validation"),null}const r=await n.readExecutor(t);if(!r.success||!r.code)return this.recordError(t,r.error??"Failed to read executor","load"),null;let l;try{l=bl(r.code,i.id)}catch(c){const d=c instanceof yn?c.message:String(c);return this.recordError(t,d,"compilation"),null}this.loadedNodes.has(i.id)&&this.unloadNode(i.id),We().register(i),Uo().registerExecutor(i.id,l);const u={packageName:t,definition:i,executor:l,loadedAt:Date.now()};return this.loadedNodes.set(i.id,u),console.log(`CustomNodeLoader: Loaded "${i.name}" (${i.id})`),u}unloadNode(t){if(!this.loadedNodes.get(t))return;We().unregister(t),Uo().unregisterExecutor(t),this.loadedNodes.delete(t),console.log(`CustomNodeLoader: Unloaded "${t}"`)}async reloadNode(t){console.log(`CustomNodeLoader: Reloading "${t}"`);for(const[o,i]of this.loadedNodes)if(i.packageName===t){this.unloadNode(o);break}this.loadErrors=this.loadErrors.filter(o=>o.packageName!==t),await this.loadNode(t)&&this.notifyReload(t)}async startWatching(){if(!this.isElectron())return;const t=window.electronAPI.customNodes,n=await t.watchDirectory();if(!n.success){console.warn("Failed to start custom-nodes watcher:",n.error);return}this.watcherCleanup=t.onFileChange(async o=>{const i=`reload:${o.packageName}`;this[i]||(this[i]=!0,setTimeout(async()=>{this[i]=!1,await this.reloadNode(o.packageName)},300))}),console.log("CustomNodeLoader: File watcher started")}async stopWatching(){this.watcherCleanup&&(this.watcherCleanup(),this.watcherCleanup=null),this.isElectron()&&await window.electronAPI.customNodes.stopWatching()}recordError(t,n,o){this.loadErrors.push({packageName:t,error:n,type:o})}getLoadedNodes(){return Array.from(this.loadedNodes.values())}getLoadErrors(){return[...this.loadErrors]}isCustomNode(t){return this.loadedNodes.has(t)}onReload(t){return this.onReloadCallbacks.add(t),()=>{this.onReloadCallbacks.delete(t)}}notifyReload(t){for(const n of this.onReloadCallbacks)n(t)}loadFromCode(t,n){let o;try{o=JSON.parse(t)}catch{throw new Re("Invalid JSON in definition")}const i=vl(o),r=bl(n,i.id);this.loadedNodes.has(i.id)&&this.unloadNode(i.id),We().register(i),Uo().registerExecutor(i.id,r);const s={packageName:`web:${i.id}`,definition:i,executor:r,loadedAt:Date.now()};return this.loadedNodes.set(i.id,s),s}async dispose(){await this.stopWatching();for(const t of this.loadedNodes.keys())this.unloadNode(t);this.initialized=!1}}let ui=null;function V0(){return ui||(ui=new O0),ui}const L0={id:"constant",name:"Constant",version:"1.0.0",category:"inputs",description:"Output a constant value",icon:"hash",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"number",label:"Value",default:0,exposable:!0}]},F0={id:"slider",name:"Slider",version:"1.0.0",category:"inputs",description:"Slider control (0-1)",icon:"sliders-horizontal",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"slider",label:"Value",default:.5,exposable:!0,props:{min:0,max:1,step:.01}}]},H0={id:"audio-input",name:"Audio Input",version:"1.0.0",category:"audio",description:"Capture audio from microphone",icon:"mic",platforms:["web","electron"],inputs:[],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"level",type:"number",label:"Level"},{id:"beat",type:"trigger",label:"Beat"}],controls:[{id:"source",type:"select",label:"Source",default:"default"}]},Y0={id:"trigger",name:"Trigger",version:"1.0.0",category:"inputs",description:"Manual trigger button with various output types",icon:"zap",platforms:["web","electron"],inputs:[],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[{id:"outputType",type:"select",label:"Type",default:"boolean",props:{options:["boolean","number","string","json","timestamp"]}},{id:"value",type:"toggle",label:"Value",default:!1},{id:"stringValue",type:"text",label:"String Value",default:""},{id:"jsonValue",type:"text",label:"JSON Value",default:"{}"}]},X0={class:"node-body"},G0={class:"control-row"},U0={key:0,class:"control-row"},Z0={class:"value-toggle"},q0={key:1,class:"control-row control-row-full"},W0={key:2,class:"control-row control-row-full"},K0={key:3,class:"control-row"},j0={class:"output-row"},J0=ye({__name:"TriggerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=Xt(),i=We(),r=fe(!1),l=F(()=>{var m,g;const b=((m=t.data)==null?void 0:m.nodeType)??"trigger";return i.getDefinition(b)??((g=t.data)==null?void 0:g.definition)??null}),a=F(()=>{var b;return l.value?((b=lt[l.value.category])==null?void 0:b.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),s=F({get:()=>{var b;return((b=t.data)==null?void 0:b.outputType)??"boolean"},set:b=>{n.updateNodeData(t.id,{outputType:b})}}),u=F({get:()=>{var b;return((b=t.data)==null?void 0:b.value)??!1},set:b=>{n.updateNodeData(t.id,{value:b})}}),c=F({get:()=>{var b;return((b=t.data)==null?void 0:b.stringValue)??""},set:b=>{n.updateNodeData(t.id,{stringValue:b})}}),d=F({get:()=>{var b;return((b=t.data)==null?void 0:b.jsonValue)??"{}"},set:b=>{n.updateNodeData(t.id,{jsonValue:b})}}),p=F(()=>{var m;const b=o.nodeMetrics.get(t.id);return(m=b==null?void 0:b.outputValues)==null?void 0:m.trigger}),f=F(()=>{switch(s.value){case"boolean":return u.value?"true":"false";case"number":return u.value?"1":"0";case"string":return c.value||"(empty)";case"json":return d.value.slice(0,20)+(d.value.length>20?"...":"");case"timestamp":return"now()";default:return String(p.value??u.value)}});function N(){const b=!u.value;n.updateNodeData(t.id,{value:b}),setTimeout(()=>{n.updateNodeData(t.id,{value:!b})},100)}function $(){r.value=!r.value}function T(b){var m;return((m=Ge[b])==null?void 0:m.color)??"var(--color-neutral-400)"}return(b,m)=>r.value?(H(),W("div",{key:0,class:xe(["trigger-node trigger-node-collapsed",{selected:t.selected}])},[C("button",{class:"trigger-btn-large",onClick:he(N,["stop"]),onMousedown:m[0]||(m[0]=he(()=>{},["stop"]))},[pe(B(Zo),{size:20}),m[12]||(m[12]=C("span",null,"TRIGGER",-1))],32),pe(B(Me),{id:"trigger",type:"source",position:B(ee).Right,style:de({background:T("trigger")}),class:"port-handle port-handle-collapsed"},null,8,["position","style"]),C("button",{class:"expand-btn",onClick:he($,["stop"])},[pe(B(xn),{size:12})])],2)):(H(),W("div",{key:1,class:xe(["trigger-node",{selected:t.selected}])},[C("div",{class:"node-header",style:de({borderLeftColor:a.value})},[pe(B(Zo),{size:14,class:"header-icon"}),m[13]||(m[13]=C("span",{class:"node-title"},"Trigger",-1)),C("button",{class:"node-collapse-btn",onClick:he($,["stop"])},[pe(B(Sn),{size:14})])],4),C("div",X0,[C("div",G0,[m[15]||(m[15]=C("label",{class:"control-label"},"TYPE",-1)),vn(C("select",{"onUpdate:modelValue":m[1]||(m[1]=g=>s.value=g),class:"type-select",onMousedown:m[2]||(m[2]=he(()=>{},["stop"]))},[...m[14]||(m[14]=[Ss('<option value="boolean" data-v-e8c803e2> Boolean </option><option value="number" data-v-e8c803e2> Number </option><option value="string" data-v-e8c803e2> String </option><option value="json" data-v-e8c803e2> JSON </option><option value="timestamp" data-v-e8c803e2> Timestamp </option>',5)])],544),[[xs,s.value]])]),s.value==="boolean"||s.value==="number"?(H(),W("div",U0,[m[16]||(m[16]=C("label",{class:"control-label"},"VALUE",-1)),C("div",Z0,[C("button",{class:xe(["value-btn",{active:!u.value,"false-btn":!0}]),onClick:m[3]||(m[3]=he(g=>u.value=!1,["stop"])),onMousedown:m[4]||(m[4]=he(()=>{},["stop"]))},Ne(s.value==="number"?"0":"FALSE"),35),C("button",{class:xe(["value-btn",{active:u.value,"true-btn":!0}]),onClick:m[5]||(m[5]=he(g=>u.value=!0,["stop"])),onMousedown:m[6]||(m[6]=he(()=>{},["stop"]))},Ne(s.value==="number"?"1":"TRUE"),35)])])):s.value==="string"?(H(),W("div",q0,[m[17]||(m[17]=C("label",{class:"control-label"},"VALUE",-1)),vn(C("input",{"onUpdate:modelValue":m[7]||(m[7]=g=>c.value=g),type:"text",class:"string-input",placeholder:"Enter string...",onMousedown:m[8]||(m[8]=he(()=>{},["stop"]))},null,544),[[go,c.value]])])):s.value==="json"?(H(),W("div",W0,[m[18]||(m[18]=C("label",{class:"control-label"},"JSON",-1)),vn(C("textarea",{"onUpdate:modelValue":m[9]||(m[9]=g=>d.value=g),class:"json-input",placeholder:'{"key": "value"}',rows:"2",onMousedown:m[10]||(m[10]=he(()=>{},["stop"]))},null,544),[[go,d.value]])])):s.value==="timestamp"?(H(),W("div",K0,[...m[19]||(m[19]=[C("label",{class:"control-label"},"VALUE",-1),C("span",{class:"timestamp-info"},"Current timestamp on trigger",-1)])])):ve("",!0),C("button",{class:"trigger-btn",onClick:he(N,["stop"]),onMousedown:m[11]||(m[11]=he(()=>{},["stop"]))},[pe(B(Zo),{size:16}),m[20]||(m[20]=C("span",null,"TRIGGER",-1))],32),C("div",j0,[m[21]||(m[21]=C("span",{class:"output-label"},"Output:",-1)),C("span",{class:xe(["output-value",{"value-true":u.value&&(s.value==="boolean"||s.value==="number")}])},Ne(f.value),3),pe(B(Me),{id:"trigger",type:"source",position:B(ee).Right,style:de({background:T("trigger")}),class:"port-handle"},null,8,["position","style"])])])],2))}}),Q0=Ke(J0,[["__scopeId","data-v-e8c803e2"]]),eb={id:"xy-pad",name:"XY Pad",version:"1.0.0",category:"inputs",description:"2D position controller with X/Y outputs",icon:"move",platforms:["web","electron"],inputs:[],outputs:[{id:"rawX",type:"number",label:"Raw X"},{id:"rawY",type:"number",label:"Raw Y"},{id:"normX",type:"number",label:"0-1 X"},{id:"normY",type:"number",label:"0-1 Y"}],controls:[{id:"normalizedX",type:"number",label:"X",default:.5,exposable:!0},{id:"normalizedY",type:"number",label:"Y",default:.5,exposable:!0},{id:"minX",type:"number",label:"Min X",default:0},{id:"maxX",type:"number",label:"Max X",default:1},{id:"minY",type:"number",label:"Min Y",default:0},{id:"maxY",type:"number",label:"Max Y",default:1}]},tb={class:"handles-column handles-right"},nb={class:"node-content"},ob={key:0,class:"node-body"},ib={class:"value-display"},rb={class:"value-item"},lb={class:"value-number"},ab={class:"value-item"},sb={class:"value-number"},ub={class:"range-section"},cb={key:0,class:"range-controls"},db={class:"range-row"},pb=["value"],fb=["value"],hb={class:"range-row"},gb=["value"],mb=["value"],yb=ye({__name:"XYPadNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=We(),i=fe(!1),r=fe(!1),l=fe(null),a=fe(!1),s=fe(null),u=F(()=>{var y,Y;const V=((y=t.data)==null?void 0:y.nodeType)??"xy-pad";return o.getDefinition(V)??((Y=t.data)==null?void 0:Y.definition)??null}),c=F(()=>{var V;return u.value?((V=lt[u.value.category])==null?void 0:V.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),d=F({get:()=>{var V;return((V=t.data)==null?void 0:V.normalizedX)??.5},set:V=>{n.updateNodeData(t.id,{normalizedX:Math.max(0,Math.min(1,V))})}}),p=F({get:()=>{var V;return((V=t.data)==null?void 0:V.normalizedY)??.5},set:V=>{n.updateNodeData(t.id,{normalizedY:Math.max(0,Math.min(1,V))})}}),f=F({get:()=>{var V;return((V=t.data)==null?void 0:V.minX)??0},set:V=>{n.updateNodeData(t.id,{minX:V})}}),N=F({get:()=>{var V;return((V=t.data)==null?void 0:V.maxX)??1},set:V=>{n.updateNodeData(t.id,{maxX:V})}}),$=F({get:()=>{var V;return((V=t.data)==null?void 0:V.minY)??0},set:V=>{n.updateNodeData(t.id,{minY:V})}}),T=F({get:()=>{var V;return((V=t.data)==null?void 0:V.maxY)??1},set:V=>{n.updateNodeData(t.id,{maxY:V})}}),b=F(()=>f.value+d.value*(N.value-f.value)),m=F(()=>$.value+p.value*(T.value-$.value)),g=F(()=>({left:`${d.value*100}%`,top:`${(1-p.value)*100}%`}));function _(V){U(V)}function R(V){a.value=!0,U(V),window.addEventListener("mousemove",P),window.addEventListener("mouseup",Z)}function P(V){a.value&&U(V)}function Z(){a.value=!1,window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",Z)}function U(V){if(!l.value)return;const y=l.value.getBoundingClientRect(),Y=(V.clientX-y.left)/y.width,h=1-(V.clientY-y.top)/y.height;d.value=Math.max(0,Math.min(1,Y)),p.value=Math.max(0,Math.min(1,h))}function Q(){i.value=!i.value}function G(V){var y;return((y=Ge[V])==null?void 0:y.color)??"var(--color-neutral-400)"}return Yt(()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",Z)}),(V,y)=>(H(),W("div",{class:xe(["xypad-node",{selected:t.selected,collapsed:i.value}])},[C("div",tb,[C("div",{class:"handle-slot",onMouseenter:y[0]||(y[0]=Y=>s.value="rawX"),onMouseleave:y[1]||(y[1]=Y=>s.value=null)},[pe(B(Me),{id:"rawX",type:"source",position:B(ee).Right,style:de({background:G("number")}),class:"port-handle"},null,8,["position","style"]),C("div",{class:xe(["port-label port-label-right",{visible:s.value==="rawX"||t.selected}])},[y[18]||(y[18]=C("span",{class:"label-text"},"X",-1)),C("span",{class:"label-type",style:de({color:G("number")})},"raw",4)],2)],32),C("div",{class:"handle-slot",onMouseenter:y[2]||(y[2]=Y=>s.value="rawY"),onMouseleave:y[3]||(y[3]=Y=>s.value=null)},[pe(B(Me),{id:"rawY",type:"source",position:B(ee).Right,style:de({background:G("number")}),class:"port-handle"},null,8,["position","style"]),C("div",{class:xe(["port-label port-label-right",{visible:s.value==="rawY"||t.selected}])},[y[19]||(y[19]=C("span",{class:"label-text"},"Y",-1)),C("span",{class:"label-type",style:de({color:G("number")})},"raw",4)],2)],32),C("div",{class:"handle-slot",onMouseenter:y[4]||(y[4]=Y=>s.value="normX"),onMouseleave:y[5]||(y[5]=Y=>s.value=null)},[pe(B(Me),{id:"normX",type:"source",position:B(ee).Right,style:de({background:G("number")}),class:"port-handle"},null,8,["position","style"]),C("div",{class:xe(["port-label port-label-right",{visible:s.value==="normX"||t.selected}])},[y[20]||(y[20]=C("span",{class:"label-text"},"nX",-1)),C("span",{class:"label-type",style:de({color:G("number")})},"01",4)],2)],32),C("div",{class:"handle-slot",onMouseenter:y[6]||(y[6]=Y=>s.value="normY"),onMouseleave:y[7]||(y[7]=Y=>s.value=null)},[pe(B(Me),{id:"normY",type:"source",position:B(ee).Right,style:de({background:G("number")}),class:"port-handle"},null,8,["position","style"]),C("div",{class:xe(["port-label port-label-right",{visible:s.value==="normY"||t.selected}])},[y[21]||(y[21]=C("span",{class:"label-text"},"nY",-1)),C("span",{class:"label-type",style:de({color:G("number")})},"01",4)],2)],32)]),C("div",nb,[C("div",{class:"node-header",style:de({borderLeftColor:c.value})},[pe(B(Ps),{size:14,class:"header-icon"}),y[22]||(y[22]=C("span",{class:"node-title"},"XY-Pad",-1)),C("button",{class:"node-collapse-btn",onClick:he(Q,["stop"])},[i.value?(H(),$e(B(xn),{key:1,size:14})):(H(),$e(B(Sn),{key:0,size:14}))])],4),i.value?ve("",!0):(H(),W("div",ob,[C("div",{ref_key:"padRef",ref:l,class:"pad-area",onMousedown:he(R,["stop"]),onClick:he(_,["stop"])},[y[23]||(y[23]=C("div",{class:"pad-grid"},[C("div",{class:"grid-line-h"}),C("div",{class:"grid-line-v"})],-1)),C("div",{class:"pad-point",style:de(g.value)},null,4)],544),C("div",ib,[C("div",rb,[y[24]||(y[24]=C("span",{class:"value-label"},"X:",-1)),C("span",lb,Ne(b.value.toFixed(2)),1)]),C("div",ab,[y[25]||(y[25]=C("span",{class:"value-label"},"Y:",-1)),C("span",sb,Ne(m.value.toFixed(2)),1)])]),C("div",ub,[C("button",{class:"range-toggle",onClick:y[8]||(y[8]=he(Y=>r.value=!r.value,["stop"])),onMousedown:y[9]||(y[9]=he(()=>{},["stop"]))},[r.value?(H(),$e(B(Sn),{key:1,size:12})):(H(),$e(B(xn),{key:0,size:12})),y[26]||(y[26]=C("span",null,"RANGE",-1))],32),r.value?(H(),W("div",cb,[C("div",db,[y[27]||(y[27]=C("label",null,"X Min",-1)),C("input",{type:"number",value:f.value,onInput:y[10]||(y[10]=Y=>f.value=parseFloat(Y.target.value)||0),onMousedown:y[11]||(y[11]=he(()=>{},["stop"]))},null,40,pb),y[28]||(y[28]=C("label",null,"Max",-1)),C("input",{type:"number",value:N.value,onInput:y[12]||(y[12]=Y=>N.value=parseFloat(Y.target.value)||1),onMousedown:y[13]||(y[13]=he(()=>{},["stop"]))},null,40,fb)]),C("div",hb,[y[29]||(y[29]=C("label",null,"Y Min",-1)),C("input",{type:"number",value:$.value,onInput:y[14]||(y[14]=Y=>$.value=parseFloat(Y.target.value)||0),onMousedown:y[15]||(y[15]=he(()=>{},["stop"]))},null,40,gb),y[30]||(y[30]=C("label",null,"Max",-1)),C("input",{type:"number",value:T.value,onInput:y[16]||(y[16]=Y=>T.value=parseFloat(Y.target.value)||1),onMousedown:y[17]||(y[17]=he(()=>{},["stop"]))},null,40,mb)])])):ve("",!0)])]))])],2))}}),vb=Ke(yb,[["__scopeId","data-v-2ddb69db"]]),bb={id:"textbox",name:"Textbox",version:"1.0.0",category:"inputs",description:"Resizable text input that outputs a string",icon:"type",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"}],outputs:[{id:"text",type:"string",label:"Text"}],controls:[{id:"text",type:"text",label:"Text",default:""},{id:"height",type:"number",label:"Height",default:100}]},wb={class:"collapsed-content"},_b={class:"collapsed-text"},xb={class:"node-body"},Sb={class:"input-row"},$b={class:"output-row"},Nb={class:"output-value"},Eb=ye({__name:"TextboxNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=We(),i=fe(!1),r=fe(!1),l=fe(100),a=fe(0),s=F(()=>{var g;const m=((g=t.data)==null?void 0:g.nodeType)??"textbox";return o.getDefinition(m)??null}),u=F(()=>{var m;return s.value?((m=lt[s.value.category])==null?void 0:m.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),c=F({get:()=>{var m;return((m=t.data)==null?void 0:m.text)??""},set:m=>{n.updateNodeData(t.id,{text:m})}}),d=F({get:()=>{var m;return((m=t.data)==null?void 0:m.height)??100},set:m=>{n.updateNodeData(t.id,{height:Math.max(60,Math.min(400,m))})}});function p(){i.value=!i.value}function f(m){var g;return((g=Ge[m])==null?void 0:g.color)??"var(--color-neutral-400)"}function N(m){m.preventDefault(),m.stopPropagation(),r.value=!0,l.value=d.value,a.value=m.clientY,document.addEventListener("mousemove",$),document.addEventListener("mouseup",T)}function $(m){if(!r.value)return;const g=m.clientY-a.value;d.value=l.value+g}function T(){r.value=!1,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",T)}const b=F(()=>{const m=c.value;return m?m.length>30?m.slice(0,30)+"...":m:"(empty)"});return(m,g)=>i.value?(H(),W("div",{key:0,class:xe(["textbox-node textbox-node-collapsed",{selected:t.selected}])},[C("div",wb,[pe(B(ir),{size:14,class:"collapsed-icon"}),C("span",_b,Ne(b.value),1)]),pe(B(Me),{id:"text",type:"source",position:B(ee).Right,style:de({background:f("string")}),class:"port-handle"},null,8,["position","style"]),pe(B(Me),{id:"trigger",type:"target",position:B(ee).Left,style:de({background:f("trigger")}),class:"port-handle"},null,8,["position","style"]),C("button",{class:"expand-btn",onClick:he(p,["stop"])},[pe(B(xn),{size:12})])],2)):(H(),W("div",{key:1,class:xe(["textbox-node",{selected:t.selected,resizing:r.value}])},[C("div",{class:"node-header",style:de({borderLeftColor:u.value})},[pe(B(ir),{size:14,class:"header-icon"}),g[2]||(g[2]=C("span",{class:"node-title"},"Textbox",-1)),C("button",{class:"node-collapse-btn",onClick:he(p,["stop"])},[pe(B(Sn),{size:14})])],4),C("div",xb,[C("div",Sb,[pe(B(Me),{id:"trigger",type:"target",position:B(ee).Left,style:de({background:f("trigger")}),class:"port-handle"},null,8,["position","style"]),g[3]||(g[3]=C("span",{class:"port-label"},"Trigger",-1))]),C("div",{class:"textarea-wrapper",style:de({height:d.value+"px"})},[vn(C("textarea",{"onUpdate:modelValue":g[0]||(g[0]=_=>c.value=_),class:"text-input",placeholder:"Enter text...",onMousedown:g[1]||(g[1]=he(()=>{},["stop"]))},null,544),[[go,c.value]])],4),C("div",{class:"resize-handle",onMousedown:N},[...g[4]||(g[4]=[C("div",{class:"resize-grip"},null,-1)])],32),C("div",$b,[g[5]||(g[5]=C("span",{class:"output-label"},"Output:",-1)),C("span",Nb,Ne(b.value),1),pe(B(Me),{id:"text",type:"source",position:B(ee).Right,style:de({background:f("string")}),class:"port-handle"},null,8,["position","style"])])])],2))}}),kb=Ke(Eb,[["__scopeId","data-v-885536a0"]]),Cb=[L0,F0,H0,Y0,eb,bb],Mb={id:"console",name:"Console",version:"1.0.0",category:"debug",description:"Log value to console",icon:"terminal",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[],controls:[{id:"label",type:"text",label:"Label",default:"Log"},{id:"logOnChange",type:"toggle",label:"On Change",default:!0}]},Tb={id:"monitor",name:"Monitor",version:"1.0.0",category:"debug",description:"Display input values",icon:"eye",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"value",type:"any",label:"Pass"}],controls:[]},Ib={class:"handle-left"},Db={class:"handle-right"},Pb={class:"node-content"},Ab={class:"monitor-value"},zb=ye({__name:"MonitorNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=F(()=>{var s;return((s=lt.debug)==null?void 0:s.color)??"var(--color-neutral-400)"}),i=F(()=>{var d,p;const s=n.nodeMetrics.get(t.id),u=(d=s==null?void 0:s.outputValues)==null?void 0:d.display,c=(p=s==null?void 0:s.outputValues)==null?void 0:p.value;return u??c??null}),r=F(()=>{const s=i.value;return s==null?"":typeof s=="number"?Number.isInteger(s)?s.toString():s.toFixed(4):typeof s=="boolean"?s?"true":"false":typeof s=="string"?s:Array.isArray(s)?JSON.stringify(s,null,1):s instanceof WebGLTexture?"[Texture]":typeof s=="object"?JSON.stringify(s,null,1):String(s)}),l=F(()=>{const s=i.value;return s==null?"null":typeof s=="number"?"number":typeof s=="boolean"?"boolean":typeof s=="string"?"string":Array.isArray(s)?"array":s instanceof WebGLTexture?"texture":typeof s=="object"?"object":"unknown"});function a(s){var u;return((u=Ge[s])==null?void 0:u.color)??"var(--color-neutral-400)"}return(s,u)=>(H(),W("div",{class:xe(["monitor-node",{selected:t.selected}])},[C("div",Ib,[pe(B(Me),{id:"value",type:"target",position:B(ee).Left,style:de({background:a("any")}),class:"port-handle"},null,8,["position","style"])]),C("div",Db,[pe(B(Me),{id:"value",type:"source",position:B(ee).Right,style:de({background:a("any")}),class:"port-handle"},null,8,["position","style"])]),C("div",Pb,[C("div",{class:"node-header",style:de({borderLeftColor:o.value})},[pe(B(Cl),{size:14,class:"node-icon",style:de({color:o.value})},null,8,["style"]),u[0]||(u[0]=C("span",{class:"node-title"},"Monitor",-1))],4),C("div",{class:xe(["monitor-display",l.value])},[C("pre",Ab,Ne(r.value),1)],2)])],2))}}),Rb=Ke(zb,[["__scopeId","data-v-5b612de7"]]),Bb={id:"oscilloscope",name:"Oscilloscope",version:"1.0.0",category:"debug",description:"Visualize signal waveform over time",icon:"activity",platforms:["web","electron"],inputs:[{id:"signal",type:"number",label:"Signal"},{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"timeScale",type:"slider",label:"Time Scale",default:1,props:{min:.25,max:4,step:.25}},{id:"amplitude",type:"slider",label:"Amplitude",default:1,props:{min:.1,max:2,step:.1}}]},Ob={class:"handles-column handles-left"},Vb={class:"handle-slot"},Lb={class:"handle-slot"},Fb={class:"node-content"},Hb={class:"scope-display"},Yb={class:"scope-controls"},Xb={class:"control-row"},Gb=["value"],Ub={class:"control-row"},Zb=["value"],wl=128,qb=ye({__name:"OscilloscopeNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=bt(),i=F(()=>{var b;return((b=lt.debug)==null?void 0:b.color)??"var(--color-neutral-400)"}),r=fe(null),l=fe(null),a=fe([]),s=F(()=>{var b;return((b=t.data)==null?void 0:b.timeScale)??1}),u=F(()=>{var b;return((b=t.data)==null?void 0:b.amplitude)??1});function c(b){o.updateNodeData(t.id,{timeScale:b})}function d(b){o.updateNodeData(t.id,{amplitude:b})}let p=null;function f(){var U,Q,G;if(!r.value||!l.value)return;const b=r.value.width,m=r.value.height,g=l.value;g.fillStyle="#0a0a0a",g.fillRect(0,0,b,m),g.strokeStyle="#1a3a1a",g.lineWidth=1,g.beginPath(),g.moveTo(0,m/2),g.lineTo(b,m/2),g.stroke();for(let V=0;V<8;V++){const y=b/8*V;g.beginPath(),g.moveTo(y,0),g.lineTo(y,m),g.stroke()}const _=n.nodeMetrics.get(t.id),R=((U=_==null?void 0:_.outputValues)==null?void 0:U._mode)??"signal",P=(Q=_==null?void 0:_.outputValues)==null?void 0:Q._input_waveform,Z=((G=_==null?void 0:_.outputValues)==null?void 0:G._input_signal)??0;if(R==="audio"&&P&&P.length>0){g.strokeStyle="#22c55e",g.lineWidth=2,g.beginPath();const V=b/P.length;for(let y=0;y<P.length;y++){const Y=y*V,h=m/2-P[y]*u.value*(m/2-10);y===0?g.moveTo(Y,h):g.lineTo(Y,h)}g.stroke(),g.shadowColor="#22c55e",g.shadowBlur=4,g.stroke(),g.shadowBlur=0,g.fillStyle="#22c55e",g.font="10px monospace",g.fillText("AUDIO",4,12)}else{if(a.value.push(Z),a.value.length>wl&&a.value.shift(),a.value.length>1){g.strokeStyle="#22c55e",g.lineWidth=2,g.beginPath();const V=a.value,y=b/(wl*s.value);for(let Y=0;Y<V.length;Y++){const h=Y*y,D=m/2-V[Y]*u.value*(m/2-10);Y===0?g.moveTo(h,D):g.lineTo(h,D)}g.stroke(),g.shadowColor="#22c55e",g.shadowBlur=4,g.stroke(),g.shadowBlur=0}g.fillStyle="#22c55e",g.font="10px monospace",g.fillText(`${Z.toFixed(3)}`,4,12)}p=requestAnimationFrame(f)}function N(){p===null&&f()}function $(){p!==null&&(cancelAnimationFrame(p),p=null)}_e(()=>n.isRunning,b=>{b?N():$()},{immediate:!0}),Fe(()=>{r.value&&(l.value=r.value.getContext("2d"),n.isRunning?N():l.value&&(l.value.fillStyle="#0a0a0a",l.value.fillRect(0,0,r.value.width,r.value.height),l.value.fillStyle="#333",l.value.font="10px monospace",l.value.fillText("NO SIGNAL",50,50)))}),Yt(()=>{$()});function T(b){var m;return((m=Ge[b])==null?void 0:m.color)??"var(--color-neutral-400)"}return(b,m)=>(H(),W("div",{class:xe(["oscilloscope-node",{selected:t.selected}])},[C("div",Ob,[C("div",Vb,[pe(B(Me),{id:"signal",type:"target",position:B(ee).Left,style:de({background:T("number")}),class:"port-handle"},null,8,["position","style"]),m[4]||(m[4]=C("span",{class:"port-label"},"SIG",-1))]),C("div",Lb,[pe(B(Me),{id:"audio",type:"target",position:B(ee).Left,style:de({background:T("audio")}),class:"port-handle"},null,8,["position","style"]),m[5]||(m[5]=C("span",{class:"port-label"},"AUD",-1))])]),C("div",Fb,[C("div",{class:"node-header",style:de({borderLeftColor:i.value})},[pe(B(Cl),{size:14,class:"node-icon",style:de({color:i.value})},null,8,["style"]),m[6]||(m[6]=C("span",{class:"node-title"},"Scope",-1))],4),C("div",Hb,[C("canvas",{ref_key:"canvas",ref:r,width:"180",height:"100",class:"scope-canvas"},null,512)]),C("div",Yb,[C("div",Xb,[m[7]||(m[7]=C("label",null,"TIME",-1)),C("input",{type:"range",value:s.value,min:"0.25",max:"4",step:"0.25",onInput:m[0]||(m[0]=g=>c(parseFloat(g.target.value))),onMousedown:m[1]||(m[1]=he(()=>{},["stop"]))},null,40,Gb)]),C("div",Ub,[m[8]||(m[8]=C("label",null,"AMP",-1)),C("input",{type:"range",value:u.value,min:"0.1",max:"2",step:"0.1",onInput:m[2]||(m[2]=g=>d(parseFloat(g.target.value))),onMousedown:m[3]||(m[3]=he(()=>{},["stop"]))},null,40,Zb)])])])],2))}}),Wb=Ke(qb,[["__scopeId","data-v-e4c9663a"]]),Kb={id:"graph",name:"Graph",version:"1.0.0",category:"debug",description:"Plot X/Y values with dynamic point inputs",icon:"line-chart",platforms:["web","electron"],inputs:[{id:"x0",type:"number",label:"X"},{id:"y0",type:"number",label:"Y"}],outputs:[],controls:[{id:"pointCount",type:"number",label:"Points",default:1,props:{min:1,max:8}},{id:"displayMode",type:"select",label:"Mode",default:"line",props:{options:["line","scatter"]}},{id:"showGrid",type:"toggle",label:"Grid",default:!0},{id:"autoScale",type:"toggle",label:"Auto Scale",default:!0}]},jb={class:"handles-column handles-left"},Jb={class:"handle-slot"},Qb={class:"port-label"},e1={class:"handle-slot"},t1={class:"port-label"},n1={class:"node-content"},o1={class:"point-controls"},i1=["disabled"],r1={class:"point-count"},l1=["disabled"],a1={class:"graph-display"},s1={class:"graph-controls"},u1={class:"control-row"},c1=["value"],d1={class:"control-row"},p1=["checked"],f1=["checked"],h1=50,g1=ye({__name:"GraphNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=bt(),i=F(()=>{var _;return((_=lt.debug)==null?void 0:_.color)??"var(--color-neutral-400)"}),r=fe(null),l=fe(null),a=F(()=>{var _;return((_=t.data)==null?void 0:_.pointCount)??3}),s=F(()=>{var _;return((_=t.data)==null?void 0:_.displayMode)??"line"}),u=F(()=>{var _;return((_=t.data)==null?void 0:_.showGrid)??!0}),c=F(()=>{var _;return((_=t.data)==null?void 0:_.autoScale)??!0}),d=fe(new Map);let p=null;function f(_,R){o.updateNodeData(t.id,{[_]:R})}function N(){a.value<8&&f("pointCount",a.value+1)}function $(){a.value>1&&(f("pointCount",a.value-1),d.value.delete(a.value-1))}function T(){var w,z;if(!r.value||!l.value)return;const _=r.value.width,R=r.value.height,P=l.value;P.fillStyle="#0f0f0f",P.fillRect(0,0,_,R);const Z=n.nodeMetrics.get(t.id),U=[];for(let v=0;v<a.value;v++){const E=((w=Z==null?void 0:Z.outputValues)==null?void 0:w[`_point${v}_x`])??0,x=((z=Z==null?void 0:Z.outputValues)==null?void 0:z[`_point${v}_y`])??0;U.push({x:E,y:x,index:v}),d.value.has(v)||d.value.set(v,[]);const L=d.value.get(v);L.push({x:E,y:x}),L.length>h1&&L.shift()}let Q=0,G=1,V=0,y=1;if(c.value&&U.length>0){const v=Array.from(d.value.values()).flat();if(v.length>0){Q=Math.min(...v.map(L=>L.x)),G=Math.max(...v.map(L=>L.x)),V=Math.min(...v.map(L=>L.y)),y=Math.max(...v.map(L=>L.y));const E=(G-Q)*.1||.5,x=(y-V)*.1||.5;Q-=E,G+=E,V-=x,y+=x}}const Y=v=>(v-Q)/(G-Q)*_,h=v=>R-(v-V)/(y-V)*R;if(u.value){P.strokeStyle="#1a2a1a",P.lineWidth=1;for(let v=0;v<=8;v++){const E=_/8*v;P.beginPath(),P.moveTo(E,0),P.lineTo(E,R),P.stroke()}for(let v=0;v<=6;v++){const E=R/6*v;P.beginPath(),P.moveTo(0,E),P.lineTo(_,E),P.stroke()}if(P.strokeStyle="#2a4a2a",P.lineWidth=1.5,Q<=0&&G>=0){const v=Y(0);P.beginPath(),P.moveTo(v,0),P.lineTo(v,R),P.stroke()}if(V<=0&&y>=0){const v=h(0);P.beginPath(),P.moveTo(0,v),P.lineTo(_,v),P.stroke()}}const D=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];if(s.value==="line")for(let v=0;v<a.value;v++){const E=d.value.get(v)??[];if(!(E.length<2)){P.strokeStyle=D[v%D.length],P.lineWidth=2,P.beginPath();for(let x=0;x<E.length;x++){const L=Y(E[x].x),K=h(E[x].y);x===0?P.moveTo(L,K):P.lineTo(L,K)}P.stroke()}}else if(s.value==="scatter")for(let v=0;v<a.value;v++){const E=d.value.get(v)??[];P.fillStyle=D[v%D.length];for(let x=0;x<E.length;x++){const L=(x+1)/E.length;P.globalAlpha=L*.8;const K=Y(E[x].x),te=h(E[x].y);P.beginPath(),P.arc(K,te,3,0,Math.PI*2),P.fill()}P.globalAlpha=1}for(let v=0;v<U.length;v++){const E=Y(U[v].x),x=h(U[v].y);P.fillStyle=D[v%D.length],P.shadowColor=D[v%D.length],P.shadowBlur=8,P.beginPath(),P.arc(E,x,5,0,Math.PI*2),P.fill(),P.shadowBlur=0,P.fillStyle="#fff",P.beginPath(),P.arc(E,x,2,0,Math.PI*2),P.fill()}P.fillStyle="#666",P.font="9px monospace",P.fillText(`X: ${Q.toFixed(1)}..${G.toFixed(1)}`,4,10),P.fillText(`Y: ${V.toFixed(1)}..${y.toFixed(1)}`,4,22),p=requestAnimationFrame(T)}function b(){p===null&&T()}function m(){p!==null&&(cancelAnimationFrame(p),p=null)}_e(()=>n.isRunning,_=>{_?b():m()},{immediate:!0}),Fe(()=>{r.value&&(l.value=r.value.getContext("2d"),n.isRunning?b():l.value&&(l.value.fillStyle="#0f0f0f",l.value.fillRect(0,0,r.value.width,r.value.height),l.value.fillStyle="#333",l.value.font="10px monospace",l.value.fillText("NO DATA",70,60)))}),Yt(()=>{m()});function g(_){var R;return((R=Ge[_])==null?void 0:R.color)??"var(--color-neutral-400)"}return(_,R)=>(H(),W("div",{class:xe(["graph-node",{selected:t.selected}])},[C("div",jb,[(H(!0),W(Pe,null,ft(a.value,P=>(H(),W(Pe,{key:`point-${P}`},[C("div",Jb,[pe(B(Me),{id:`x${P-1}`,type:"target",position:B(ee).Left,style:de({background:g("number")}),class:"port-handle"},null,8,["id","position","style"]),C("span",Qb,"X"+Ne(P),1)]),C("div",e1,[pe(B(Me),{id:`y${P-1}`,type:"target",position:B(ee).Left,style:de({background:g("number")}),class:"port-handle"},null,8,["id","position","style"]),C("span",t1,"Y"+Ne(P),1)])],64))),128))]),C("div",n1,[C("div",{class:"node-header",style:de({borderLeftColor:i.value})},[pe(B(Ys),{size:14,class:"node-icon",style:de({color:i.value})},null,8,["style"]),R[8]||(R[8]=C("span",{class:"node-title"},"Graph",-1)),C("div",o1,[C("button",{class:"point-btn",disabled:a.value<=1,onClick:he($,["stop"]),onMousedown:R[0]||(R[0]=he(()=>{},["stop"]))},[pe(B(Us),{size:12})],40,i1),C("span",r1,Ne(a.value),1),C("button",{class:"point-btn",disabled:a.value>=8,onClick:he(N,["stop"]),onMousedown:R[1]||(R[1]=he(()=>{},["stop"]))},[pe(B($s),{size:12})],40,l1)])],4),C("div",a1,[C("canvas",{ref_key:"canvas",ref:r,width:"200",height:"120",class:"graph-canvas"},null,512)]),C("div",s1,[C("div",u1,[R[10]||(R[10]=C("label",null,"MODE",-1)),C("select",{value:s.value,onChange:R[2]||(R[2]=P=>f("displayMode",P.target.value)),onMousedown:R[3]||(R[3]=he(()=>{},["stop"]))},[...R[9]||(R[9]=[C("option",{value:"line"}," Line ",-1),C("option",{value:"scatter"}," Scatter ",-1)])],40,c1)]),C("div",d1,[C("label",{class:"toggle-label",onMousedown:R[5]||(R[5]=he(()=>{},["stop"]))},[C("input",{type:"checkbox",checked:u.value,onChange:R[4]||(R[4]=P=>f("showGrid",P.target.checked))},null,40,p1),R[11]||(R[11]=ci(" Grid ",-1))],32),C("label",{class:"toggle-label",onMousedown:R[7]||(R[7]=he(()=>{},["stop"]))},[C("input",{type:"checkbox",checked:c.value,onChange:R[6]||(R[6]=P=>f("autoScale",P.target.checked))},null,40,f1),R[12]||(R[12]=ci(" Auto ",-1))],32)])])])],2))}}),m1=Ke(g1,[["__scopeId","data-v-abffbb02"]]),y1={id:"equalizer",name:"Equalizer",version:"1.0.0",category:"debug",description:"Visualize audio frequency spectrum as bars",icon:"bar-chart-3",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"barCount",type:"slider",label:"Bars",default:16,props:{min:8,max:32,step:4}},{id:"colorMode",type:"select",label:"Color",default:"gradient",props:{options:["gradient","spectrum","solid"]}},{id:"smoothing",type:"slider",label:"Smooth",default:.8,props:{min:0,max:.95,step:.05}}]},v1={class:"handles-column handles-left"},b1={class:"handle-slot"},w1={class:"node-content"},_1={class:"eq-display"},x1={class:"eq-controls"},S1={class:"control-row"},$1=["value"],N1={class:"value-label"},E1={class:"control-row"},k1=["value"],C1=ye({__name:"EqualizerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=bt(),i=F(()=>{var m;return((m=lt.debug)==null?void 0:m.color)??"var(--color-neutral-400)"}),r=fe(null),l=fe(null),a=F(()=>{var m;return((m=t.data)==null?void 0:m.barCount)??16}),s=F(()=>{var m;return((m=t.data)==null?void 0:m.colorMode)??"gradient"}),u=F(()=>{var m;return((m=t.data)==null?void 0:m.smoothing)??.8}),c=fe([]);let d=null;function p(m,g){o.updateNodeData(t.id,{[m]:g})}function f(){var V;if(!r.value||!l.value)return;const m=r.value.width,g=r.value.height,_=l.value;_.fillStyle="#0a0a0a",_.fillRect(0,0,m,g);const R=n.nodeMetrics.get(t.id),P=(V=R==null?void 0:R.outputValues)==null?void 0:V._fft_data;if(R&&!P&&console.log("[Equalizer] Metrics exist but no FFT data:",Object.keys(R.outputValues||{})),!P||P.length===0){_.fillStyle="#1a1a1a";const y=(m-(a.value+1)*2)/a.value;for(let Y=0;Y<a.value;Y++){const h=2+Y*(y+2);_.fillRect(h,g-10,y,8)}d=requestAnimationFrame(f);return}c.value.length!==a.value&&(c.value=new Array(a.value).fill(0));const Z=Math.floor(P.length/a.value),U=[];for(let y=0;y<a.value;y++){let Y=0;const h=y*Z,D=Math.min(h+Z,P.length);for(let w=h;w<D;w++){const z=(P[w]+100)/100;Y+=Math.max(0,Math.min(1,z))}U.push(Y/Z)}for(let y=0;y<a.value;y++){const Y=U[y]??0;c.value[y]=c.value[y]*u.value+Y*(1-u.value)}const Q=(m-(a.value+1)*2)/a.value,G=g-8;for(let y=0;y<a.value;y++){const Y=c.value[y],h=Math.max(4,Y*G),D=2+y*(Q+2),w=g-h-2;if(s.value==="gradient"){const z=120-Y*120;_.fillStyle=`hsl(${z}, 80%, 50%)`}else if(s.value==="spectrum"){const z=y/a.value*300;_.fillStyle=`hsl(${z}, 80%, 55%)`}else _.fillStyle="#22d3ee";_.beginPath(),_.roundRect(D,w,Q,h,[2,2,0,0]),_.fill(),Y>.5&&(_.shadowColor=_.fillStyle,_.shadowBlur=Y*10,_.fill(),_.shadowBlur=0)}d=requestAnimationFrame(f)}function N(){d===null&&f()}function $(){d!==null&&(cancelAnimationFrame(d),d=null)}function T(){if(!r.value||!l.value)return;const m=r.value.width,g=r.value.height,_=l.value;_.fillStyle="#0a0a0a",_.fillRect(0,0,m,g),_.fillStyle="#1a1a1a";const R=(m-(a.value+1)*2)/a.value;for(let P=0;P<a.value;P++){const Z=2+P*(R+2);_.fillRect(Z,g-10,R,8)}_.fillStyle="#333",_.font="10px monospace",_.textAlign="center",_.fillText("NO SIGNAL",m/2,g/2),_.textAlign="left"}_e(()=>n.isRunning,m=>{l.value&&($(),m?N():T())}),Fe(()=>{r.value&&(l.value=r.value.getContext("2d"),n.isRunning?N():T())}),Yt(()=>{$()});function b(m){var g;return((g=Ge[m])==null?void 0:g.color)??"var(--color-neutral-400)"}return(m,g)=>(H(),W("div",{class:xe(["equalizer-node",{selected:t.selected}])},[C("div",v1,[C("div",b1,[pe(B(Me),{id:"audio",type:"target",position:B(ee).Left,style:de({background:b("audio")}),class:"port-handle"},null,8,["position","style"]),g[4]||(g[4]=C("span",{class:"port-label"},"IN",-1))])]),C("div",w1,[C("div",{class:"node-header",style:de({borderLeftColor:i.value})},[pe(B(zs),{size:14,class:"node-icon",style:de({color:i.value})},null,8,["style"]),g[5]||(g[5]=C("span",{class:"node-title"},"EQ",-1))],4),C("div",_1,[C("canvas",{ref_key:"canvas",ref:r,width:"180",height:"80",class:"eq-canvas"},null,512)]),C("div",x1,[C("div",S1,[g[6]||(g[6]=C("label",null,"BARS",-1)),C("input",{type:"range",value:a.value,min:"8",max:"32",step:"4",onInput:g[0]||(g[0]=_=>p("barCount",parseInt(_.target.value))),onMousedown:g[1]||(g[1]=he(()=>{},["stop"]))},null,40,$1),C("span",N1,Ne(a.value),1)]),C("div",E1,[g[8]||(g[8]=C("label",null,"COLOR",-1)),C("select",{value:s.value,onChange:g[2]||(g[2]=_=>p("colorMode",_.target.value)),onMousedown:g[3]||(g[3]=he(()=>{},["stop"]))},[...g[7]||(g[7]=[C("option",{value:"gradient"}," Gradient ",-1),C("option",{value:"spectrum"}," Spectrum ",-1),C("option",{value:"solid"}," Solid ",-1)])],40,k1)])])])],2))}}),M1=Ke(C1,[["__scopeId","data-v-771d07d1"]]),T1=[Mb,Tb,Bb,Kb,y1],I1={id:"add",name:"Add",version:"1.0.0",category:"math",description:"Add two numbers",icon:"plus",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},D1={id:"subtract",name:"Subtract",version:"1.0.0",category:"math",description:"Subtract two numbers",icon:"minus",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},P1={id:"multiply",name:"Multiply",version:"1.0.0",category:"math",description:"Multiply two numbers",icon:"x",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},A1={id:"divide",name:"Divide",version:"1.0.0",category:"math",description:"Divide two numbers",icon:"divide",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},z1={id:"clamp",name:"Clamp",version:"1.0.0",category:"math",description:"Clamp a value between min and max",icon:"shrink",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}]},R1={id:"abs",name:"Absolute",version:"1.0.0",category:"math",description:"Get absolute value",icon:"flip-horizontal",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[]},B1={id:"random",name:"Random",version:"1.0.0",category:"math",description:"Generate random number",icon:"shuffle",platforms:["web","electron"],inputs:[{id:"seed",type:"number",label:"Seed"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}]},O1={id:"map-range",name:"Map Range",version:"1.0.0",category:"math",description:"Remap a value from one range to another",icon:"arrow-right-left",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value",required:!0}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"inMin",type:"number",label:"In Min",default:0},{id:"inMax",type:"number",label:"In Max",default:1},{id:"outMin",type:"number",label:"Out Min",default:0},{id:"outMax",type:"number",label:"Out Max",default:100}]},V1={id:"smooth",name:"Smooth",version:"1.0.0",category:"math",description:"Smooth value changes over time",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"factor",type:"slider",label:"Factor",default:.1,props:{min:.01,max:1,step:.01}}]},L1=[I1,D1,P1,A1,z1,R1,B1,O1,V1],F1={id:"time",name:"Time",version:"1.0.0",category:"timing",description:"Current time and frame info",icon:"clock",platforms:["web","electron"],inputs:[],outputs:[{id:"time",type:"number",label:"Time"},{id:"delta",type:"number",label:"Delta"},{id:"frame",type:"number",label:"Frame"}],controls:[]},H1={id:"lfo",name:"LFO",version:"1.0.0",category:"timing",description:"Low frequency oscillator",icon:"waves",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:1},{id:"amplitude",type:"number",label:"Amplitude",default:1},{id:"offset",type:"number",label:"Offset",default:0},{id:"waveform",type:"select",label:"Waveform",default:"sine",props:{options:["sine","square","triangle","sawtooth"]}}]},Y1={id:"start",name:"Start",version:"1.0.0",category:"timing",description:"Fires once when flow starts running",icon:"play",platforms:["web","electron"],inputs:[],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[]},X1={id:"interval",name:"Interval",version:"1.0.0",category:"timing",description:"Fires at regular intervals",icon:"timer",platforms:["web","electron"],inputs:[{id:"enabled",type:"boolean",label:"Enabled"}],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[{id:"interval",type:"number",label:"Interval (ms)",default:1e3,props:{min:10,max:6e4}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}]},G1={id:"delay",name:"Delay",version:"1.0.0",category:"timing",description:"Delays a value by specified time",icon:"clock",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"value",type:"any",label:"Delayed"}],controls:[{id:"delay",type:"number",label:"Delay (ms)",default:500,props:{min:0,max:1e4}}]},U1={id:"timer",name:"Timer",version:"1.0.0",category:"timing",description:"Stopwatch timer with start/stop/reset",icon:"timer",platforms:["web","electron"],inputs:[{id:"start",type:"trigger",label:"Start"},{id:"stop",type:"trigger",label:"Stop"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"elapsed",type:"number",label:"Elapsed (s)"},{id:"running",type:"boolean",label:"Running"}],controls:[]},Z1=[F1,H1,Y1,X1,G1,U1],q1={id:"compare",name:"Compare",version:"1.0.0",category:"logic",description:"Compare two values",icon:"git-compare",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"operator",type:"select",label:"Op",default:"==",props:{options:["==","!=",">",">=","<","<="]}}]},W1={id:"and",name:"And",version:"1.0.0",category:"logic",description:"Logical AND",icon:"circle-dot",platforms:["web","electron"],inputs:[{id:"a",type:"boolean",label:"A"},{id:"b",type:"boolean",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[]},K1={id:"or",name:"Or",version:"1.0.0",category:"logic",description:"Logical OR",icon:"circle",platforms:["web","electron"],inputs:[{id:"a",type:"boolean",label:"A"},{id:"b",type:"boolean",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[]},j1={id:"not",name:"Not",version:"1.0.0",category:"logic",description:"Logical NOT",icon:"circle-off",platforms:["web","electron"],inputs:[{id:"value",type:"boolean",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[]},J1={id:"gate",name:"Gate",version:"1.0.0",category:"logic",description:"Pass or block value",icon:"door-open",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"gate",type:"boolean",label:"Gate"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"open",type:"toggle",label:"Open",default:!0}]},Q1={id:"switch",name:"Switch",version:"1.0.0",category:"logic",description:"Select between two values",icon:"git-branch",platforms:["web","electron"],inputs:[{id:"condition",type:"boolean",label:"Condition"},{id:"true",type:"any",label:"True"},{id:"false",type:"any",label:"False"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[]},ew={id:"select",name:"Select",version:"1.0.0",category:"logic",description:"Select one of multiple inputs by index",icon:"list",platforms:["web","electron"],inputs:[{id:"index",type:"number",label:"Index"},{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[]},tw=[q1,W1,K1,j1,J1,Q1,ew],nw={id:"oscillator",name:"Oscillator",version:"1.0.0",category:"audio",description:"Generate audio waveform",icon:"waves",platforms:["web","electron"],inputs:[{id:"frequency",type:"number",label:"Freq"},{id:"detune",type:"number",label:"Detune"}],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"frequency",type:"number",label:"Freq"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:440},{id:"detune",type:"number",label:"Detune",default:0},{id:"waveform",type:"select",label:"Waveform",default:"sine",props:{options:["sine","square","triangle","sawtooth"]}},{id:"volume",type:"number",label:"Volume (dB)",default:-6}]},ow={id:"audio-output",name:"Audio Output",version:"1.0.0",category:"audio",description:"Output audio to speakers",icon:"volume-2",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"volume",type:"number",label:"Volume (dB)",default:0},{id:"mute",type:"toggle",label:"Mute",default:!1}]},iw={id:"audio-analyzer",name:"Audio Analyzer",version:"1.0.0",category:"audio",description:"Analyze audio levels and frequencies",icon:"bar-chart-2",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[{id:"level",type:"number",label:"Level"},{id:"bass",type:"number",label:"Bass"},{id:"mid",type:"number",label:"Mid"},{id:"high",type:"number",label:"High"}],controls:[{id:"smoothing",type:"number",label:"Smoothing",default:.8}]},rw={id:"gain",name:"Gain",version:"1.0.0",category:"audio",description:"Adjust audio volume",icon:"volume-1",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"gain",type:"number",label:"Gain"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"gain",type:"number",label:"Gain",default:1}]},lw={id:"filter",name:"Filter",version:"1.0.0",category:"audio",description:"Filter audio frequencies",icon:"sliders",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"frequency",type:"number",label:"Freq"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:1e3},{id:"Q",type:"number",label:"Q",default:1},{id:"type",type:"select",label:"Type",default:"lowpass",props:{options:["lowpass","highpass","bandpass","notch"]}}]},aw={id:"delay",name:"Delay",version:"1.0.0",category:"audio",description:"Add delay/echo effect",icon:"repeat",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"time",type:"number",label:"Time"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"time",type:"number",label:"Delay (s)",default:.25},{id:"feedback",type:"number",label:"Feedback",default:.5},{id:"wet",type:"number",label:"Wet",default:.5}]},sw={id:"beat-detect",name:"Beat Detect",version:"1.0.0",category:"audio",description:"Detect beats and estimate BPM",icon:"activity",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio",required:!0}],outputs:[{id:"beat",type:"trigger",label:"Beat"},{id:"bpm",type:"number",label:"BPM"},{id:"energy",type:"number",label:"Energy"}],controls:[{id:"sensitivity",type:"slider",label:"Sensitivity",default:1.5,props:{min:1,max:3,step:.1}},{id:"minInterval",type:"number",label:"Min Interval (ms)",default:200,props:{min:50,max:500}},{id:"decayRate",type:"slider",label:"Decay Rate",default:.95,props:{min:.8,max:.99,step:.01}}]},uw={id:"audio-player",name:"Audio Player",version:"1.0.0",category:"audio",description:"Play audio files from URL",icon:"play-circle",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"play",type:"trigger",label:"Play"},{id:"stop",type:"trigger",label:"Stop"}],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"playing",type:"boolean",label:"Playing"},{id:"duration",type:"number",label:"Duration"},{id:"loading",type:"boolean",label:"Loading"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:""},{id:"loop",type:"toggle",label:"Loop",default:!1},{id:"autoplay",type:"toggle",label:"Autoplay",default:!1},{id:"volume",type:"slider",label:"Volume (dB)",default:0,props:{min:-40,max:6,step:1}},{id:"playbackRate",type:"slider",label:"Speed",default:1,props:{min:.5,max:2,step:.1}}]},cw={id:"envelope",name:"Envelope (ADSR)",version:"1.0.0",category:"audio",description:"ADSR amplitude envelope",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"},{id:"release",type:"trigger",label:"Release"}],outputs:[{id:"envelope",type:"audio",label:"Envelope"},{id:"value",type:"number",label:"Value"}],controls:[{id:"attack",type:"slider",label:"Attack",default:.01,props:{min:.001,max:2,step:.001}},{id:"decay",type:"slider",label:"Decay",default:.1,props:{min:.001,max:2,step:.001}},{id:"sustain",type:"slider",label:"Sustain",default:.5,props:{min:0,max:1,step:.01}},{id:"release",type:"slider",label:"Release",default:.3,props:{min:.001,max:5,step:.001}}]},dw={id:"reverb",name:"Reverb",version:"1.0.0",category:"audio",description:"Add reverb effect",icon:"waves",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio",required:!0}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"decay",type:"slider",label:"Decay",default:1.5,props:{min:.1,max:10,step:.1}},{id:"wet",type:"slider",label:"Wet",default:.5,props:{min:0,max:1,step:.01}},{id:"preDelay",type:"slider",label:"Pre-Delay",default:.01,props:{min:0,max:.1,step:.001}}]},pw=[nw,ow,iw,rw,lw,aw,sw,uw,cw,dw],fw={id:"shader",name:"Shader",version:"2.0.0",category:"visual",description:"Custom GLSL shader with presets and Shadertoy support",icon:"code",platforms:["web","electron"],inputs:[{id:"texture0",type:"texture",label:"Texture 0"},{id:"texture1",type:"texture",label:"Texture 1"},{id:"texture2",type:"texture",label:"Texture 2"},{id:"texture3",type:"texture",label:"Texture 3"},{id:"u_param1",type:"number",label:"Param 1"},{id:"u_param2",type:"number",label:"Param 2"},{id:"u_param3",type:"number",label:"Param 3"},{id:"u_param4",type:"number",label:"Param 4"},{id:"u_color",type:"data",label:"Color"},{id:"u_vec2",type:"data",label:"Vec2"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"preset",type:"select",label:"Preset",default:"custom",props:{options:["custom","--- Generators ---","gradient","noise","plasma","circles","waves","voronoi","--- Effects ---","chromatic-aberration","pixelate","vignette","glitch","edge-detect","kaleidoscope","--- Utility ---","solid-color","uv-debug","passthrough","--- Artistic ---","watercolor","halftone"]}},{id:"code",type:"code",label:"Fragment Shader",default:`void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = fragCoord / iResolution.xy;
  vec3 col = 0.5 + 0.5 * cos(iTime + uv.xyx + vec3(0, 2, 4));
  fragColor = vec4(col, 1.0);
}`},{id:"vertexCode",type:"code",label:"Vertex Shader (optional)",default:""},{id:"shadertoy",type:"toggle",label:"Shadertoy Mode",default:!0},{id:"u_param1",type:"slider",label:"Param 1",default:.5,props:{min:0,max:1,step:.01}},{id:"u_param2",type:"slider",label:"Param 2",default:.5,props:{min:0,max:1,step:.01}},{id:"u_param3",type:"slider",label:"Param 3",default:.5,props:{min:0,max:1,step:.01}},{id:"u_param4",type:"slider",label:"Param 4",default:.5,props:{min:0,max:1,step:.01}}]},hw={id:"webcam",name:"Webcam",version:"1.0.0",category:"visual",description:"Capture video from camera",icon:"camera",platforms:["web","electron"],inputs:[],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"video",type:"video",label:"Video"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"device",type:"select",label:"Device",default:"default"}]},gw={id:"color",name:"Color",version:"1.0.0",category:"visual",description:"Create RGBA color value",icon:"palette",platforms:["web","electron"],inputs:[{id:"r",type:"number",label:"R"},{id:"g",type:"number",label:"G"},{id:"b",type:"number",label:"B"},{id:"a",type:"number",label:"A"}],outputs:[{id:"color",type:"data",label:"Color"},{id:"r",type:"number",label:"R"},{id:"g",type:"number",label:"G"},{id:"b",type:"number",label:"B"},{id:"a",type:"number",label:"A"}],controls:[{id:"r",type:"slider",label:"R",default:1,props:{min:0,max:1,step:.01}},{id:"g",type:"slider",label:"G",default:1,props:{min:0,max:1,step:.01}},{id:"b",type:"slider",label:"B",default:1,props:{min:0,max:1,step:.01}},{id:"a",type:"slider",label:"A",default:1,props:{min:0,max:1,step:.01}}]},mw={id:"texture-display",name:"Texture Display",version:"1.0.0",category:"visual",description:"Display texture on canvas",icon:"monitor",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"}],outputs:[],controls:[]},yw={id:"blend",name:"Blend",version:"1.0.0",category:"visual",description:"Blend two textures together",icon:"layers",platforms:["web","electron"],inputs:[{id:"a",type:"texture",label:"A"},{id:"b",type:"texture",label:"B"},{id:"mix",type:"number",label:"Mix"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"mix",type:"slider",label:"Mix",default:.5,props:{min:0,max:1,step:.01}},{id:"mode",type:"select",label:"Mode",default:"normal",props:{options:["normal","add","multiply","screen","overlay"]}}]},vw={id:"blur",name:"Blur",version:"1.0.0",category:"visual",description:"Apply Gaussian blur to texture",icon:"droplet",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"radius",type:"number",label:"Radius"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"radius",type:"slider",label:"Radius",default:5,props:{min:0,max:50,step:.5}},{id:"passes",type:"number",label:"Passes",default:2,props:{min:1,max:10}}]},bw={id:"color-correction",name:"Color Correction",version:"1.0.0",category:"visual",description:"Adjust brightness, contrast, saturation, hue, and gamma",icon:"palette",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"brightness",type:"number",label:"Brightness"},{id:"contrast",type:"number",label:"Contrast"},{id:"saturation",type:"number",label:"Saturation"},{id:"hue",type:"number",label:"Hue"},{id:"gamma",type:"number",label:"Gamma"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"brightness",type:"slider",label:"Brightness",default:0,props:{min:-1,max:1,step:.01}},{id:"contrast",type:"slider",label:"Contrast",default:1,props:{min:0,max:3,step:.01}},{id:"saturation",type:"slider",label:"Saturation",default:1,props:{min:0,max:3,step:.01}},{id:"hue",type:"slider",label:"Hue",default:0,props:{min:-180,max:180,step:1}},{id:"gamma",type:"slider",label:"Gamma",default:1,props:{min:.1,max:3,step:.01}}]},ww={id:"displacement",name:"Displacement",version:"1.0.0",category:"visual",description:"Displace texture using displacement map",icon:"move",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"displacementMap",type:"texture",label:"Displacement Map"},{id:"strength",type:"number",label:"Strength"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"strength",type:"slider",label:"Strength",default:.1,props:{min:0,max:1,step:.01}},{id:"channel",type:"select",label:"Channel",default:"rg",props:{options:["r","rg","rgb"]}}]},_w={id:"transform-2d",name:"Transform 2D",version:"1.0.0",category:"visual",description:"Apply 2D transforms (scale, rotate, translate)",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"scale",type:"number",label:"Scale"},{id:"rotation",type:"number",label:"Rotation"},{id:"translateX",type:"number",label:"Translate X"},{id:"translateY",type:"number",label:"Translate Y"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"scale",type:"slider",label:"Scale",default:1,props:{min:.1,max:5,step:.01}},{id:"rotation",type:"slider",label:"Rotation",default:0,props:{min:-180,max:180,step:1}},{id:"translateX",type:"slider",label:"Translate X",default:0,props:{min:-1,max:1,step:.01}},{id:"translateY",type:"slider",label:"Translate Y",default:0,props:{min:-1,max:1,step:.01}}]},xw=[fw,hw,gw,mw,yw,vw,bw,ww,_w],Sw={id:"text-generation",name:"Text Generate",version:"1.0.0",category:"ai",description:"Generate text using local language models",icon:"message-square",platforms:["web","electron"],inputs:[{id:"prompt",type:"string",label:"Prompt"},{id:"trigger",type:"trigger",label:"Generate"}],outputs:[{id:"text",type:"string",label:"Generated Text"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"prompt",type:"text",label:"Prompt",default:"Once upon a time"},{id:"maxTokens",type:"number",label:"Max Tokens",default:50,props:{min:10,max:200}},{id:"temperature",type:"slider",label:"Temperature",default:.7,props:{min:.1,max:2,step:.1}}]},$w={id:"image-classification",name:"Classify Image",version:"1.0.0",category:"ai",description:"Classify images using Vision Transformer",icon:"scan",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"}],outputs:[{id:"labels",type:"data",label:"Labels"},{id:"topLabel",type:"string",label:"Top Label"},{id:"topScore",type:"number",label:"Top Score"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"topK",type:"number",label:"Top K",default:5,props:{min:1,max:10}},{id:"interval",type:"number",label:"Frame Interval",default:30,props:{min:1,max:120}}]},Nw={id:"sentiment-analysis",name:"Sentiment",version:"1.0.0",category:"ai",description:"Analyze text sentiment (positive/negative)",icon:"smile",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Text"}],outputs:[{id:"sentiment",type:"string",label:"Sentiment"},{id:"score",type:"number",label:"Score"},{id:"positive",type:"number",label:"Positive"},{id:"negative",type:"number",label:"Negative"},{id:"loading",type:"boolean",label:"Loading"}],controls:[]},Ew={id:"image-captioning",name:"Caption Image",version:"1.0.0",category:"ai",description:"Generate captions for images",icon:"image",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Caption"}],outputs:[{id:"caption",type:"string",label:"Caption"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"interval",type:"number",label:"Frame Interval",default:60,props:{min:1,max:300}}]},kw={id:"feature-extraction",name:"Text Embed",version:"1.0.0",category:"ai",description:"Convert text to embedding vectors",icon:"hash",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Text"}],outputs:[{id:"embedding",type:"data",label:"Embedding"},{id:"dimensions",type:"number",label:"Dimensions"},{id:"loading",type:"boolean",label:"Loading"}],controls:[]},Cw={id:"object-detection",name:"Detect Objects",version:"1.0.0",category:"ai",description:"Detect and locate objects in images",icon:"box",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"}],outputs:[{id:"objects",type:"data",label:"Objects"},{id:"count",type:"number",label:"Count"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"threshold",type:"slider",label:"Threshold",default:.5,props:{min:.1,max:1,step:.05}},{id:"interval",type:"number",label:"Frame Interval",default:30,props:{min:1,max:120}}]},Mw=[Sw,$w,Nw,Ew,kw,Cw],Tw={id:"http-request",name:"HTTP Request",version:"1.0.0",category:"connectivity",description:"Make HTTP/REST API requests",icon:"globe",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"headers",type:"data",label:"Headers"},{id:"body",type:"data",label:"Body"},{id:"trigger",type:"trigger",label:"Fetch"}],outputs:[{id:"response",type:"data",label:"Response"},{id:"status",type:"number",label:"Status"},{id:"error",type:"string",label:"Error"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"url",type:"text",label:"URL",default:"https://api.example.com/data"},{id:"method",type:"select",label:"Method",default:"GET",props:{options:["GET","POST","PUT","DELETE","PATCH"]}}]},Iw={id:"websocket",name:"WebSocket",version:"1.0.0",category:"connectivity",description:"Real-time WebSocket connection",icon:"radio",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"send",type:"data",label:"Send"},{id:"connect",type:"boolean",label:"Connect"}],outputs:[{id:"message",type:"data",label:"Message"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:"wss://echo.websocket.org"},{id:"autoConnect",type:"toggle",label:"Auto Connect",default:!1}]},Dw={id:"midi-input",name:"MIDI Input",version:"1.0.0",category:"connectivity",description:"Receive MIDI messages from devices",icon:"music",platforms:["web","electron"],inputs:[],outputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"noteOn",type:"boolean",label:"Note On"},{id:"cc",type:"number",label:"CC Number"},{id:"ccValue",type:"number",label:"CC Value"},{id:"connected",type:"boolean",label:"Connected"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"channel",type:"number",label:"Channel (-1=all)",default:-1,props:{min:-1,max:15}}]},Pw={id:"midi-output",name:"MIDI Output",version:"1.0.0",category:"connectivity",description:"Send MIDI messages to devices",icon:"music",platforms:["web","electron"],inputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"connected",type:"boolean",label:"Connected"}],controls:[{id:"channel",type:"number",label:"Channel",default:0,props:{min:0,max:15}}]},Aw={id:"mqtt",name:"MQTT",version:"1.0.0",category:"connectivity",description:"MQTT pub/sub messaging (via WebSocket)",icon:"radio",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"Broker URL"},{id:"topic",type:"string",label:"Topic"},{id:"publish",type:"data",label:"Publish"}],outputs:[{id:"message",type:"data",label:"Message"},{id:"topic",type:"string",label:"Topic"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"Broker URL",default:"ws://localhost:8083/mqtt",props:{placeholder:"ws://broker:8083/mqtt"}},{id:"topic",type:"text",label:"Topic",default:"clasp/data",props:{placeholder:"topic/subtopic"}},{id:"connect",type:"toggle",label:"Connect",default:!0}]},zw={id:"osc",name:"OSC",version:"1.0.0",category:"connectivity",description:"Open Sound Control over WebSocket",icon:"radio-tower",platforms:["web","electron"],inputs:[{id:"host",type:"string",label:"Host"},{id:"port",type:"number",label:"Port"},{id:"address",type:"string",label:"Address"},{id:"send",type:"data",label:"Send"}],outputs:[{id:"address",type:"string",label:"Address"},{id:"args",type:"data",label:"Arguments"},{id:"value",type:"number",label:"Value"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"host",type:"text",label:"Host",default:"localhost"},{id:"port",type:"number",label:"Port",default:8080,props:{min:1,max:65535}},{id:"address",type:"text",label:"Address",default:"/clasp",props:{placeholder:"/path/to/param"}},{id:"connect",type:"toggle",label:"Connect",default:!0}]},Rw={id:"serial",name:"Serial Port",version:"1.0.0",category:"connectivity",description:"Serial port communication (Web Serial API)",icon:"usb",platforms:["web","electron"],inputs:[{id:"send",type:"string",label:"Send"}],outputs:[{id:"data",type:"string",label:"Raw Data"},{id:"line",type:"string",label:"Last Line"},{id:"value",type:"number",label:"Value"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"baudRate",type:"select",label:"Baud Rate",default:9600,props:{options:[9600,19200,38400,57600,115200]}},{id:"connect",type:"toggle",label:"Connect",default:!1}]},Bw={id:"ble",name:"Bluetooth LE",version:"1.0.0",category:"connectivity",description:"Bluetooth Low Energy communication (Web Bluetooth API)",icon:"bluetooth",platforms:["web","electron"],inputs:[{id:"send",type:"data",label:"Send"}],outputs:[{id:"value",type:"number",label:"Value"},{id:"text",type:"string",label:"Text"},{id:"rawValue",type:"data",label:"Raw Value"},{id:"deviceName",type:"string",label:"Device Name"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"serviceUUID",type:"text",label:"Service UUID",default:"",props:{placeholder:"e.g., heart_rate or 0000180d-..."}},{id:"characteristicUUID",type:"text",label:"Characteristic UUID",default:"",props:{placeholder:"UUID"}},{id:"connect",type:"toggle",label:"Connect",default:!1}]},Ow={id:"clasp-connection",name:"CLASP Connection",version:"1.0.0",category:"connectivity",description:"Manage a named CLASP connection (can be shared across nodes)",icon:"network",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"connect",type:"trigger",label:"Connect"},{id:"disconnect",type:"trigger",label:"Disconnect"}],outputs:[{id:"connected",type:"boolean",label:"Connected"},{id:"status",type:"string",label:"Status"},{id:"error",type:"string",label:"Error"},{id:"session",type:"string",label:"Session ID"},{id:"connectionId",type:"string",label:"Connection ID"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default",props:{placeholder:"Unique ID to reference this connection"}},{id:"url",type:"text",label:"URL",default:"ws://localhost:7330",props:{placeholder:"ws://host:port"}},{id:"name",type:"text",label:"Client Name",default:"latch"},{id:"token",type:"text",label:"Token",default:"",props:{placeholder:"cpsk_... or empty for open"}},{id:"autoConnect",type:"toggle",label:"Auto Connect",default:!0},{id:"autoReconnect",type:"toggle",label:"Auto Reconnect",default:!0},{id:"reconnectDelay",type:"number",label:"Reconnect Delay (ms)",default:5e3,props:{min:1e3,max:6e4}}],tags:["clasp","protocol","connection","websocket"]},Vw={id:"clasp-subscribe",name:"CLASP Subscribe",version:"1.0.0",category:"connectivity",description:"Subscribe to CLASP address patterns and receive values",icon:"bell",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"pattern",type:"string",label:"Pattern"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"address",type:"string",label:"Address"},{id:"type",type:"string",label:"Signal Type"},{id:"revision",type:"number",label:"Revision"},{id:"subscribed",type:"boolean",label:"Subscribed"},{id:"updated",type:"boolean",label:"Updated"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"pattern",type:"text",label:"Pattern",default:"/**",props:{placeholder:"/lights/** or /param/*"}},{id:"types",type:"select",label:"Signal Types",default:"all",props:{options:["all","param","event","stream","gesture"]}},{id:"maxRate",type:"number",label:"Max Rate (Hz)",default:0,props:{min:0,max:120,step:1}},{id:"epsilon",type:"number",label:"Change Threshold",default:0,props:{min:0,max:1,step:.01}}],tags:["clasp","subscribe","listen","receive"]},Lw={id:"clasp-set",name:"CLASP Set",version:"1.0.0",category:"connectivity",description:"Set a CLASP parameter value (persistent state)",icon:"edit-3",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"value",type:"any",label:"Value"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Address",default:"/param",props:{placeholder:"/lights/strip1/brightness"}}],tags:["clasp","set","parameter","send"]},Fw={id:"clasp-emit",name:"CLASP Emit",version:"1.0.0",category:"connectivity",description:"Emit a CLASP event (one-time trigger)",icon:"zap",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"payload",type:"any",label:"Payload"},{id:"trigger",type:"trigger",label:"Emit"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Event Address",default:"/event",props:{placeholder:"/cue/fire"}}],tags:["clasp","emit","event","trigger"]},Hw={id:"clasp-get",name:"CLASP Get",version:"1.0.0",category:"connectivity",description:"Get current value of a CLASP parameter",icon:"download",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"trigger",type:"trigger",label:"Get"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Address",default:"/param",props:{placeholder:"/lights/strip1/brightness"}}],tags:["clasp","get","read","fetch"]},Yw={id:"clasp-stream",name:"CLASP Stream",version:"1.0.0",category:"connectivity",description:"Stream high-rate data (continuous updates)",icon:"activity",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"value",type:"any",label:"Value"}],outputs:[{id:"sent",type:"boolean",label:"Sent"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"},{id:"address",type:"text",label:"Address",default:"/stream",props:{placeholder:"/sensor/temperature"}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}],tags:["clasp","stream","continuous","high-rate"]},Xw={id:"clasp-bundle",name:"CLASP Bundle",version:"1.0.0",category:"connectivity",description:"Send atomic bundles of operations",icon:"package",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"messages",type:"data",label:"Messages"},{id:"at",type:"number",label:"Schedule At (us)"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default"}],tags:["clasp","bundle","atomic","batch"]},Gw=[Tw,Iw,Dw,Pw,Aw,zw,Rw,Bw,Ow,Vw,Lw,Fw,Hw,Yw,Xw],Uw={id:"json-parse",name:"JSON Parse",version:"1.0.0",category:"data",description:"Parse JSON string to object",icon:"braces",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"JSON String"}],outputs:[{id:"output",type:"data",label:"Object"},{id:"error",type:"string",label:"Error"}],controls:[{id:"path",type:"text",label:"Path",default:"",props:{placeholder:"e.g., data.items[0]"}}]},Zw={id:"json-stringify",name:"JSON Stringify",version:"1.0.0",category:"data",description:"Convert object to JSON string",icon:"braces",platforms:["web","electron"],inputs:[{id:"input",type:"data",label:"Object"}],outputs:[{id:"output",type:"string",label:"JSON String"}],controls:[{id:"pretty",type:"toggle",label:"Pretty Print",default:!1}]},qw={id:"texture-to-data",name:"Texture to Data",version:"1.0.0",category:"data",description:"Convert texture to image data for AI processing",icon:"image-down",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture",required:!0},{id:"trigger",type:"trigger",label:"Capture"}],outputs:[{id:"data",type:"data",label:"Image Data"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"}],controls:[{id:"format",type:"select",label:"Format",default:"imageData",props:{options:["imageData","base64","blob"]}},{id:"continuous",type:"toggle",label:"Continuous",default:!1}]},Ww=[Uw,Zw,qw],Kw={id:"function",name:"Function",version:"1.0.0",category:"code",description:"Custom JavaScript function with sandboxed execution",icon:"code-2",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"},{id:"error",type:"string",label:"Error"}],controls:[{id:"code",type:"code",label:"Code",default:`// Access inputs via: inputs.a, inputs.b, etc.
// Access time via: time, deltaTime, frame
// Use state: getState('key', default), setState('key', value)
// Return a value or object with multiple outputs

return inputs.a + inputs.b;`}]},jw={id:"expression",name:"Expression",version:"1.0.0",category:"code",description:"Inline math expression evaluator",icon:"calculator",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"},{id:"c",type:"number",label:"C"},{id:"d",type:"number",label:"D"}],outputs:[{id:"result",type:"number",label:"Result"},{id:"error",type:"string",label:"Error"}],controls:[{id:"expression",type:"text",label:"Expression",default:"a + b",props:{placeholder:"e.g., sin(t) * a + b"}}]},Jw={id:"template",name:"Template",version:"1.0.0",category:"code",description:"String template with variable interpolation",icon:"text-cursor-input",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"output",type:"string",label:"Output"}],controls:[{id:"template",type:"text",label:"Template",default:"Value: {{a}}",props:{placeholder:"Use {{varname}} for interpolation"}}]},Qw={id:"counter",name:"Counter",version:"1.0.0",category:"code",description:"Increment/decrement counter with min/max",icon:"list-ordered",platforms:["web","electron"],inputs:[{id:"increment",type:"trigger",label:"Increment"},{id:"decrement",type:"trigger",label:"Decrement"},{id:"reset",type:"trigger",label:"Reset"},{id:"set",type:"number",label:"Set Value"}],outputs:[{id:"count",type:"number",label:"Count"},{id:"normalized",type:"number",label:"Normalized"},{id:"atMin",type:"boolean",label:"At Min"},{id:"atMax",type:"boolean",label:"At Max"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:100},{id:"step",type:"number",label:"Step",default:1},{id:"wrap",type:"toggle",label:"Wrap Around",default:!1}]},e_={id:"toggle",name:"Toggle",version:"1.0.0",category:"code",description:"Flip-flop toggle with set/reset",icon:"toggle-left",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Toggle"},{id:"set",type:"trigger",label:"Set"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"value",type:"boolean",label:"Value"},{id:"inverted",type:"boolean",label:"Inverted"},{id:"number",type:"number",label:"Number"}],controls:[{id:"initial",type:"toggle",label:"Initial Value",default:!1}]},t_={id:"sample-hold",name:"Sample & Hold",version:"1.0.0",category:"code",description:"Capture and hold value on trigger",icon:"clipboard",platforms:["web","electron"],inputs:[{id:"input",type:"any",label:"Input"},{id:"trigger",type:"trigger",label:"Sample"}],outputs:[{id:"output",type:"any",label:"Output"}],controls:[]},n_={id:"value-delay",name:"Value Delay",version:"1.0.0",category:"code",description:"Delay value by N frames",icon:"timer",platforms:["web","electron"],inputs:[{id:"input",type:"any",label:"Input"}],outputs:[{id:"output",type:"any",label:"Output"}],controls:[{id:"frames",type:"number",label:"Frames",default:1,props:{min:1,max:300}}]},o_=[Kw,jw,Jw,Qw,e_,t_,n_],i_={id:"subflow-input",name:"Subflow Input",version:"1.0.0",category:"subflows",description:"Input port for a subflow",icon:"log-in",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"any",label:"Value"}],controls:[{id:"portName",type:"text",label:"Port Name",default:"input"},{id:"portType",type:"select",label:"Type",default:"any",props:{options:["any","number","string","boolean","trigger","audio","texture","data"]}},{id:"defaultValue",type:"text",label:"Default",default:""}]},r_={id:"subflow-output",name:"Subflow Output",version:"1.0.0",category:"subflows",description:"Output port for a subflow",icon:"log-out",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[],controls:[{id:"portName",type:"text",label:"Port Name",default:"output"},{id:"portType",type:"select",label:"Type",default:"any",props:{options:["any","number","string","boolean","trigger","audio","texture","data"]}}]},l_=[i_,r_],a_={id:"scene-3d",name:"Scene 3D",version:"1.0.0",category:"3d",description:"Container for 3D objects",icon:"box",platforms:["web","electron"],inputs:[{id:"objects",type:"object3d",label:"Objects",multiple:!0}],outputs:[{id:"scene",type:"scene3d",label:"Scene"}],controls:[{id:"backgroundColor",type:"color",label:"Background",default:"#000000"},{id:"showGrid",type:"toggle",label:"Show Grid",default:!1}]},s_={id:"camera-3d",name:"Camera 3D",version:"1.0.0",category:"3d",description:"Perspective or orthographic camera",icon:"camera",platforms:["web","electron"],inputs:[{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"},{id:"targetX",type:"number",label:"Target X"},{id:"targetY",type:"number",label:"Target Y"},{id:"targetZ",type:"number",label:"Target Z"}],outputs:[{id:"camera",type:"camera3d",label:"Camera"}],controls:[{id:"type",type:"select",label:"Type",default:"perspective",props:{options:["perspective","orthographic"]}},{id:"fov",type:"number",label:"FOV",default:50,props:{min:10,max:120}},{id:"near",type:"number",label:"Near",default:.1},{id:"far",type:"number",label:"Far",default:1e3},{id:"orthoSize",type:"number",label:"Ortho Size",default:5},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:2},{id:"posZ",type:"number",label:"Position Z",default:5},{id:"targetX",type:"number",label:"Target X",default:0},{id:"targetY",type:"number",label:"Target Y",default:0},{id:"targetZ",type:"number",label:"Target Z",default:0}]},u_={id:"render-3d",name:"Render 3D",version:"1.0.0",category:"3d",description:"Render 3D scene to texture",icon:"image",platforms:["web","electron"],inputs:[{id:"scene",type:"scene3d",label:"Scene",required:!0},{id:"camera",type:"camera3d",label:"Camera",required:!0}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"depth",type:"texture",label:"Depth"}],controls:[{id:"width",type:"number",label:"Width",default:512,props:{min:64,max:2048}},{id:"height",type:"number",label:"Height",default:512,props:{min:64,max:2048}},{id:"includeDepth",type:"toggle",label:"Include Depth",default:!1}]},c_={id:"box-3d",name:"Box 3D",version:"1.0.0",category:"3d",description:"Create a box/cube mesh",icon:"box",platforms:["web","electron"],inputs:[{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"depth",type:"number",label:"Depth"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"width",type:"number",label:"Width",default:1},{id:"height",type:"number",label:"Height",default:1},{id:"depth",type:"number",label:"Depth",default:1},{id:"color",type:"color",label:"Color",default:"#808080"}]},d_={id:"sphere-3d",name:"Sphere 3D",version:"1.0.0",category:"3d",description:"Create a sphere mesh",icon:"circle",platforms:["web","electron"],inputs:[{id:"radius",type:"number",label:"Radius"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radius",type:"number",label:"Radius",default:.5},{id:"widthSegments",type:"number",label:"Width Segs",default:32,props:{min:3,max:64}},{id:"heightSegments",type:"number",label:"Height Segs",default:16,props:{min:2,max:32}},{id:"color",type:"color",label:"Color",default:"#808080"}]},p_={id:"plane-3d",name:"Plane 3D",version:"1.0.0",category:"3d",description:"Create a plane mesh",icon:"square",platforms:["web","electron"],inputs:[{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"width",type:"number",label:"Width",default:1},{id:"height",type:"number",label:"Height",default:1},{id:"color",type:"color",label:"Color",default:"#808080"}]},f_={id:"cylinder-3d",name:"Cylinder 3D",version:"1.0.0",category:"3d",description:"Create a cylinder mesh",icon:"cylinder",platforms:["web","electron"],inputs:[{id:"radiusTop",type:"number",label:"Radius Top"},{id:"radiusBottom",type:"number",label:"Radius Bottom"},{id:"height",type:"number",label:"Height"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radiusTop",type:"number",label:"Radius Top",default:.5},{id:"radiusBottom",type:"number",label:"Radius Bottom",default:.5},{id:"height",type:"number",label:"Height",default:1},{id:"radialSegments",type:"number",label:"Segments",default:32,props:{min:3,max:64}},{id:"color",type:"color",label:"Color",default:"#808080"}]},h_={id:"torus-3d",name:"Torus 3D",version:"1.0.0",category:"3d",description:"Create a torus (donut) mesh",icon:"circle-dot",platforms:["web","electron"],inputs:[{id:"radius",type:"number",label:"Radius"},{id:"tube",type:"number",label:"Tube"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radius",type:"number",label:"Radius",default:.5},{id:"tube",type:"number",label:"Tube",default:.2},{id:"radialSegments",type:"number",label:"Radial Segs",default:16,props:{min:2,max:32}},{id:"tubularSegments",type:"number",label:"Tubular Segs",default:100,props:{min:3,max:200}},{id:"color",type:"color",label:"Color",default:"#808080"}]},g_={id:"transform-3d",name:"Transform 3D",version:"1.0.0",category:"3d",description:"Apply position, rotation, and scale",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"object",type:"object3d",label:"Object",required:!0},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"},{id:"rotX",type:"number",label:"Rot X"},{id:"rotY",type:"number",label:"Rot Y"},{id:"rotZ",type:"number",label:"Rot Z"},{id:"scaleX",type:"number",label:"Scale X"},{id:"scaleY",type:"number",label:"Scale Y"},{id:"scaleZ",type:"number",label:"Scale Z"}],outputs:[{id:"object",type:"object3d",label:"Object"},{id:"transform",type:"transform3d",label:"Transform"}],controls:[{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"rotX",type:"number",label:"Rotation X",default:0},{id:"rotY",type:"number",label:"Rotation Y",default:0},{id:"rotZ",type:"number",label:"Rotation Z",default:0},{id:"scaleX",type:"number",label:"Scale X",default:1},{id:"scaleY",type:"number",label:"Scale Y",default:1},{id:"scaleZ",type:"number",label:"Scale Z",default:1}]},m_={id:"material-3d",name:"Material 3D",version:"1.0.0",category:"3d",description:"Create a PBR material",icon:"palette",platforms:["web","electron"],inputs:[{id:"colorMap",type:"texture",label:"Color Map"},{id:"normalMap",type:"texture",label:"Normal Map"},{id:"roughnessMap",type:"texture",label:"Roughness Map"},{id:"metalnessMap",type:"texture",label:"Metalness Map"},{id:"metalness",type:"number",label:"Metalness"},{id:"roughness",type:"number",label:"Roughness"},{id:"opacity",type:"number",label:"Opacity"}],outputs:[{id:"material",type:"material3d",label:"Material"}],controls:[{id:"type",type:"select",label:"Type",default:"standard",props:{options:["standard","basic","phong","physical"]}},{id:"color",type:"color",label:"Color",default:"#808080"},{id:"metalness",type:"slider",label:"Metalness",default:0,props:{min:0,max:1,step:.01}},{id:"roughness",type:"slider",label:"Roughness",default:.5,props:{min:0,max:1,step:.01}},{id:"opacity",type:"slider",label:"Opacity",default:1,props:{min:0,max:1,step:.01}},{id:"wireframe",type:"toggle",label:"Wireframe",default:!1},{id:"side",type:"select",label:"Side",default:"front",props:{options:["front","back","double"]}},{id:"emissive",type:"color",label:"Emissive",default:"#000000"},{id:"emissiveIntensity",type:"number",label:"Emissive Int.",default:0,props:{min:0,max:10}}]},y_={id:"group-3d",name:"Group 3D",version:"1.0.0",category:"3d",description:"Combine multiple objects into a group",icon:"layers",platforms:["web","electron"],inputs:[{id:"objects",type:"object3d",label:"Objects",multiple:!0},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0}]},v_={id:"ambient-light-3d",name:"Ambient Light",version:"1.0.0",category:"3d",description:"Uniform lighting from all directions",icon:"sun",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:.5,props:{min:0,max:2,step:.01}}]},b_={id:"directional-light-3d",name:"Directional Light",version:"1.0.0",category:"3d",description:"Light from a specific direction (like sun)",icon:"sun-dim",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"posX",type:"number",label:"Position X",default:5},{id:"posY",type:"number",label:"Position Y",default:5},{id:"posZ",type:"number",label:"Position Z",default:5},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!0}]},w_={id:"point-light-3d",name:"Point Light",version:"1.0.0",category:"3d",description:"Light that radiates in all directions from a point",icon:"lightbulb",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"distance",type:"number",label:"Distance",default:0,props:{min:0}},{id:"decay",type:"number",label:"Decay",default:2,props:{min:0,max:5}},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:2},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!1}]},__={id:"spot-light-3d",name:"Spot Light",version:"1.0.0",category:"3d",description:"Cone-shaped light like a spotlight",icon:"flashlight",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"distance",type:"number",label:"Distance",default:0,props:{min:0}},{id:"angle",type:"slider",label:"Angle",default:30,props:{min:1,max:90,step:1}},{id:"penumbra",type:"slider",label:"Penumbra",default:.1,props:{min:0,max:1,step:.01}},{id:"decay",type:"number",label:"Decay",default:2,props:{min:0,max:5}},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:5},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"targetX",type:"number",label:"Target X",default:0},{id:"targetY",type:"number",label:"Target Y",default:0},{id:"targetZ",type:"number",label:"Target Z",default:0},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!0}]},x_={id:"gltf-loader",name:"GLTF Loader",version:"1.0.0",category:"3d",description:"Load 3D models in GLTF/GLB format",icon:"file-box",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"},{id:"loading",type:"boolean",label:"Loading"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:""},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"scale",type:"number",label:"Scale",default:1,props:{min:.001,max:100}}]},S_=[a_,s_,u_,c_,d_,p_,f_,h_,g_,m_,y_,v_,b_,w_,__,x_],$_={id:"main-output",name:"Main Output",version:"1.0.0",category:"outputs",description:"Final output viewer with large preview",icon:"monitor-play",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"}],outputs:[],controls:[]},N_={class:"preview-area"},E_=["width","height"],k_={class:"input-port"},C_={class:"node-footer"},M_={class:"status-text"},T_=ye({__name:"MainOutputNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Xt(),o=We(),i=fe(null),r=fe(null),l=fe(!1),a=F(()=>{var m,g;const b=((m=t.data)==null?void 0:m.nodeType)??"main-output";return o.getDefinition(b)??((g=t.data)==null?void 0:g.definition)??null}),s=F(()=>{var b;return a.value?((b=lt[a.value.category])==null?void 0:b.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),u=F(()=>l.value?320:200),c=F(()=>l.value?200:125);let d=null;function p(){var R;if(!i.value||!r.value)return;const b=n.nodeMetrics.get(t.id);if(!((R=b==null?void 0:b.outputValues)==null?void 0:R._input_texture)){r.value.fillStyle="#1a1a1a",r.value.fillRect(0,0,u.value,c.value),r.value.fillStyle="#666",r.value.font="12px monospace",r.value.textAlign="center",r.value.fillText("No Input",u.value/2,c.value/2);return}const _=Ns().getCanvas();r.value.drawImage(_,0,0,u.value,c.value)}function f(){const b=()=>{n.isRunning&&p(),d=requestAnimationFrame(b)};b()}function N(){d!==null&&(cancelAnimationFrame(d),d=null)}function $(){l.value=!l.value}Fe(()=>{i.value&&(r.value=i.value.getContext("2d"),p(),f())}),Yt(()=>{N()});function T(b){var m;return((m=Ge[b])==null?void 0:m.color)??"var(--color-neutral-400)"}return(b,m)=>(H(),W("div",{class:xe(["main-output-node",{selected:t.selected,expanded:l.value}])},[C("div",{class:"node-header",style:de({borderLeftColor:s.value})},[m[0]||(m[0]=C("span",{class:"node-title"},"OUTPUT",-1)),C("button",{class:"expand-btn",onClick:he($,["stop"])},[l.value?(H(),$e(B(Gs),{key:0,size:14})):(H(),$e(B(Xs),{key:1,size:14}))])],4),C("div",N_,[C("canvas",{ref_key:"previewCanvas",ref:i,width:u.value,height:c.value,class:"preview-canvas"},null,8,E_),C("div",k_,[pe(B(Me),{id:"texture",type:"target",position:B(ee).Left,style:de({background:T("texture")}),class:"port-handle"},null,8,["position","style"]),m[1]||(m[1]=C("span",{class:"port-label"},"Texture",-1))])]),C("div",C_,[C("span",M_,Ne(B(n).isRunning?"Live":"Stopped"),1),m[2]||(m[2]=C("span",{class:"resolution-text"}," 512 x 512 ",-1))])],2))}}),I_=Ke(T_,[["__scopeId","data-v-469fe9ec"]]),D_=[$_],P_={class:"handles-column handles-left"},A_=["onMouseenter"],z_={class:"label-text"},R_={class:"handles-column handles-right"},B_=["onMouseenter"],O_={class:"label-text"},V_={class:"node-content"},L_={key:1,class:"node-body"},F_={key:0,class:"node-preview"},H_={key:1,class:"node-controls"},Y_={class:"control-label"},X_={key:0,class:"control-slider"},G_=["value","min","max","step","onInput"],U_={class:"slider-value"},Z_=["checked","onChange"],q_={class:"toggle-label"},W_=["value","onChange"],K_=["value"],j_=["value","step","onInput"],J_=["value","placeholder","onInput"],Q_=["value","onInput"],ex={class:"color-value"},tx=20,nx=ye({__name:"BaseNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=bt(),o=We(),i=fe(!1),r=fe(null),l=fe(!1),a=fe(""),s=fe(null),u=F(()=>{var E,x;const v=(E=t.data)==null?void 0:E.nodeType;if(v){const L=o.getDefinition(v);if(L)return L}return((x=t.data)==null?void 0:x.definition)??null}),c=F(()=>{var v,E;return((v=t.data)==null?void 0:v.label)??((E=t.data)==null?void 0:E.nodeType)??"Node"}),d={debug:Bs,inputs:Ms,outputs:Cs,timing:Vs,math:Os,logic:Fs,audio:Zs,video:As,visual:Ks,shaders:qs,data:Ls,ai:ks,code:qo,"3d":Rs,connectivity:Es,subflows:Hs,custom:Ws},p=F(()=>u.value?d[u.value.category]??qo:qo),f=F(()=>{var v;return u.value?((v=lt[u.value.category])==null?void 0:v.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),N=F(()=>{var v;return((v=u.value)==null?void 0:v.inputs)??[]}),$=F(()=>{var v;return((v=u.value)==null?void 0:v.outputs)??[]}),T=F(()=>{var v;return((v=u.value)==null?void 0:v.controls)??[]}),b=F(()=>u.value?u.value.outputs.some(v=>v.type==="texture"):!1),m=F(()=>u.value?T.value.some(v=>v.type==="slider"||v.type==="toggle"||v.type==="select"||v.type==="number"||v.type==="text"||v.type==="color"):!1),g=F(()=>T.value.filter(v=>v.type!=="code")),_=F(()=>!b.value&&!m.value),R=["slider","trigger","xy-pad","constant","lfo","monitor","oscilloscope"],P=["math","logic","3d","audio"],Z=F(()=>{var E;if(!u.value)return!1;const v=(E=t.data)==null?void 0:E.nodeType;return R.includes(v)||b.value||!m.value?!1:P.includes(u.value.category)}),U=F(()=>{var E;const v={};for(const x of T.value)v[x.id]=((E=t.data)==null?void 0:E[x.id])??x.default;return v}),Q=F(()=>Math.max(N.value.length,$.value.length,1));function G(v){var E;return((E=Ge[v])==null?void 0:E.color)??"var(--color-neutral-400)"}function V(v,E){return v.includes("norm")||v.includes("Norm")||v.startsWith("0-1")||v.includes("normalized")?"01":v.includes("raw")||v.includes("Raw")?"raw":v==="pass"||v.includes("through")||v==="passthrough"?"pass":{boolean:"bool",trigger:"pulse",any:"any",number:"float",string:"str",texture:"tex",audio:"audio",data:"data",scene3d:"scene",object3d:"obj3d",geometry3d:"geo",material3d:"mat",camera3d:"cam",light3d:"light",transform3d:"xfm",video:"video"}[E]??E}function y(v,E){n.updateNodeData(t.id,{[v]:E})}function Y(){i.value=!i.value}function h(){a.value=c.value,l.value=!0,ot(()=>{var v,E;(v=s.value)==null||v.focus(),(E=s.value)==null||E.select()})}function D(){if(l.value){const v=a.value.trim();v&&v!==c.value&&n.updateNodeData(t.id,{label:v}),l.value=!1}}function w(){l.value=!1,a.value=""}function z(v){v.key==="Enter"?(v.preventDefault(),D()):v.key==="Escape"&&(v.preventDefault(),w())}return(v,E)=>(H(),W("div",{class:xe(["base-node",{selected:t.selected,collapsed:i.value,"simple-node":_.value&&!i.value,"compact-node":Z.value&&!i.value,"has-preview":b.value}]),style:de({"--port-count":Q.value,"--port-spacing":tx+"px"})},[C("div",P_,[(H(!0),W(Pe,null,ft(N.value,x=>(H(),W("div",{key:x.id,class:"handle-slot",onMouseenter:L=>r.value=`in-${x.id}`,onMouseleave:E[0]||(E[0]=L=>r.value=null)},[pe(B(Me),{id:x.id,type:"target",position:B(ee).Left,style:de({background:G(x.type)}),class:"port-handle"},null,8,["id","position","style"]),C("div",{class:xe(["port-label port-label-left",{visible:r.value===`in-${x.id}`||t.selected}])},[C("span",z_,Ne(x.label),1),C("span",{class:"label-type",style:de({color:G(x.type)})},Ne(V(x.id,x.type)),5)],2)],40,A_))),128))]),C("div",R_,[(H(!0),W(Pe,null,ft($.value,x=>(H(),W("div",{key:x.id,class:"handle-slot",onMouseenter:L=>r.value=`out-${x.id}`,onMouseleave:E[1]||(E[1]=L=>r.value=null)},[pe(B(Me),{id:x.id,type:"source",position:B(ee).Right,style:de({background:G(x.type)}),class:"port-handle"},null,8,["id","position","style"]),C("div",{class:xe(["port-label port-label-right",{visible:r.value===`out-${x.id}`||t.selected}])},[C("span",O_,Ne(x.label),1),C("span",{class:"label-type",style:de({color:G(x.type)})},Ne(V(x.id,x.type)),5)],2)],40,B_))),128))]),C("div",V_,[C("div",{class:"node-header",style:de({borderLeftColor:f.value})},[(H(),$e(dt(p.value),{size:14,class:"node-icon",style:de({color:f.value})},null,8,["style"])),l.value?vn((H(),W("input",{key:0,ref_key:"labelInputRef",ref:s,"onUpdate:modelValue":E[2]||(E[2]=x=>a.value=x),type:"text",class:"node-title-input",onBlur:D,onKeydown:z,onMousedown:E[3]||(E[3]=he(()=>{},["stop"])),onClick:E[4]||(E[4]=he(()=>{},["stop"]))},null,544)),[[go,a.value]]):(H(),W("span",{key:1,class:"node-title",title:"Double-click to edit label",onDblclick:he(h,["stop","prevent"])},Ne(c.value),33)),_.value?ve("",!0):(H(),W("button",{key:2,class:"node-collapse-btn",onClick:he(Y,["stop"])},[i.value?(H(),$e(B(xn),{key:1,size:14})):(H(),$e(B(Sn),{key:0,size:14}))]))],4),Z.value&&!i.value?(H(),W("div",{key:0,class:"compact-body",style:de({background:f.value})},[(H(),$e(dt(p.value),{size:32,class:"compact-icon"}))],4)):!_.value&&!i.value?(H(),W("div",L_,[b.value?(H(),W("div",F_,[pe(Ts,{"node-id":t.id,width:120,height:80,"show-placeholder":!0},null,8,["node-id"])])):ve("",!0),m.value&&g.value.length>0?(H(),W("div",H_,[(H(!0),W(Pe,null,ft(g.value,x=>{var L,K,te,ie,j,A;return H(),W("div",{key:x.id,class:"inline-control"},[C("label",Y_,Ne(x.label),1),x.type==="slider"?(H(),W("div",X_,[C("input",{type:"range",value:U.value[x.id]??0,min:((L=x.props)==null?void 0:L.min)??0,max:((K=x.props)==null?void 0:K.max)??1,step:((te=x.props)==null?void 0:te.step)??.01,onInput:O=>y(x.id,parseFloat(O.target.value)),onMousedown:E[5]||(E[5]=he(()=>{},["stop"]))},null,40,G_),C("span",U_,Ne((U.value[x.id]??0).toFixed(2)),1)])):x.type==="toggle"?(H(),W("label",{key:1,class:"control-toggle",onMousedown:E[6]||(E[6]=he(()=>{},["stop"]))},[C("input",{type:"checkbox",checked:U.value[x.id],onChange:O=>y(x.id,O.target.checked)},null,40,Z_),E[11]||(E[11]=C("span",{class:"toggle-track"},[C("span",{class:"toggle-thumb"})],-1)),C("span",q_,Ne(U.value[x.id]?"ON":"OFF"),1)],32)):x.type==="select"?(H(),W("select",{key:2,class:"control-select",value:U.value[x.id],onChange:O=>y(x.id,O.target.value),onMousedown:E[7]||(E[7]=he(()=>{},["stop"]))},[(H(!0),W(Pe,null,ft(((ie=x.props)==null?void 0:ie.options)??[],O=>(H(),W("option",{key:O,value:O},Ne(O),9,K_))),128))],40,W_)):x.type==="number"?(H(),W("input",{key:3,type:"number",class:"control-number",value:U.value[x.id]??0,step:((j=x.props)==null?void 0:j.step)??1,onInput:O=>y(x.id,parseFloat(O.target.value)||0),onMousedown:E[8]||(E[8]=he(()=>{},["stop"]))},null,40,j_)):x.type==="text"?(H(),W("input",{key:4,type:"text",class:"control-text",value:U.value[x.id]??"",placeholder:((A=x.props)==null?void 0:A.placeholder)??"",onInput:O=>y(x.id,O.target.value),onMousedown:E[9]||(E[9]=he(()=>{},["stop"]))},null,40,J_)):x.type==="color"?(H(),W("div",{key:5,class:"control-color",onMousedown:E[10]||(E[10]=he(()=>{},["stop"]))},[C("input",{type:"color",value:U.value[x.id]??"#808080",onInput:O=>y(x.id,O.target.value)},null,40,Q_),C("span",ex,Ne(U.value[x.id]),1)],32)):ve("",!0)])}),128))])):ve("",!0)])):ve("",!0)])],6))}}),_l=Ke(nx,[["__scopeId","data-v-a6afa536"]]),ox={default:Oe(_l),custom:Oe(_l),trigger:Oe(Q0),"xy-pad":Oe(vb),textbox:Oe(kb),monitor:Oe(Rb),oscilloscope:Oe(Wb),graph:Oe(m1),equalizer:Oe(M1),"main-output":Oe(I_)},xl=[...Cb,...T1,...L1,...Z1,...tw,...pw,...xw,...Mw,...Gw,...Ww,...o_,...l_,...S_,...D_];function ix(){const e=We();for(const t of xl)e.register(t);console.log(`[Registry] Registered ${xl.length} nodes`)}const rx={class:"editor-view"},lx={class:"panel-info"},ax={key:1,class:"empty-state"},sx={key:0,class:"connection-error"},ux=ye({__name:"EditorView",setup(e){const{canUndo:t,canRedo:n,undo:o,redo:i,startBatch:r,endBatch:l}=R0(),a=fe(null);let s=null;const u=fe(null),c=bt(),d=Is(),p=We(),f=Ce(),{onConnect:N,addEdges:$,onNodeDragStop:T,onPaneReady:b,onPaneClick:m,onNodeClick:g,project:_,fitView:R,setViewport:P,getViewport:Z,getSelectedEdges:U}=f,Q={animated:Oe(I0)};ix();const G=fe(!0);Fe(async()=>{c.activeFlow||!await c.loadSampleFlowIfFirstVisit()&&!c.activeFlow&&c.createFlow("My First Flow"),G.value=!1});function V(A){const O=A0(A,q=>p.getDefinition(q),q=>{var J,ne;return(ne=(J=c.activeFlow)==null?void 0:J.nodes.find(ue=>ue.id===q))==null?void 0:ne.data});return!O.valid&&O.reason&&y(O.reason),O.valid}function y(A){a.value=A,s&&clearTimeout(s),s=setTimeout(()=>{a.value=null},2e3)}function Y(A){var ne,ue;const O=(ne=A.data)==null?void 0:ne.nodeType;if(!O)return"var(--color-neutral-400)";const q=p.getDefinition(O);if(!q)return"var(--color-neutral-400)";const J=q.category;return((ue=lt[J])==null?void 0:ue.color)??"var(--color-neutral-400)"}N(A=>{$([A]),c.activeFlow&&c.addEdge(A.source,A.sourceHandle??"",A.target,A.targetHandle??"")}),T(({node:A})=>{c.updateNodePosition(A.id,A.position)});function h(A){A.preventDefault(),A.dataTransfer&&(A.dataTransfer.dropEffect="copy")}function D(A){var ge;const O=(ge=A.dataTransfer)==null?void 0:ge.getData("application/clasp-node");if(!O)return;const q=p.getDefinition(O);if(!q)return;const{left:J,top:ne}=A.currentTarget.getBoundingClientRect(),ue=_({x:A.clientX-J,y:A.clientY-ne}),ce=r();c.addNode(O,ue,{label:q.name,nodeType:O,definition:q}),l(ce,`Add ${q.name} node`)}_e(()=>d.zoom,A=>{const O=Z();P({...O,zoom:A})}),b(()=>{c.activeNodes.length>0&&R({padding:.2})}),_e(()=>f.getSelectedNodes.value,A=>{const O=A.map(q=>q.id);d.selectNodes(O),O.length===1?d.setInspectedNode(O[0]):O.length===0&&d.setInspectedNode(null)}),m(()=>{d.clearSelection(),d.setInspectedNode(null)}),g(({node:A,event:O})=>{O.shiftKey||d.setInspectedNode(A.id)});function w(A){const O=A.filter(q=>q.type==="remove");if(O.length>0){const q=r();for(const J of O)c.removeNode(J.id),d.removeFromSelection(J.id),d.inspectedNode===J.id&&d.setInspectedNode(null);l(q,`Delete ${O.length} node${O.length>1?"s":""}`)}}function z(A){if(A.target instanceof HTMLInputElement||A.target instanceof HTMLTextAreaElement)return;const q=navigator.platform.toUpperCase().indexOf("MAC")>=0?A.metaKey:A.ctrlKey;if(q&&A.key==="z"&&!A.shiftKey){A.preventDefault(),t.value&&o();return}if(q&&A.key==="z"&&A.shiftKey||q&&A.key==="y"){A.preventDefault(),n.value&&i();return}if(q&&A.key==="a"){A.preventDefault();const J=c.activeNodes.map(ne=>ne.id);d.selectNodes(J),c.activeNodes.forEach(ne=>{ne.selected=!0});return}if(q&&A.key==="c"){A.preventDefault(),E();return}if(q&&A.key==="x"){A.preventDefault(),x();return}if(q&&A.key==="v"){A.preventDefault(),L();return}if(q&&A.key==="d"){A.preventDefault(),K();return}if(q&&A.key==="g"){A.preventDefault(),te();return}if(q&&A.key==="e"){A.preventDefault(),ie();return}if(q&&A.shiftKey&&A.key==="G"){A.preventDefault(),j();return}if(A.key==="Delete"||A.key==="Backspace"){A.preventDefault(),v();return}}function v(){const A=d.selectedNodes,q=U.value.map(J=>J.id);if(!(A.length===0&&q.length===0)){if(A.length>0){c.removeNodes(A);const J=c.activeNodes.map(ne=>ne.id);d.cleanupExposedControls(J),d.clearSelection(),d.inspectedNode&&A.includes(d.inspectedNode)&&d.setInspectedNode(null)}q.length>0&&c.removeEdges(q)}}function E(){const A=c.activeNodes.filter(J=>d.selectedNodes.includes(J.id));if(A.length===0)return;const O=Math.min(...A.map(J=>J.position.x)),q=Math.min(...A.map(J=>J.position.y));u.value={nodes:A.map(J=>{var ne;return{nodeType:(ne=J.data)==null?void 0:ne.nodeType,position:{x:J.position.x-O,y:J.position.y-q},data:{...J.data}}}),copyOffset:{x:20,y:20}}}function x(){if(E(),u.value&&u.value.nodes.length>0){const A=r(),O=d.selectedNodes.slice();c.removeNodes(O),d.clearSelection(),l(A,`Cut ${O.length} node${O.length>1?"s":""}`)}}function L(){if(!u.value||u.value.nodes.length===0)return;const A=r(),O=[],q=Z(),J=-q.x/q.zoom+100,ne=-q.y/q.zoom+100;for(const ue of u.value.nodes){const ce=p.getDefinition(ue.nodeType);if(!ce)continue;const ge={x:J+ue.position.x+u.value.copyOffset.x,y:ne+ue.position.y+u.value.copyOffset.y},k=c.addNode(ue.nodeType,ge,{...ue.data,label:ce.name,nodeType:ue.nodeType,definition:ce});k&&O.push(k.id)}u.value.copyOffset.x+=20,u.value.copyOffset.y+=20,d.selectNodes(O),c.activeNodes.forEach(ue=>{ue.selected=O.includes(ue.id)}),l(A,`Paste ${O.length} node${O.length>1?"s":""}`)}function K(){var J;const A=c.activeNodes.filter(ne=>d.selectedNodes.includes(ne.id));if(A.length===0)return;const O=r(),q=[];for(const ne of A){const ue=(J=ne.data)==null?void 0:J.nodeType,ce=p.getDefinition(ue);if(!ce)continue;const ge={x:ne.position.x+20,y:ne.position.y+20},k=c.addNode(ue,ge,{...ne.data,label:ce.name,nodeType:ue,definition:ce});k&&q.push(k.id)}d.selectNodes(q),c.activeNodes.forEach(ne=>{ne.selected=q.includes(ne.id)}),l(O,`Duplicate ${q.length} node${q.length>1?"s":""}`)}function te(){const A=d.selectedNodes;if(A.length<1){y("Select at least one node to create a subflow");return}const O=window.prompt("Enter name for the new subflow:","My Subflow");if(!O)return;const q=r(),J=c.createSubflowFromSelection(A,O);J?(d.clearSelection(),d.selectNodes([J.instanceNodeId]),y(`Created subflow "${O}"`),l(q,`Create subflow "${O}"`)):y("Failed to create subflow")}function ie(){var ne;if(d.selectedNodes.length!==1){y("Select a single subflow instance to edit");return}const A=d.selectedNodes[0],O=c.activeNodes.find(ue=>ue.id===A);if(!O||((ne=O.data)==null?void 0:ne.nodeType)!=="subflow"){y("Selected node is not a subflow");return}const q=O.data.subflowId;if(!c.getFlowById(q)){y("Subflow not found");return}c.setActiveFlow(q)}function j(){var ne;if(d.selectedNodes.length!==1){y("Select a single subflow instance to unpack");return}const A=d.selectedNodes[0],O=c.activeNodes.find(ue=>ue.id===A);if(!O||((ne=O.data)==null?void 0:ne.nodeType)!=="subflow"){y("Selected node is not a subflow");return}const q=r(),J=c.unpackSubflowInstance(A);J&&J.length>0?(d.clearSelection(),d.selectNodes(J),c.activeNodes.forEach(ue=>{ue.selected=J.includes(ue.id)}),l(q,"Unpack subflow")):y("Failed to unpack subflow")}return Fe(async()=>{window.addEventListener("keydown",z);try{const A=V0();await A.initialize();const O=A.getLoadErrors();O.length>0&&console.warn("Custom node load errors:",O)}catch(A){console.error("Failed to initialize custom node loader:",A)}}),Yt(()=>{window.removeEventListener("keydown",z)}),(A,O)=>(H(),W("div",rx,[B(c).activeFlow?(H(),$e(B(og),{key:0,nodes:B(c).activeFlow.nodes,"onUpdate:nodes":O[0]||(O[0]=q=>B(c).activeFlow.nodes=q),edges:B(c).activeFlow.edges,"onUpdate:edges":O[1]||(O[1]=q=>B(c).activeFlow.edges=q),"node-types":B(ox),"edge-types":Q,"default-edge-options":{type:"animated"},"is-valid-connection":V,"snap-to-grid":B(d).snapToGrid,"snap-grid":[B(d).gridSize,B(d).gridSize],"connection-line-style":{stroke:"var(--color-primary-400)",strokeWidth:2},"selection-key-code":null,"multi-selection-key-code":null,"delete-key-code":"Delete","edges-updatable":!0,"selectable-edges":!0,"fit-view-on-init":"",class:"flow-canvas",onDragover:h,onDrop:D,onNodesChange:w},{default:Xe(()=>[B(d).showGrid?(H(),$e(B(dg),{key:0,gap:B(d).gridSize,size:1,"pattern-color":"var(--color-neutral-300)"},null,8,["gap"])):ve("",!0),pe(B(Hg),{position:"bottom-right","show-zoom":!0,"show-fit-view":!0,"show-interactive":!1}),B(d).showMinimap?(H(),$e(B($0),{key:1,position:"bottom-right",style:{marginBottom:"50px"},pannable:!0,zoomable:!0,"node-color":Y})):ve("",!0),pe(B(Wi),{position:"top-right",class:"canvas-panel"},{default:Xe(()=>[C("div",lx,[C("span",null,Ne(B(c).activeNodes.length)+" nodes",1),C("span",null,Ne(B(c).activeEdges.length)+" connections",1)])]),_:1})]),_:1},8,["nodes","edges","node-types","snap-to-grid","snap-grid"])):ve("",!0),B(c).activeNodes.length===0?(H(),W("div",ax,[...O[2]||(O[2]=[C("p",null,"Drag nodes from the sidebar to get started",-1)])])):ve("",!0),pe(Ds,{name:"toast"},{default:Xe(()=>[a.value?(H(),W("div",sx,Ne(a.value),1)):ve("",!0)]),_:1})]))}}),fx=Ke(ux,[["__scopeId","data-v-556227dc"]]);export{fx as default};
