var Nl=Object.defineProperty;var $l=(e,t,n)=>t in e?Nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lt=(e,t,n)=>$l(e,typeof t!="symbol"?t+"":t,n);import{i as Ie,w as _e,d as xe,X as Fi,o as z,a as K,b as g,Y as bo,f as N,s as me,H as we,F as ke,B as re,$ as Es,q as Ye,v as te,a0 as et,a1 as Le,a2 as hn,a3 as Ms,n as Oe,y as Q,C as D,x as ge,a4 as El,a5 as Ee,a6 as Ml,z as De,p as ht,a7 as Ts,a8 as Tl,a9 as _t,r as be,aa as Is,ab as Il,ac as Wi,ad as Pl,ae as Al,af as Qt,ag as lo,ah as jt,ai as Te,aj as Ne,ak as $e,al as Dl,am as xt,g as gi,an as Ps,ao as Rl,ap as zl,m as je,k as Ge,aq as Pe,_ as Ae,D as at,j as Ve,Z as Jo,G as de,ar as st,as as rt,at as nn,au as As,I as Ds,av as wo,aw as ze,ax as Rs,ay as Vl,az as zs,aA as Ll,aB as Vs,aC as Ls,aD as Ol,e as Bl,T as Fl,E as Wl,aE as Ul,aF as ql,aG as Hl,aH as Yl,aI as Gl,aJ as jl,aK as Qo,aL as Xl,aM as Zl,aN as Kl,aO as Jl,aP as Ql,aQ as eu,aR as tu,u as nu,aS as ou}from"./index-COg3E46k.js";import{R as Ke,P as iu,E as au,a as su,W as ru}from"./WaveformEditor-DzzRMgGP.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Ie("AccessibilityIcon",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Ie("AudioWaveformIcon",[["path",{d:"M2 13a2 2 0 0 0 2-2V7a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0V4a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0v-4a2 2 0 0 1 2-2",key:"57tc96"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Ie("BarChart3Icon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Ie("BoxIcon",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Ie("CalculatorIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=Ie("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Ie("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Ie("DiscIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Ie("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Ie("GitForkIcon",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Ie("Grid3x3Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Ie("GripHorizontalIcon",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Ie("HandIcon",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Ie("LineChartIcon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=Ie("Maximize2Icon",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Ie("Minimize2Icon",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Ie("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Ie("MoveIcon",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Ie("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Ie("PuzzleIcon",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Ie("ScanIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Ie("SendIcon",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Ie("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Ie("SmileIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Ie("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Ie("Tv2Icon",[["path",{d:"M7 21h10",key:"1b0cd5"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=Ie("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Ie("WavesIcon",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=Ie("WifiIcon",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function Mn(e){return Is()?(lo(e),!0):!1}function St(e){return typeof e=="function"?e():N(e)}const Ru=typeof window<"u"&&typeof document<"u",zu=e=>typeof e<"u",Vu=Object.prototype.toString,Lu=e=>Vu.call(e)==="[object Object]",Ou=()=>{};function Bu(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const Bs=e=>e();function Fu(e=Bs){const t=re(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:Dl(t),pause:n,resume:o,eventFilter:i}}function ca(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Wu(e,t,n={}){const{eventFilter:o=Bs,...i}=n;return _e(e,Bu(o,t),i)}function en(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:a,pause:s,resume:r,isActive:l}=Fu(o);return{stop:Wu(e,t,{...i,eventFilter:a}),pause:s,resume:r,isActive:l}}function Uu(e,t={}){if(!Wi(e))return Pl(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Al(()=>({get(){return e.value[o]},set(i){var a;if((a=St(t.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const r=[...e.value];r[o]=i,e.value=r}else{const r={...e.value,[o]:i};Object.setPrototypeOf(r,Object.getPrototypeOf(e.value)),e.value=r}else e.value[o]=i}}));return n}function vi(e,t=!1){function n(p,{flush:y="sync",deep:b=!1,timeout:S,throwOnTimeout:v}={}){let x=null;const f=[new Promise(d=>{x=_e(e,m=>{p(m)!==t&&(x==null||x(),d(m))},{flush:y,deep:b,immediate:!0})})];return S!=null&&f.push(ca(S,v).then(()=>St(e)).finally(()=>x==null?void 0:x())),Promise.race(f)}function o(p,y){if(!Wi(p))return n(m=>m===p,y);const{flush:b="sync",deep:S=!1,timeout:v,throwOnTimeout:x}=y??{};let h=null;const d=[new Promise(m=>{h=_e([e,p],([_,C])=>{t!==(_===C)&&(h==null||h(),m(_))},{flush:b,deep:S,immediate:!0})})];return v!=null&&d.push(ca(v,x).then(()=>St(e)).finally(()=>(h==null||h(),St(e)))),Promise.race(d)}function i(p){return n(y=>!!y,p)}function a(p){return o(null,p)}function s(p){return o(void 0,p)}function r(p){return n(Number.isNaN,p)}function l(p,y){return n(b=>{const S=Array.from(b);return S.includes(p)||S.includes(St(p))},y)}function u(p){return c(1,p)}function c(p=1,y){let b=-1;return n(()=>(b+=1,b>=p),y)}return Array.isArray(St(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return vi(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:r,toBeUndefined:s,changed:u,changedTimes:c,get not(){return vi(e,!t)}}}function yi(e){return vi(e)}function qu(e){var t;const n=St(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Fs=Ru?window:void 0;function Ws(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Fs):[t,n,o,i]=e,!t)return Ou;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],s=()=>{a.forEach(c=>c()),a.length=0},r=(c,p,y,b)=>(c.addEventListener(p,y,b),()=>c.removeEventListener(p,y,b)),l=_e(()=>[qu(t),St(i)],([c,p])=>{if(s(),!c)return;const y=Lu(p)?{...p}:p;a.push(...n.flatMap(b=>o.map(S=>r(c,b,S,y))))},{immediate:!0,flush:"post"}),u=()=>{l(),s()};return Mn(u),u}function Hu(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function pa(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Fs,eventName:a="keydown",passive:s=!1,dedupe:r=!1}=o,l=Hu(t);return Ws(i,a,c=>{c.repeat&&St(r)||l(c)&&n(c)},s)}function Yu(e){return JSON.parse(JSON.stringify(e))}function ei(e,t,n,o={}){var i,a,s;const{clone:r=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:p,shouldEmit:y}=o,b=hn(),S=n||(b==null?void 0:b.emit)||((i=b==null?void 0:b.$emit)==null?void 0:i.bind(b))||((s=(a=b==null?void 0:b.proxy)==null?void 0:a.$emit)==null?void 0:s.bind(b==null?void 0:b.proxy));let v=u;t||(t="modelValue"),v=v||`update:${t.toString()}`;const x=d=>r?typeof r=="function"?r(d):Yu(d):d,h=()=>zu(e[t])?x(e[t]):p,f=d=>{y?y(d)&&S(v,d):S(v,d)};if(l){const d=h(),m=re(d);let _=!1;return _e(()=>e[t],C=>{_||(_=!0,m.value=x(C),ht(()=>_=!1))}),_e(m,C=>{!_&&(C!==e[t]||c)&&f(C)},{deep:c}),m}else return D({get(){return h()},set(d){f(d)}})}var Gu={value:()=>{}};function Lo(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new uo(n)}function uo(e){this._=e}function ju(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}uo.prototype=Lo.prototype={constructor:uo,on:function(e,t){var n=this._,o=ju(e+"",n),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(e=o[a]).type)&&(i=Xu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=o[a]).type)n[i]=fa(n[i],e.name,t);else if(t==null)for(i in n)n[i]=fa(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Xu(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function fa(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Gu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var bi="http://www.w3.org/1999/xhtml";const ha={svg:"http://www.w3.org/2000/svg",xhtml:bi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ha.hasOwnProperty(t)?{space:ha[t],local:e}:e}function Zu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bi&&t.documentElement.namespaceURI===bi?t.createElement(e):t.createElementNS(n,e)}}function Ku(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Us(e){var t=Oo(e);return(t.local?Ku:Zu)(t)}function Ju(){}function Ui(e){return e==null?Ju:function(){return this.querySelector(e)}}function Qu(e){typeof e!="function"&&(e=Ui(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,r=o[i]=new Array(s),l,u,c=0;c<s;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),r[c]=u);return new Je(o,this._parents)}function ed(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function td(){return[]}function qs(e){return e==null?td:function(){return this.querySelectorAll(e)}}function nd(e){return function(){return ed(e.apply(this,arguments))}}function od(e){typeof e=="function"?e=nd(e):e=qs(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var s=t[a],r=s.length,l,u=0;u<r;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),i.push(l));return new Je(o,i)}function Hs(e){return function(){return this.matches(e)}}function Ys(e){return function(t){return t.matches(e)}}var id=Array.prototype.find;function ad(e){return function(){return id.call(this.children,e)}}function sd(){return this.firstElementChild}function rd(e){return this.select(e==null?sd:ad(typeof e=="function"?e:Ys(e)))}var ld=Array.prototype.filter;function ud(){return Array.from(this.children)}function dd(e){return function(){return ld.call(this.children,e)}}function cd(e){return this.selectAll(e==null?ud:dd(typeof e=="function"?e:Ys(e)))}function pd(e){typeof e!="function"&&(e=Hs(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,r=o[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&r.push(l);return new Je(o,this._parents)}function Gs(e){return new Array(e.length)}function fd(){return new Je(this._enter||this._groups.map(Gs),this._parents)}function xo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xo.prototype={constructor:xo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hd(e){return function(){return e}}function gd(e,t,n,o,i,a){for(var s=0,r,l=t.length,u=a.length;s<u;++s)(r=t[s])?(r.__data__=a[s],o[s]=r):n[s]=new xo(e,a[s]);for(;s<l;++s)(r=t[s])&&(i[s]=r)}function md(e,t,n,o,i,a,s){var r,l,u=new Map,c=t.length,p=a.length,y=new Array(c),b;for(r=0;r<c;++r)(l=t[r])&&(y[r]=b=s.call(l,l.__data__,r,t)+"",u.has(b)?i[r]=l:u.set(b,l));for(r=0;r<p;++r)b=s.call(e,a[r],r,a)+"",(l=u.get(b))?(o[r]=l,l.__data__=a[r],u.delete(b)):n[r]=new xo(e,a[r]);for(r=0;r<c;++r)(l=t[r])&&u.get(y[r])===l&&(i[r]=l)}function vd(e){return e.__data__}function yd(e,t){if(!arguments.length)return Array.from(this,vd);var n=t?md:gd,o=this._parents,i=this._groups;typeof e!="function"&&(e=hd(e));for(var a=i.length,s=new Array(a),r=new Array(a),l=new Array(a),u=0;u<a;++u){var c=o[u],p=i[u],y=p.length,b=bd(e.call(c,c&&c.__data__,u,o)),S=b.length,v=r[u]=new Array(S),x=s[u]=new Array(S),h=l[u]=new Array(y);n(c,p,v,x,h,b,t);for(var f=0,d=0,m,_;f<S;++f)if(m=v[f]){for(f>=d&&(d=f+1);!(_=x[d])&&++d<S;);m._next=_||null}}return s=new Je(s,o),s._enter=r,s._exit=l,s}function bd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wd(){return new Je(this._exit||this._groups.map(Gs),this._parents)}function xd(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function Sd(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,s=Math.min(i,a),r=new Array(i),l=0;l<s;++l)for(var u=n[l],c=o[l],p=u.length,y=r[l]=new Array(p),b,S=0;S<p;++S)(b=u[S]||c[S])&&(y[S]=b);for(;l<i;++l)r[l]=n[l];return new Je(r,this._parents)}function _d(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],s;--i>=0;)(s=o[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function kd(e){e||(e=Cd);function t(p,y){return p&&y?e(p.__data__,y.__data__):!p-!y}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var s=n[a],r=s.length,l=i[a]=new Array(r),u,c=0;c<r;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Je(i,this._parents).order()}function Cd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Nd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $d(){return Array.from(this)}function Ed(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var s=o[i];if(s)return s}return null}function Md(){let e=0;for(const t of this)++e;return e}function Td(){return!this.node()}function Id(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,s=i.length,r;a<s;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this}function Pd(e){return function(){this.removeAttribute(e)}}function Ad(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dd(e,t){return function(){this.setAttribute(e,t)}}function Rd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Vd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ld(e,t){var n=Oo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ad:Pd:typeof t=="function"?n.local?Vd:zd:n.local?Rd:Dd)(n,t))}function js(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Od(e){return function(){this.style.removeProperty(e)}}function Bd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fd(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Wd(e,t,n){return arguments.length>1?this.each((t==null?Od:typeof t=="function"?Fd:Bd)(e,t,n??"")):ln(this.node(),e)}function ln(e,t){return e.style.getPropertyValue(t)||js(e).getComputedStyle(e,null).getPropertyValue(t)}function Ud(e){return function(){delete this[e]}}function qd(e,t){return function(){this[e]=t}}function Hd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Yd(e,t){return arguments.length>1?this.each((t==null?Ud:typeof t=="function"?Hd:qd)(e,t)):this.node()[e]}function Xs(e){return e.trim().split(/^|\s+/)}function qi(e){return e.classList||new Zs(e)}function Zs(e){this._node=e,this._names=Xs(e.getAttribute("class")||"")}Zs.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ks(e,t){for(var n=qi(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Js(e,t){for(var n=qi(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Gd(e){return function(){Ks(this,e)}}function jd(e){return function(){Js(this,e)}}function Xd(e,t){return function(){(t.apply(this,arguments)?Ks:Js)(this,e)}}function Zd(e,t){var n=Xs(e+"");if(arguments.length<2){for(var o=qi(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Xd:t?Gd:jd)(n,t))}function Kd(){this.textContent=""}function Jd(e){return function(){this.textContent=e}}function Qd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ec(e){return arguments.length?this.each(e==null?Kd:(typeof e=="function"?Qd:Jd)(e)):this.node().textContent}function tc(){this.innerHTML=""}function nc(e){return function(){this.innerHTML=e}}function oc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ic(e){return arguments.length?this.each(e==null?tc:(typeof e=="function"?oc:nc)(e)):this.node().innerHTML}function ac(){this.nextSibling&&this.parentNode.appendChild(this)}function sc(){return this.each(ac)}function rc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lc(){return this.each(rc)}function uc(e){var t=typeof e=="function"?e:Us(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dc(){return null}function cc(e,t){var n=typeof e=="function"?e:Us(e),o=t==null?dc:typeof t=="function"?t:Ui(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function pc(){var e=this.parentNode;e&&e.removeChild(this)}function fc(){return this.each(pc)}function hc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mc(e){return this.select(e?gc:hc)}function vc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function yc(e){return function(t){e.call(this,t,this.__data__)}}function bc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function wc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function xc(e,t,n){return function(){var o=this.__on,i,a=yc(t);if(o){for(var s=0,r=o.length;s<r;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function Sc(e,t,n){var o=bc(e+""),i,a=o.length,s;if(arguments.length<2){var r=this.node().__on;if(r){for(var l=0,u=r.length,c;l<u;++l)for(i=0,c=r[l];i<a;++i)if((s=o[i]).type===c.type&&s.name===c.name)return c.value}return}for(r=t?xc:wc,i=0;i<a;++i)this.each(r(o[i],t,n));return this}function Qs(e,t,n){var o=js(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function _c(e,t){return function(){return Qs(this,e,t)}}function kc(e,t){return function(){return Qs(this,e,t.apply(this,arguments))}}function Cc(e,t){return this.each((typeof t=="function"?kc:_c)(e,t))}function*Nc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,s;i<a;++i)(s=o[i])&&(yield s)}var er=[null];function Je(e,t){this._groups=e,this._parents=t}function Wn(){return new Je([[document.documentElement]],er)}function $c(){return this}Je.prototype=Wn.prototype={constructor:Je,select:Qu,selectAll:od,selectChild:rd,selectChildren:cd,filter:pd,data:yd,enter:fd,exit:wd,join:xd,merge:Sd,selection:$c,order:_d,sort:kd,call:Nd,nodes:$d,node:Ed,size:Md,empty:Td,each:Id,attr:Ld,style:Wd,property:Yd,classed:Zd,text:ec,html:ic,raise:sc,lower:lc,append:uc,insert:cc,remove:fc,clone:mc,datum:vc,on:Sc,dispatch:Cc,[Symbol.iterator]:Nc};function nt(e){return typeof e=="string"?new Je([[document.querySelector(e)]],[document.documentElement]):new Je([[e]],er)}function Ec(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ct(e,t){if(e=Ec(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Mc={passive:!1},Tn={capture:!0,passive:!1};function ti(e){e.stopImmediatePropagation()}function on(e){e.preventDefault(),e.stopImmediatePropagation()}function tr(e){var t=e.document.documentElement,n=nt(e).on("dragstart.drag",on,Tn);"onselectstart"in t?n.on("selectstart.drag",on,Tn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function nr(e,t){var n=e.document.documentElement,o=nt(e).on("dragstart.drag",null);t&&(o.on("click.drag",on,Tn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jn=e=>()=>e;function wi(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:s,y:r,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}wi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Tc(e){return!e.ctrlKey&&!e.button}function Ic(){return this.parentNode}function Pc(e,t){return t??{x:e.x,y:e.y}}function Ac(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dc(){var e=Tc,t=Ic,n=Pc,o=Ac,i={},a=Lo("start","drag","end"),s=0,r,l,u,c,p=0;function y(m){m.on("mousedown.drag",b).filter(o).on("touchstart.drag",x).on("touchmove.drag",h,Mc).on("touchend.drag touchcancel.drag",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(m,_){if(!(c||!e.call(this,m,_))){var C=d(this,t.call(this,m,_),m,_,"mouse");C&&(nt(m.view).on("mousemove.drag",S,Tn).on("mouseup.drag",v,Tn),tr(m.view),ti(m),u=!1,r=m.clientX,l=m.clientY,C("start",m))}}function S(m){if(on(m),!u){var _=m.clientX-r,C=m.clientY-l;u=_*_+C*C>p}i.mouse("drag",m)}function v(m){nt(m.view).on("mousemove.drag mouseup.drag",null),nr(m.view,u),on(m),i.mouse("end",m)}function x(m,_){if(e.call(this,m,_)){var C=m.changedTouches,L=t.call(this,m,_),R=C.length,j,Y;for(j=0;j<R;++j)(Y=d(this,L,m,_,C[j].identifier,C[j]))&&(ti(m),Y("start",m,C[j]))}}function h(m){var _=m.changedTouches,C=_.length,L,R;for(L=0;L<C;++L)(R=i[_[L].identifier])&&(on(m),R("drag",m,_[L]))}function f(m){var _=m.changedTouches,C=_.length,L,R;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),L=0;L<C;++L)(R=i[_[L].identifier])&&(ti(m),R("end",m,_[L]))}function d(m,_,C,L,R,j){var Y=a.copy(),O=ct(j||C,_),k,J,w;if((w=n.call(m,new wi("beforestart",{sourceEvent:C,target:y,identifier:R,active:s,x:O[0],y:O[1],dx:0,dy:0,dispatch:Y}),L))!=null)return k=w.x-O[0]||0,J=w.y-O[1]||0,function I($,V,M){var U=O,W;switch($){case"start":i[R]=I,W=s++;break;case"end":delete i[R],--s;case"drag":O=ct(M||V,_),W=s;break}Y.call($,m,new wi($,{sourceEvent:V,subject:w,target:y,identifier:R,active:W,x:O[0]+k,y:O[1]+J,dx:O[0]-U[0],dy:O[1]-U[1],dispatch:Y}),L)}}return y.filter=function(m){return arguments.length?(e=typeof m=="function"?m:jn(!!m),y):e},y.container=function(m){return arguments.length?(t=typeof m=="function"?m:jn(m),y):t},y.subject=function(m){return arguments.length?(n=typeof m=="function"?m:jn(m),y):n},y.touchable=function(m){return arguments.length?(o=typeof m=="function"?m:jn(!!m),y):o},y.on=function(){var m=a.on.apply(a,arguments);return m===a?y:m},y.clickDistance=function(m){return arguments.length?(p=(m=+m)*m,y):Math.sqrt(p)},y}function Hi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function or(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Un(){}var In=.7,So=1/In,an="\\s*([+-]?\\d+)\\s*",Pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rc=/^#([0-9a-f]{3,8})$/,zc=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),Vc=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Lc=new RegExp(`^rgba\\(${an},${an},${an},${Pn}\\)$`),Oc=new RegExp(`^rgba\\(${gt},${gt},${gt},${Pn}\\)$`),Bc=new RegExp(`^hsl\\(${Pn},${gt},${gt}\\)$`),Fc=new RegExp(`^hsla\\(${Pn},${gt},${gt},${Pn}\\)$`),ga={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hi(Un,Xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ma,formatHex:ma,formatHex8:Wc,formatHsl:Uc,formatRgb:va,toString:va});function ma(){return this.rgb().formatHex()}function Wc(){return this.rgb().formatHex8()}function Uc(){return ir(this).formatHsl()}function va(){return this.rgb().formatRgb()}function Xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Rc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ya(t):n===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zc.exec(e))?new Xe(t[1],t[2],t[3],1):(t=Vc.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Lc.exec(e))?Xn(t[1],t[2],t[3],t[4]):(t=Oc.exec(e))?Xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bc.exec(e))?xa(t[1],t[2]/100,t[3]/100,1):(t=Fc.exec(e))?xa(t[1],t[2]/100,t[3]/100,t[4]):ga.hasOwnProperty(e)?ya(ga[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function ya(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function Xn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Xe(e,t,n,o)}function qc(e){return e instanceof Un||(e=Xt(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function xi(e,t,n,o){return arguments.length===1?qc(e):new Xe(e,t,n,o??1)}function Xe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Hi(Xe,xi,or(Un,{brighter(e){return e=e==null?So:Math.pow(So,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?In:Math.pow(In,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(Ht(this.r),Ht(this.g),Ht(this.b),_o(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ba,formatHex:ba,formatHex8:Hc,formatRgb:wa,toString:wa}));function ba(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}`}function Hc(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}${Ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function wa(){const e=_o(this.opacity);return`${e===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${e===1?")":`, ${e})`}`}function _o(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ut(e){return e=Ht(e),(e<16?"0":"")+e.toString(16)}function xa(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ot(e,t,n,o)}function ir(e){if(e instanceof ot)return new ot(e.h,e.s,e.l,e.opacity);if(e instanceof Un||(e=Xt(e)),!e)return new ot;if(e instanceof ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),s=NaN,r=a-i,l=(a+i)/2;return r?(t===a?s=(n-o)/r+(n<o)*6:n===a?s=(o-t)/r+2:s=(t-n)/r+4,r/=l<.5?a+i:2-a-i,s*=60):r=l>0&&l<1?0:s,new ot(s,r,l,e.opacity)}function Yc(e,t,n,o){return arguments.length===1?ir(e):new ot(e,t,n,o??1)}function ot(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Hi(ot,Yc,or(Un,{brighter(e){return e=e==null?So:Math.pow(So,e),new ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?In:Math.pow(In,e),new ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Xe(ni(e>=240?e-240:e+120,i,o),ni(e,i,o),ni(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ot(Sa(this.h),Zn(this.s),Zn(this.l),_o(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_o(this.opacity);return`${e===1?"hsl(":"hsla("}${Sa(this.h)}, ${Zn(this.s)*100}%, ${Zn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Sa(e){return e=(e||0)%360,e<0?e+360:e}function Zn(e){return Math.max(0,Math.min(1,e||0))}function ni(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Yi=e=>()=>e;function Gc(e,t){return function(n){return e+n*t}}function jc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Xc(e){return(e=+e)==1?ar:function(t,n){return n-t?jc(t,n,e):Yi(isNaN(t)?n:t)}}function ar(e,t){var n=t-e;return n?Gc(e,n):Yi(isNaN(e)?t:e)}const ko=function e(t){var n=Xc(t);function o(i,a){var s=n((i=xi(i)).r,(a=xi(a)).r),r=n(i.g,a.g),l=n(i.b,a.b),u=ar(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=r(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function Zc(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(a){for(i=0;i<n;++i)o[i]=e[i]*(1-a)+t[i]*a;return o}}function Kc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Jc(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),a=new Array(n),s;for(s=0;s<o;++s)i[s]=Nn(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(r){for(s=0;s<o;++s)a[s]=i[s](r);return a}}function Qc(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function pt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ep(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Nn(e[i],t[i]):o[i]=t[i];return function(a){for(i in n)o[i]=n[i](a);return o}}var Si=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(Si.source,"g");function tp(e){return function(){return e}}function np(e){return function(t){return e(t)+""}}function sr(e,t){var n=Si.lastIndex=oi.lastIndex=0,o,i,a,s=-1,r=[],l=[];for(e=e+"",t=t+"";(o=Si.exec(e))&&(i=oi.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),r[s]?r[s]+=a:r[++s]=a),(o=o[0])===(i=i[0])?r[s]?r[s]+=i:r[++s]=i:(r[++s]=null,l.push({i:s,x:pt(o,i)})),n=oi.lastIndex;return n<t.length&&(a=t.slice(n),r[s]?r[s]+=a:r[++s]=a),r.length<2?l[0]?np(l[0].x):tp(t):(t=l.length,function(u){for(var c=0,p;c<t;++c)r[(p=l[c]).i]=p.x(u);return r.join("")})}function Nn(e,t){var n=typeof t,o;return t==null||n==="boolean"?Yi(t):(n==="number"?pt:n==="string"?(o=Xt(t))?(t=o,ko):sr:t instanceof Xt?ko:t instanceof Date?Qc:Kc(t)?Zc:Array.isArray(t)?Jc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ep:pt)(e,t)}var _a=180/Math.PI,_i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rr(e,t,n,o,i,a){var s,r,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(r=Math.sqrt(n*n+o*o))&&(n/=r,o/=r,l/=r),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*_a,skewX:Math.atan(l)*_a,scaleX:s,scaleY:r}}var Kn;function op(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_i:rr(t.a,t.b,t.c,t.d,t.e,t.f)}function ip(e){return e==null||(Kn||(Kn=document.createElementNS("http://www.w3.org/2000/svg","g")),Kn.setAttribute("transform",e),!(e=Kn.transform.baseVal.consolidate()))?_i:(e=e.matrix,rr(e.a,e.b,e.c,e.d,e.e,e.f))}function lr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,c,p,y,b,S){if(u!==p||c!==y){var v=b.push("translate(",null,t,null,n);S.push({i:v-4,x:pt(u,p)},{i:v-2,x:pt(c,y)})}else(p||y)&&b.push("translate("+p+t+y+n)}function s(u,c,p,y){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),y.push({i:p.push(i(p)+"rotate(",null,o)-2,x:pt(u,c)})):c&&p.push(i(p)+"rotate("+c+o)}function r(u,c,p,y){u!==c?y.push({i:p.push(i(p)+"skewX(",null,o)-2,x:pt(u,c)}):c&&p.push(i(p)+"skewX("+c+o)}function l(u,c,p,y,b,S){if(u!==p||c!==y){var v=b.push(i(b)+"scale(",null,",",null,")");S.push({i:v-4,x:pt(u,p)},{i:v-2,x:pt(c,y)})}else(p!==1||y!==1)&&b.push(i(b)+"scale("+p+","+y+")")}return function(u,c){var p=[],y=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,p,y),s(u.rotate,c.rotate,p,y),r(u.skewX,c.skewX,p,y),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,p,y),u=c=null,function(b){for(var S=-1,v=y.length,x;++S<v;)p[(x=y[S]).i]=x.x(b);return p.join("")}}}var ap=lr(op,"px, ","px)","deg)"),sp=lr(ip,", ",")",")"),rp=1e-12;function ka(e){return((e=Math.exp(e))+1/e)/2}function lp(e){return((e=Math.exp(e))-1/e)/2}function up(e){return((e=Math.exp(2*e))-1)/(e+1)}const co=function e(t,n,o){function i(a,s){var r=a[0],l=a[1],u=a[2],c=s[0],p=s[1],y=s[2],b=c-r,S=p-l,v=b*b+S*S,x,h;if(v<rp)h=Math.log(y/u)/t,x=function(L){return[r+L*b,l+L*S,u*Math.exp(t*L*h)]};else{var f=Math.sqrt(v),d=(y*y-u*u+o*v)/(2*u*n*f),m=(y*y-u*u-o*v)/(2*y*n*f),_=Math.log(Math.sqrt(d*d+1)-d),C=Math.log(Math.sqrt(m*m+1)-m);h=(C-_)/t,x=function(L){var R=L*h,j=ka(_),Y=u/(n*f)*(j*up(t*R+_)-lp(_));return[r+Y*b,l+Y*S,u*j/ka(t*R+_)]}}return x.duration=h*1e3*t/Math.SQRT2,x}return i.rho=function(a){var s=Math.max(.001,+a),r=s*s,l=r*r;return e(s,r,l)},i}(Math.SQRT2,2,4);var un=0,wn=0,mn=0,ur=1e3,Co,xn,No=0,Zt=0,Bo=0,An=typeof performance=="object"&&performance.now?performance:Date,dr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Gi(){return Zt||(dr(dp),Zt=An.now()+Bo)}function dp(){Zt=0}function $o(){this._call=this._time=this._next=null}$o.prototype=cr.prototype={constructor:$o,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Gi():+n)+(t==null?0:+t),!this._next&&xn!==this&&(xn?xn._next=this:Co=this,xn=this),this._call=e,this._time=n,ki()},stop:function(){this._call&&(this._call=null,this._time=1/0,ki())}};function cr(e,t,n){var o=new $o;return o.restart(e,t,n),o}function cp(){Gi(),++un;for(var e=Co,t;e;)(t=Zt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--un}function Ca(){Zt=(No=An.now())+Bo,un=wn=0;try{cp()}finally{un=0,fp(),Zt=0}}function pp(){var e=An.now(),t=e-No;t>ur&&(Bo-=t,No=e)}function fp(){for(var e,t=Co,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Co=n);xn=e,ki(o)}function ki(e){if(!un){wn&&(wn=clearTimeout(wn));var t=e-Zt;t>24?(e<1/0&&(wn=setTimeout(Ca,e-An.now()-Bo)),mn&&(mn=clearInterval(mn))):(mn||(No=An.now(),mn=setInterval(pp,ur)),un=1,dr(Ca))}}function Na(e,t,n){var o=new $o;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var hp=Lo("start","end","cancel","interrupt"),gp=[],pr=0,$a=1,Ci=2,po=3,Ea=4,Ni=5,fo=6;function Fo(e,t,n,o,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;mp(e,n,{name:t,index:o,group:i,on:hp,tween:gp,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:pr})}function ji(e,t){var n=lt(e,t);if(n.state>pr)throw new Error("too late; already scheduled");return n}function vt(e,t){var n=lt(e,t);if(n.state>po)throw new Error("too late; already running");return n}function lt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function mp(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=cr(a,0,n.time);function a(u){n.state=$a,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,p,y,b;if(n.state!==$a)return l();for(c in o)if(b=o[c],b.name===n.name){if(b.state===po)return Na(s);b.state===Ea?(b.state=fo,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete o[c]):+c<t&&(b.state=fo,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete o[c])}if(Na(function(){n.state===po&&(n.state=Ea,n.timer.restart(r,n.delay,n.time),r(u))}),n.state=Ci,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ci){for(n.state=po,i=new Array(y=n.tween.length),c=0,p=-1;c<y;++c)(b=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function r(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ni,1),p=-1,y=i.length;++p<y;)i[p].call(e,c);n.state===Ni&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=fo,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function ho(e,t){var n=e.__transition,o,i,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){a=!1;continue}i=o.state>Ci&&o.state<Ni,o.state=fo,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}a&&delete e.__transition}}function vp(e){return this.each(function(){ho(this,e)})}function yp(e,t){var n,o;return function(){var i=vt(this,e),a=i.tween;if(a!==n){o=n=a;for(var s=0,r=o.length;s<r;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function bp(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=vt(this,e),s=a.tween;if(s!==o){i=(o=s).slice();for(var r={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=r;break}l===u&&i.push(r)}a.tween=i}}function wp(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=lt(this.node(),n).tween,i=0,a=o.length,s;i<a;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?yp:bp)(n,e,t))}function Xi(e,t,n){var o=e._id;return e.each(function(){var i=vt(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return lt(i,o).value[t]}}function fr(e,t){var n;return(typeof t=="number"?pt:t instanceof Xt?ko:(n=Xt(t))?(t=n,ko):sr)(e,t)}function xp(e){return function(){this.removeAttribute(e)}}function Sp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _p(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===o?a:a=t(o=s,n)}}function kp(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?a:a=t(o=s,n)}}function Cp(e,t,n){var o,i,a;return function(){var s,r=n(this),l;return r==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=r+"",s===l?null:s===o&&l===i?a:(i=l,a=t(o=s,r)))}}function Np(e,t,n){var o,i,a;return function(){var s,r=n(this),l;return r==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=r+"",s===l?null:s===o&&l===i?a:(i=l,a=t(o=s,r)))}}function $p(e,t){var n=Oo(e),o=n==="transform"?sp:fr;return this.attrTween(e,typeof t=="function"?(n.local?Np:Cp)(n,o,Xi(this,"attr."+e,t)):t==null?(n.local?Sp:xp)(n):(n.local?kp:_p)(n,o,t))}function Ep(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Mp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Tp(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Mp(e,a)),n}return i._value=t,i}function Ip(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Ep(e,a)),n}return i._value=t,i}function Pp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Oo(e);return this.tween(n,(o.local?Tp:Ip)(o,t))}function Ap(e,t){return function(){ji(this,e).delay=+t.apply(this,arguments)}}function Dp(e,t){return t=+t,function(){ji(this,e).delay=t}}function Rp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ap:Dp)(t,e)):lt(this.node(),t).delay}function zp(e,t){return function(){vt(this,e).duration=+t.apply(this,arguments)}}function Vp(e,t){return t=+t,function(){vt(this,e).duration=t}}function Lp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zp:Vp)(t,e)):lt(this.node(),t).duration}function Op(e,t){if(typeof t!="function")throw new Error;return function(){vt(this,e).ease=t}}function Bp(e){var t=this._id;return arguments.length?this.each(Op(t,e)):lt(this.node(),t).ease}function Fp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vt(this,e).ease=n}}function Wp(e){if(typeof e!="function")throw new Error;return this.each(Fp(this._id,e))}function Up(e){typeof e!="function"&&(e=Hs(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,r=o[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&r.push(l);return new $t(o,this._parents,this._name,this._id)}function qp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),s=new Array(o),r=0;r<a;++r)for(var l=t[r],u=n[r],c=l.length,p=s[r]=new Array(c),y,b=0;b<c;++b)(y=l[b]||u[b])&&(p[b]=y);for(;r<o;++r)s[r]=t[r];return new $t(s,this._parents,this._name,this._id)}function Hp(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Yp(e,t,n){var o,i,a=Hp(t)?ji:vt;return function(){var s=a(this,e),r=s.on;r!==o&&(i=(o=r).copy()).on(t,n),s.on=i}}function Gp(e,t){var n=this._id;return arguments.length<2?lt(this.node(),n).on.on(e):this.each(Yp(n,e,t))}function jp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Xp(){return this.on("end.remove",jp(this._id))}function Zp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ui(e));for(var o=this._groups,i=o.length,a=new Array(i),s=0;s<i;++s)for(var r=o[s],l=r.length,u=a[s]=new Array(l),c,p,y=0;y<l;++y)(c=r[y])&&(p=e.call(c,c.__data__,y,r))&&("__data__"in c&&(p.__data__=c.__data__),u[y]=p,Fo(u[y],t,n,y,u,lt(c,n)));return new $t(a,this._parents,t,n)}function Kp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qs(e));for(var o=this._groups,i=o.length,a=[],s=[],r=0;r<i;++r)for(var l=o[r],u=l.length,c,p=0;p<u;++p)if(c=l[p]){for(var y=e.call(c,c.__data__,p,l),b,S=lt(c,n),v=0,x=y.length;v<x;++v)(b=y[v])&&Fo(b,t,n,v,y,S);a.push(y),s.push(c)}return new $t(a,s,t,n)}var Jp=Wn.prototype.constructor;function Qp(){return new Jp(this._groups,this._parents)}function ef(e,t){var n,o,i;return function(){var a=ln(this,e),s=(this.style.removeProperty(e),ln(this,e));return a===s?null:a===n&&s===o?i:i=t(n=a,o=s)}}function hr(e){return function(){this.style.removeProperty(e)}}function tf(e,t,n){var o,i=n+"",a;return function(){var s=ln(this,e);return s===i?null:s===o?a:a=t(o=s,n)}}function nf(e,t,n){var o,i,a;return function(){var s=ln(this,e),r=n(this),l=r+"";return r==null&&(l=r=(this.style.removeProperty(e),ln(this,e))),s===l?null:s===o&&l===i?a:(i=l,a=t(o=s,r))}}function of(e,t){var n,o,i,a="style."+t,s="end."+a,r;return function(){var l=vt(this,e),u=l.on,c=l.value[a]==null?r||(r=hr(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(s,i=c),l.on=o}}function af(e,t,n){var o=(e+="")=="transform"?ap:fr;return t==null?this.styleTween(e,ef(e,o)).on("end.style."+e,hr(e)):typeof t=="function"?this.styleTween(e,nf(e,o,Xi(this,"style."+e,t))).each(of(this._id,e)):this.styleTween(e,tf(e,o,t),n).on("end.style."+e,null)}function sf(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function rf(e,t,n){var o,i;function a(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&sf(e,s,n)),o}return a._value=t,a}function lf(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,rf(e,t,n??""))}function uf(e){return function(){this.textContent=e}}function df(e){return function(){var t=e(this);this.textContent=t??""}}function cf(e){return this.tween("text",typeof e=="function"?df(Xi(this,"text",e)):uf(e==null?"":e+""))}function pf(e){return function(t){this.textContent=e.call(this,t)}}function ff(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&pf(i)),t}return o._value=e,o}function hf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ff(e))}function gf(){for(var e=this._name,t=this._id,n=gr(),o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],r=s.length,l,u=0;u<r;++u)if(l=s[u]){var c=lt(l,t);Fo(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $t(o,this._parents,e,n)}function mf(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,s){var r={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=vt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(r),t._.interrupt.push(r),t._.end.push(l)),u.on=t}),i===0&&a()})}var vf=0;function $t(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function gr(){return++vf}var bt=Wn.prototype;$t.prototype={constructor:$t,select:Zp,selectAll:Kp,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:Up,merge:qp,selection:Qp,transition:gf,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:Gp,attr:$p,attrTween:Pp,style:af,styleTween:lf,text:cf,textTween:hf,remove:Xp,tween:wp,delay:Rp,duration:Lp,ease:Bp,easeVarying:Wp,end:mf,[Symbol.iterator]:bt[Symbol.iterator]};function yf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var bf={time:null,delay:0,duration:250,ease:yf};function wf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function xf(e){var t,n;e instanceof $t?(t=e._id,e=e._name):(t=gr(),(n=bf).time=Gi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],r=s.length,l,u=0;u<r;++u)(l=s[u])&&Fo(l,e,t,u,s,n||wf(l,t));return new $t(o,this._parents,e,t)}Wn.prototype.interrupt=vp;Wn.prototype.transition=xf;const Jn=e=>()=>e;function Sf(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function kt(e,t,n){this.k=e,this.x=t,this.y=n}kt.prototype={constructor:kt,scale:function(e){return e===1?this:new kt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dn=new kt(1,0,0);kt.prototype;function ii(e){e.stopImmediatePropagation()}function vn(e){e.preventDefault(),e.stopImmediatePropagation()}function _f(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function kf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ma(){return this.__zoom||dn}function Cf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Nf(){return navigator.maxTouchPoints||"ontouchstart"in this}function $f(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Ef(){var e=_f,t=kf,n=$f,o=Cf,i=Nf,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],r=250,l=co,u=Lo("start","zoom","end"),c,p,y,b=500,S=150,v=0,x=10;function h(w){w.property("__zoom",Ma).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",Y).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(w,I,$,V){var M=w.selection?w.selection():w;M.property("__zoom",Ma),w!==M?_(w,I,$,V):M.interrupt().each(function(){C(this,arguments).event(V).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},h.scaleBy=function(w,I,$,V){h.scaleTo(w,function(){var M=this.__zoom.k,U=typeof I=="function"?I.apply(this,arguments):I;return M*U},$,V)},h.scaleTo=function(w,I,$,V){h.transform(w,function(){var M=t.apply(this,arguments),U=this.__zoom,W=$==null?m(M):typeof $=="function"?$.apply(this,arguments):$,ne=U.invert(W),ae=typeof I=="function"?I.apply(this,arguments):I;return n(d(f(U,ae),W,ne),M,s)},$,V)},h.translateBy=function(w,I,$,V){h.transform(w,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),s)},null,V)},h.translateTo=function(w,I,$,V,M){h.transform(w,function(){var U=t.apply(this,arguments),W=this.__zoom,ne=V==null?m(U):typeof V=="function"?V.apply(this,arguments):V;return n(dn.translate(ne[0],ne[1]).scale(W.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof $=="function"?-$.apply(this,arguments):-$),U,s)},V,M)};function f(w,I){return I=Math.max(a[0],Math.min(a[1],I)),I===w.k?w:new kt(I,w.x,w.y)}function d(w,I,$){var V=I[0]-$[0]*w.k,M=I[1]-$[1]*w.k;return V===w.x&&M===w.y?w:new kt(w.k,V,M)}function m(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function _(w,I,$,V){w.on("start.zoom",function(){C(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(V).end()}).tween("zoom",function(){var M=this,U=arguments,W=C(M,U).event(V),ne=t.apply(M,U),ae=$==null?m(ne):typeof $=="function"?$.apply(M,U):$,pe=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),he=M.__zoom,B=typeof I=="function"?I.apply(M,U):I,Z=l(he.invert(ae).concat(pe/he.k),B.invert(ae).concat(pe/B.k));return function(X){if(X===1)X=B;else{var P=Z(X),H=pe/P[2];X=new kt(H,ae[0]-P[0]*H,ae[1]-P[1]*H)}W.zoom(null,X)}})}function C(w,I,$){return!$&&w.__zooming||new L(w,I)}function L(w,I){this.that=w,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,I),this.taps=0}L.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,I){return this.mouse&&w!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var I=nt(this.that).datum();u.call(w,this.that,new Sf(w,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:u}),I)}};function R(w,...I){if(!e.apply(this,arguments))return;var $=C(this,I).event(w),V=this.__zoom,M=Math.max(a[0],Math.min(a[1],V.k*Math.pow(2,o.apply(this,arguments)))),U=ct(w);if($.wheel)($.mouse[0][0]!==U[0]||$.mouse[0][1]!==U[1])&&($.mouse[1]=V.invert($.mouse[0]=U)),clearTimeout($.wheel);else{if(V.k===M)return;$.mouse=[U,V.invert(U)],ho(this),$.start()}vn(w),$.wheel=setTimeout(W,S),$.zoom("mouse",n(d(f(V,M),$.mouse[0],$.mouse[1]),$.extent,s));function W(){$.wheel=null,$.end()}}function j(w,...I){if(y||!e.apply(this,arguments))return;var $=w.currentTarget,V=C(this,I,!0).event(w),M=nt(w.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",pe,!0),U=ct(w,$),W=w.clientX,ne=w.clientY;tr(w.view),ii(w),V.mouse=[U,this.__zoom.invert(U)],ho(this),V.start();function ae(he){if(vn(he),!V.moved){var B=he.clientX-W,Z=he.clientY-ne;V.moved=B*B+Z*Z>v}V.event(he).zoom("mouse",n(d(V.that.__zoom,V.mouse[0]=ct(he,$),V.mouse[1]),V.extent,s))}function pe(he){M.on("mousemove.zoom mouseup.zoom",null),nr(he.view,V.moved),vn(he),V.event(he).end()}}function Y(w,...I){if(e.apply(this,arguments)){var $=this.__zoom,V=ct(w.changedTouches?w.changedTouches[0]:w,this),M=$.invert(V),U=$.k*(w.shiftKey?.5:2),W=n(d(f($,U),V,M),t.apply(this,I),s);vn(w),r>0?nt(this).transition().duration(r).call(_,W,V,w):nt(this).call(h.transform,W,V,w)}}function O(w,...I){if(e.apply(this,arguments)){var $=w.touches,V=$.length,M=C(this,I,w.changedTouches.length===V).event(w),U,W,ne,ae;for(ii(w),W=0;W<V;++W)ne=$[W],ae=ct(ne,this),ae=[ae,this.__zoom.invert(ae),ne.identifier],M.touch0?!M.touch1&&M.touch0[2]!==ae[2]&&(M.touch1=ae,M.taps=0):(M.touch0=ae,U=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(M.taps<2&&(p=ae[0],c=setTimeout(function(){c=null},b)),ho(this),M.start())}}function k(w,...I){if(this.__zooming){var $=C(this,I).event(w),V=w.changedTouches,M=V.length,U,W,ne,ae;for(vn(w),U=0;U<M;++U)W=V[U],ne=ct(W,this),$.touch0&&$.touch0[2]===W.identifier?$.touch0[0]=ne:$.touch1&&$.touch1[2]===W.identifier&&($.touch1[0]=ne);if(W=$.that.__zoom,$.touch1){var pe=$.touch0[0],he=$.touch0[1],B=$.touch1[0],Z=$.touch1[1],X=(X=B[0]-pe[0])*X+(X=B[1]-pe[1])*X,P=(P=Z[0]-he[0])*P+(P=Z[1]-he[1])*P;W=f(W,Math.sqrt(X/P)),ne=[(pe[0]+B[0])/2,(pe[1]+B[1])/2],ae=[(he[0]+Z[0])/2,(he[1]+Z[1])/2]}else if($.touch0)ne=$.touch0[0],ae=$.touch0[1];else return;$.zoom("touch",n(d(W,ne,ae),$.extent,s))}}function J(w,...I){if(this.__zooming){var $=C(this,I).event(w),V=w.changedTouches,M=V.length,U,W;for(ii(w),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),U=0;U<M;++U)W=V[U],$.touch0&&$.touch0[2]===W.identifier?delete $.touch0:$.touch1&&$.touch1[2]===W.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(W=ct(W,this),Math.hypot(p[0]-W[0],p[1]-W[1])<x)){var ne=nt(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return h.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:Jn(+w),h):o},h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Jn(!!w),h):e},h.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Jn(!!w),h):i},h.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Jn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),h):t},h.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],h):[a[0],a[1]]},h.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],h):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},h.constrain=function(w){return arguments.length?(n=w,h):n},h.duration=function(w){return arguments.length?(r=+w,h):r},h.interpolate=function(w){return arguments.length?(l=w,h):l},h.on=function(){var w=u.on.apply(u,arguments);return w===u?h:w},h.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,h):Math.sqrt(v)},h.tapDistance=function(w){return arguments.length?(x=+w,h):x},h}var ee=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ee||{}),Zi=(e=>(e.Partial="partial",e.Full="full",e))(Zi||{}),Bt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Bt||{}),zt=(e=>(e.Strict="strict",e.Loose="loose",e))(zt||{}),$i=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))($i||{}),$n=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))($n||{}),mr=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(mr||{});const Mf=["INPUT","SELECT","TEXTAREA"],Tf=typeof document<"u"?document:null;function Ei(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,a=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return Mf.includes(o==null?void 0:o.nodeName)||i||!!a}function If(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Ta(e,t,n,o){const i=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(s=>s.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const a=i.every((s,r)=>n.has(s)&&Array.from(n.values())[r]===i[r]);return o&&n.delete(e.toLowerCase()),a}function Pf(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=Af(n.code,e);return Array.isArray(e)?e.some(i=>Ta(n[o],i,t,n.type==="keyup")):Ta(n[o],e,t,n.type==="keyup")}}function Af(e,t){return t.includes(e)?"code":"key"}function En(e,t){const n=D(()=>Ne(t==null?void 0:t.target)??Tf),o=_t(Ne(e)===!0);let i=!1;const a=new Set;let s=l(Ne(e));_e(()=>Ne(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&r(),s=l(u)},{immediate:!0}),Ws(["blur","contextmenu"],r),pa((...u)=>s(...u),u=>{var c,p;const y=Ne(t==null?void 0:t.actInsideInputWithModifier)??!0,b=Ne(t==null?void 0:t.preventDefault)??!1;if(i=If(u),(!i||i&&!y)&&Ei(u))return;const v=((p=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:p[0])||u.target,x=(v==null?void 0:v.nodeName)==="BUTTON"||(v==null?void 0:v.nodeName)==="A";!b&&(i||!x)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),pa((...u)=>s(...u),u=>{const c=Ne(t==null?void 0:t.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!c)&&Ei(u))return;i=!1,o.value=!1}},{eventName:"keyup",target:n});function r(){i=!1,a.clear(),o.value=Ne(e)===!0}function l(u){return u===null?(r(),()=>!1):typeof u=="boolean"?(r(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?Pf(u,a):u}return o}const vr="vue-flow__node-desc",yr="vue-flow__edge-desc",Df="vue-flow__aria-live",br=["Enter"," ","Escape"],sn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Eo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Mo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Wo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Kt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function wr(e,t){return{x:Kt(e.x,t[0][0],t[1][0]),y:Kt(e.y,t[0][1],t[1][1])}}function Ia(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Vt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Yt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Vt(e)}function Sn(e){return Yt(e)&&"computedPosition"in e}function Qn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Rf(e){return Qn(e.width)&&Qn(e.height)&&Qn(e.x)&&Qn(e.y)}function zf(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:$e({width:0,height:0}),computedPosition:$e({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:We(e.data)?e.data:{},events:$e(We(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function xr(e,t,n){var o,i;const a={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:We(e.data)?e.data:{},events:$e(We(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function Sr(e,t,n,o){const i=typeof e=="string"?e:e.id,a=new Set,s=o==="source"?"target":"source";for(const r of n)r[s]===i&&a.add(r[o]);return t.filter(r=>a.has(r.id))}function Vf(...e){if(e.length===3){const[a,s,r]=e;return Sr(a,s,r,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>Vt(a)&&a.source===o).map(a=>n.find(s=>Yt(s)&&s.id===a.target))}function Lf(...e){if(e.length===3){const[a,s,r]=e;return Sr(a,s,r,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>Vt(a)&&a.target===o).map(a=>n.find(s=>Yt(s)&&s.id===a.source))}function _r({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Of(e,t){return t.some(n=>Vt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Dn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Rn({x:e,y:t},{x:n,y:o,zoom:i},a=!1,s=[1,1]){const r={x:(e-n)/i,y:(t-o)/i};return a?Uo(r,s):r}function kr(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function To({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Cr({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Bf(e,t){return Cr(kr(To(e),To(t)))}function Ki(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=kr(t,To({...o.computedPosition,...o.dimensions}))}return Cr(t)}function Nr(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const a={...Rn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const r of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=r,p=l.width??r.width??null,y=l.height??r.height??null;if(i&&!u||c)continue;const b=Mo(a,Eo(r)),S=p===null||y===null,v=o&&b>0,x=(p??0)*(y??0);(S||v||b>=x||r.dragging)&&s.push(r)}return s}function Ft(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function tn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return qn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ff(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=tn(e,n),i=tn(e,t);return{top:o,right:i,bottom:o,left:i,x:i*2,y:o*2}}if(typeof e=="object"){const o=tn(e.top??e.y??0,n),i=tn(e.bottom??e.y??0,n),a=tn(e.left??e.x??0,t),s=tn(e.right??e.x??0,t);return{top:o,right:s,bottom:i,left:a,x:a+s,y:o+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Wf(e,t,n,o,i,a){const{x:s,y:r}=Dn(e,{x:t,y:n,zoom:o}),{x:l,y:u}=Dn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=i-l,p=a-u;return{left:Math.floor(s),top:Math.floor(r),right:Math.floor(c),bottom:Math.floor(p)}}function Pa(e,t,n,o,i,a=.1){const s=Ff(a,t,n),r=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(r,l),c=Kt(u,o,i),p=e.x+e.width/2,y=e.y+e.height/2,b=t/2-p*c,S=n/2-y*c,v=Wf(e,b,S,c,t,n),x={left:Math.min(v.left-s.left,0),top:Math.min(v.top-s.top,0),right:Math.min(v.right-s.right,0),bottom:Math.min(v.bottom-s.bottom,0)};return{x:b-x.left+x.right,y:S-x.top+x.bottom,zoom:c}}function Uf(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function $r(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:$r(n,t):!1}function zn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Mi(e){const t=e.ctrlKey&&Vn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function Aa(e,t,n){return e<t?Kt(Math.abs(e-t),1,t)/t:e>n?-Kt(Math.abs(e-n),1,t)/t:0}function Er(e,t,n=15,o=40){const i=Aa(e.x,o,t.width-o)*n,a=Aa(e.y,o,t.height-o)*n;return[i,a]}function ai(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,typeof i.width=="string"){const s=Number(i.width.replace("px",""));i.width=`${s+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,typeof i.height=="string"){const s=Number(i.height.replace("px",""));i.height=`${s+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=a=>{const s=t.style;return{...s(a),...i}}:t.style={...t.style,...i}}}}function Da(e,t){var n,o;const i=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of i)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const r=t.findIndex(l=>l.id===s.id);r!==-1&&t.splice(r,1)}const a=t.map(s=>s.id);for(const s of t)for(const r of e)if(r.id===s.id)switch(r.type){case"select":s.selected=r.selected;break;case"position":if(Sn(s)&&(typeof r.position<"u"&&(s.position=r.position),typeof r.dragging<"u"&&(s.dragging=r.dragging),s.expandParent&&s.parentNode)){const l=t[a.indexOf(s.parentNode)];l&&Sn(l)&&ai(s,l)}break;case"dimensions":if(Sn(s)&&(typeof r.dimensions<"u"&&(s.dimensions=r.dimensions),typeof r.updateStyle<"u"&&r.updateStyle&&(s.style={...s.style||{},width:`${(n=r.dimensions)==null?void 0:n.width}px`,height:`${(o=r.dimensions)==null?void 0:o.height}px`}),typeof r.resizing<"u"&&(s.resizing=r.resizing),s.expandParent&&s.parentNode)){const l=t[a.indexOf(s.parentNode)];l&&Sn(l)&&(!!l.dimensions.width&&!!l.dimensions.height?ai(s,l):ht(()=>{ai(s,l)}))}break}return t}function It(e,t){return{id:e,type:"select",selected:t}}function Ra(e){return{item:e,type:"add"}}function za(e){return{id:e,type:"remove"}}function Va(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function At(e,t=new Set,n=!1){const o=[];for(const[i,a]of e){const s=t.has(i);!(a.selected===void 0&&!s)&&a.selected!==s&&(n&&(a.selected=s),o.push(It(a.id,s)))}return o}const La=()=>{};function fe(e){const t=new Set;let n=La,o=()=>!1;const i=()=>t.size>0||o(),a=y=>{n=y},s=()=>{n=La},r=y=>{o=y},l=()=>{o=()=>!1},u=y=>{t.delete(y)};return{on:y=>{t.add(y);const b=()=>u(y);return Mn(b),{off:b}},off:u,trigger:y=>{const b=[n];return i()?b.push(...t):e&&b.push(e),Promise.allSettled(b.map(S=>S(y)))},hasListeners:i,listeners:t,setEmitter:a,removeEmitter:s,setHasEmitListeners:r,removeHasEmitListeners:l}}function Oa(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function qf(e,t,n,o){var i,a;const s=new Map;for(const[r,l]of e)(l.selected||l.id===o)&&(!l.parentNode||!$r(l,e))&&(l.draggable||t&&typeof l.draggable>"u")&&e.get(r)&&s.set(r,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((i=l.computedPosition)==null?void 0:i.x)||0,y:n.y-((a=l.computedPosition)==null?void 0:a.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(s.values())}function si({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const a=n(i.id);a&&o.push(a)}return[e?o.find(i=>i.id===e):o[0],o]}function Mr(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Hf(e,t,n){const[o,i,a,s]=typeof e!="string"?Mr(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-a]]:!1}function Yf(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=Hf(i,e,o);a&&(i=a)}else t(new qe(Ue.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,s=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+s],[i[1][0]+a,i[1][1]+s]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[a,s,r,l]=Mr(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+a],[i.range[1][0]+u-s,i.range[1][1]+c-r]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Gf({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Ji(e,t,n,o,i){const a=Gf(e.dimensions,Yf(e,n,o,i)),s=wr(t,a);return{position:{x:s.x-((i==null?void 0:i.computedPosition.x)||0),y:s.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:s}}function cn(e,t,n=ee.Left,o=!1){const i=((t==null?void 0:t.x)??0)+e.computedPosition.x,a=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:s,height:r}=t??Kf(e);if(o)return{x:i+s/2,y:a+r/2};switch((t==null?void 0:t.position)??n){case ee.Top:return{x:i+s/2,y:a};case ee.Right:return{x:i+s,y:a+r/2};case ee.Bottom:return{x:i+s/2,y:a+r};case ee.Left:return{x:i,y:a+r/2}}}function Ba(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function jf({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:s,height:r,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=To({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:r/l.zoom}),p=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),y=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(p*y)>0}function Xf(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const a=t(e.source),s=t(e.target);return!a||!s?0:(n&&(i=o?e.zIndex:Math.max(a.computedPosition.z||0,s.computedPosition.z||0)),i)}var Ue=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ue||{});const Fa={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class qe extends Error{constructor(t,...n){var o;super((o=Fa[t])==null?void 0:o.call(Fa,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Qi(e){return"clientX"in e}function Zf(e){return"sourceEvent"in e}function ft(e,t){const n=Qi(e);let o,i;return n?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}const Vn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Kf(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Uo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Jf=()=>!0;function ri(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Qf(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())Mo(i,Eo(a))>0&&o.push(a);return o}const eh=250;function th(e,t,n,o){var i,a;let s=[],r=Number.POSITIVE_INFINITY;const l=Qf(e,n,t+eh);for(const u of l){const c=[...((i=u.handleBounds)==null?void 0:i.source)??[],...((a=u.handleBounds)==null?void 0:a.target)??[]];for(const p of c){if(o.nodeId===p.nodeId&&o.type===p.type&&o.id===p.id)continue;const{x:y,y:b}=cn(u,p,p.position,!0),S=Math.sqrt((y-e.x)**2+(b-e.y)**2);S>t||(S<r?(s=[{...p,x:y,y:b}],r=S):S===r&&s.push({...p,x:y,y:b}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function Wa(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:a,doc:s,lib:r,flowId:l,isValidConnection:u=Jf},c,p,y,b){const S=a==="target",v=t?s.querySelector(`.${r}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x,y:h}=ft(e),f=s.elementFromPoint(x,h),d=f!=null&&f.classList.contains(`${r}-flow__handle`)?f:v,m={handleDomNode:d,isValid:!1,connection:null,toHandle:null};if(d){const _=Tr(void 0,d),C=d.getAttribute("data-nodeid"),L=d.getAttribute("data-handleid"),R=d.classList.contains("connectable"),j=d.classList.contains("connectableend");if(!C||!_)return m;const Y={source:S?C:o,sourceHandle:S?L:i,target:S?o:C,targetHandle:S?i:L};m.connection=Y;const k=R&&j&&(n===zt.Strict?S&&_==="source"||!S&&_==="target":C!==o||L!==i);m.isValid=k&&u(Y,{nodes:p,edges:c,sourceNode:y(Y.source),targetNode:y(Y.target)}),m.toHandle=Ir(C,_,L,b,n,!0)}return m}function Tr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function nh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function oh(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Ir(e,t,n,o,i,a=!1){var s,r,l;const u=o.get(e);if(!u)return null;const c=i===zt.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((r=u.handleBounds)==null?void 0:r.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],p=(n?c==null?void 0:c.find(y=>y.id===n):c==null?void 0:c[0])??null;return p&&a?{...p,...cn(u,p,p.position,!0)}:p}const Ti={[ee.Left]:ee.Right,[ee.Right]:ee.Left,[ee.Top]:ee.Bottom,[ee.Bottom]:ee.Top},ih=["production","prod"];function qn(e,...t){Pr()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Pr(){return!ih.includes("production")}function Ua(e,t,n,o,i){const a=t.querySelectorAll(`.vue-flow__handle.${e}`);return a!=null&&a.length?Array.from(a).map(s=>{const r=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(r.left-n.left)/o,y:(r.top-n.top)/o,...Wo(s)}}):null}function Ii(e,t,n,o,i,a=!1,s){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),ht(()=>{s.blur()})):n([e])}function We(e){return typeof N(e)<"u"}function ah(e,t,n,o){if(!e||!e.source||!e.target)return n(new qe(Ue.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return Vt(e)?i=e:i={...e,id:_r(e)},i=xr(i,void 0,o),Of(i,t)?!1:i}function sh(e,t,n,o,i){if(!t.source||!t.target)return i(new qe(Ue.EDGE_INVALID,e.id)),!1;if(!n)return i(new qe(Ue.EDGE_NOT_FOUND,e.id)),!1;const{id:a,...s}=e;return{...s,id:o?_r(t):a,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function qa(e,t,n){const o={},i=[];for(let a=0;a<e.length;++a){const s=e[a];if(!Yt(s)){n(new qe(Ue.NODE_INVALID,s==null?void 0:s.id)||`[ID UNKNOWN|INDEX ${a}]`);continue}const r=zf(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),i[a]=r}for(const a of i){const s=t(a.parentNode)||i.find(r=>r.id===a.parentNode);a.parentNode&&!s&&n(new qe(Ue.NODE_MISSING_PARENT,a.id,a.parentNode)),(a.parentNode||o[a.id])&&(o[a.id]&&(a.isParent=!0),s&&(s.isParent=!0))}return i}function Ha(e,t,n,o,i,a){let s=i;const r=o.get(s)||new Map;o.set(s,r.set(n,t)),s=`${i}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),a){s=`${i}-${e}-${a}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function li(e,t,n){e.clear();for(const o of n){const{source:i,target:a,sourceHandle:s=null,targetHandle:r=null}=o,l={edgeId:o.id,source:i,target:a,sourceHandle:s,targetHandle:r},u=`${i}-${s}--${a}-${r}`,c=`${a}-${r}--${i}-${s}`;Ha("source",l,c,e,i,s),Ha("target",l,u,e,a,r)}}function Ya(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ui(e,t,n,o,i,a,s,r){const l=[];for(const u of e){const c=Vt(u)?u:ah(u,r,i,a);if(!c)continue;const p=n(c.source),y=n(c.target);if(!p||!y){i(new qe(Ue.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!p){i(new qe(Ue.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!y){i(new qe(Ue.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:r,nodes:s,sourceNode:p,targetNode:y})){i(new qe(Ue.EDGE_INVALID,c.id));continue}const b=o(c.id);l.push({...xr(c,b,a),sourceNode:p,targetNode:y})}return l}const Ga=Symbol("vueFlow"),Ar=Symbol("nodeId"),Dr=Symbol("nodeRef"),rh=Symbol("edgeId"),lh=Symbol("edgeRef"),qo=Symbol("slots");function Rr(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodeLookup:a,nodeExtent:s,nodeDragThreshold:r,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:p,panBy:y,findNode:b,multiSelectionActive:S,nodesSelectionActive:v,selectNodesOnDrag:x,removeSelectedElements:h,addSelectedNodes:f,updateNodePositions:d,emits:m}=Re(),{onStart:_,onDrag:C,onStop:L,onClick:R,el:j,disabled:Y,id:O,selectable:k,dragHandle:J}=e,w=_t(!1);let I=[],$,V=null,M={x:void 0,y:void 0},U={x:0,y:0},W=null,ne=!1,ae=!1,pe=0,he=!1;const B=ch(),Z=({x:oe,y:se})=>{M={x:oe,y:se};let T=!1;if(I=I.map(E=>{const A={x:oe-E.distance.x,y:se-E.distance.y},{computedPosition:G}=Ji(E,n.value?Uo(A,o.value):A,m.error,s.value,E.parentNode?b(E.parentNode):void 0);return T=T||E.position.x!==G.x||E.position.y!==G.y,E.position=G,E}),ae=ae||T,!!T&&(d(I,!0,!0),w.value=!0,W)){const[E,A]=si({id:O,dragItems:I,findNode:b});C({event:W,node:E,nodes:A})}},X=()=>{if(!V)return;const[oe,se]=Er(U,V,c.value);if(oe!==0||se!==0){const T={x:(M.x??0)-oe/l.value.zoom,y:(M.y??0)-se/l.value.zoom};y({x:oe,y:se})&&Z(T)}pe=requestAnimationFrame(X)},P=(oe,se)=>{ne=!0;const T=b(O);!x.value&&!S.value&&T&&(T.selected||h()),T&&Ne(k)&&x.value&&Ii(T,S.value,f,h,v,!1,se);const E=B(oe.sourceEvent);if(M=E,I=qf(a.value,p.value,E,O),I.length){const[A,G]=si({id:O,dragItems:I,findNode:b});_({event:oe.sourceEvent,node:A,nodes:G})}},H=(oe,se)=>{var T;oe.sourceEvent.type==="touchmove"&&oe.sourceEvent.touches.length>1||(ae=!1,r.value===0&&P(oe,se),M=B(oe.sourceEvent),V=((T=t.value)==null?void 0:T.getBoundingClientRect())||null,U=ft(oe.sourceEvent,V))},F=(oe,se)=>{const T=B(oe.sourceEvent);if(!he&&ne&&u.value&&(he=!0,X()),!ne){const E=T.xSnapped-(M.x??0),A=T.ySnapped-(M.y??0);Math.sqrt(E*E+A*A)>r.value&&P(oe,se)}(M.x!==T.xSnapped||M.y!==T.ySnapped)&&I.length&&ne&&(W=oe.sourceEvent,U=ft(oe.sourceEvent,V),Z(T))},ie=oe=>{let se=!1;if(!ne&&!w.value&&!S.value){const T=oe.sourceEvent,E=B(T),A=E.xSnapped-(M.x??0),G=E.ySnapped-(M.y??0),q=Math.sqrt(A*A+G*G);q!==0&&q<=r.value&&(R==null||R(T),se=!0)}if(I.length&&!se){ae&&(d(I,!1,!1),ae=!1);const[T,E]=si({id:O,dragItems:I,findNode:b});L({event:oe.sourceEvent,node:T,nodes:E})}I=[],w.value=!1,he=!1,ne=!1,M={x:void 0,y:void 0},cancelAnimationFrame(pe)};return _e([()=>Ne(Y),j],([oe,se],T,E)=>{if(se){const A=nt(se);oe||($=Dc().on("start",G=>H(G,se)).on("drag",G=>F(G,se)).on("end",G=>ie(G)).filter(G=>{const q=G.target,le=Ne(J);return!G.button&&(!i.value||!Oa(q,`.${i.value}`,se)&&(!le||Oa(q,le,se)))}),A.call($)),E(()=>{A.on(".drag",null),$&&($.on("start",null),$.on("drag",null),$.on("end",null))})}}),w}function uh(){return{doubleClick:fe(),click:fe(),mouseEnter:fe(),mouseMove:fe(),mouseLeave:fe(),contextMenu:fe(),updateStart:fe(),update:fe(),updateEnd:fe()}}function dh(e,t){const n=uh();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function ch(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Re();return i=>{var a;const s=((a=o.value)==null?void 0:a.getBoundingClientRect())??{left:0,top:0},r=Zf(i)?i.sourceEvent:i,{x:l,y:u}=ft(r,s),c=Rn({x:l,y:u},e.value),{x:p,y}=n.value?Uo(c,t.value):c;return{xSnapped:p,ySnapped:y,...c}}}function eo(){return!0}function zr({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:s}){const{id:r,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:p,connectionClickStartHandle:y,nodesConnectable:b,autoPanOnConnect:S,autoPanSpeed:v,findNode:x,panBy:h,startConnection:f,updateConnection:d,endConnection:m,emits:_,viewport:C,edges:L,nodes:R,isValidConnection:j,nodeLookup:Y}=Re();let O=null,k=!1,J=null;function w($){var V;const M=Ne(n)==="target",U=Qi($),W=Ia($.target),ne=$.currentTarget;if(ne&&(U&&$.button===0||!U)){let ae=function(ye){T=ft(ye,ie),Z=th(Rn(T,C.value,!1,[1,1]),c.value,Y.value,G),E||(A(),E=!0);const Se=Wa(ye,{handle:Z,connectionMode:u.value,fromNodeId:Ne(t),fromHandleId:Ne(e),fromType:M?"target":"source",isValidConnection:B,doc:W,lib:"vue",flowId:r,nodeLookup:Y.value},L.value,R.value,x,Y.value);J=Se.handleDomNode,O=Se.connection,k=oh(!!Z,Se.isValid);const Ce={...ve,isValid:k,to:Se.toHandle&&k?Dn({x:Se.toHandle.x,y:Se.toHandle.y},C.value):T,toHandle:Se.toHandle,toPosition:k&&Se.toHandle?Se.toHandle.position:Ti[G.position],toNode:Se.toHandle?Y.value.get(Se.toHandle.nodeId):null};if(k&&Z&&(ve!=null&&ve.toHandle)&&Ce.toHandle&&ve.toHandle.type===Ce.toHandle.type&&ve.toHandle.nodeId===Ce.toHandle.nodeId&&ve.toHandle.id===Ce.toHandle.id&&ve.to.x===Ce.to.x&&ve.to.y===Ce.to.y)return;const Me=Z??Se.toHandle;if(d(Me&&k?Dn({x:Me.x,y:Me.y},C.value):T,Me,nh(!!Me,k)),ve=Ce,!Z&&!k&&!J)return ri(se);O&&O.source!==O.target&&J&&(ri(se),se=J,J.classList.add("connecting","vue-flow__handle-connecting"),J.classList.toggle("valid",!!k),J.classList.toggle("vue-flow__handle-valid",!!k))},pe=function(ye){"touches"in ye&&ye.touches.length>0||((Z||J)&&O&&k&&(a?a(ye,O):_.connect(O)),_.connectEnd(ye),i&&(s==null||s(ye)),ri(se),cancelAnimationFrame(X),m(ye),E=!1,k=!1,O=null,J=null,W.removeEventListener("mousemove",ae),W.removeEventListener("mouseup",pe),W.removeEventListener("touchmove",ae),W.removeEventListener("touchend",pe))};const he=x(Ne(t));let B=Ne(o)||j.value||eo;!B&&he&&(B=(M?he.isValidSourcePos:he.isValidTargetPos)||eo);let Z,X=0;const{x:P,y:H}=ft($),F=Tr(Ne(i),ne),ie=(V=l.value)==null?void 0:V.getBoundingClientRect();if(!ie||!F)return;const oe=Ir(Ne(t),F,Ne(e),Y.value,u.value);if(!oe)return;let se,T=ft($,ie),E=!1;const A=()=>{if(!S.value)return;const[ye,Se]=Er(T,ie,v.value);h({x:ye,y:Se}),X=requestAnimationFrame(A)},G={...oe,nodeId:Ne(t),type:F,position:oe.position},q=Y.value.get(Ne(t)),ue={inProgress:!0,isValid:null,from:cn(q,G,ee.Left,!0),fromHandle:G,fromPosition:G.position,fromNode:q,to:T,toHandle:null,toPosition:Ti[G.position],toNode:null};f({nodeId:Ne(t),id:Ne(e),type:F,position:(ne==null?void 0:ne.getAttribute("data-handlepos"))||ee.Top,...T},{x:P-ie.left,y:H-ie.top}),_.connectStart({event:$,nodeId:Ne(t),handleId:Ne(e),handleType:F});let ve=ue;W.addEventListener("mousemove",ae),W.addEventListener("mouseup",pe),W.addEventListener("touchmove",ae),W.addEventListener("touchend",pe)}}function I($){var V,M;if(!p.value)return;const U=Ne(n)==="target";if(!y.value){_.clickConnectStart({event:$,nodeId:Ne(t),handleId:Ne(e)}),f({nodeId:Ne(t),type:Ne(n),id:Ne(e),position:ee.Top,...ft($)},void 0,!0);return}let W=Ne(o)||j.value||eo;const ne=x(Ne(t));if(!W&&ne&&(W=(U?ne.isValidSourcePos:ne.isValidTargetPos)||eo),ne&&(typeof ne.connectable>"u"?b.value:ne.connectable)===!1)return;const ae=Ia($.target),pe=Wa($,{handle:{nodeId:Ne(t),id:Ne(e),type:Ne(n),position:ee.Top,...ft($)},connectionMode:u.value,fromNodeId:y.value.nodeId,fromHandleId:y.value.id??null,fromType:y.value.type,isValidConnection:W,doc:ae,lib:"vue",flowId:r,nodeLookup:Y.value},L.value,R.value,x,Y.value),he=((V=pe.connection)==null?void 0:V.source)===((M=pe.connection)==null?void 0:M.target);pe.isValid&&pe.connection&&!he&&_.connect(pe.connection),_.clickConnectEnd($),m($,!0)}return{handlePointerDown:w,handleClick:I}}function ph(){return Qt(Ar,"")}function Vr(e){const t=e??ph()??"",n=Qt(Dr,re(null)),{findNode:o,edges:i,emits:a}=Re(),s=o(t);return s||a.error(new qe(Ue.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:D(()=>o(s.parentNode)),connectedEdges:D(()=>Ft([s],i.value))}}function fh(){return{doubleClick:fe(),click:fe(),mouseEnter:fe(),mouseMove:fe(),mouseLeave:fe(),contextMenu:fe(),dragStart:fe(),drag:fe(),dragStop:fe()}}function hh(e,t){const n=fh();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Lr(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:s,emits:r}=Re();return(l,u=!1)=>{const c=a.value?i.value[0]:5,p=a.value?i.value[1]:5,y=u?4:1,b=l.x*c*y,S=l.y*p*y,v=[];for(const x of e.value)if(x.draggable||s&&typeof x.draggable>"u"){const h={x:x.computedPosition.x+b,y:x.computedPosition.y+S},{position:f}=Ji(x,h,r.error,t.value,x.parentNode?o(x.parentNode):void 0);v.push({id:x.id,position:f,from:x.position,distance:{x:l.x,y:l.y},dimensions:x.dimensions})}n(v,!0,!1)}}const to=.1,gh=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function Tt(){return qn("Viewport not initialized yet."),Promise.resolve(!1)}const mh={zoomIn:Tt,zoomOut:Tt,zoomTo:Tt,fitView:Tt,setCenter:Tt,fitBounds:Tt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Tt,setTransform:Tt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function vh(e){function t(o,i){return new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((i==null?void 0:i.interpolate)==="linear"?Nn:co).scaleBy(di(e.d3Selection,i==null?void 0:i.duration,i==null?void 0:i.ease,()=>{a(!0)}),o):a(!1)})}function n(o,i,a,s){return new Promise(r=>{var l;const{x:u,y:c}=wr({x:-o,y:-i},e.translateExtent),p=dn.translate(-u,-c).scale(a);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate((s==null?void 0:s.interpolate)==="linear"?Nn:co).transform(di(e.d3Selection,s==null?void 0:s.duration,s==null?void 0:s.ease,()=>{r(!0)}),p):r(!1)})}return D(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i),zoomOut:i=>t(1/1.2,i),zoomTo:(i,a)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((a==null?void 0:a.interpolate)==="linear"?Nn:co).scaleTo(di(e.d3Selection,a==null?void 0:a.duration,a==null?void 0:a.ease,()=>{s(!0)}),i):s(!1)}),setViewport:(i,a)=>n(i.x,i.y,i.zoom,a),setTransform:(i,a)=>n(i.x,i.y,i.zoom,a),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:to,includeHiddenNodes:!1,duration:0})=>{var a,s;const r=[];for(const y of e.nodes)y.dimensions.width&&y.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!y.hidden)&&(!((a=i.nodes)!=null&&a.length)||(s=i.nodes)!=null&&s.length&&i.nodes.includes(y.id))&&r.push(y);if(!r.length)return Promise.resolve(!1);const l=Ki(r),{x:u,y:c,zoom:p}=Pa(l,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??to);return n(u,c,p,i)},setCenter:(i,a,s)=>{const r=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-i*r,u=e.dimensions.height/2-a*r;return n(l,u,r,s)},fitBounds:(i,a={padding:to})=>{const{x:s,y:r,zoom:l}=Pa(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,a.padding??to);return n(s,r,l,a)},project:i=>Rn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:s}=e.vueFlowRef.getBoundingClientRect(),r={x:i.x-a,y:i.y-s};return Rn(r,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:s}=e.vueFlowRef.getBoundingClientRect(),r={x:i.x+a,y:i.y+s};return Dn(r,e.viewport)}return{x:0,y:0}}}:mh)}function di(e,t=0,n=gh,o=()=>{}){const i=typeof t=="number"&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function yh(e,t,n){const o=Ms(!0);return o.run(()=>{const i=()=>{o.run(()=>{let v,x,h=!!(n.nodes.value.length||n.edges.value.length);v=en([e.modelValue,()=>{var f,d;return(d=(f=e.modelValue)==null?void 0:f.value)==null?void 0:d.length}],([f])=>{f&&Array.isArray(f)&&(x==null||x.pause(),n.setElements(f),!x&&!h&&f.length?h=!0:x==null||x.resume())}),x=en([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([f,d])=>{var m;(m=e.modelValue)!=null&&m.value&&Array.isArray(e.modelValue.value)&&(v==null||v.pause(),e.modelValue.value=[...f,...d],ht(()=>{v==null||v.resume()}))},{immediate:h}),lo(()=>{v==null||v.stop(),x==null||x.stop()})})},a=()=>{o.run(()=>{let v,x,h=!!n.nodes.value.length;v=en([e.nodes,()=>{var f,d;return(d=(f=e.nodes)==null?void 0:f.value)==null?void 0:d.length}],([f])=>{f&&Array.isArray(f)&&(x==null||x.pause(),n.setNodes(f),!x&&!h&&f.length?h=!0:x==null||x.resume())}),x=en([n.nodes,()=>n.nodes.value.length],([f])=>{var d;(d=e.nodes)!=null&&d.value&&Array.isArray(e.nodes.value)&&(v==null||v.pause(),e.nodes.value=[...f],ht(()=>{v==null||v.resume()}))},{immediate:h}),lo(()=>{v==null||v.stop(),x==null||x.stop()})})},s=()=>{o.run(()=>{let v,x,h=!!n.edges.value.length;v=en([e.edges,()=>{var f,d;return(d=(f=e.edges)==null?void 0:f.value)==null?void 0:d.length}],([f])=>{f&&Array.isArray(f)&&(x==null||x.pause(),n.setEdges(f),!x&&!h&&f.length?h=!0:x==null||x.resume())}),x=en([n.edges,()=>n.edges.value.length],([f])=>{var d;(d=e.edges)!=null&&d.value&&Array.isArray(e.edges.value)&&(v==null||v.pause(),e.edges.value=[...f],ht(()=>{v==null||v.resume()}))},{immediate:h}),lo(()=>{v==null||v.stop(),x==null||x.stop()})})},r=()=>{o.run(()=>{_e(()=>t.maxZoom,()=>{t.maxZoom&&We(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{_e(()=>t.minZoom,()=>{t.minZoom&&We(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{_e(()=>t.translateExtent,()=>{t.translateExtent&&We(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{_e(()=>t.nodeExtent,()=>{t.nodeExtent&&We(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},p=()=>{o.run(()=>{_e(()=>t.applyDefault,()=>{We(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},y=()=>{o.run(()=>{const v=async x=>{let h=x;typeof t.autoConnect=="function"&&(h=await t.autoConnect(x)),h!==!1&&n.addEdges([h])};_e(()=>t.autoConnect,()=>{We(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),_e(n.autoConnect,(x,h,f)=>{x?n.onConnect(v):n.hooks.value.connect.off(v),f(()=>{n.hooks.value.connect.off(v)})},{immediate:!0})})},b=()=>{const v=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const x of Object.keys(t)){const h=x;if(!v.includes(h)){const f=Ee(()=>t[h]),d=n[h];Wi(d)&&o.run(()=>{_e(f,m=>{We(m)&&(d.value=m)},{immediate:!0})})}}};(()=>{i(),a(),s(),l(),r(),u(),c(),p(),y(),b()})()}),()=>o.stop()}function bh(){return{edgesChange:fe(),nodesChange:fe(),nodeDoubleClick:fe(),nodeClick:fe(),nodeMouseEnter:fe(),nodeMouseMove:fe(),nodeMouseLeave:fe(),nodeContextMenu:fe(),nodeDragStart:fe(),nodeDrag:fe(),nodeDragStop:fe(),nodesInitialized:fe(),miniMapNodeClick:fe(),miniMapNodeDoubleClick:fe(),miniMapNodeMouseEnter:fe(),miniMapNodeMouseMove:fe(),miniMapNodeMouseLeave:fe(),connect:fe(),connectStart:fe(),connectEnd:fe(),clickConnectStart:fe(),clickConnectEnd:fe(),paneReady:fe(),init:fe(),move:fe(),moveStart:fe(),moveEnd:fe(),selectionDragStart:fe(),selectionDrag:fe(),selectionDragStop:fe(),selectionContextMenu:fe(),selectionStart:fe(),selectionEnd:fe(),viewportChangeStart:fe(),viewportChange:fe(),viewportChangeEnd:fe(),paneScroll:fe(),paneClick:fe(),paneContextMenu:fe(),paneMouseEnter:fe(),paneMouseMove:fe(),paneMouseLeave:fe(),edgeContextMenu:fe(),edgeMouseEnter:fe(),edgeMouseMove:fe(),edgeMouseLeave:fe(),edgeDoubleClick:fe(),edgeClick:fe(),edgeUpdateStart:fe(),edgeUpdate:fe(),edgeUpdateEnd:fe(),updateNodeInternals:fe(),error:fe(e=>qn(e.message))}}function wh(e,t){const n=hn();Ml(()=>{for(const[i,a]of Object.entries(t.value)){const s=r=>{e(i,r)};a.setEmitter(s),Mn(a.removeEmitter),a.setHasEmitListeners(()=>o(i)),Mn(a.removeHasEmitListeners)}});function o(i){var a;const s=xh(i);return!!((a=n==null?void 0:n.vnode.props)==null?void 0:a[s])}}function xh(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(i,a)=>a.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function Or(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Zi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:$n.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Bt.Bezier,style:{}},connectionMode:zt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Vn()?"Meta":"Control",zoomActivationKeyCode:Vn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:bh(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Sh=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function _h(e,t,n){const o=vh(e),i=T=>{const E=T??[];e.hooks.updateNodeInternals.trigger(E)},a=T=>Lf(T,e.nodes,e.edges),s=T=>Vf(T,e.nodes,e.edges),r=T=>Ft(T,e.edges),l=({id:T,type:E,nodeId:A})=>{var G;const q=T?`-${E}-${T}`:`-${E}`;return Array.from(((G=e.connectionLookup.get(`${A}${q}`))==null?void 0:G.values())??[])},u=T=>{if(T)return t.value.get(T)},c=T=>{if(T)return n.value.get(T)},p=(T,E,A)=>{var G,q;const le=[];for(const ue of T){const ve={id:ue.id,type:"position",dragging:A,from:ue.from};if(E&&(ve.position=ue.position,ue.parentNode)){const ye=u(ue.parentNode);ve.position={x:ve.position.x-(((G=ye==null?void 0:ye.computedPosition)==null?void 0:G.x)??0),y:ve.position.y-(((q=ye==null?void 0:ye.computedPosition)==null?void 0:q.y)??0)}}le.push(ve)}le!=null&&le.length&&e.hooks.nodesChange.trigger(le)},y=T=>{if(!e.vueFlowRef)return;const E=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!E)return;const A=window.getComputedStyle(E),{m22:G}=new window.DOMMatrixReadOnly(A.transform),q=[];for(const le of T){const ue=le,ve=u(ue.id);if(ve){const ye=Wo(ue.nodeElement);if(!!(ye.width&&ye.height&&(ve.dimensions.width!==ye.width||ve.dimensions.height!==ye.height||ue.forceUpdate))){const Ce=ue.nodeElement.getBoundingClientRect();ve.dimensions=ye,ve.handleBounds.source=Ua("source",ue.nodeElement,Ce,G,ve.id),ve.handleBounds.target=Ua("target",ue.nodeElement,Ce,G,ve.id),q.push({id:ve.id,type:"dimensions",dimensions:ye})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),q.length&&e.hooks.nodesChange.trigger(q)},b=(T,E)=>{const A=new Set,G=new Set;for(const ue of T)Yt(ue)?A.add(ue.id):Vt(ue)&&G.add(ue.id);const q=At(t.value,A,!0),le=At(n.value,G);if(e.multiSelectionActive){for(const ue of A)q.push(It(ue,E));for(const ue of G)le.push(It(ue,E))}q.length&&e.hooks.nodesChange.trigger(q),le.length&&e.hooks.edgesChange.trigger(le)},S=T=>{if(e.multiSelectionActive){const E=T.map(A=>It(A.id,!0));e.hooks.nodesChange.trigger(E);return}e.hooks.nodesChange.trigger(At(t.value,new Set(T.map(E=>E.id)),!0)),e.hooks.edgesChange.trigger(At(n.value))},v=T=>{if(e.multiSelectionActive){const E=T.map(A=>It(A.id,!0));e.hooks.edgesChange.trigger(E);return}e.hooks.edgesChange.trigger(At(n.value,new Set(T.map(E=>E.id)))),e.hooks.nodesChange.trigger(At(t.value,new Set,!0))},x=T=>{b(T,!0)},h=T=>{const A=(T||e.nodes).map(G=>(G.selected=!1,It(G.id,!1)));e.hooks.nodesChange.trigger(A)},f=T=>{const A=(T||e.edges).map(G=>(G.selected=!1,It(G.id,!1)));e.hooks.edgesChange.trigger(A)},d=T=>{if(!T||!T.length)return b([],!1);const E=T.reduce((A,G)=>{const q=It(G.id,!1);return Yt(G)?A.nodes.push(q):A.edges.push(q),A},{nodes:[],edges:[]});E.nodes.length&&e.hooks.nodesChange.trigger(E.nodes),E.edges.length&&e.hooks.edgesChange.trigger(E.edges)},m=T=>{var E;(E=e.d3Zoom)==null||E.scaleExtent([T,e.maxZoom]),e.minZoom=T},_=T=>{var E;(E=e.d3Zoom)==null||E.scaleExtent([e.minZoom,T]),e.maxZoom=T},C=T=>{var E;(E=e.d3Zoom)==null||E.translateExtent(T),e.translateExtent=T},L=T=>{e.nodeExtent=T,i()},R=T=>{var E;(E=e.d3Zoom)==null||E.clickDistance(T)},j=T=>{e.nodesDraggable=T,e.nodesConnectable=T,e.elementsSelectable=T},Y=T=>{const E=T instanceof Function?T(e.nodes):T;!e.initialized&&!E.length||(e.nodes=qa(E,u,e.hooks.error.trigger))},O=T=>{const E=T instanceof Function?T(e.edges):T;if(!e.initialized&&!E.length)return;const A=ui(E,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);li(e.connectionLookup,n.value,A),e.edges=A},k=T=>{const E=T instanceof Function?T([...e.nodes,...e.edges]):T;!e.initialized&&!E.length||(Y(E.filter(Yt)),O(E.filter(Vt)))},J=T=>{let E=T instanceof Function?T(e.nodes):T;E=Array.isArray(E)?E:[E];const A=qa(E,u,e.hooks.error.trigger),G=[];for(const q of A)G.push(Ra(q));G.length&&e.hooks.nodesChange.trigger(G)},w=T=>{let E=T instanceof Function?T(e.edges):T;E=Array.isArray(E)?E:[E];const A=ui(E,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),G=[];for(const q of A)G.push(Ra(q));G.length&&e.hooks.edgesChange.trigger(G)},I=(T,E=!0,A=!1)=>{const G=T instanceof Function?T(e.nodes):T,q=Array.isArray(G)?G:[G],le=[],ue=[];function ve(Se){const Ce=r(Se);for(const Me of Ce)(!We(Me.deletable)||Me.deletable)&&ue.push(Va(Me.id,Me.source,Me.target,Me.sourceHandle,Me.targetHandle))}function ye(Se){const Ce=[];for(const Me of e.nodes)Me.parentNode===Se&&Ce.push(Me);if(Ce.length){for(const Me of Ce)le.push(za(Me.id));E&&ve(Ce);for(const Me of Ce)ye(Me.id)}}for(const Se of q){const Ce=typeof Se=="string"?u(Se):Se;Ce&&(We(Ce.deletable)&&!Ce.deletable||(le.push(za(Ce.id)),E&&ve([Ce]),A&&ye(Ce.id)))}ue.length&&e.hooks.edgesChange.trigger(ue),le.length&&e.hooks.nodesChange.trigger(le)},$=T=>{const E=T instanceof Function?T(e.edges):T,A=Array.isArray(E)?E:[E],G=[];for(const q of A){const le=typeof q=="string"?c(q):q;le&&(We(le.deletable)&&!le.deletable||G.push(Va(typeof q=="string"?q:q.id,le.source,le.target,le.sourceHandle,le.targetHandle)))}e.hooks.edgesChange.trigger(G)},V=(T,E,A=!0)=>{const G=c(T.id);if(!G)return!1;const q=e.edges.indexOf(G),le=sh(T,E,G,A,e.hooks.error.trigger);if(le){const[ue]=ui([le],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((ve,ye)=>ye===q?ue:ve),li(e.connectionLookup,n.value,[ue]),ue}return!1},M=(T,E,A={replace:!1})=>{const G=c(T);if(!G)return;const q=typeof E=="function"?E(G):E;G.data=A.replace?q:{...G.data,...q}},U=T=>Da(T,e.nodes),W=T=>{const E=Da(T,e.edges);return li(e.connectionLookup,n.value,E),E},ne=(T,E,A={replace:!1})=>{const G=u(T);if(!G)return;const q=typeof E=="function"?E(G):E;A.replace?e.nodes.splice(e.nodes.indexOf(G),1,q):Object.assign(G,q)},ae=(T,E,A={replace:!1})=>{const G=u(T);if(!G)return;const q=typeof E=="function"?E(G):E;G.data=A.replace?q:{...G.data,...q}},pe=(T,E,A=!1)=>{A?e.connectionClickStartHandle=T:e.connectionStartHandle=T,e.connectionEndHandle=null,e.connectionStatus=null,E&&(e.connectionPosition=E)},he=(T,E=null,A=null)=>{e.connectionStartHandle&&(e.connectionPosition=T,e.connectionEndHandle=E,e.connectionStatus=A)},B=(T,E)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,E?e.connectionClickStartHandle=null:e.connectionStartHandle=null},Z=T=>{const E=Rf(T),A=E?null:Sn(T)?T:u(T.id);return!E&&!A?[null,null,E]:[E?T:Eo(A),A,E]},X=(T,E=!0,A=e.nodes)=>{const[G,q,le]=Z(T);if(!G)return[];const ue=[];for(const ve of A||e.nodes){if(!le&&(ve.id===q.id||!ve.computedPosition))continue;const ye=Eo(ve),Se=Mo(ye,G);(E&&Se>0||Se>=ye.width*ye.height||Se>=Number(G.width)*Number(G.height))&&ue.push(ve)}return ue},P=(T,E,A=!0)=>{const[G]=Z(T);if(!G)return!1;const q=Mo(G,E);return A&&q>0||q>=Number(G.width)*Number(G.height)},H=T=>{const{viewport:E,dimensions:A,d3Zoom:G,d3Selection:q,translateExtent:le}=e;if(!G||!q||!T.x&&!T.y)return!1;const ue=dn.translate(E.x+T.x,E.y+T.y).scale(E.zoom),ve=[[0,0],[A.width,A.height]],ye=G.constrain()(ue,ve,le),Se=e.viewport.x!==ye.x||e.viewport.y!==ye.y||e.viewport.zoom!==ye.k;return G.transform(q,ye),Se},F=T=>{const E=T instanceof Function?T(e):T,A=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];We(E.defaultEdgeOptions)&&(e.defaultEdgeOptions=E.defaultEdgeOptions);const G=E.modelValue||E.nodes||E.edges?[]:void 0;G&&(E.modelValue&&G.push(...E.modelValue),E.nodes&&G.push(...E.nodes),E.edges&&G.push(...E.edges),k(G));const q=()=>{We(E.maxZoom)&&_(E.maxZoom),We(E.minZoom)&&m(E.minZoom),We(E.translateExtent)&&C(E.translateExtent)};for(const le of Object.keys(E)){const ue=le,ve=E[ue];![...Sh,...A].includes(ue)&&We(ve)&&(e[ue]=ve)}yi(()=>e.d3Zoom).not.toBeNull().then(q),e.initialized||(e.initialized=!0)};return{updateNodePositions:p,updateNodeDimensions:y,setElements:k,setNodes:Y,setEdges:O,addNodes:J,addEdges:w,removeNodes:I,removeEdges:$,findNode:u,findEdge:c,updateEdge:V,updateEdgeData:M,updateNode:ne,updateNodeData:ae,applyEdgeChanges:W,applyNodeChanges:U,addSelectedElements:x,addSelectedNodes:S,addSelectedEdges:v,setMinZoom:m,setMaxZoom:_,setTranslateExtent:C,setNodeExtent:L,setPaneClickDistance:R,removeSelectedElements:d,removeSelectedNodes:h,removeSelectedEdges:f,startConnection:pe,updateConnection:he,endConnection:B,setInteractive:j,setState:F,getIntersectingNodes:X,getIncomers:a,getOutgoers:s,getConnectedEdges:r,getHandleConnections:l,isNodeIntersecting:P,panBy:H,fitView:T=>o.value.fitView(T),zoomIn:T=>o.value.zoomIn(T),zoomOut:T=>o.value.zoomOut(T),zoomTo:(T,E)=>o.value.zoomTo(T,E),setViewport:(T,E)=>o.value.setViewport(T,E),setTransform:(T,E)=>o.value.setTransform(T,E),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(T,E,A)=>o.value.setCenter(T,E,A),fitBounds:(T,E)=>o.value.fitBounds(T,E),project:T=>o.value.project(T),screenToFlowCoordinate:T=>o.value.screenToFlowCoordinate(T),flowToScreenCoordinate:T=>o.value.flowToScreenCoordinate(T),toObject:()=>{const T=[],E=[];for(const A of e.nodes){const{computedPosition:G,handleBounds:q,selected:le,dimensions:ue,isParent:ve,resizing:ye,dragging:Se,events:Ce,...Me}=A;T.push(Me)}for(const A of e.edges){const{selected:G,sourceNode:q,targetNode:le,events:ue,...ve}=A;E.push(ve)}return JSON.parse(JSON.stringify({nodes:T,edges:E,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:T=>new Promise(E=>{const{nodes:A,edges:G,position:q,zoom:le,viewport:ue}=T;A&&Y(A),G&&O(G);const[ve,ye]=ue!=null&&ue.x&&(ue!=null&&ue.y)?[ue.x,ue.y]:q??[null,null];if(ve&&ye){const Se=(ue==null?void 0:ue.zoom)||le||e.viewport.zoom;return yi(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:ve,y:ye,zoom:Se}).then(()=>{E(!0)})})}else E(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const T=Or();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const E=dn.translate(T.defaultViewport.x??0,T.defaultViewport.y??0).scale(Kt(T.defaultViewport.zoom??1,T.minZoom,T.maxZoom)),A=e.viewportRef.getBoundingClientRect(),G=[[0,0],[A.width,A.height]],q=e.d3Zoom.constrain()(E,G,T.translateExtent);e.d3Zoom.transform(e.d3Selection,q)}F(T)},$destroy:()=>{}}}const kh=["data-id","data-handleid","data-nodeid","data-handlepos"],Ch={name:"Handle",compatConfig:{MODE:3}},ce=xe({...Ch,props:{id:{default:null},type:{},position:{default:()=>ee.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=El(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ee(()=>n.type??"source"),i=Ee(()=>n.isValidConnection??null),{id:a,connectionStartHandle:s,connectionClickStartHandle:r,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:p,noPanClassName:y}=Re(),{id:b,node:S,nodeEl:v,connectedEdges:x}=Vr(),h=re(),f=Ee(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),d=Ee(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),m=Ee(()=>{var O,k,J,w,I,$;return((O=s.value)==null?void 0:O.nodeId)===b&&((k=s.value)==null?void 0:k.id)===e.id&&((J=s.value)==null?void 0:J.type)===o.value||((w=l.value)==null?void 0:w.nodeId)===b&&((I=l.value)==null?void 0:I.id)===e.id&&(($=l.value)==null?void 0:$.type)===o.value}),_=Ee(()=>{var O,k,J;return((O=r.value)==null?void 0:O.nodeId)===b&&((k=r.value)==null?void 0:k.id)===e.id&&((J=r.value)==null?void 0:J.type)===o.value}),{handlePointerDown:C,handleClick:L}=zr({nodeId:b,handleId:e.id,isValidConnection:i,type:o}),R=D(()=>typeof e.connectable=="string"&&e.connectable==="single"?!x.value.some(O=>{const k=O[`${o.value}Handle`];return O[o.value]!==b?!1:k?k===e.id:!0}):typeof e.connectable=="number"?x.value.filter(O=>{const k=O[`${o.value}Handle`];return O[o.value]!==b?!1:k?k===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(S,x.value):We(e.connectable)?e.connectable:c.value);Oe(()=>{var O;if(!S.dimensions.width||!S.dimensions.height)return;const k=(O=S.handleBounds[o.value])==null?void 0:O.find(U=>U.id===e.id);if(!u.value||k)return;const J=u.value.querySelector(".vue-flow__transformationpane");if(!v.value||!h.value||!J||!e.id)return;const w=v.value.getBoundingClientRect(),I=h.value.getBoundingClientRect(),$=window.getComputedStyle(J),{m22:V}=new window.DOMMatrixReadOnly($.transform),M={id:e.id,position:e.position,x:(I.left-w.left)/V,y:(I.top-w.top)/V,type:o.value,nodeId:b,...Wo(h.value)};S.handleBounds[o.value]=[...S.handleBounds[o.value]??[],M]});function j(O){const k=Qi(O);R.value&&f.value&&(k&&O.button===0||!k)&&C(O)}function Y(O){!b||!r.value&&!f.value||R.value&&L(O)}return t({handleClick:L,handlePointerDown:C,onClick:Y,onPointerDown:j}),(O,k)=>(z(),K("div",{ref_key:"handle",ref:h,"data-id":`${N(a)}-${N(b)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":N(b),"data-handlepos":O.position,class:ge(["vue-flow__handle",[`vue-flow__handle-${O.position}`,`vue-flow__handle-${e.id}`,N(p),N(y),o.value,{connectable:R.value,connecting:_.value,connectablestart:f.value,connectableend:d.value,connectionindicator:R.value&&(f.value&&!m.value||d.value&&m.value)}]]),onMousedown:j,onTouchstartPassive:j,onClick:Y},[Le(O.$slots,"default",{id:O.id})],42,kh))}}),Ho=function({sourcePosition:e=ee.Bottom,targetPosition:t=ee.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a,data:s}){const r=s.label??n;return[Te(ce,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof r!="string"&&r?Te(r):Te(ke,[r]),Te(ce,{type:"source",position:e,connectable:o,isValidConnection:a})]};Ho.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Ho.inheritAttrs=!1;Ho.compatConfig={MODE:3};const Nh=Ho,Yo=function({targetPosition:e=ee.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const a=i.label??t;return[Te(ce,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof a!="string"&&a?Te(a):Te(ke,[a])]};Yo.props=["targetPosition","label","isValidTargetPos","connectable","data"];Yo.inheritAttrs=!1;Yo.compatConfig={MODE:3};const $h=Yo,Go=function({sourcePosition:e=ee.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const a=i.label??t;return[typeof a!="string"&&a?Te(a):Te(ke,[a]),Te(ce,{type:"source",position:e,connectable:n,isValidConnection:o})]};Go.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Go.inheritAttrs=!1;Go.compatConfig={MODE:3};const Eh=Go,Mh=["transform"],Th=["width","height","x","y","rx","ry"],Ih=["y"],Ph={name:"EdgeText",compatConfig:{MODE:3}},Ah=xe({...Ph,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=re({x:0,y:0,width:0,height:0}),n=re(null),o=D(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Oe(i),_e([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,s)=>(z(),K("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[a.labelShowBg?(z(),K("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*a.labelBgPadding[0]}px`,height:`${t.value.height+2*a.labelBgPadding[1]}px`,x:-a.labelBgPadding[0],y:-a.labelBgPadding[1],style:Q(a.labelBgStyle),rx:a.labelBgBorderRadius,ry:a.labelBgBorderRadius},null,12,Th)):me("",!0),g("text",bo(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:a.labelStyle}),[Le(a.$slots,"default",{},()=>[typeof a.label!="string"?(z(),we(xt(a.label),{key:0})):(z(),K(ke,{key:1},[gi(be(a.label),1)],64))])],16,Ih)],8,Mh))}}),Dh=["id","d","marker-end","marker-start"],Rh=["d","stroke-width"],zh={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Hn=xe({...zh,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=re(null),o=re(null),i=re(null),a=Fi();return t({pathEl:n,interactionEl:o,labelEl:i}),(s,r)=>(z(),K(ke,null,[g("path",bo(N(a),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,Dh),s.interactionWidth?(z(),K("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Rh)):me("",!0),s.label&&s.labelX&&s.labelY?(z(),we(Ah,{key:1,ref_key:"labelEl",ref:i,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):me("",!0)],64))}});function Br({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,s=Math.abs(o-t)/2,r=o<t?o+s:o-s;return[a,r,i,s]}function Fr({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:r}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+a*.375+r*.375+o*.125,c=Math.abs(l-e),p=Math.abs(u-t);return[l,u,c,p]}function no(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ja({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let s,r;switch(e){case ee.Left:s=t-no(t-o,a),r=n;break;case ee.Right:s=t+no(o-t,a),r=n;break;case ee.Top:s=t,r=n-no(n-i,a);break;case ee.Bottom:s=t,r=n+no(i-n,a);break}return[s,r]}function Wr(e){const{sourceX:t,sourceY:n,sourcePosition:o=ee.Bottom,targetX:i,targetY:a,targetPosition:s=ee.Top,curvature:r=.25}=e,[l,u]=ja({pos:o,x1:t,y1:n,x2:i,y2:a,c:r}),[c,p]=ja({pos:s,x1:i,y1:a,x2:t,y2:n,c:r}),[y,b,S,v]=Fr({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:p});return[`M${t},${n} C${l},${u} ${c},${p} ${i},${a}`,y,b,S,v]}function Xa({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,s;switch(e){case ee.Left:case ee.Right:a=.5*(t+o),s=n;break;case ee.Top:case ee.Bottom:a=t,s=.5*(n+i);break}return[a,s]}function Ur(e){const{sourceX:t,sourceY:n,sourcePosition:o=ee.Bottom,targetX:i,targetY:a,targetPosition:s=ee.Top}=e,[r,l]=Xa({pos:o,x1:t,y1:n,x2:i,y2:a}),[u,c]=Xa({pos:s,x1:i,y1:a,x2:t,y2:n}),[p,y,b,S]=Fr({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:r,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${r},${l} ${u},${c} ${i},${a}`,p,y,b,S]}const Za={[ee.Left]:{x:-1,y:0},[ee.Right]:{x:1,y:0},[ee.Top]:{x:0,y:-1},[ee.Bottom]:{x:0,y:1}};function Vh({source:e,sourcePosition:t=ee.Bottom,target:n}){return t===ee.Left||t===ee.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ka(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Lh({source:e,sourcePosition:t=ee.Bottom,target:n,targetPosition:o=ee.Top,center:i,offset:a}){const s=Za[t],r=Za[o],l={x:e.x+s.x*a,y:e.y+s.y*a},u={x:n.x+r.x*a,y:n.y+r.y*a},c=Vh({source:l,sourcePosition:t,target:u}),p=c.x!==0?"x":"y",y=c[p];let b,S,v;const x={x:0,y:0},h={x:0,y:0},[f,d,m,_]=Br({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*r[p]===-1){S=i.x??f,v=i.y??d;const L=[{x:S,y:l.y},{x:S,y:u.y}],R=[{x:l.x,y:v},{x:u.x,y:v}];s[p]===y?b=p==="x"?L:R:b=p==="x"?R:L}else{const L=[{x:l.x,y:u.y}],R=[{x:u.x,y:l.y}];if(p==="x"?b=s.x===y?R:L:b=s.y===y?L:R,t===o){const J=Math.abs(e[p]-n[p]);if(J<=a){const w=Math.min(a-1,a-J);s[p]===y?x[p]=(l[p]>e[p]?-1:1)*w:h[p]=(u[p]>n[p]?-1:1)*w}}if(t!==o){const J=p==="x"?"y":"x",w=s[p]===r[J],I=l[J]>u[J],$=l[J]<u[J];(s[p]===1&&(!w&&I||w&&$)||s[p]!==1&&(!w&&$||w&&I))&&(b=p==="x"?L:R)}const j={x:l.x+x.x,y:l.y+x.y},Y={x:u.x+h.x,y:u.y+h.y},O=Math.max(Math.abs(j.x-b[0].x),Math.abs(Y.x-b[0].x)),k=Math.max(Math.abs(j.y-b[0].y),Math.abs(Y.y-b[0].y));O>=k?(S=(j.x+Y.x)/2,v=b[0].y):(S=b[0].x,v=(j.y+Y.y)/2)}return[[e,{x:l.x+x.x,y:l.y+x.y},...b,{x:u.x+h.x,y:u.y+h.y},n],S,v,m,_]}function Oh(e,t,n,o){const i=Math.min(Ka(e,t)/2,Ka(t,n)/2,o),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*u},${s}Q ${a},${s} ${a},${s+i*c}`}const r=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${s+i*l}Q ${a},${s} ${a+i*r},${s}`}function Io(e){const{sourceX:t,sourceY:n,sourcePosition:o=ee.Bottom,targetX:i,targetY:a,targetPosition:s=ee.Top,borderRadius:r=5,centerX:l,centerY:u,offset:c=20}=e,[p,y,b,S,v]=Lh({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:a},targetPosition:s,center:{x:l,y:u},offset:c});return[p.reduce((h,f,d)=>{let m;return d>0&&d<p.length-1?m=Oh(p[d-1],f,p[d+1],r):m=`${d===0?"M":"L"}${f.x} ${f.y}`,h+=m,h},""),y,b,S,v]}function Bh(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[a,s,r,l]=Br({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,a,s,r,l]}const Fh=xe({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Bh(e);return Te(Hn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Wh=Fh,Uh=xe({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Io({...e,sourcePosition:e.sourcePosition??ee.Bottom,targetPosition:e.targetPosition??ee.Top});return Te(Hn,{path:n,labelX:o,labelY:i,...t,...e})}}}),qr=Uh,qh=xe({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Te(qr,{...e,...t,borderRadius:0})}}),Hh=qh,Yh=xe({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Wr({...e,sourcePosition:e.sourcePosition??ee.Bottom,targetPosition:e.targetPosition??ee.Top});return Te(Hn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Gh=Yh,jh=xe({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ur({...e,sourcePosition:e.sourcePosition??ee.Bottom,targetPosition:e.targetPosition??ee.Top});return Te(Hn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Xh=jh,Zh={input:Eh,default:Nh,output:$h},Kh={default:Gh,straight:Wh,step:Hh,smoothstep:qr,simplebezier:Xh};function Jh(e,t,n){const o=D(()=>v=>t.value.get(v)),i=D(()=>v=>n.value.get(v)),a=D(()=>{const v={...Kh,...e.edgeTypes},x=Object.keys(v);for(const h of e.edges)h.type&&!x.includes(h.type)&&(v[h.type]=h.type);return v}),s=D(()=>{const v={...Zh,...e.nodeTypes},x=Object.keys(v);for(const h of e.nodes)h.type&&!x.includes(h.type)&&(v[h.type]=h.type);return v}),r=D(()=>e.onlyRenderVisibleElements?Nr(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=D(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const x of e.edges){const h=t.value.get(x.source),f=t.value.get(x.target);jf({sourcePos:h.computedPosition||{x:0,y:0},targetPos:f.computedPosition||{x:0,y:0},sourceWidth:h.dimensions.width,sourceHeight:h.dimensions.height,targetWidth:f.dimensions.width,targetHeight:f.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(x)}return v}return e.edges}),u=D(()=>[...r.value,...l.value]),c=D(()=>{const v=[];for(const x of e.nodes)x.selected&&v.push(x);return v}),p=D(()=>{const v=[];for(const x of e.edges)x.selected&&v.push(x);return v}),y=D(()=>[...c.value,...p.value]),b=D(()=>{const v=[];for(const x of e.nodes)x.dimensions.width&&x.dimensions.height&&x.handleBounds!==void 0&&v.push(x);return v}),S=D(()=>r.value.length>0&&b.value.length===r.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:a,getNodeTypes:s,getEdges:l,getNodes:r,getSelectedElements:y,getSelectedNodes:c,getSelectedEdges:p,getNodesInitialized:b,areNodesInitialized:S}}class Wt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=hn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Wt.instance;return Wt.instance=o??new Wt,n&&(n.config.globalProperties.$vueFlowStorage=Wt.instance),Wt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Or(),i=Il(o),a={};for(const[y,b]of Object.entries(i.hooks)){const S=`on${y.charAt(0).toUpperCase()+y.slice(1)}`;a[S]=b.on}const s={};for(const[y,b]of Object.entries(i.hooks))s[y]=b.trigger;const r=D(()=>{const y=new Map;for(const b of i.nodes)y.set(b.id,b);return y}),l=D(()=>{const y=new Map;for(const b of i.edges)y.set(b.id,b);return y}),u=Jh(i,r,l),c=_h(i,r,l);c.setState({...i,...n});const p={...a,...u,...c,...Uu(i),nodeLookup:r,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.48.2",$destroy:()=>{this.remove(t)}};return this.set(t,p),p}getId(){return`vue-flow-${this.currentId++}`}}function Re(e){const t=Wt.getInstance(),n=Is(),o=typeof e=="object",i=o?e:{id:e},a=i.id,s=a??(n==null?void 0:n.vueFlowId);let r;if(n){const l=Qt(Ga,null);typeof l<"u"&&l!==null&&(!s||l.id===s)&&(r=l)}if(r||s&&(r=t.get(s)),!r||s&&r.id!==s){const l=a??t.getId(),u=t.create(l,i);r=u,(n??Ms(!0)).run(()=>{_e(u.applyDefault,(p,y,b)=>{const S=x=>{u.applyNodeChanges(x)},v=x=>{u.applyEdgeChanges(x)};p?(u.onNodesChange(S),u.onEdgesChange(v)):(u.hooks.value.nodesChange.off(S),u.hooks.value.edgesChange.off(v)),b(()=>{u.hooks.value.nodesChange.off(S),u.hooks.value.edgesChange.off(v)})},{immediate:!0}),Mn(()=>{if(r){const p=t.get(r.id);p?p.$destroy():qn(`No store instance found for id ${r.id} in storage.`)}})})}else o&&r.setState(i);if(n&&(jt(Ga,r),n.vueFlowId=r.id),o){const l=hn();(l==null?void 0:l.type.name)!=="VueFlow"&&r.emits.error(new qe(Ue.USEVUEFLOW_OPTIONS))}return r}function Qh(e){const{emits:t,dimensions:n}=Re();let o;Oe(()=>{const i=()=>{var a,s;if(!e.value||!(((s=(a=e.value).checkVisibility)==null?void 0:s.call(a))??!0))return;const r=Wo(e.value);(r.width===0||r.height===0)&&t.error(new qe(Ue.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:r.width||500,height:r.height||500}};i(),window.addEventListener("resize",i),e.value&&(o=new ResizeObserver(()=>i()),o.observe(e.value)),Ts(()=>{window.removeEventListener("resize",i),o&&e.value&&o.unobserve(e.value)})})}const eg={name:"UserSelection",compatConfig:{MODE:3}},tg=xe({...eg,props:{userSelectionRect:{}},setup(e){return(t,n)=>(z(),K("div",{class:"vue-flow__selection vue-flow__container",style:Q({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),ng=["tabIndex"],og={name:"NodesSelection",compatConfig:{MODE:3}},ig=xe({...og,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:s}=Re(),r=Lr(),l=re(null),u=Rr({el:l,onStart(S){t.selectionDragStart(S),t.nodeDragStart(S)},onDrag(S){t.selectionDrag(S),t.nodeDrag(S)},onStop(S){t.selectionDragStop(S),t.nodeDragStop(S)}});Oe(()=>{var S;a.value||(S=l.value)==null||S.focus({preventScroll:!0})});const c=D(()=>Ki(o.value)),p=D(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function y(S){t.selectionContextMenu({event:S,nodes:o.value})}function b(S){a.value||sn[S.key]&&(S.preventDefault(),r({x:sn[S.key].x,y:sn[S.key].y},S.shiftKey))}return(S,v)=>!N(s)&&c.value.width&&c.value.height?(z(),K("div",{key:0,class:ge(["vue-flow__nodesselection vue-flow__container",N(i)]),style:Q({transform:`translate(${N(n).x}px,${N(n).y}px) scale(${N(n).zoom})`})},[g("div",{ref_key:"el",ref:l,class:ge([{dragging:N(u)},"vue-flow__nodesselection-rect"]),style:Q(p.value),tabIndex:N(a)?void 0:-1,onContextmenu:y,onKeydown:b},null,46,ng)],6)):me("",!0)}});function ag(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const sg={name:"Pane",compatConfig:{MODE:3}},rg=xe({...sg,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:a,removeSelectedElements:s,userSelectionRect:r,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:p,removeNodes:y,removeEdges:b,selectionMode:S,deleteKeyCode:v,multiSelectionKeyCode:x,multiSelectionActive:h,edgeLookup:f,nodeLookup:d,connectionLookup:m,defaultEdgeOptions:_,connectionStartHandle:C,panOnDrag:L}=Re(),R=_t(null),j=_t(new Set),Y=_t(new Set),O=_t(null),k=Ee(()=>l.value&&(e.isSelecting||a.value)),J=Ee(()=>C.value!==null);let w=!1,I=!1;const $=En(v,{actInsideInputWithModifier:!1}),V=En(x);_e($,B=>{B&&(y(p.value),b(c.value),u.value=!1)}),_e(V,B=>{h.value=B});function M(B,Z){return X=>{X.target===Z&&(B==null||B(X))}}function U(B){if(w||J.value){w=!1;return}i.paneClick(B),s(),u.value=!1}function W(B){var Z;if(Array.isArray(L.value)&&((Z=L.value)!=null&&Z.includes(2))){B.preventDefault();return}i.paneContextMenu(B)}function ne(B){i.paneScroll(B)}function ae(B){var Z,X,P;if(O.value=((Z=t.value)==null?void 0:Z.getBoundingClientRect())??null,!l.value||!e.isSelecting||B.button!==0||B.target!==R.value||!O.value)return;(P=(X=B.target)==null?void 0:X.setPointerCapture)==null||P.call(X,B.pointerId);const{x:H,y:F}=ag(B,O.value);I=!0,w=!1,s(),r.value={width:0,height:0,startX:H,startY:F,x:H,y:F},i.selectionStart(B)}function pe(B){var Z;if(!O.value||!r.value)return;w=!0;const{x:X,y:P}=ft(B,O.value),{startX:H=0,startY:F=0}=r.value,ie={startX:H,startY:F,x:X<H?X:H,y:P<F?P:F,width:Math.abs(X-H),height:Math.abs(P-F)},oe=j.value,se=Y.value;j.value=new Set(Nr(n.value,ie,o.value,S.value===Zi.Partial,!0).map(E=>E.id)),Y.value=new Set;const T=((Z=_.value)==null?void 0:Z.selectable)??!0;for(const E of j.value){const A=m.value.get(E);if(A)for(const{edgeId:G}of A.values()){const q=f.value.get(G);q&&(q.selectable??T)&&Y.value.add(G)}}if(!Ya(oe,j.value)){const E=At(d.value,j.value,!0);i.nodesChange(E)}if(!Ya(se,Y.value)){const E=At(f.value,Y.value);i.edgesChange(E)}r.value=ie,a.value=!0,u.value=!1}function he(B){var Z;B.button!==0||!I||((Z=B.target)==null||Z.releasePointerCapture(B.pointerId),!a.value&&r.value&&B.target===R.value&&U(B),a.value=!1,r.value=null,u.value=j.value.size>0,i.selectionEnd(B),e.selectionKeyPressed&&(w=!1),I=!1)}return(B,Z)=>(z(),K("div",{ref_key:"container",ref:R,class:ge(["vue-flow__pane vue-flow__container",{selection:B.isSelecting}]),onClick:Z[0]||(Z[0]=X=>k.value?void 0:M(U,R.value)(X)),onContextmenu:Z[1]||(Z[1]=X=>M(W,R.value)(X)),onWheelPassive:Z[2]||(Z[2]=X=>M(ne,R.value)(X)),onPointerenter:Z[3]||(Z[3]=X=>k.value?void 0:N(i).paneMouseEnter(X)),onPointerdown:Z[4]||(Z[4]=X=>k.value?ae(X):N(i).paneMouseMove(X)),onPointermove:Z[5]||(Z[5]=X=>k.value?pe(X):N(i).paneMouseMove(X)),onPointerup:Z[6]||(Z[6]=X=>k.value?he(X):void 0),onPointerleave:Z[7]||(Z[7]=X=>N(i).paneMouseLeave(X))},[Le(B.$slots,"default"),N(a)&&N(r)?(z(),we(tg,{key:0,"user-selection-rect":N(r)},null,8,["user-selection-rect"])):me("",!0),N(u)&&N(p).length?(z(),we(ig,{key:1})):me("",!0)],34))}}),lg={name:"Transform",compatConfig:{MODE:3}},ug=xe({...lg,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Re(),i=D(()=>n.value?!o.value:!1),a=D(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,r)=>(z(),K("div",{class:"vue-flow__transformationpane vue-flow__container",style:Q({transform:a.value,opacity:i.value?0:void 0})},[Le(s.$slots,"default")],4))}}),dg={name:"Viewport",compatConfig:{MODE:3}},cg=xe({...dg,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:a,selectionKeyCode:s,panActivationKeyCode:r,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:p,zoomOnDoubleClick:y,zoomOnPinch:b,zoomOnScroll:S,preventScrolling:v,noWheelClassName:x,noPanClassName:h,emits:f,connectionStartHandle:d,userSelectionActive:m,paneDragging:_,d3Zoom:C,d3Selection:L,d3ZoomHandler:R,viewport:j,viewportRef:Y,paneClickDistance:O}=Re();Qh(Y);const k=_t(!1),J=_t(!1);let w=null,I=!1,$=0,V={x:0,y:0,zoom:0};const M=En(r),U=En(s),W=En(a),ne=Ee(()=>(!U.value||U.value&&s.value===!0)&&(M.value||p.value)),ae=Ee(()=>M.value||l.value),pe=Ee(()=>s.value===!0&&ne.value!==!0),he=Ee(()=>U.value&&s.value!==!0||m.value||pe.value),B=Ee(()=>d.value!==null);Oe(()=>{if(!Y.value){qn("Viewport element is missing");return}const F=Y.value,ie=F.getBoundingClientRect(),oe=Ef().clickDistance(O.value).scaleExtent([t.value,n.value]).translateExtent(i.value),se=nt(F).call(oe),T=se.on("wheel.zoom"),E=dn.translate(o.value.x??0,o.value.y??0).scale(Kt(o.value.zoom??1,t.value,n.value)),A=[[0,0],[ie.width,ie.height]],G=oe.constrain()(E,A,i.value);oe.transform(se,G),oe.wheelDelta(Mi),C.value=oe,L.value=se,R.value=T,j.value={x:G.x,y:G.y,zoom:G.k},oe.on("start",q=>{var le;if(!q.sourceEvent)return null;$=q.sourceEvent.button,k.value=!0;const ue=P(q.transform);((le=q.sourceEvent)==null?void 0:le.type)==="mousedown"&&(_.value=!0),V=ue,f.viewportChangeStart(ue),f.moveStart({event:q,flowTransform:ue})}),oe.on("end",q=>{if(!q.sourceEvent)return null;if(k.value=!1,_.value=!1,Z(ne.value,$??0)&&!I&&f.paneContextMenu(q.sourceEvent),I=!1,X(V,q.transform)){const le=P(q.transform);V=le,f.viewportChangeEnd(le),f.moveEnd({event:q,flowTransform:le})}}),oe.filter(q=>{var le;const ue=W.value||S.value,ve=b.value&&q.ctrlKey,ye=q.button,Se=q.type==="wheel";if(ye===1&&q.type==="mousedown"&&(H(q,"vue-flow__node")||H(q,"vue-flow__edge")))return!0;if(!ne.value&&!ue&&!ae.value&&!y.value&&!b.value||m.value||B.value&&!Se||!y.value&&q.type==="dblclick"||H(q,x.value)&&Se||H(q,h.value)&&(!Se||ae.value&&Se&&!W.value)||!b.value&&q.ctrlKey&&Se||!ue&&!ae.value&&!ve&&Se)return!1;if(!b&&q.type==="touchstart"&&((le=q.touches)==null?void 0:le.length)>1)return q.preventDefault(),!1;if(!ne.value&&(q.type==="mousedown"||q.type==="touchstart")||pe.value&&Array.isArray(p.value)&&p.value.includes(0)&&ye===0||Array.isArray(p.value)&&!p.value.includes(ye)&&(q.type==="mousedown"||q.type==="touchstart"))return!1;const Ce=Array.isArray(p.value)&&p.value.includes(ye)||s.value===!0&&Array.isArray(p.value)&&!p.value.includes(0)||!ye||ye<=1;return(!q.ctrlKey||M.value||Se)&&Ce}),_e([m,ne],()=>{m.value&&!k.value?oe.on("zoom",null):m.value||oe.on("zoom",q=>{j.value={x:q.transform.x,y:q.transform.y,zoom:q.transform.k};const le=P(q.transform);I=Z(ne.value,$??0),f.viewportChange(le),f.move({event:q,flowTransform:le})})},{immediate:!0}),_e([m,ae,u,W,b,v,x],()=>{ae.value&&!W.value&&!m.value?se.on("wheel.zoom",q=>{if(H(q,x.value))return!1;const le=W.value||S.value,ue=b.value&&q.ctrlKey;if(!(!v.value||ae.value||le||ue))return!1;q.preventDefault(),q.stopImmediatePropagation();const ye=se.property("__zoom").k||1,Se=Vn();if(!M.value&&q.ctrlKey&&b.value&&Se){const _l=ct(q),kl=Mi(q),Cl=ye*2**kl;oe.scaleTo(se,Cl,_l,q);return}const Ce=q.deltaMode===1?20:1;let Me=u.value===$n.Vertical?0:q.deltaX*Ce,Mt=u.value===$n.Horizontal?0:q.deltaY*Ce;!Se&&q.shiftKey&&u.value!==$n.Vertical&&!Me&&Mt&&(Me=Mt,Mt=0),oe.translateBy(se,-(Me/ye)*c.value,-(Mt/ye)*c.value);const dt=P(se.property("__zoom"));w&&clearTimeout(w),J.value?(f.move({event:q,flowTransform:dt}),f.viewportChange(dt),w=setTimeout(()=>{f.moveEnd({event:q,flowTransform:dt}),f.viewportChangeEnd(dt),J.value=!1},150)):(J.value=!0,f.moveStart({event:q,flowTransform:dt}),f.viewportChangeStart(dt))},{passive:!1}):typeof T<"u"&&se.on("wheel.zoom",function(q,le){const ue=!v.value&&q.type==="wheel"&&!q.ctrlKey,ve=W.value||S.value,ye=b.value&&q.ctrlKey;if(!ve&&!l.value&&!ye&&q.type==="wheel"||ue||H(q,x.value))return null;q.preventDefault(),T.call(this,q,le)},{passive:!1})},{immediate:!0})});function Z(F,ie){return ie===2&&Array.isArray(F)&&F.includes(2)}function X(F,ie){return F.x!==ie.x&&!Number.isNaN(ie.x)||F.y!==ie.y&&!Number.isNaN(ie.y)||F.zoom!==ie.k&&!Number.isNaN(ie.k)}function P(F){return{x:F.x,y:F.y,zoom:F.k}}function H(F,ie){return F.target.closest(`.${ie}`)}return(F,ie)=>(z(),K("div",{ref_key:"viewportRef",ref:Y,class:"vue-flow__viewport vue-flow__container"},[te(rg,{"is-selecting":he.value,"selection-key-pressed":N(U),class:ge({connecting:B.value,dragging:N(_),draggable:N(p)===!0||Array.isArray(N(p))&&N(p).includes(0)})},{default:et(()=>[te(ug,null,{default:et(()=>[Le(F.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),pg=["id"],fg=["id"],hg=["id"],gg={name:"A11yDescriptions",compatConfig:{MODE:3}},mg=xe({...gg,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Re();return(i,a)=>(z(),K(ke,null,[g("div",{id:`${N(vr)}-${N(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+be(N(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,pg),g("div",{id:`${N(yr)}-${N(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,fg),N(n)?me("",!0):(z(),K("div",{key:0,id:`${N(Df)}-${N(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},be(N(o)),9,hg))],64))}});function vg(){const e=Re();_e(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function yg(e,t,n){return n===ee.Left?e-t:n===ee.Right?e+t:e}function bg(e,t,n){return n===ee.Top?e-t:n===ee.Bottom?e+t:e}const ea=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ee.Top,type:i}){return Te("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:yg(t,e,o),cy:bg(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ea.props=["radius","centerX","centerY","position","type"];ea.compatConfig={MODE:3};const Ja=ea,wg=xe({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:s,noPanClassName:r,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:p,isValidConnection:y,multiSelectionActive:b,disableKeyboardA11y:S,elementsSelectable:v,edgesUpdatable:x,edgesFocusable:h,hooks:f}=Re(),d=D(()=>c(e.id)),{emit:m,on:_}=dh(d.value,a),C=Qt(qo),L=hn(),R=re(!1),j=re(!1),Y=re(""),O=re(null),k=re("source"),J=re(null),w=Ee(()=>typeof d.value.selectable>"u"?v.value:d.value.selectable),I=Ee(()=>typeof d.value.updatable>"u"?x.value:d.value.updatable),$=Ee(()=>typeof d.value.focusable>"u"?h.value:d.value.focusable);jt(rh,e.id),jt(lh,J);const V=D(()=>d.value.class instanceof Function?d.value.class(d.value):d.value.class),M=D(()=>d.value.style instanceof Function?d.value.style(d.value):d.value.style),U=D(()=>{const E=d.value.type||"default",A=C==null?void 0:C[`edge-${E}`];if(A)return A;let G=d.value.template??l.value[E];if(typeof G=="string"&&L){const q=Object.keys(L.appContext.components);q&&q.includes(E)&&(G=Ps(E,!1))}return G&&typeof G!="string"?G:(a.error(new qe(Ue.EDGE_TYPE_MISSING,G)),!1)}),{handlePointerDown:W}=zr({nodeId:Y,handleId:O,type:k,isValidConnection:y,edgeUpdaterType:k,onEdgeUpdate:pe,onEdgeUpdateEnd:he});return()=>{const E=p(d.value.source),A=p(d.value.target),G="pathOptions"in d.value?d.value.pathOptions:{};if(!E&&!A)return a.error(new qe(Ue.EDGE_SOURCE_TARGET_MISSING,d.value.id,d.value.source,d.value.target)),null;if(!E)return a.error(new qe(Ue.EDGE_SOURCE_MISSING,d.value.id,d.value.source)),null;if(!A)return a.error(new qe(Ue.EDGE_TARGET_MISSING,d.value.id,d.value.target)),null;if(!d.value||d.value.hidden||E.hidden||A.hidden)return null;let q;o.value===zt.Strict?q=E.handleBounds.source:q=[...E.handleBounds.source||[],...E.handleBounds.target||[]];const le=Ba(q,d.value.sourceHandle);let ue;o.value===zt.Strict?ue=A.handleBounds.target:ue=[...A.handleBounds.target||[],...A.handleBounds.source||[]];const ve=Ba(ue,d.value.targetHandle),ye=(le==null?void 0:le.position)||ee.Bottom,Se=(ve==null?void 0:ve.position)||ee.Top,{x:Ce,y:Me}=cn(E,le,ye),{x:Mt,y:dt}=cn(A,ve,Se);return d.value.sourceX=Ce,d.value.sourceY=Me,d.value.targetX=Mt,d.value.targetY=dt,Te("g",{ref:J,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${U.value===!1?"default":d.value.type||"default"}`,r.value,V.value,{updating:R.value,selected:d.value.selected,animated:d.value.animated,inactive:!w.value&&!f.value.edgeClick.hasListeners()}],tabIndex:$.value?0:void 0,"aria-label":d.value.ariaLabel===null?void 0:d.value.ariaLabel??`Edge from ${d.value.source} to ${d.value.target}`,"aria-describedby":$.value?`${yr}-${t}`:void 0,"aria-roledescription":"edge",role:$.value?"group":"img",...d.value.domAttributes,onClick:Z,onContextmenu:X,onDblclick:P,onMouseenter:H,onMousemove:F,onMouseleave:ie,onKeyDown:$.value?T:void 0},[j.value?null:Te(U.value===!1?l.value.default:U.value,{id:e.id,sourceNode:E,targetNode:A,source:d.value.source,target:d.value.target,type:d.value.type,updatable:I.value,selected:d.value.selected,animated:d.value.animated,label:d.value.label,labelStyle:d.value.labelStyle,labelShowBg:d.value.labelShowBg,labelBgStyle:d.value.labelBgStyle,labelBgPadding:d.value.labelBgPadding,labelBgBorderRadius:d.value.labelBgBorderRadius,data:d.value.data,events:{...d.value.events,..._},style:M.value,markerStart:`url('#${zn(d.value.markerStart,t)}')`,markerEnd:`url('#${zn(d.value.markerEnd,t)}')`,sourcePosition:ye,targetPosition:Se,sourceX:Ce,sourceY:Me,targetX:Mt,targetY:dt,sourceHandleId:d.value.sourceHandle,targetHandleId:d.value.targetHandle,interactionWidth:d.value.interactionWidth,...G}),[I.value==="source"||I.value===!0?[Te("g",{onMousedown:oe,onMouseenter:ne,onMouseout:ae},Te(Ja,{position:ye,centerX:Ce,centerY:Me,radius:i.value,type:"source","data-type":"source"}))]:null,I.value==="target"||I.value===!0?[Te("g",{onMousedown:se,onMouseenter:ne,onMouseout:ae},Te(Ja,{position:Se,centerX:Mt,centerY:dt,radius:i.value,type:"target","data-type":"target"}))]:null]])};function ne(){R.value=!0}function ae(){R.value=!1}function pe(E,A){m.update({event:E,edge:d.value,connection:A})}function he(E){m.updateEnd({event:E,edge:d.value}),j.value=!1}function B(E,A){E.button===0&&(j.value=!0,Y.value=A?d.value.target:d.value.source,O.value=(A?d.value.targetHandle:d.value.sourceHandle)??null,k.value=A?"target":"source",m.updateStart({event:E,edge:d.value}),W(E))}function Z(E){var A;const G={event:E,edge:d.value};w.value&&(s.value=!1,d.value.selected&&b.value?(u([d.value]),(A=J.value)==null||A.blur()):n([d.value])),m.click(G)}function X(E){m.contextMenu({event:E,edge:d.value})}function P(E){m.doubleClick({event:E,edge:d.value})}function H(E){m.mouseEnter({event:E,edge:d.value})}function F(E){m.mouseMove({event:E,edge:d.value})}function ie(E){m.mouseLeave({event:E,edge:d.value})}function oe(E){B(E,!0)}function se(E){B(E,!1)}function T(E){var A;!S.value&&br.includes(E.key)&&w.value&&(E.key==="Escape"?((A=J.value)==null||A.blur(),u([c(e.id)])):n([c(e.id)]))}}}),xg=wg,Sg=xe({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:a,connectionLineType:s,connectionLineStyle:r,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:p}=Re(),y=(e=Qt(qo))==null?void 0:e["connection-line"],b=D(()=>{var f;return p((f=o.value)==null?void 0:f.nodeId)}),S=D(()=>{var f;return p((f=i.value)==null?void 0:f.nodeId)??null}),v=D(()=>({x:(a.value.x-c.value.x)/c.value.zoom,y:(a.value.y-c.value.y)/c.value.zoom})),x=D(()=>l.value.markerStart?`url(#${zn(l.value.markerStart,t)})`:""),h=D(()=>l.value.markerEnd?`url(#${zn(l.value.markerEnd,t)})`:"");return()=>{var f,d,m;if(!b.value||!o.value)return null;const _=o.value.id,C=o.value.type,L=b.value.handleBounds;let R=(L==null?void 0:L[C])??[];if(n.value===zt.Loose){const M=(L==null?void 0:L[C==="source"?"target":"source"])??[];R=[...R,...M]}if(!R)return null;const j=(_?R.find(M=>M.id===_):R[0])??null,Y=(j==null?void 0:j.position)??ee.Top,{x:O,y:k}=cn(b.value,j,Y);let J=null;S.value&&(n.value===zt.Strict?J=((f=S.value.handleBounds[C==="source"?"target":"source"])==null?void 0:f.find(M=>{var U;return M.id===((U=i.value)==null?void 0:U.id)}))||null:J=((d=[...S.value.handleBounds.source??[],...S.value.handleBounds.target??[]])==null?void 0:d.find(M=>{var U;return M.id===((U=i.value)==null?void 0:U.id)}))||null);const w=((m=i.value)==null?void 0:m.position)??(Y?Ti[Y]:null);if(!Y||!w)return null;const I=s.value??l.value.type??Bt.Bezier;let $="";const V={sourceX:O,sourceY:k,sourcePosition:Y,targetX:v.value.x,targetY:v.value.y,targetPosition:w};return I===Bt.Bezier?[$]=Wr(V):I===Bt.Step?[$]=Io({...V,borderRadius:0}):I===Bt.SmoothStep?[$]=Io(V):I===Bt.SimpleBezier?[$]=Ur(V):$=`M${O},${k} ${v.value.x},${v.value.y}`,Te("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Te("g",{class:"vue-flow__connection"},y?Te(y,{sourceX:O,sourceY:k,sourcePosition:Y,targetX:v.value.x,targetY:v.value.y,targetPosition:w,sourceNode:b.value,sourceHandle:j,targetNode:S.value,targetHandle:J,markerEnd:h.value,markerStart:x.value,connectionStatus:u.value}):Te("path",{d:$,class:[l.value.class,u.value,"vue-flow__connection-path"],style:{...r.value,...l.value.style},"marker-end":h.value,"marker-start":x.value})))}}}),_g=Sg,kg=["id","markerWidth","markerHeight","markerUnits","orient"],Cg={name:"MarkerType",compatConfig:{MODE:3}},Ng=xe({...Cg,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(z(),K("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===N($i).ArrowClosed?(z(),K("polyline",{key:0,style:Q({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):me("",!0),t.type===N($i).Arrow?(z(),K("polyline",{key:1,style:Q({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):me("",!0)],8,kg))}}),$g={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},Eg={name:"MarkerDefinitions",compatConfig:{MODE:3}},Mg=xe({...Eg,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Re(),a=D(()=>{const s=new Set,r=[],l=u=>{if(u){const c=zn(u,t);s.has(c)||(typeof u=="object"?r.push({...u,id:c,color:u.color||i.value}):r.push({id:c,color:i.value,type:u}),s.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return r.sort((u,c)=>u.id.localeCompare(c.id))});return(s,r)=>(z(),K("svg",$g,[g("defs",null,[(z(!0),K(ke,null,De(a.value,l=>(z(),we(Ng,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Tg={name:"Edges",compatConfig:{MODE:3}},Ig=xe({...Tg,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Re();return(i,a)=>(z(),K(ke,null,[te(Mg),(z(!0),K(ke,null,De(N(n),s=>(z(),K("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:Q({zIndex:N(Xf)(s,N(t),N(o))})},[te(N(xg),{id:s.id},null,8,["id"])],4))),128)),te(N(_g))],64))}}),Pg=xe({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:a,emits:s,removeSelectedNodes:r,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:p,nodeExtent:y,elevateNodesOnSelect:b,disableKeyboardA11y:S,ariaLiveMessage:v,snapToGrid:x,snapGrid:h,nodeDragThreshold:f,nodesDraggable:d,elementsSelectable:m,nodesConnectable:_,nodesFocusable:C,hooks:L}=Re(),R=re(null);jt(Dr,R),jt(Ar,e.id);const j=Qt(qo),Y=hn(),O=Lr(),{node:k,parentNode:J}=Vr(e.id),{emit:w,on:I}=hh(k,s),$=Ee(()=>typeof k.draggable>"u"?d.value:k.draggable),V=Ee(()=>typeof k.selectable>"u"?m.value:k.selectable),M=Ee(()=>typeof k.connectable>"u"?_.value:k.connectable),U=Ee(()=>typeof k.focusable>"u"?C.value:k.focusable),W=D(()=>V.value||$.value||L.value.nodeClick.hasListeners()||L.value.nodeDoubleClick.hasListeners()||L.value.nodeMouseEnter.hasListeners()||L.value.nodeMouseMove.hasListeners()||L.value.nodeMouseLeave.hasListeners()),ne=Ee(()=>!!k.dimensions.width&&!!k.dimensions.height),ae=D(()=>{const A=k.type||"default",G=j==null?void 0:j[`node-${A}`];if(G)return G;let q=k.template||p.value[A];if(typeof q=="string"&&Y){const le=Object.keys(Y.appContext.components);le&&le.includes(A)&&(q=Ps(A,!1))}return q&&typeof q!="string"?q:(s.error(new qe(Ue.NODE_TYPE_MISSING,q)),!1)}),pe=Rr({id:e.id,el:R,disabled:()=>!$.value,selectable:V,dragHandle:()=>k.dragHandle,onStart(A){w.dragStart(A)},onDrag(A){w.drag(A)},onStop(A){w.dragStop(A)},onClick(A){T(A)}}),he=D(()=>k.class instanceof Function?k.class(k):k.class),B=D(()=>{const A=(k.style instanceof Function?k.style(k):k.style)||{},G=k.width instanceof Function?k.width(k):k.width,q=k.height instanceof Function?k.height(k):k.height;return!A.width&&G&&(A.width=typeof G=="string"?G:`${G}px`),!A.height&&q&&(A.height=typeof q=="string"?q:`${q}px`),A}),Z=Ee(()=>Number(k.zIndex??B.value.zIndex??0));return c(A=>{(A.includes(e.id)||!A.length)&&P()}),Oe(()=>{_e(()=>k.hidden,(A=!1,G,q)=>{!A&&R.value&&(e.resizeObserver.observe(R.value),q(()=>{R.value&&e.resizeObserver.unobserve(R.value)}))},{immediate:!0,flush:"post"})}),_e([()=>k.type,()=>k.sourcePosition,()=>k.targetPosition],()=>{ht(()=>{u([{id:e.id,nodeElement:R.value,forceUpdate:!0}])})}),_e([()=>k.position.x,()=>k.position.y,()=>{var A;return(A=J.value)==null?void 0:A.computedPosition.x},()=>{var A;return(A=J.value)==null?void 0:A.computedPosition.y},()=>{var A;return(A=J.value)==null?void 0:A.computedPosition.z},Z,()=>k.selected,()=>k.dimensions.height,()=>k.dimensions.width,()=>{var A;return(A=J.value)==null?void 0:A.dimensions.height},()=>{var A;return(A=J.value)==null?void 0:A.dimensions.width}],([A,G,q,le,ue,ve])=>{const ye={x:A,y:G,z:ve+(b.value&&k.selected?1e3:0)};typeof q<"u"&&typeof le<"u"?k.computedPosition=Uf({x:q,y:le,z:ue},ye):k.computedPosition=ye},{flush:"post",immediate:!0}),_e([()=>k.extent,y],([A,G],[q,le])=>{(A!==q||G!==le)&&X()}),k.extent==="parent"||typeof k.extent=="object"&&"range"in k.extent&&k.extent.range==="parent"?yi(()=>ne).toBe(!0).then(X):X(),()=>k.hidden?null:Te("div",{ref:R,"data-id":k.id,class:["vue-flow__node",`vue-flow__node-${ae.value===!1?"default":k.type||"default"}`,{[n.value]:$.value,dragging:pe==null?void 0:pe.value,draggable:$.value,selected:k.selected,selectable:V.value,parent:k.isParent},he.value],style:{visibility:ne.value?"visible":"hidden",zIndex:k.computedPosition.z??Z.value,transform:`translate(${k.computedPosition.x}px,${k.computedPosition.y}px)`,pointerEvents:W.value?"all":"none",...B.value},tabIndex:U.value?0:void 0,role:U.value?"group":void 0,"aria-describedby":S.value?void 0:`${vr}-${t}`,"aria-label":k.ariaLabel,"aria-roledescription":"node",...k.domAttributes,onMouseenter:H,onMousemove:F,onMouseleave:ie,onContextmenu:oe,onClick:T,onDblclick:se,onKeydown:E},[Te(ae.value===!1?p.value.default:ae.value,{id:k.id,type:k.type,data:k.data,events:{...k.events,...I},selected:k.selected,resizing:k.resizing,dragging:pe.value,connectable:M.value,position:k.computedPosition,dimensions:k.dimensions,isValidTargetPos:k.isValidTargetPos,isValidSourcePos:k.isValidSourcePos,parent:k.parentNode,parentNodeId:k.parentNode,zIndex:k.computedPosition.z??Z.value,targetPosition:k.targetPosition,sourcePosition:k.sourcePosition,label:k.label,dragHandle:k.dragHandle,onUpdateNodeInternals:P})]);function X(){const A=k.computedPosition,{computedPosition:G,position:q}=Ji(k,x.value?Uo(A,h.value):A,s.error,y.value,J.value);(k.computedPosition.x!==G.x||k.computedPosition.y!==G.y)&&(k.computedPosition={...k.computedPosition,...G}),(k.position.x!==q.x||k.position.y!==q.y)&&(k.position=q)}function P(){R.value&&u([{id:e.id,nodeElement:R.value,forceUpdate:!0}])}function H(A){pe!=null&&pe.value||w.mouseEnter({event:A,node:k})}function F(A){pe!=null&&pe.value||w.mouseMove({event:A,node:k})}function ie(A){pe!=null&&pe.value||w.mouseLeave({event:A,node:k})}function oe(A){return w.contextMenu({event:A,node:k})}function se(A){return w.doubleClick({event:A,node:k})}function T(A){V.value&&(!o.value||!$.value||f.value>0)&&Ii(k,a.value,l,r,i,!1,R.value),w.click({event:A,node:k})}function E(A){if(!(Ei(A)||S.value))if(br.includes(A.key)&&V.value){const G=A.key==="Escape";Ii(k,a.value,l,r,i,G,R.value)}else $.value&&k.selected&&sn[A.key]&&(A.preventDefault(),v.value=`Moved selected node ${A.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.position.x}, y: ${~~k.position.y}`,O({x:sn[A.key].x,y:sn[A.key].y},A.shiftKey))}}}),Ag=Pg;function Dg(e={includeHiddenNodes:!1}){const{nodes:t}=Re();return D(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const Rg={class:"vue-flow__nodes vue-flow__container"},zg={name:"Nodes",compatConfig:{MODE:3}},Vg=xe({...zg,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Re(),i=Dg(),a=re();return _e(i,s=>{s&&ht(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),Oe(()=>{a.value=new ResizeObserver(s=>{const r=s.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));ht(()=>n(r))})}),Ts(()=>{var s;return(s=a.value)==null?void 0:s.disconnect()}),(s,r)=>(z(),K("div",Rg,[a.value?(z(!0),K(ke,{key:0},De(N(t),(l,u,c,p)=>{const y=[l.id];if(p&&p.key===l.id&&Tl(p,y))return p;const b=(z(),we(N(Ag),{id:l.id,key:l.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return b.memo=y,b},r,0),128)):me("",!0)]))}});function Lg(){const{emits:e}=Re();Oe(()=>{if(Pr()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new qe(Ue.MISSING_STYLES))}})}const Og=g("div",{class:"vue-flow__edge-labels"},null,-1),Bg={name:"VueFlow",compatConfig:{MODE:3}},Fg=xe({...Bg,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Es(),a=ei(o,"modelValue",n),s=ei(o,"nodes",n),r=ei(o,"edges",n),l=Re(o),u=yh({modelValue:a,nodes:s,edges:r},o,l);return wh(n,l.hooks),vg(),Lg(),jt(qo,i),Ye(u),t(l),(c,p)=>(z(),K("div",{ref:N(l).vueFlowRef,class:"vue-flow"},[te(cg,null,{default:et(()=>[te(Ig),Og,te(Vg),Le(c.$slots,"zoom-pane")]),_:3}),Le(c.$slots,"default"),te(mg)],512))}}),Wg={name:"Panel",compatConfig:{MODE:3}},ta=xe({...Wg,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Re(),o=D(()=>`${t.position}`.split("-"));return(i,a)=>(z(),K("div",{class:ge(["vue-flow__panel",o.value]),style:Q({pointerEvents:N(n)?"none":"all"})},[Le(i.$slots,"default")],6))}});var Ct=(e=>(e.Lines="lines",e.Dots="dots",e))(Ct||{});const Hr=function({dimensions:e,size:t,color:n}){return Te("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},Yr=function({radius:e,color:t}){return Te("circle",{cx:e,cy:e,r:e,fill:t})};Ct.Lines+"",Ct.Dots+"";const Ug={[Ct.Dots]:"#81818a",[Ct.Lines]:"#eee"},qg=["id","x","y","width","height","patternTransform"],Hg={key:2,height:"100",width:"100"},Yg=["fill"],Gg=["x","y","fill"],jg={name:"Background",compatConfig:{MODE:3}},Xg=xe({...jg,props:{id:{},variant:{default:()=>Ct.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Re(),o=D(()=>{const s=n.value.zoom,[r,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[r*s||1,l*s||1],c=e.size*s,[p,y]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],b=[p*s||1+u[0]/2,y*s||1+u[1]/2];return{scaledGap:u,offset:b,size:c}}),i=Ee(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),a=Ee(()=>e.color||e.patternColor||Ug[e.variant||Ct.Dots]);return(s,r)=>(z(),K("svg",{class:"vue-flow__background vue-flow__container",style:Q({height:`${s.height>100?100:s.height}%`,width:`${s.width>100?100:s.width}%`})},[Le(s.$slots,"pattern-container",{id:i.value},()=>[g("pattern",{id:i.value,x:N(n).x%o.value.scaledGap[0],y:N(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Le(s.$slots,"pattern",{},()=>[s.variant===N(Ct).Lines?(z(),we(N(Hr),{key:0,size:s.lineWidth,color:a.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):s.variant===N(Ct).Dots?(z(),we(N(Yr),{key:1,color:a.value,radius:o.value.size/2},null,8,["color","radius"])):me("",!0),s.bgColor?(z(),K("svg",Hg,[g("rect",{width:"100%",height:"100%",fill:s.bgColor},null,8,Yg)])):me("",!0)])],8,qg)]),g("rect",{x:s.x,y:s.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,Gg),Le(s.$slots,"default",{id:i.value})],4))}}),Zg={name:"ControlButton",compatConfig:{MODE:3}},Kg=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},Jg={type:"button",class:"vue-flow__controls-button"};function Qg(e,t,n,o,i,a){return z(),K("button",Jg,[Le(e.$slots,"default")])}const oo=Kg(Zg,[["render",Qg]]),em={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},tm=g("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),nm=[tm];function om(e,t){return z(),K("svg",em,nm)}const im={render:om},am={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},sm=g("path",{d:"M0 0h32v4.2H0z"},null,-1),rm=[sm];function lm(e,t){return z(),K("svg",am,rm)}const um={render:lm},dm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},cm=g("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),pm=[cm];function fm(e,t){return z(),K("svg",dm,pm)}const hm={render:fm},gm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},mm=g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),vm=[mm];function ym(e,t){return z(),K("svg",gm,vm)}const bm={render:ym},wm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},xm=g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Sm=[xm];function _m(e,t){return z(),K("svg",wm,Sm)}const km={render:_m},Cm={name:"Controls",compatConfig:{MODE:3}},Nm=xe({...Cm,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>mr.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:a,zoomIn:s,zoomOut:r,fitView:l,viewport:u,minZoom:c,maxZoom:p}=Re(),y=Ee(()=>n.value||o.value||i.value),b=Ee(()=>u.value.zoom<=c.value),S=Ee(()=>u.value.zoom>=p.value);function v(){s(),t("zoomIn")}function x(){r(),t("zoomOut")}function h(){l(e.fitViewParams),t("fitView")}function f(){a(!y.value),t("interactionChange",!y.value)}return(d,m)=>(z(),we(N(ta),{class:"vue-flow__controls",position:d.position},{default:et(()=>[Le(d.$slots,"top"),d.showZoom?(z(),K(ke,{key:0},[Le(d.$slots,"control-zoom-in",{},()=>[te(oo,{class:"vue-flow__controls-zoomin",disabled:S.value,onClick:v},{default:et(()=>[Le(d.$slots,"icon-zoom-in",{},()=>[(z(),we(xt(N(im))))])]),_:3},8,["disabled"])]),Le(d.$slots,"control-zoom-out",{},()=>[te(oo,{class:"vue-flow__controls-zoomout",disabled:b.value,onClick:x},{default:et(()=>[Le(d.$slots,"icon-zoom-out",{},()=>[(z(),we(xt(N(um))))])]),_:3},8,["disabled"])])],64)):me("",!0),d.showFitView?Le(d.$slots,"control-fit-view",{key:1},()=>[te(oo,{class:"vue-flow__controls-fitview",onClick:h},{default:et(()=>[Le(d.$slots,"icon-fit-view",{},()=>[(z(),we(xt(N(hm))))])]),_:3})]):me("",!0),d.showInteractive?Le(d.$slots,"control-interactive",{key:2},()=>[d.showInteractive?(z(),we(oo,{key:0,class:"vue-flow__controls-interactive",onClick:f},{default:et(()=>[y.value?Le(d.$slots,"icon-unlock",{key:0},()=>[(z(),we(xt(N(km))))]):me("",!0),y.value?me("",!0):Le(d.$slots,"icon-lock",{key:1},()=>[(z(),we(xt(N(bm))))])]),_:3})):me("",!0)]):me("",!0),Le(d.$slots,"default")]),_:3},8,["position"]))}});var $m={value:()=>{}};function na(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new go(n)}function go(e){this._=e}function Em(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}go.prototype=na.prototype={constructor:go,on:function(e,t){var n=this._,o=Em(e+"",n),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(e=o[a]).type)&&(i=Mm(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=o[a]).type)n[i]=Qa(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Qa(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new go(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Mm(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Qa(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=$m,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Pi="http://www.w3.org/1999/xhtml";const es={svg:"http://www.w3.org/2000/svg",xhtml:Pi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),es.hasOwnProperty(t)?{space:es[t],local:e}:e}function Tm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pi&&t.documentElement.namespaceURI===Pi?t.createElement(e):t.createElementNS(n,e)}}function Im(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Gr(e){var t=jo(e);return(t.local?Im:Tm)(t)}function Pm(){}function oa(e){return e==null?Pm:function(){return this.querySelector(e)}}function Am(e){typeof e!="function"&&(e=oa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,r=o[i]=new Array(s),l,u,c=0;c<s;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),r[c]=u);return new Qe(o,this._parents)}function Dm(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rm(){return[]}function jr(e){return e==null?Rm:function(){return this.querySelectorAll(e)}}function zm(e){return function(){return Dm(e.apply(this,arguments))}}function Vm(e){typeof e=="function"?e=zm(e):e=jr(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var s=t[a],r=s.length,l,u=0;u<r;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),i.push(l));return new Qe(o,i)}function Xr(e){return function(){return this.matches(e)}}function Zr(e){return function(t){return t.matches(e)}}var Lm=Array.prototype.find;function Om(e){return function(){return Lm.call(this.children,e)}}function Bm(){return this.firstElementChild}function Fm(e){return this.select(e==null?Bm:Om(typeof e=="function"?e:Zr(e)))}var Wm=Array.prototype.filter;function Um(){return Array.from(this.children)}function qm(e){return function(){return Wm.call(this.children,e)}}function Hm(e){return this.selectAll(e==null?Um:qm(typeof e=="function"?e:Zr(e)))}function Ym(e){typeof e!="function"&&(e=Xr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,r=o[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&r.push(l);return new Qe(o,this._parents)}function Kr(e){return new Array(e.length)}function Gm(){return new Qe(this._enter||this._groups.map(Kr),this._parents)}function Po(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Po.prototype={constructor:Po,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jm(e){return function(){return e}}function Xm(e,t,n,o,i,a){for(var s=0,r,l=t.length,u=a.length;s<u;++s)(r=t[s])?(r.__data__=a[s],o[s]=r):n[s]=new Po(e,a[s]);for(;s<l;++s)(r=t[s])&&(i[s]=r)}function Zm(e,t,n,o,i,a,s){var r,l,u=new Map,c=t.length,p=a.length,y=new Array(c),b;for(r=0;r<c;++r)(l=t[r])&&(y[r]=b=s.call(l,l.__data__,r,t)+"",u.has(b)?i[r]=l:u.set(b,l));for(r=0;r<p;++r)b=s.call(e,a[r],r,a)+"",(l=u.get(b))?(o[r]=l,l.__data__=a[r],u.delete(b)):n[r]=new Po(e,a[r]);for(r=0;r<c;++r)(l=t[r])&&u.get(y[r])===l&&(i[r]=l)}function Km(e){return e.__data__}function Jm(e,t){if(!arguments.length)return Array.from(this,Km);var n=t?Zm:Xm,o=this._parents,i=this._groups;typeof e!="function"&&(e=jm(e));for(var a=i.length,s=new Array(a),r=new Array(a),l=new Array(a),u=0;u<a;++u){var c=o[u],p=i[u],y=p.length,b=Qm(e.call(c,c&&c.__data__,u,o)),S=b.length,v=r[u]=new Array(S),x=s[u]=new Array(S),h=l[u]=new Array(y);n(c,p,v,x,h,b,t);for(var f=0,d=0,m,_;f<S;++f)if(m=v[f]){for(f>=d&&(d=f+1);!(_=x[d])&&++d<S;);m._next=_||null}}return s=new Qe(s,o),s._enter=r,s._exit=l,s}function Qm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ev(){return new Qe(this._exit||this._groups.map(Kr),this._parents)}function tv(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function nv(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,s=Math.min(i,a),r=new Array(i),l=0;l<s;++l)for(var u=n[l],c=o[l],p=u.length,y=r[l]=new Array(p),b,S=0;S<p;++S)(b=u[S]||c[S])&&(y[S]=b);for(;l<i;++l)r[l]=n[l];return new Qe(r,this._parents)}function ov(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],s;--i>=0;)(s=o[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function iv(e){e||(e=av);function t(p,y){return p&&y?e(p.__data__,y.__data__):!p-!y}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var s=n[a],r=s.length,l=i[a]=new Array(r),u,c=0;c<r;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Qe(i,this._parents).order()}function av(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rv(){return Array.from(this)}function lv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var s=o[i];if(s)return s}return null}function uv(){let e=0;for(const t of this)++e;return e}function dv(){return!this.node()}function cv(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,s=i.length,r;a<s;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this}function pv(e){return function(){this.removeAttribute(e)}}function fv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hv(e,t){return function(){this.setAttribute(e,t)}}function gv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yv(e,t){var n=jo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fv:pv:typeof t=="function"?n.local?vv:mv:n.local?gv:hv)(n,t))}function Jr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bv(e){return function(){this.style.removeProperty(e)}}function wv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xv(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Sv(e,t,n){return arguments.length>1?this.each((t==null?bv:typeof t=="function"?xv:wv)(e,t,n??"")):pn(this.node(),e)}function pn(e,t){return e.style.getPropertyValue(t)||Jr(e).getComputedStyle(e,null).getPropertyValue(t)}function _v(e){return function(){delete this[e]}}function kv(e,t){return function(){this[e]=t}}function Cv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Nv(e,t){return arguments.length>1?this.each((t==null?_v:typeof t=="function"?Cv:kv)(e,t)):this.node()[e]}function Qr(e){return e.trim().split(/^|\s+/)}function ia(e){return e.classList||new el(e)}function el(e){this._node=e,this._names=Qr(e.getAttribute("class")||"")}el.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tl(e,t){for(var n=ia(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function nl(e,t){for(var n=ia(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function $v(e){return function(){tl(this,e)}}function Ev(e){return function(){nl(this,e)}}function Mv(e,t){return function(){(t.apply(this,arguments)?tl:nl)(this,e)}}function Tv(e,t){var n=Qr(e+"");if(arguments.length<2){for(var o=ia(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Mv:t?$v:Ev)(n,t))}function Iv(){this.textContent=""}function Pv(e){return function(){this.textContent=e}}function Av(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Dv(e){return arguments.length?this.each(e==null?Iv:(typeof e=="function"?Av:Pv)(e)):this.node().textContent}function Rv(){this.innerHTML=""}function zv(e){return function(){this.innerHTML=e}}function Vv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Lv(e){return arguments.length?this.each(e==null?Rv:(typeof e=="function"?Vv:zv)(e)):this.node().innerHTML}function Ov(){this.nextSibling&&this.parentNode.appendChild(this)}function Bv(){return this.each(Ov)}function Fv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wv(){return this.each(Fv)}function Uv(e){var t=typeof e=="function"?e:Gr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qv(){return null}function Hv(e,t){var n=typeof e=="function"?e:Gr(e),o=t==null?qv:typeof t=="function"?t:oa(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Yv(){var e=this.parentNode;e&&e.removeChild(this)}function Gv(){return this.each(Yv)}function jv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zv(e){return this.select(e?Xv:jv)}function Kv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jv(e){return function(t){e.call(this,t,this.__data__)}}function Qv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function ey(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function ty(e,t,n){return function(){var o=this.__on,i,a=Jv(t);if(o){for(var s=0,r=o.length;s<r;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function ny(e,t,n){var o=Qv(e+""),i,a=o.length,s;if(arguments.length<2){var r=this.node().__on;if(r){for(var l=0,u=r.length,c;l<u;++l)for(i=0,c=r[l];i<a;++i)if((s=o[i]).type===c.type&&s.name===c.name)return c.value}return}for(r=t?ty:ey,i=0;i<a;++i)this.each(r(o[i],t,n));return this}function ol(e,t,n){var o=Jr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function oy(e,t){return function(){return ol(this,e,t)}}function iy(e,t){return function(){return ol(this,e,t.apply(this,arguments))}}function ay(e,t){return this.each((typeof t=="function"?iy:oy)(e,t))}function*sy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,s;i<a;++i)(s=o[i])&&(yield s)}var il=[null];function Qe(e,t){this._groups=e,this._parents=t}function Yn(){return new Qe([[document.documentElement]],il)}function ry(){return this}Qe.prototype=Yn.prototype={constructor:Qe,select:Am,selectAll:Vm,selectChild:Fm,selectChildren:Hm,filter:Ym,data:Jm,enter:Gm,exit:ev,join:tv,merge:nv,selection:ry,order:ov,sort:iv,call:sv,nodes:rv,node:lv,size:uv,empty:dv,each:cv,attr:yv,style:Sv,property:Nv,classed:Tv,text:Dv,html:Lv,raise:Bv,lower:Wv,append:Uv,insert:Hv,remove:Gv,clone:Zv,datum:Kv,on:ny,dispatch:ay,[Symbol.iterator]:sy};function Rt(e){return typeof e=="string"?new Qe([[document.querySelector(e)]],[document.documentElement]):new Qe([[e]],il)}function ly(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pt(e,t){if(e=ly(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ai={capture:!0,passive:!1};function Di(e){e.preventDefault(),e.stopImmediatePropagation()}function uy(e){var t=e.document.documentElement,n=Rt(e).on("dragstart.drag",Di,Ai);"onselectstart"in t?n.on("selectstart.drag",Di,Ai):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function dy(e,t){var n=e.document.documentElement,o=Rt(e).on("dragstart.drag",null);t&&(o.on("click.drag",Di,Ai),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function aa(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function al(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Gn(){}var Ln=.7,Ao=1/Ln,rn="\\s*([+-]?\\d+)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cy=/^#([0-9a-f]{3,8})$/,py=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),fy=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),hy=new RegExp(`^rgba\\(${rn},${rn},${rn},${On}\\)$`),gy=new RegExp(`^rgba\\(${mt},${mt},${mt},${On}\\)$`),my=new RegExp(`^hsl\\(${On},${mt},${mt}\\)$`),vy=new RegExp(`^hsla\\(${On},${mt},${mt},${On}\\)$`),ts={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aa(Gn,Bn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ns,formatHex:ns,formatHex8:yy,formatHsl:by,formatRgb:os,toString:os});function ns(){return this.rgb().formatHex()}function yy(){return this.rgb().formatHex8()}function by(){return sl(this).formatHsl()}function os(){return this.rgb().formatRgb()}function Bn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?is(t):n===3?new Ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?io(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?io(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=py.exec(e))?new Ze(t[1],t[2],t[3],1):(t=fy.exec(e))?new Ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hy.exec(e))?io(t[1],t[2],t[3],t[4]):(t=gy.exec(e))?io(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=my.exec(e))?rs(t[1],t[2]/100,t[3]/100,1):(t=vy.exec(e))?rs(t[1],t[2]/100,t[3]/100,t[4]):ts.hasOwnProperty(e)?is(ts[e]):e==="transparent"?new Ze(NaN,NaN,NaN,0):null}function is(e){return new Ze(e>>16&255,e>>8&255,e&255,1)}function io(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ze(e,t,n,o)}function wy(e){return e instanceof Gn||(e=Bn(e)),e?(e=e.rgb(),new Ze(e.r,e.g,e.b,e.opacity)):new Ze}function Ri(e,t,n,o){return arguments.length===1?wy(e):new Ze(e,t,n,o??1)}function Ze(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}aa(Ze,Ri,al(Gn,{brighter(e){return e=e==null?Ao:Math.pow(Ao,e),new Ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ln:Math.pow(Ln,e),new Ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ze(Gt(this.r),Gt(this.g),Gt(this.b),Do(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:as,formatHex:as,formatHex8:xy,formatRgb:ss,toString:ss}));function as(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}`}function xy(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}${qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ss(){const e=Do(this.opacity);return`${e===1?"rgb(":"rgba("}${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}${e===1?")":`, ${e})`}`}function Do(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qt(e){return e=Gt(e),(e<16?"0":"")+e.toString(16)}function rs(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new it(e,t,n,o)}function sl(e){if(e instanceof it)return new it(e.h,e.s,e.l,e.opacity);if(e instanceof Gn||(e=Bn(e)),!e)return new it;if(e instanceof it)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),s=NaN,r=a-i,l=(a+i)/2;return r?(t===a?s=(n-o)/r+(n<o)*6:n===a?s=(o-t)/r+2:s=(t-n)/r+4,r/=l<.5?a+i:2-a-i,s*=60):r=l>0&&l<1?0:s,new it(s,r,l,e.opacity)}function Sy(e,t,n,o){return arguments.length===1?sl(e):new it(e,t,n,o??1)}function it(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}aa(it,Sy,al(Gn,{brighter(e){return e=e==null?Ao:Math.pow(Ao,e),new it(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ln:Math.pow(Ln,e),new it(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Ze(ci(e>=240?e-240:e+120,i,o),ci(e,i,o),ci(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new it(ls(this.h),ao(this.s),ao(this.l),Do(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Do(this.opacity);return`${e===1?"hsl(":"hsla("}${ls(this.h)}, ${ao(this.s)*100}%, ${ao(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ls(e){return e=(e||0)%360,e<0?e+360:e}function ao(e){return Math.max(0,Math.min(1,e||0))}function ci(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rl=e=>()=>e;function _y(e,t){return function(n){return e+n*t}}function ky(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Cy(e){return(e=+e)==1?ll:function(t,n){return n-t?ky(t,n,e):rl(isNaN(t)?n:t)}}function ll(e,t){var n=t-e;return n?_y(e,n):rl(isNaN(e)?t:e)}const us=function e(t){var n=Cy(t);function o(i,a){var s=n((i=Ri(i)).r,(a=Ri(a)).r),r=n(i.g,a.g),l=n(i.b,a.b),u=ll(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=r(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function Dt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pi=new RegExp(zi.source,"g");function Ny(e){return function(){return e}}function $y(e){return function(t){return e(t)+""}}function Ey(e,t){var n=zi.lastIndex=pi.lastIndex=0,o,i,a,s=-1,r=[],l=[];for(e=e+"",t=t+"";(o=zi.exec(e))&&(i=pi.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),r[s]?r[s]+=a:r[++s]=a),(o=o[0])===(i=i[0])?r[s]?r[s]+=i:r[++s]=i:(r[++s]=null,l.push({i:s,x:Dt(o,i)})),n=pi.lastIndex;return n<t.length&&(a=t.slice(n),r[s]?r[s]+=a:r[++s]=a),r.length<2?l[0]?$y(l[0].x):Ny(t):(t=l.length,function(u){for(var c=0,p;c<t;++c)r[(p=l[c]).i]=p.x(u);return r.join("")})}var ds=180/Math.PI,Vi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ul(e,t,n,o,i,a){var s,r,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(r=Math.sqrt(n*n+o*o))&&(n/=r,o/=r,l/=r),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ds,skewX:Math.atan(l)*ds,scaleX:s,scaleY:r}}var so;function My(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Vi:ul(t.a,t.b,t.c,t.d,t.e,t.f)}function Ty(e){return e==null||(so||(so=document.createElementNS("http://www.w3.org/2000/svg","g")),so.setAttribute("transform",e),!(e=so.transform.baseVal.consolidate()))?Vi:(e=e.matrix,ul(e.a,e.b,e.c,e.d,e.e,e.f))}function dl(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,c,p,y,b,S){if(u!==p||c!==y){var v=b.push("translate(",null,t,null,n);S.push({i:v-4,x:Dt(u,p)},{i:v-2,x:Dt(c,y)})}else(p||y)&&b.push("translate("+p+t+y+n)}function s(u,c,p,y){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),y.push({i:p.push(i(p)+"rotate(",null,o)-2,x:Dt(u,c)})):c&&p.push(i(p)+"rotate("+c+o)}function r(u,c,p,y){u!==c?y.push({i:p.push(i(p)+"skewX(",null,o)-2,x:Dt(u,c)}):c&&p.push(i(p)+"skewX("+c+o)}function l(u,c,p,y,b,S){if(u!==p||c!==y){var v=b.push(i(b)+"scale(",null,",",null,")");S.push({i:v-4,x:Dt(u,p)},{i:v-2,x:Dt(c,y)})}else(p!==1||y!==1)&&b.push(i(b)+"scale("+p+","+y+")")}return function(u,c){var p=[],y=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,p,y),s(u.rotate,c.rotate,p,y),r(u.skewX,c.skewX,p,y),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,p,y),u=c=null,function(b){for(var S=-1,v=y.length,x;++S<v;)p[(x=y[S]).i]=x.x(b);return p.join("")}}}var Iy=dl(My,"px, ","px)","deg)"),Py=dl(Ty,", ",")",")"),Ay=1e-12;function cs(e){return((e=Math.exp(e))+1/e)/2}function Dy(e){return((e=Math.exp(e))-1/e)/2}function Ry(e){return((e=Math.exp(2*e))-1)/(e+1)}const zy=function e(t,n,o){function i(a,s){var r=a[0],l=a[1],u=a[2],c=s[0],p=s[1],y=s[2],b=c-r,S=p-l,v=b*b+S*S,x,h;if(v<Ay)h=Math.log(y/u)/t,x=function(L){return[r+L*b,l+L*S,u*Math.exp(t*L*h)]};else{var f=Math.sqrt(v),d=(y*y-u*u+o*v)/(2*u*n*f),m=(y*y-u*u-o*v)/(2*y*n*f),_=Math.log(Math.sqrt(d*d+1)-d),C=Math.log(Math.sqrt(m*m+1)-m);h=(C-_)/t,x=function(L){var R=L*h,j=cs(_),Y=u/(n*f)*(j*Ry(t*R+_)-Dy(_));return[r+Y*b,l+Y*S,u*j/cs(t*R+_)]}}return x.duration=h*1e3*t/Math.SQRT2,x}return i.rho=function(a){var s=Math.max(.001,+a),r=s*s,l=r*r;return e(s,r,l)},i}(Math.SQRT2,2,4);var fn=0,_n=0,yn=0,cl=1e3,Ro,kn,zo=0,Jt=0,Xo=0,Fn=typeof performance=="object"&&performance.now?performance:Date,pl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sa(){return Jt||(pl(Vy),Jt=Fn.now()+Xo)}function Vy(){Jt=0}function Vo(){this._call=this._time=this._next=null}Vo.prototype=fl.prototype={constructor:Vo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sa():+n)+(t==null?0:+t),!this._next&&kn!==this&&(kn?kn._next=this:Ro=this,kn=this),this._call=e,this._time=n,Li()},stop:function(){this._call&&(this._call=null,this._time=1/0,Li())}};function fl(e,t,n){var o=new Vo;return o.restart(e,t,n),o}function Ly(){sa(),++fn;for(var e=Ro,t;e;)(t=Jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fn}function ps(){Jt=(zo=Fn.now())+Xo,fn=_n=0;try{Ly()}finally{fn=0,By(),Jt=0}}function Oy(){var e=Fn.now(),t=e-zo;t>cl&&(Xo-=t,zo=e)}function By(){for(var e,t=Ro,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ro=n);kn=e,Li(o)}function Li(e){if(!fn){_n&&(_n=clearTimeout(_n));var t=e-Jt;t>24?(e<1/0&&(_n=setTimeout(ps,e-Fn.now()-Xo)),yn&&(yn=clearInterval(yn))):(yn||(zo=Fn.now(),yn=setInterval(Oy,cl)),fn=1,pl(ps))}}function fs(e,t,n){var o=new Vo;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Fy=na("start","end","cancel","interrupt"),Wy=[],hl=0,hs=1,Oi=2,mo=3,gs=4,Bi=5,vo=6;function Zo(e,t,n,o,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Uy(e,n,{name:t,index:o,group:i,on:Fy,tween:Wy,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:hl})}function ra(e,t){var n=ut(e,t);if(n.state>hl)throw new Error("too late; already scheduled");return n}function yt(e,t){var n=ut(e,t);if(n.state>mo)throw new Error("too late; already running");return n}function ut(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Uy(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=fl(a,0,n.time);function a(u){n.state=hs,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,p,y,b;if(n.state!==hs)return l();for(c in o)if(b=o[c],b.name===n.name){if(b.state===mo)return fs(s);b.state===gs?(b.state=vo,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete o[c]):+c<t&&(b.state=vo,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete o[c])}if(fs(function(){n.state===mo&&(n.state=gs,n.timer.restart(r,n.delay,n.time),r(u))}),n.state=Oi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Oi){for(n.state=mo,i=new Array(y=n.tween.length),c=0,p=-1;c<y;++c)(b=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function r(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Bi,1),p=-1,y=i.length;++p<y;)i[p].call(e,c);n.state===Bi&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=vo,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function yo(e,t){var n=e.__transition,o,i,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){a=!1;continue}i=o.state>Oi&&o.state<Bi,o.state=vo,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}a&&delete e.__transition}}function qy(e){return this.each(function(){yo(this,e)})}function Hy(e,t){var n,o;return function(){var i=yt(this,e),a=i.tween;if(a!==n){o=n=a;for(var s=0,r=o.length;s<r;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function Yy(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=yt(this,e),s=a.tween;if(s!==o){i=(o=s).slice();for(var r={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=r;break}l===u&&i.push(r)}a.tween=i}}function Gy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ut(this.node(),n).tween,i=0,a=o.length,s;i<a;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?Hy:Yy)(n,e,t))}function la(e,t,n){var o=e._id;return e.each(function(){var i=yt(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ut(i,o).value[t]}}function gl(e,t){var n;return(typeof t=="number"?Dt:t instanceof Bn?us:(n=Bn(t))?(t=n,us):Ey)(e,t)}function jy(e){return function(){this.removeAttribute(e)}}function Xy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zy(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===o?a:a=t(o=s,n)}}function Ky(e,t,n){var o,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?a:a=t(o=s,n)}}function Jy(e,t,n){var o,i,a;return function(){var s,r=n(this),l;return r==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=r+"",s===l?null:s===o&&l===i?a:(i=l,a=t(o=s,r)))}}function Qy(e,t,n){var o,i,a;return function(){var s,r=n(this),l;return r==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=r+"",s===l?null:s===o&&l===i?a:(i=l,a=t(o=s,r)))}}function eb(e,t){var n=jo(e),o=n==="transform"?Py:gl;return this.attrTween(e,typeof t=="function"?(n.local?Qy:Jy)(n,o,la(this,"attr."+e,t)):t==null?(n.local?Xy:jy)(n):(n.local?Ky:Zy)(n,o,t))}function tb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ob(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&nb(e,a)),n}return i._value=t,i}function ib(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&tb(e,a)),n}return i._value=t,i}function ab(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=jo(e);return this.tween(n,(o.local?ob:ib)(o,t))}function sb(e,t){return function(){ra(this,e).delay=+t.apply(this,arguments)}}function rb(e,t){return t=+t,function(){ra(this,e).delay=t}}function lb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sb:rb)(t,e)):ut(this.node(),t).delay}function ub(e,t){return function(){yt(this,e).duration=+t.apply(this,arguments)}}function db(e,t){return t=+t,function(){yt(this,e).duration=t}}function cb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ub:db)(t,e)):ut(this.node(),t).duration}function pb(e,t){if(typeof t!="function")throw new Error;return function(){yt(this,e).ease=t}}function fb(e){var t=this._id;return arguments.length?this.each(pb(t,e)):ut(this.node(),t).ease}function hb(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yt(this,e).ease=n}}function gb(e){if(typeof e!="function")throw new Error;return this.each(hb(this._id,e))}function mb(e){typeof e!="function"&&(e=Xr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,r=o[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&r.push(l);return new Et(o,this._parents,this._name,this._id)}function vb(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),s=new Array(o),r=0;r<a;++r)for(var l=t[r],u=n[r],c=l.length,p=s[r]=new Array(c),y,b=0;b<c;++b)(y=l[b]||u[b])&&(p[b]=y);for(;r<o;++r)s[r]=t[r];return new Et(s,this._parents,this._name,this._id)}function yb(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bb(e,t,n){var o,i,a=yb(t)?ra:yt;return function(){var s=a(this,e),r=s.on;r!==o&&(i=(o=r).copy()).on(t,n),s.on=i}}function wb(e,t){var n=this._id;return arguments.length<2?ut(this.node(),n).on.on(e):this.each(bb(n,e,t))}function xb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sb(){return this.on("end.remove",xb(this._id))}function _b(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oa(e));for(var o=this._groups,i=o.length,a=new Array(i),s=0;s<i;++s)for(var r=o[s],l=r.length,u=a[s]=new Array(l),c,p,y=0;y<l;++y)(c=r[y])&&(p=e.call(c,c.__data__,y,r))&&("__data__"in c&&(p.__data__=c.__data__),u[y]=p,Zo(u[y],t,n,y,u,ut(c,n)));return new Et(a,this._parents,t,n)}function kb(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jr(e));for(var o=this._groups,i=o.length,a=[],s=[],r=0;r<i;++r)for(var l=o[r],u=l.length,c,p=0;p<u;++p)if(c=l[p]){for(var y=e.call(c,c.__data__,p,l),b,S=ut(c,n),v=0,x=y.length;v<x;++v)(b=y[v])&&Zo(b,t,n,v,y,S);a.push(y),s.push(c)}return new Et(a,s,t,n)}var Cb=Yn.prototype.constructor;function Nb(){return new Cb(this._groups,this._parents)}function $b(e,t){var n,o,i;return function(){var a=pn(this,e),s=(this.style.removeProperty(e),pn(this,e));return a===s?null:a===n&&s===o?i:i=t(n=a,o=s)}}function ml(e){return function(){this.style.removeProperty(e)}}function Eb(e,t,n){var o,i=n+"",a;return function(){var s=pn(this,e);return s===i?null:s===o?a:a=t(o=s,n)}}function Mb(e,t,n){var o,i,a;return function(){var s=pn(this,e),r=n(this),l=r+"";return r==null&&(l=r=(this.style.removeProperty(e),pn(this,e))),s===l?null:s===o&&l===i?a:(i=l,a=t(o=s,r))}}function Tb(e,t){var n,o,i,a="style."+t,s="end."+a,r;return function(){var l=yt(this,e),u=l.on,c=l.value[a]==null?r||(r=ml(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(s,i=c),l.on=o}}function Ib(e,t,n){var o=(e+="")=="transform"?Iy:gl;return t==null?this.styleTween(e,$b(e,o)).on("end.style."+e,ml(e)):typeof t=="function"?this.styleTween(e,Mb(e,o,la(this,"style."+e,t))).each(Tb(this._id,e)):this.styleTween(e,Eb(e,o,t),n).on("end.style."+e,null)}function Pb(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Ab(e,t,n){var o,i;function a(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&Pb(e,s,n)),o}return a._value=t,a}function Db(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Ab(e,t,n??""))}function Rb(e){return function(){this.textContent=e}}function zb(e){return function(){var t=e(this);this.textContent=t??""}}function Vb(e){return this.tween("text",typeof e=="function"?zb(la(this,"text",e)):Rb(e==null?"":e+""))}function Lb(e){return function(t){this.textContent=e.call(this,t)}}function Ob(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Lb(i)),t}return o._value=e,o}function Bb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ob(e))}function Fb(){for(var e=this._name,t=this._id,n=vl(),o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],r=s.length,l,u=0;u<r;++u)if(l=s[u]){var c=ut(l,t);Zo(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Et(o,this._parents,e,n)}function Wb(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,s){var r={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=yt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(r),t._.interrupt.push(r),t._.end.push(l)),u.on=t}),i===0&&a()})}var Ub=0;function Et(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function vl(){return++Ub}var wt=Yn.prototype;Et.prototype={constructor:Et,select:_b,selectAll:kb,selectChild:wt.selectChild,selectChildren:wt.selectChildren,filter:mb,merge:vb,selection:Nb,transition:Fb,call:wt.call,nodes:wt.nodes,node:wt.node,size:wt.size,empty:wt.empty,each:wt.each,on:wb,attr:eb,attrTween:ab,style:Ib,styleTween:Db,text:Vb,textTween:Bb,remove:Sb,tween:Gy,delay:lb,duration:cb,ease:fb,easeVarying:gb,end:Wb,[Symbol.iterator]:wt[Symbol.iterator]};function qb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Hb={time:null,delay:0,duration:250,ease:qb};function Yb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gb(e){var t,n;e instanceof Et?(t=e._id,e=e._name):(t=vl(),(n=Hb).time=sa(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var s=o[a],r=s.length,l,u=0;u<r;++u)(l=s[u])&&Zo(l,e,t,u,s,n||Yb(l,t));return new Et(o,this._parents,e,t)}Yn.prototype.interrupt=qy;Yn.prototype.transition=Gb;const ro=e=>()=>e;function jb(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Nt(e,t,n){this.k=e,this.x=t,this.y=n}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ua=new Nt(1,0,0);Nt.prototype;function fi(e){e.stopImmediatePropagation()}function bn(e){e.preventDefault(),e.stopImmediatePropagation()}function Xb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Zb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ms(){return this.__zoom||ua}function Kb(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Jb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qb(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function e0(){var e=Xb,t=Zb,n=Qb,o=Kb,i=Jb,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],r=250,l=zy,u=na("start","zoom","end"),c,p,y,b=500,S=150,v=0,x=10;function h(w){w.property("__zoom",ms).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",Y).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(w,I,$,V){var M=w.selection?w.selection():w;M.property("__zoom",ms),w!==M?_(w,I,$,V):M.interrupt().each(function(){C(this,arguments).event(V).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},h.scaleBy=function(w,I,$,V){h.scaleTo(w,function(){var M=this.__zoom.k,U=typeof I=="function"?I.apply(this,arguments):I;return M*U},$,V)},h.scaleTo=function(w,I,$,V){h.transform(w,function(){var M=t.apply(this,arguments),U=this.__zoom,W=$==null?m(M):typeof $=="function"?$.apply(this,arguments):$,ne=U.invert(W),ae=typeof I=="function"?I.apply(this,arguments):I;return n(d(f(U,ae),W,ne),M,s)},$,V)},h.translateBy=function(w,I,$,V){h.transform(w,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),s)},null,V)},h.translateTo=function(w,I,$,V,M){h.transform(w,function(){var U=t.apply(this,arguments),W=this.__zoom,ne=V==null?m(U):typeof V=="function"?V.apply(this,arguments):V;return n(ua.translate(ne[0],ne[1]).scale(W.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof $=="function"?-$.apply(this,arguments):-$),U,s)},V,M)};function f(w,I){return I=Math.max(a[0],Math.min(a[1],I)),I===w.k?w:new Nt(I,w.x,w.y)}function d(w,I,$){var V=I[0]-$[0]*w.k,M=I[1]-$[1]*w.k;return V===w.x&&M===w.y?w:new Nt(w.k,V,M)}function m(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function _(w,I,$,V){w.on("start.zoom",function(){C(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(V).end()}).tween("zoom",function(){var M=this,U=arguments,W=C(M,U).event(V),ne=t.apply(M,U),ae=$==null?m(ne):typeof $=="function"?$.apply(M,U):$,pe=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),he=M.__zoom,B=typeof I=="function"?I.apply(M,U):I,Z=l(he.invert(ae).concat(pe/he.k),B.invert(ae).concat(pe/B.k));return function(X){if(X===1)X=B;else{var P=Z(X),H=pe/P[2];X=new Nt(H,ae[0]-P[0]*H,ae[1]-P[1]*H)}W.zoom(null,X)}})}function C(w,I,$){return!$&&w.__zooming||new L(w,I)}function L(w,I){this.that=w,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,I),this.taps=0}L.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,I){return this.mouse&&w!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var I=Rt(this.that).datum();u.call(w,this.that,new jb(w,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:u}),I)}};function R(w,...I){if(!e.apply(this,arguments))return;var $=C(this,I).event(w),V=this.__zoom,M=Math.max(a[0],Math.min(a[1],V.k*Math.pow(2,o.apply(this,arguments)))),U=Pt(w);if($.wheel)($.mouse[0][0]!==U[0]||$.mouse[0][1]!==U[1])&&($.mouse[1]=V.invert($.mouse[0]=U)),clearTimeout($.wheel);else{if(V.k===M)return;$.mouse=[U,V.invert(U)],yo(this),$.start()}bn(w),$.wheel=setTimeout(W,S),$.zoom("mouse",n(d(f(V,M),$.mouse[0],$.mouse[1]),$.extent,s));function W(){$.wheel=null,$.end()}}function j(w,...I){if(y||!e.apply(this,arguments))return;var $=w.currentTarget,V=C(this,I,!0).event(w),M=Rt(w.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",pe,!0),U=Pt(w,$),W=w.clientX,ne=w.clientY;uy(w.view),fi(w),V.mouse=[U,this.__zoom.invert(U)],yo(this),V.start();function ae(he){if(bn(he),!V.moved){var B=he.clientX-W,Z=he.clientY-ne;V.moved=B*B+Z*Z>v}V.event(he).zoom("mouse",n(d(V.that.__zoom,V.mouse[0]=Pt(he,$),V.mouse[1]),V.extent,s))}function pe(he){M.on("mousemove.zoom mouseup.zoom",null),dy(he.view,V.moved),bn(he),V.event(he).end()}}function Y(w,...I){if(e.apply(this,arguments)){var $=this.__zoom,V=Pt(w.changedTouches?w.changedTouches[0]:w,this),M=$.invert(V),U=$.k*(w.shiftKey?.5:2),W=n(d(f($,U),V,M),t.apply(this,I),s);bn(w),r>0?Rt(this).transition().duration(r).call(_,W,V,w):Rt(this).call(h.transform,W,V,w)}}function O(w,...I){if(e.apply(this,arguments)){var $=w.touches,V=$.length,M=C(this,I,w.changedTouches.length===V).event(w),U,W,ne,ae;for(fi(w),W=0;W<V;++W)ne=$[W],ae=Pt(ne,this),ae=[ae,this.__zoom.invert(ae),ne.identifier],M.touch0?!M.touch1&&M.touch0[2]!==ae[2]&&(M.touch1=ae,M.taps=0):(M.touch0=ae,U=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),U&&(M.taps<2&&(p=ae[0],c=setTimeout(function(){c=null},b)),yo(this),M.start())}}function k(w,...I){if(this.__zooming){var $=C(this,I).event(w),V=w.changedTouches,M=V.length,U,W,ne,ae;for(bn(w),U=0;U<M;++U)W=V[U],ne=Pt(W,this),$.touch0&&$.touch0[2]===W.identifier?$.touch0[0]=ne:$.touch1&&$.touch1[2]===W.identifier&&($.touch1[0]=ne);if(W=$.that.__zoom,$.touch1){var pe=$.touch0[0],he=$.touch0[1],B=$.touch1[0],Z=$.touch1[1],X=(X=B[0]-pe[0])*X+(X=B[1]-pe[1])*X,P=(P=Z[0]-he[0])*P+(P=Z[1]-he[1])*P;W=f(W,Math.sqrt(X/P)),ne=[(pe[0]+B[0])/2,(pe[1]+B[1])/2],ae=[(he[0]+Z[0])/2,(he[1]+Z[1])/2]}else if($.touch0)ne=$.touch0[0],ae=$.touch0[1];else return;$.zoom("touch",n(d(W,ne,ae),$.extent,s))}}function J(w,...I){if(this.__zooming){var $=C(this,I).event(w),V=w.changedTouches,M=V.length,U,W;for(fi(w),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),U=0;U<M;++U)W=V[U],$.touch0&&$.touch0[2]===W.identifier?delete $.touch0:$.touch1&&$.touch1[2]===W.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(W=Pt(W,this),Math.hypot(p[0]-W[0],p[1]-W[1])<x)){var ne=Rt(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return h.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:ro(+w),h):o},h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:ro(!!w),h):e},h.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:ro(!!w),h):i},h.extent=function(w){return arguments.length?(t=typeof w=="function"?w:ro([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),h):t},h.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],h):[a[0],a[1]]},h.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],h):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},h.constrain=function(w){return arguments.length?(n=w,h):n},h.duration=function(w){return arguments.length?(r=+w,h):r},h.interpolate=function(w){return arguments.length?(l=w,h):l},h.on=function(){var w=u.on.apply(u,arguments);return w===u?h:w},h.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,h):Math.sqrt(v)},h.tapDistance=function(w){return arguments.length?(x=+w,h):x},h}const yl=Symbol("MiniMapSlots"),t0=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],n0={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},o0=xe({...n0,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=Qt(yl),i=Fi(),a=Ee(()=>i.style??{});function s(p){t("click",p)}function r(p){t("dblclick",p)}function l(p){t("mouseenter",p)}function u(p){t("mousemove",p)}function c(p){t("mouseleave",p)}return(p,y)=>!p.hidden&&p.dimensions.width!==0&&p.dimensions.height!==0?(z(),K(ke,{key:0},[N(o)[`node-${n.type}`]?(z(),we(xt(N(o)[`node-${n.type}`]),zl(bo({key:0},{...n,...p.$attrs})),null,16)):(z(),K("rect",bo({key:1,id:p.id},p.$attrs,{class:["vue-flow__minimap-node",{selected:p.selected,dragging:p.dragging}],x:p.position.x,y:p.position.y,rx:p.borderRadius,ry:p.borderRadius,width:p.dimensions.width,height:p.dimensions.height,fill:p.color||a.value.background||a.value.backgroundColor,stroke:p.strokeColor,"stroke-width":p.strokeWidth,"shape-rendering":p.shapeRendering,onClick:s,onDblclick:r,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,t0))],64)):me("",!0)}}),i0=["width","height","viewBox","aria-labelledby"],a0=["id"],s0=["d","fill","stroke","stroke-width"],r0={name:"MiniMap",compatConfig:{MODE:3}},l0=xe({...r0,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=Es(),o=Fi(),i=200,a=150,{id:s,edges:r,viewport:l,translateExtent:u,dimensions:c,emits:p,d3Selection:y,d3Zoom:b,getNodesInitialized:S}=Re(),v=re();jt(yl,n);const x=Ee(()=>{var M;return e.width??((M=o.style)==null?void 0:M.width)??i}),h=Ee(()=>{var M;return e.height??((M=o.style)==null?void 0:M.height)??a}),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",d=D(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),m=D(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),_=D(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),C=D(()=>Ki(S.value.filter(M=>!M.hidden))),L=D(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),R=D(()=>S.value&&S.value.length?Bf(C.value,L.value):L.value),j=D(()=>{const M=R.value.width/x.value,U=R.value.height/h.value;return Math.max(M,U)}),Y=D(()=>{const M=j.value*x.value,U=j.value*h.value,W=e.offsetScale*j.value;return{offset:W,x:R.value.x-(M-R.value.width)/2-W,y:R.value.y-(U-R.value.height)/2-W,width:M+W*2,height:U+W*2}}),O=D(()=>!Y.value.x||!Y.value.y?"":`
    M${Y.value.x-Y.value.offset},${Y.value.y-Y.value.offset}
    h${Y.value.width+Y.value.offset*2}
    v${Y.value.height+Y.value.offset*2}
    h${-Y.value.width-Y.value.offset*2}z
    M${L.value.x+e.maskBorderRadius},${L.value.y}
    h${L.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${L.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(L.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(L.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);Rl(M=>{if(v.value){const U=Rt(v.value),W=pe=>{if(pe.sourceEvent.type!=="wheel"||!y.value||!b.value)return;const he=pe.sourceEvent.ctrlKey&&Vn()?10:1,B=-pe.sourceEvent.deltaY*(pe.sourceEvent.deltaMode===1?.05:pe.sourceEvent.deltaMode?1:.002)*e.zoomStep,Z=l.value.zoom*2**(B*he);b.value.scaleTo(y.value,Z)},ne=pe=>{if(pe.sourceEvent.type!=="mousemove"||!y.value||!b.value)return;const he=j.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),B={x:l.value.x-pe.sourceEvent.movementX*he,y:l.value.y-pe.sourceEvent.movementY*he},Z=[[0,0],[c.value.width,c.value.height]],X=ua.translate(B.x,B.y).scale(l.value.zoom),P=b.value.constrain()(X,Z,u.value);b.value.transform(y.value,P)},ae=e0().wheelDelta(pe=>Mi(pe)*(e.zoomStep/10)).on("zoom",e.pannable?ne:()=>{}).on("zoom.wheel",e.zoomable?W:()=>{});U.call(ae),M(()=>{U.on("zoom",null)})}},{flush:"post"});function k(M){const[U,W]=Pt(M);t("click",{event:M,position:{x:U,y:W}})}function J(M,U){const W={event:M,node:U,connectedEdges:Ft([U],r.value)};p.miniMapNodeClick(W),t("nodeClick",W)}function w(M,U){const W={event:M,node:U,connectedEdges:Ft([U],r.value)};p.miniMapNodeDoubleClick(W),t("nodeDblclick",W)}function I(M,U){const W={event:M,node:U,connectedEdges:Ft([U],r.value)};p.miniMapNodeMouseEnter(W),t("nodeMouseenter",W)}function $(M,U){const W={event:M,node:U,connectedEdges:Ft([U],r.value)};p.miniMapNodeMouseMove(W),t("nodeMousemove",W)}function V(M,U){const W={event:M,node:U,connectedEdges:Ft([U],r.value)};p.miniMapNodeMouseLeave(W),t("nodeMouseleave",W)}return(M,U)=>(z(),we(N(ta),{position:M.position,class:ge(["vue-flow__minimap",{pannable:M.pannable,zoomable:M.zoomable}])},{default:et(()=>[(z(),K("svg",{ref_key:"el",ref:v,width:x.value,height:h.value,viewBox:[Y.value.x,Y.value.y,Y.value.width,Y.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${N(s)}`,onClick:k},[M.ariaLabel?(z(),K("title",{key:0,id:`vue-flow__minimap-${N(s)}`},be(M.ariaLabel),9,a0)):me("",!0),(z(!0),K(ke,null,De(N(S),W=>(z(),we(o0,{id:W.id,key:W.id,f:"",position:W.computedPosition,dimensions:W.dimensions,selected:W.selected,dragging:W.dragging,style:Q(W.style),class:ge(_.value(W)),color:d.value(W),"border-radius":M.nodeBorderRadius,"stroke-color":m.value(W),"stroke-width":M.nodeStrokeWidth,"shape-rendering":N(f),type:W.type,hidden:W.hidden,onClick:ne=>J(ne,W),onDblclick:ne=>w(ne,W),onMouseenter:ne=>I(ne,W),onMousemove:ne=>$(ne,W),onMouseleave:ne=>V(ne,W)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),g("path",{class:"vue-flow__minimap-mask",d:O.value,fill:M.maskColor,stroke:M.maskStrokeColor,"stroke-width":M.maskStrokeWidth,"fill-rule":"evenodd"},null,8,s0)],8,i0))]),_:1},8,["position","class"]))}}),u0=["d"],d0=["d"],c0=["d","stroke"],p0=["d","stroke"],f0=["d","stroke"],h0=xe({__name:"AnimatedEdge",props:{id:{},sourceNode:{},targetNode:{},source:{},target:{},type:{},label:{type:[String,Object,Function]},style:{},selected:{type:Boolean},sourcePosition:{},targetPosition:{},sourceHandleId:{},targetHandleId:{},animated:{type:Boolean},updatable:{type:Boolean},markerStart:{},markerEnd:{},curvature:{},interactionWidth:{},data:{},events:{},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{},sourceX:{},sourceY:{},targetX:{},targetY:{}},setup(e){const t=e,n=je(),o=Ge(),i=D(()=>Io({sourceX:t.sourceX,sourceY:t.sourceY,sourcePosition:t.sourcePosition,targetX:t.targetX,targetY:t.targetY,targetPosition:t.targetPosition,borderRadius:8})),a=D(()=>{var v,x;const y=(x=(v=t.sourceNode)==null?void 0:v.data)==null?void 0:x.nodeType;if(!y)return"any";const b=o.getDefinition(y);if(!b)return"any";const S=b.outputs.find(h=>h.id===t.sourceHandleId);return(S==null?void 0:S.type)??"any"}),s=D(()=>{const y=Pe[a.value];return(y==null?void 0:y.color)??"#D4D4D4"}),r=D(()=>{var y,b;return((y=t.sourceNode)==null?void 0:y.selected)||((b=t.targetNode)==null?void 0:b.selected)}),l=D(()=>{var y,b;return((y=t.targetNode)==null?void 0:y.selected)&&!((b=t.sourceNode)!=null&&b.selected)}),u=D(()=>{var y,b;return((y=t.sourceNode)==null?void 0:y.selected)&&!((b=t.targetNode)!=null&&b.selected)}),c=D(()=>n.isRunning),p=D(()=>t.selected);return(y,b)=>(z(),K("g",{class:ge(["edge-group",{selected:p.value,"connected-selected":r.value}])},[g("path",{d:i.value[0],fill:"none",stroke:"transparent","stroke-width":"20",class:"edge-interaction-area"},null,8,u0),p.value?(z(),K("path",{key:0,d:i.value[0],fill:"none",stroke:"var(--color-primary-300)","stroke-width":"6","stroke-linecap":"round",class:"edge-selection"},null,8,d0)):me("",!0),te(N(Hn),{id:e.id,path:i.value[0],"marker-end":e.markerEnd,style:Q({stroke:s.value,strokeWidth:p.value?3:2})},null,8,["id","path","marker-end","style"]),r.value&&!p.value?(z(),K("path",{key:1,d:i.value[0],fill:"none",stroke:s.value,"stroke-width":"10","stroke-linecap":"round","stroke-dasharray":"12 24",class:ge(["edge-chase-glow",{"chase-incoming":l.value,"chase-outgoing":u.value,"chase-both":!l.value&&!u.value}])},null,10,c0)):me("",!0),r.value&&!p.value?(z(),K("path",{key:2,d:i.value[0],fill:"none",stroke:s.value,"stroke-width":"4","stroke-linecap":"round","stroke-dasharray":"12 24",class:ge(["edge-chase",{"chase-incoming":l.value,"chase-outgoing":u.value,"chase-both":!l.value&&!u.value}])},null,10,p0)):me("",!0),c.value?(z(),K("path",{key:3,d:i.value[0],fill:"none",stroke:s.value,"stroke-width":"4","stroke-linecap":"round",class:"edge-animation",style:{opacity:.6}},null,8,f0)):me("",!0)],2))}}),g0=Ae(h0,[["__scopeId","data-v-fd62e63f"]]),m0={any:["any","trigger","number","string","boolean","audio","video","texture","data","array","scene3d","object3d","geometry3d","material3d","camera3d","light3d","transform3d"],trigger:["trigger","any"],number:["number","string","boolean","any"],string:["string","any"],boolean:["boolean","number","string","any"],audio:["audio","any"],video:["video","any"],texture:["texture","any"],data:["data","string","any"],array:["array","data","any"],scene3d:["scene3d","any"],object3d:["object3d","any"],geometry3d:["geometry3d","any"],material3d:["material3d","any"],camera3d:["camera3d","any"],light3d:["light3d","object3d","any"],transform3d:["transform3d","data","any"]};function v0(e,t){return t==="any"?!0:(m0[e]??[]).includes(t)}function vs(e,t,n,o){if(!e)return;if(e.id==="trigger"&&n==="output"&&t==="trigger"){const s=o==null?void 0:o.outputType;return s&&["boolean","number","string","json","timestamp"].includes(s)?s==="json"?"data":s==="timestamp"?"number":s:"trigger"}const a=(n==="input"?e.inputs:e.outputs).find(s=>s.id===t);return a==null?void 0:a.type}function y0(e,t,n){var v,x;const{source:o,sourceHandle:i,target:a,targetHandle:s}=e;if(!o||!a||!i||!s)return{valid:!1,reason:"Missing connection data"};if(o===a)return{valid:!1,reason:"Cannot connect node to itself"};const r=n(o),l=n(a);if(!r||!l)return{valid:!1,reason:"Node data not found"};const u=r.nodeType,c=l.nodeType,p=t(u),y=t(c);if(!p||!y)return{valid:!0};const b=vs(p,i,"output",r),S=vs(y,s,"input",l);if(!b||!S)return{valid:!0};if(p.id==="trigger"&&S==="trigger")return{valid:!0};if(!v0(b,S)){const h=((v=Pe[b])==null?void 0:v.label)??b,f=((x=Pe[S])==null?void 0:x.label)??S;return{valid:!1,reason:`Cannot connect ${h} to ${f}`}}return{valid:!0}}const ys=["debug","inputs","outputs","math","logic","audio","video","visual","shaders","data","ai","code","3d","connectivity","subflows","custom"],bs=["trigger","number","string","boolean","audio","video","texture","data","array","any"],ws=["web","electron"],xs=["number","text","toggle","slider","select","code","color"];class He extends Error{constructor(t,n,o){super(t),this.field=n,this.value=o,this.name="ValidationError"}}function Be(e,t,n=1){if(typeof e!="string")throw new He(`${t} must be a string`,t,e);if(e.length<n)throw new He(`${t} must be at least ${n} character(s)`,t,e);return e}function Ot(e,t){if(!Array.isArray(e))throw new He(`${t} must be an array`,t,e);return e}function Ss(e,t,n){if(typeof e!="object"||e===null)throw new He(`${n}s[${t}] must be an object`,`${n}s[${t}]`,e);const o=e,i=Be(o.id,`${n}s[${t}].id`),a=Be(o.label,`${n}s[${t}].label`),s=Be(o.type,`${n}s[${t}].type`);if(!bs.includes(s))throw new He(`${n}s[${t}].type must be one of: ${bs.join(", ")}`,`${n}s[${t}].type`,s);const r={id:i,type:s,label:a};return o.description!==void 0&&(r.description=Be(o.description,`${n}s[${t}].description`,0)),o.required!==void 0&&(r.required=!!o.required),o.multiple!==void 0&&(r.multiple=!!o.multiple),o.default!==void 0&&(r.default=o.default),r}function b0(e,t){if(typeof e!="object"||e===null)throw new He(`controls[${t}] must be an object`,`controls[${t}]`,e);const n=e,o=Be(n.id,`controls[${t}].id`),i=Be(n.label,`controls[${t}].label`),a=Be(n.type,`controls[${t}].type`);if(!xs.includes(a))throw new He(`controls[${t}].type must be one of: ${xs.join(", ")}`,`controls[${t}].type`,a);const s={id:o,type:a,label:i};if(n.description!==void 0&&(s.description=Be(n.description,`controls[${t}].description`,0)),n.default!==void 0&&(s.default=n.default),n.exposable!==void 0&&(s.exposable=!!n.exposable),n.bindable!==void 0&&(s.bindable=!!n.bindable),n.props!==void 0){if(typeof n.props!="object"||n.props===null)throw new He(`controls[${t}].props must be an object`,`controls[${t}].props`,n.props);s.props=n.props}return s}function _s(e){if(typeof e!="object"||e===null)throw new He("Definition must be an object");const t=e,n=Be(t.id,"id"),o=Be(t.name,"name"),i=Be(t.version,"version"),a=Be(t.description,"description",0),s=Be(t.icon,"icon"),r=Be(t.category,"category");if(!ys.includes(r))throw new He(`category must be one of: ${ys.join(", ")}`,"category",r);const l=Ot(t.platforms,"platforms");if(l.length===0)throw new He("platforms must contain at least one platform","platforms",l);const u=l.map((m,_)=>{const C=Be(m,`platforms[${_}]`);if(!ws.includes(C))throw new He(`platforms[${_}] must be one of: ${ws.join(", ")}`,`platforms[${_}]`,C);return C}),p=Ot(t.inputs,"inputs").map((m,_)=>Ss(m,_,"input")),b=Ot(t.outputs,"outputs").map((m,_)=>Ss(m,_,"output")),v=Ot(t.controls,"controls").map((m,_)=>b0(m,_));if(new Set(p.map(m=>m.id)).size!==p.length)throw new He("Duplicate input port IDs found","inputs");if(new Set(b.map(m=>m.id)).size!==b.length)throw new He("Duplicate output port IDs found","outputs");if(new Set(v.map(m=>m.id)).size!==v.length)throw new He("Duplicate control IDs found","controls");const d={id:n,name:o,version:i,category:r,description:a,icon:s,platforms:u,inputs:p,outputs:b,controls:v};if(t.color!==void 0&&(d.color=Be(t.color,"color")),t.webFallback!==void 0&&(d.webFallback=Be(t.webFallback,"webFallback")),t.tags!==void 0){const m=Ot(t.tags,"tags");d.tags=m.map((_,C)=>Be(_,`tags[${C}]`))}if(t.info!==void 0){if(typeof t.info!="object"||t.info===null)throw new He("info must be an object","info",t.info);const m=t.info,C={overview:Be(m.overview,"info.overview")};if(m.tips!==void 0){const L=Ot(m.tips,"info.tips");C.tips=L.map((R,j)=>Be(R,`info.tips[${j}]`))}if(m.pairsWith!==void 0){const L=Ot(m.pairsWith,"info.pairsWith");C.pairsWith=L.map((R,j)=>Be(R,`info.pairsWith[${j}]`))}d.info=C}return d}class Cn extends Error{constructor(t,n){super(t),this.originalError=n,this.name="CompilationError"}}function ks(e,t){let n=e.trim();if(n=n.replace(/export\s+default\s+function\s*\w*\s*\(/,"return function("),n=n.replace(/export\s+default\s+(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/,"return $1 =>"),!n.startsWith("return"))if(n.match(/^function\s*\w*\s*\(/))n="return "+n;else if(n.match(/^\([^)]*\)\s*=>/)||n.match(/^[a-zA-Z_$][a-zA-Z0-9_$]*\s*=>/))n="return "+n;else throw new Cn(`Invalid executor format for node "${t}". Expected "export default function(ctx) { ... }" or "export default (ctx) => { ... }"`);try{const i=new Function(n)();if(typeof i!="function")throw new Cn(`Executor for node "${t}" must export a function`);return async s=>{try{const r=await i(s);return r instanceof Map?r:typeof r=="object"&&r!==null&&!Array.isArray(r)?new Map(Object.entries(r)):(console.warn(`Executor for node "${t}" returned ${typeof r}, expected Map. Returning empty output.`),new Map)}catch(r){return console.error(`Error in custom executor "${t}":`,r),new Map}}}catch(o){throw o instanceof Cn?o:new Cn(`Failed to compile executor for node "${t}": ${o instanceof Error?o.message:String(o)}`,o instanceof Error?o:void 0)}}class w0{constructor(){Lt(this,"loadedNodes",new Map);Lt(this,"loadErrors",[]);Lt(this,"watcherCleanup",null);Lt(this,"initialized",!1);Lt(this,"onReloadCallbacks",new Set);Lt(this,"pendingReloads",new Map)}isElectron(){var t;return typeof window<"u"&&!!((t=window.electronAPI)!=null&&t.isElectron)}async initialize(){if(this.initialized){console.warn("CustomNodeLoader already initialized");return}if(this.initialized=!0,!this.isElectron()){console.log("CustomNodeLoader: Running in web mode, file-based custom nodes disabled");return}await this.loadAllNodes(),await this.startWatching()}async loadAllNodes(){if(!this.isElectron())return[];const t=window.electronAPI.customNodes;this.loadErrors=[];const n=await t.scanDirectory();if(!n.success)return console.warn("Failed to scan custom-nodes directory:",n.error),[];const o=[];for(const i of n.packages)try{const a=await this.loadNode(i);a&&o.push(a)}catch(a){console.error(`Failed to load custom node "${i}":`,a)}return console.log(`CustomNodeLoader: Loaded ${o.length} custom nodes`),o}async loadNode(t){if(!this.isElectron())throw new Error("Custom node loading only supported in Electron");const n=window.electronAPI.customNodes,o=await n.readDefinition(t);if(!o.success||!o.definition)return this.recordError(t,o.error??"Failed to read definition","load"),null;let i;try{i=_s(o.definition)}catch(c){const p=c instanceof He?c.message:String(c);return this.recordError(t,p,"validation"),null}const a=await n.readExecutor(t);if(!a.success||!a.code)return this.recordError(t,a.error??"Failed to read executor","load"),null;let s;try{s=ks(a.code,i.id)}catch(c){const p=c instanceof Cn?c.message:String(c);return this.recordError(t,p,"compilation"),null}this.loadedNodes.has(i.id)&&this.unloadNode(i.id),Ge().register(i),at().registerExecutor(i.id,s);const u={packageName:t,definition:i,executor:s,loadedAt:Date.now()};return this.loadedNodes.set(i.id,u),console.log(`CustomNodeLoader: Loaded "${i.name}" (${i.id})`),u}unloadNode(t){if(!this.loadedNodes.get(t))return;Ge().unregister(t),at().unregisterExecutor(t),this.loadedNodes.delete(t),console.log(`CustomNodeLoader: Unloaded "${t}"`)}async reloadNode(t){console.log(`CustomNodeLoader: Reloading "${t}"`);for(const[o,i]of this.loadedNodes)if(i.packageName===t){this.unloadNode(o);break}this.loadErrors=this.loadErrors.filter(o=>o.packageName!==t),await this.loadNode(t)&&this.notifyReload(t)}async startWatching(){if(!this.isElectron())return;const t=window.electronAPI.customNodes,n=await t.watchDirectory();if(!n.success){console.warn("Failed to start custom-nodes watcher:",n.error);return}this.watcherCleanup=t.onFileChange(async o=>{const i=o.packageName,a=this.pendingReloads.get(i);a&&clearTimeout(a);const s=setTimeout(async()=>{this.pendingReloads.delete(i),await this.reloadNode(o.packageName)},300);this.pendingReloads.set(i,s)}),console.log("CustomNodeLoader: File watcher started")}async stopWatching(){for(const t of this.pendingReloads.values())clearTimeout(t);this.pendingReloads.clear(),this.watcherCleanup&&(this.watcherCleanup(),this.watcherCleanup=null),this.isElectron()&&await window.electronAPI.customNodes.stopWatching()}recordError(t,n,o){this.loadErrors.push({packageName:t,error:n,type:o})}getLoadedNodes(){return Array.from(this.loadedNodes.values())}getLoadErrors(){return[...this.loadErrors]}isCustomNode(t){return this.loadedNodes.has(t)}onReload(t){return this.onReloadCallbacks.add(t),()=>{this.onReloadCallbacks.delete(t)}}notifyReload(t){for(const n of this.onReloadCallbacks)n(t)}loadFromCode(t,n){let o;try{o=JSON.parse(t)}catch{throw new He("Invalid JSON in definition")}const i=_s(o),a=ks(n,i.id);this.loadedNodes.has(i.id)&&this.unloadNode(i.id),Ge().register(i),at().registerExecutor(i.id,a);const l={packageName:`web:${i.id}`,definition:i,executor:a,loadedAt:Date.now()};return this.loadedNodes.set(i.id,l),l}async dispose(){await this.stopWatching();for(const t of this.loadedNodes.keys())this.unloadNode(t);this.initialized=!1}}let hi=null;function x0(){return hi||(hi=new w0),hi}const S0={id:"constant",name:"Constant",version:"1.0.0",category:"inputs",description:"Output a constant value",icon:"hash",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"number",label:"Value",default:0,exposable:!0}],info:{overview:"Outputs a single fixed numeric value that does not change over time. It is the simplest way to feed a known number into other nodes. The value control can be exposed for quick adjustment without opening the node.",tips:["Use constants for thresholds or multipliers that you want to label clearly in the flow.","Prefer a slider or knob instead when you need to tweak a value interactively during playback."],pairsWith:["multiply","add","expression","map-range"]}},_0={id:"slider",name:"Slider",version:"1.0.0",category:"inputs",description:"Slider control (0-1)",icon:"sliders-horizontal",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"slider",label:"Value",default:.5,exposable:!0,props:{min:0,max:1,step:.01}}],info:{overview:"A horizontal slider that outputs a normalized 0-to-1 value. It provides fine-grained control with a step size of 0.01 by default. The value can be exposed on the node surface for quick access.",tips:["Feed the slider into a map-range node to rescale the 0-1 output to any target range.","Expose the slider value to adjust it without opening the node, which speeds up live tweaking.","Connect to a smooth node to filter out abrupt jumps when dragging quickly."],pairsWith:["map-range","smooth","gain","lerp"]}},k0={id:"audio-input",name:"Audio Input",version:"1.0.0",category:"inputs",description:"Capture audio from microphone",icon:"mic",platforms:["web","electron"],inputs:[],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"level",type:"number",label:"Level"},{id:"beat",type:"trigger",label:"Beat"}],controls:[{id:"source",type:"select",label:"Source",default:"default",props:{deviceType:"audio-input"}}],info:{overview:"Captures live audio from a microphone or other system input device. It provides a raw audio stream, a level envelope, and a beat trigger. The source selector lets you pick which input device to use when multiple are available.",tips:["Connect the beat output to a counter or toggle for rhythm-reactive patches.","Use the level output with a map-range node to scale microphone loudness to a useful parameter range.","Grant microphone permissions before adding this node to avoid silent failures."],pairsWith:["audio-analyzer","beat-detect","gain","filter"]}},C0={id:"trigger",name:"Trigger",version:"1.0.0",category:"inputs",description:"Manual trigger button with various output types",icon:"zap",platforms:["web","electron"],inputs:[],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[{id:"outputType",type:"select",label:"Type",default:"boolean",props:{options:["boolean","number","string","json","timestamp"]}},{id:"value",type:"toggle",label:"Value",default:!1},{id:"stringValue",type:"text",label:"String Value",default:""},{id:"jsonValue",type:"text",label:"JSON Value",default:"{}"}],info:{overview:"A manual button that fires a trigger signal when clicked. It supports multiple output types including boolean, number, string, JSON, and timestamp. This makes it useful for both simple fire-and-forget pulses and sending specific data payloads on demand.",tips:["Use timestamp mode to tag events with the exact time they were triggered.","Set the type to JSON and provide a payload to send structured data to downstream nodes with one click.","Connect multiple trigger nodes to a counter for a manual step-through interface."],pairsWith:["counter","toggle","sample-hold","gate"]}},N0={class:"node-body"},$0={class:"control-row"},E0={key:0,class:"control-row"},M0={class:"value-toggle"},T0={key:1,class:"control-row control-row-full"},I0={key:2,class:"control-row control-row-full"},P0={key:3,class:"control-row"},A0={class:"output-row"},D0=xe({__name:"TriggerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=je(),i=Ge(),a=re(!1),s=D(()=>{var f,d;const h=((f=t.data)==null?void 0:f.nodeType)??"trigger";return i.getDefinition(h)??((d=t.data)==null?void 0:d.definition)??null}),r=D(()=>{var h;return s.value?((h=ze[s.value.category])==null?void 0:h.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),l=D({get:()=>{var h;return((h=t.data)==null?void 0:h.outputType)??"boolean"},set:h=>{n.updateNodeData(t.id,{outputType:h})}}),u=D({get:()=>{var h;return((h=t.data)==null?void 0:h.value)??!1},set:h=>{n.updateNodeData(t.id,{value:h})}}),c=D({get:()=>{var h;return((h=t.data)==null?void 0:h.stringValue)??""},set:h=>{n.updateNodeData(t.id,{stringValue:h})}}),p=D({get:()=>{var h;return((h=t.data)==null?void 0:h.jsonValue)??"{}"},set:h=>{n.updateNodeData(t.id,{jsonValue:h})}}),y=D(()=>{var f;const h=o.nodeMetrics.get(t.id);return(f=h==null?void 0:h.outputValues)==null?void 0:f.trigger}),b=D(()=>{switch(l.value){case"boolean":return u.value?"true":"false";case"number":return u.value?"1":"0";case"string":return c.value||"(empty)";case"json":return p.value.slice(0,20)+(p.value.length>20?"...":"");case"timestamp":return"now()";default:return String(y.value??u.value)}});function S(){const h=!u.value;n.updateNodeData(t.id,{value:h}),setTimeout(()=>{n.updateNodeData(t.id,{value:!h})},100)}function v(){a.value=!a.value}function x(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}return(h,f)=>a.value?(z(),K("div",{key:0,class:ge(["trigger-node trigger-node-collapsed",{selected:t.selected}])},[g("button",{class:"trigger-btn-large",onClick:de(S,["stop"]),onMousedown:f[0]||(f[0]=de(()=>{},["stop"]))},[te(N(Jo),{size:20}),f[12]||(f[12]=g("span",null,"TRIGGER",-1))],32),te(N(ce),{id:"trigger",type:"source",position:N(ee).Right,style:Q({background:x("trigger")}),class:"port-handle port-handle-collapsed"},null,8,["position","style"]),g("button",{class:"expand-btn",onClick:de(v,["stop"])},[te(N(st),{size:12})])],2)):(z(),K("div",{key:1,class:ge(["trigger-node",{selected:t.selected}])},[g("div",{class:"node-header",style:Q({borderLeftColor:r.value})},[te(N(Jo),{size:14,class:"header-icon"}),f[13]||(f[13]=g("span",{class:"node-title"},"Trigger",-1)),g("button",{class:"node-collapse-btn",onClick:de(v,["stop"])},[te(N(rt),{size:14})])],4),g("div",N0,[g("div",$0,[f[15]||(f[15]=g("label",{class:"control-label"},"TYPE",-1)),nn(g("select",{"onUpdate:modelValue":f[1]||(f[1]=d=>l.value=d),class:"type-select",onMousedown:f[2]||(f[2]=de(()=>{},["stop"]))},[...f[14]||(f[14]=[Ds('<option value="boolean" data-v-e8c803e2> Boolean </option><option value="number" data-v-e8c803e2> Number </option><option value="string" data-v-e8c803e2> String </option><option value="json" data-v-e8c803e2> JSON </option><option value="timestamp" data-v-e8c803e2> Timestamp </option>',5)])],544),[[As,l.value]])]),l.value==="boolean"||l.value==="number"?(z(),K("div",E0,[f[16]||(f[16]=g("label",{class:"control-label"},"VALUE",-1)),g("div",M0,[g("button",{class:ge(["value-btn",{active:!u.value,"false-btn":!0}]),onClick:f[3]||(f[3]=de(d=>u.value=!1,["stop"])),onMousedown:f[4]||(f[4]=de(()=>{},["stop"]))},be(l.value==="number"?"0":"FALSE"),35),g("button",{class:ge(["value-btn",{active:u.value,"true-btn":!0}]),onClick:f[5]||(f[5]=de(d=>u.value=!0,["stop"])),onMousedown:f[6]||(f[6]=de(()=>{},["stop"]))},be(l.value==="number"?"1":"TRUE"),35)])])):l.value==="string"?(z(),K("div",T0,[f[17]||(f[17]=g("label",{class:"control-label"},"VALUE",-1)),nn(g("input",{"onUpdate:modelValue":f[7]||(f[7]=d=>c.value=d),type:"text",class:"string-input",placeholder:"Enter string...",onMousedown:f[8]||(f[8]=de(()=>{},["stop"]))},null,544),[[wo,c.value]])])):l.value==="json"?(z(),K("div",I0,[f[18]||(f[18]=g("label",{class:"control-label"},"JSON",-1)),nn(g("textarea",{"onUpdate:modelValue":f[9]||(f[9]=d=>p.value=d),class:"json-input",placeholder:'{"key": "value"}',rows:"2",onMousedown:f[10]||(f[10]=de(()=>{},["stop"]))},null,544),[[wo,p.value]])])):l.value==="timestamp"?(z(),K("div",P0,[...f[19]||(f[19]=[g("label",{class:"control-label"},"VALUE",-1),g("span",{class:"timestamp-info"},"Current timestamp on trigger",-1)])])):me("",!0),g("button",{class:"trigger-btn",onClick:de(S,["stop"]),onMousedown:f[11]||(f[11]=de(()=>{},["stop"]))},[te(N(Jo),{size:16}),f[20]||(f[20]=g("span",null,"TRIGGER",-1))],32),g("div",A0,[f[21]||(f[21]=g("span",{class:"output-label"},"Output:",-1)),g("span",{class:ge(["output-value",{"value-true":u.value&&(l.value==="boolean"||l.value==="number")}])},be(b.value),3),te(N(ce),{id:"trigger",type:"source",position:N(ee).Right,style:Q({background:x("trigger")}),class:"port-handle"},null,8,["position","style"])])])],2))}}),R0=Ae(D0,[["__scopeId","data-v-e8c803e2"]]),z0={id:"xy-pad",name:"XY Pad",version:"1.0.0",category:"inputs",description:"2D position controller with X/Y outputs",icon:"move",platforms:["web","electron"],inputs:[],outputs:[{id:"rawX",type:"number",label:"Raw X"},{id:"rawY",type:"number",label:"Raw Y"},{id:"normX",type:"number",label:"0-1 X"},{id:"normY",type:"number",label:"0-1 Y"}],controls:[{id:"normalizedX",type:"number",label:"X",default:.5,exposable:!0},{id:"normalizedY",type:"number",label:"Y",default:.5,exposable:!0},{id:"minX",type:"number",label:"Min X",default:0},{id:"maxX",type:"number",label:"Max X",default:1},{id:"minY",type:"number",label:"Min Y",default:0},{id:"maxY",type:"number",label:"Max Y",default:1}],info:{overview:"A two-dimensional pad that outputs X and Y positions in both raw and normalized forms. The raw outputs use the configured min/max ranges while the normalized outputs always produce 0-to-1 values. This is ideal for controlling two parameters simultaneously with a single gesture.",tips:["Map normalized X and Y to different shader uniforms for interactive 2D visual control.","Set asymmetric min/max ranges to bias the raw output toward a useful operating region.","Connect each axis to a smooth node independently to get different smoothing rates for X and Y."],pairsWith:["smooth","shader","map-range","oscillator"]}},V0={class:"handles-column handles-right"},L0={class:"node-content"},O0={key:0,class:"node-body"},B0={class:"value-display"},F0={class:"value-item"},W0={class:"value-number"},U0={class:"value-item"},q0={class:"value-number"},H0={class:"range-section"},Y0={key:0,class:"range-controls"},G0={class:"range-row"},j0=["value"],X0=["value"],Z0={class:"range-row"},K0=["value"],J0=["value"],Q0=xe({__name:"XYPadNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(!1),s=re(null),r=re(!1),l=re(null),u=D(()=>{var k,J;const O=((k=t.data)==null?void 0:k.nodeType)??"xy-pad";return o.getDefinition(O)??((J=t.data)==null?void 0:J.definition)??null}),c=D(()=>{var O;return u.value?((O=ze[u.value.category])==null?void 0:O.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),p=D({get:()=>{var O;return((O=t.data)==null?void 0:O.normalizedX)??.5},set:O=>{n.updateNodeData(t.id,{normalizedX:Math.max(0,Math.min(1,O))})}}),y=D({get:()=>{var O;return((O=t.data)==null?void 0:O.normalizedY)??.5},set:O=>{n.updateNodeData(t.id,{normalizedY:Math.max(0,Math.min(1,O))})}}),b=D({get:()=>{var O;return((O=t.data)==null?void 0:O.minX)??0},set:O=>{n.updateNodeData(t.id,{minX:O})}}),S=D({get:()=>{var O;return((O=t.data)==null?void 0:O.maxX)??1},set:O=>{n.updateNodeData(t.id,{maxX:O})}}),v=D({get:()=>{var O;return((O=t.data)==null?void 0:O.minY)??0},set:O=>{n.updateNodeData(t.id,{minY:O})}}),x=D({get:()=>{var O;return((O=t.data)==null?void 0:O.maxY)??1},set:O=>{n.updateNodeData(t.id,{maxY:O})}}),h=D(()=>b.value+p.value*(S.value-b.value)),f=D(()=>v.value+y.value*(x.value-v.value)),d=D(()=>({left:`${p.value*100}%`,top:`${(1-y.value)*100}%`}));function m(O){R(O)}function _(O){r.value=!0,R(O),window.addEventListener("mousemove",C),window.addEventListener("mouseup",L)}function C(O){r.value&&R(O)}function L(){r.value=!1,window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",L)}function R(O){if(!s.value)return;const k=s.value.getBoundingClientRect(),J=(O.clientX-k.left)/k.width,w=1-(O.clientY-k.top)/k.height;p.value=Math.max(0,Math.min(1,J)),y.value=Math.max(0,Math.min(1,w))}function j(){i.value=!i.value}function Y(O){var k;return((k=Pe[O])==null?void 0:k.color)??"var(--color-neutral-400)"}return Ye(()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",L)}),(O,k)=>(z(),K("div",{class:ge(["xypad-node",{selected:t.selected,collapsed:i.value}])},[g("div",V0,[g("div",{class:"handle-slot",onMouseenter:k[0]||(k[0]=J=>l.value="rawX"),onMouseleave:k[1]||(k[1]=J=>l.value=null)},[te(N(ce),{id:"rawX",type:"source",position:N(ee).Right,style:Q({background:Y("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:l.value==="rawX"||t.selected}])},[k[18]||(k[18]=g("span",{class:"label-text"},"X",-1)),g("span",{class:"label-type",style:Q({color:Y("number")})},"raw",4)],2)],32),g("div",{class:"handle-slot",onMouseenter:k[2]||(k[2]=J=>l.value="rawY"),onMouseleave:k[3]||(k[3]=J=>l.value=null)},[te(N(ce),{id:"rawY",type:"source",position:N(ee).Right,style:Q({background:Y("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:l.value==="rawY"||t.selected}])},[k[19]||(k[19]=g("span",{class:"label-text"},"Y",-1)),g("span",{class:"label-type",style:Q({color:Y("number")})},"raw",4)],2)],32),g("div",{class:"handle-slot",onMouseenter:k[4]||(k[4]=J=>l.value="normX"),onMouseleave:k[5]||(k[5]=J=>l.value=null)},[te(N(ce),{id:"normX",type:"source",position:N(ee).Right,style:Q({background:Y("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:l.value==="normX"||t.selected}])},[k[20]||(k[20]=g("span",{class:"label-text"},"nX",-1)),g("span",{class:"label-type",style:Q({color:Y("number")})},"01",4)],2)],32),g("div",{class:"handle-slot",onMouseenter:k[6]||(k[6]=J=>l.value="normY"),onMouseleave:k[7]||(k[7]=J=>l.value=null)},[te(N(ce),{id:"normY",type:"source",position:N(ee).Right,style:Q({background:Y("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:l.value==="normY"||t.selected}])},[k[21]||(k[21]=g("span",{class:"label-text"},"nY",-1)),g("span",{class:"label-type",style:Q({color:Y("number")})},"01",4)],2)],32)]),g("div",L0,[g("div",{class:"node-header",style:Q({borderLeftColor:c.value})},[te(N(ku),{size:14,class:"header-icon"}),k[22]||(k[22]=g("span",{class:"node-title"},"XY-Pad",-1)),g("button",{class:"node-collapse-btn",onClick:de(j,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?me("",!0):(z(),K("div",O0,[g("div",{ref_key:"padRef",ref:s,class:"pad-area",onMousedown:de(_,["stop"]),onClick:de(m,["stop"])},[k[23]||(k[23]=g("div",{class:"pad-grid"},[g("div",{class:"grid-line-h"}),g("div",{class:"grid-line-v"})],-1)),g("div",{class:"pad-point",style:Q(d.value)},null,4)],544),g("div",B0,[g("div",F0,[k[24]||(k[24]=g("span",{class:"value-label"},"X:",-1)),g("span",W0,be(h.value.toFixed(2)),1)]),g("div",U0,[k[25]||(k[25]=g("span",{class:"value-label"},"Y:",-1)),g("span",q0,be(f.value.toFixed(2)),1)])]),g("div",H0,[g("button",{class:"range-toggle",onClick:k[8]||(k[8]=de(J=>a.value=!a.value,["stop"])),onMousedown:k[9]||(k[9]=de(()=>{},["stop"]))},[a.value?(z(),we(N(rt),{key:1,size:12})):(z(),we(N(st),{key:0,size:12})),k[26]||(k[26]=g("span",null,"RANGE",-1))],32),a.value?(z(),K("div",Y0,[g("div",G0,[k[27]||(k[27]=g("label",null,"X Min",-1)),g("input",{type:"number",value:b.value,onInput:k[10]||(k[10]=J=>b.value=parseFloat(J.target.value)||0),onMousedown:k[11]||(k[11]=de(()=>{},["stop"]))},null,40,j0),k[28]||(k[28]=g("label",null,"Max",-1)),g("input",{type:"number",value:S.value,onInput:k[12]||(k[12]=J=>S.value=parseFloat(J.target.value)||1),onMousedown:k[13]||(k[13]=de(()=>{},["stop"]))},null,40,X0)]),g("div",Z0,[k[29]||(k[29]=g("label",null,"Y Min",-1)),g("input",{type:"number",value:v.value,onInput:k[14]||(k[14]=J=>v.value=parseFloat(J.target.value)||0),onMousedown:k[15]||(k[15]=de(()=>{},["stop"]))},null,40,K0),k[30]||(k[30]=g("label",null,"Max",-1)),g("input",{type:"number",value:x.value,onInput:k[16]||(k[16]=J=>x.value=parseFloat(J.target.value)||1),onMousedown:k[17]||(k[17]=de(()=>{},["stop"]))},null,40,J0)])])):me("",!0)])]))])],2))}}),e1=Ae(Q0,[["__scopeId","data-v-2ddb69db"]]),t1={id:"textbox",name:"Textbox",version:"1.0.0",category:"inputs",description:"Resizable text input that outputs a string",icon:"type",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"}],outputs:[{id:"text",type:"string",label:"Text"}],controls:[{id:"text",type:"text",label:"Text",default:""},{id:"height",type:"number",label:"Height",default:100}],info:{overview:"A resizable text input area that outputs its contents as a string. The optional trigger input lets you control when the text value updates downstream. The height control adjusts the visible editing area without affecting output.",tips:["Use the trigger input to send text only on demand rather than on every keystroke.","Pair with a template node to insert the text output into a larger formatted string.","Set a tall height for multi-line content like JSON payloads or code snippets."],pairsWith:["template","json-parse","console","string-concat"]}},n1={class:"collapsed-content"},o1={class:"collapsed-text"},i1={class:"node-body"},a1={class:"input-row"},s1={class:"output-row"},r1={class:"output-value"},l1=xe({__name:"TextboxNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(!1),s=re(100),r=re(0),l=D(()=>{var d;const f=((d=t.data)==null?void 0:d.nodeType)??"textbox";return o.getDefinition(f)??null}),u=D(()=>{var f;return l.value?((f=ze[l.value.category])==null?void 0:f.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),c=D({get:()=>{var f;return((f=t.data)==null?void 0:f.text)??""},set:f=>{n.updateNodeData(t.id,{text:f})}}),p=D({get:()=>{var f;return((f=t.data)==null?void 0:f.height)??100},set:f=>{n.updateNodeData(t.id,{height:Math.max(60,Math.min(400,f))})}});function y(){i.value=!i.value}function b(f){var d;return((d=Pe[f])==null?void 0:d.color)??"var(--color-neutral-400)"}function S(f){f.preventDefault(),f.stopPropagation(),a.value=!0,s.value=p.value,r.value=f.clientY,document.addEventListener("mousemove",v),document.addEventListener("mouseup",x)}function v(f){if(!a.value)return;const d=f.clientY-r.value;p.value=s.value+d}function x(){a.value=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x)}const h=D(()=>{const f=c.value;return f?f.length>30?f.slice(0,30)+"...":f:"(empty)"});return(f,d)=>i.value?(z(),K("div",{key:0,class:ge(["textbox-node textbox-node-collapsed",{selected:t.selected}])},[g("div",n1,[te(N(mi),{size:14,class:"collapsed-icon"}),g("span",o1,be(h.value),1)]),te(N(ce),{id:"text",type:"source",position:N(ee).Right,style:Q({background:b("string")}),class:"port-handle"},null,8,["position","style"]),te(N(ce),{id:"trigger",type:"target",position:N(ee).Left,style:Q({background:b("trigger")}),class:"port-handle"},null,8,["position","style"]),g("button",{class:"expand-btn",onClick:de(y,["stop"])},[te(N(st),{size:12})])],2)):(z(),K("div",{key:1,class:ge(["textbox-node",{selected:t.selected,resizing:a.value}])},[g("div",{class:"node-header",style:Q({borderLeftColor:u.value})},[te(N(mi),{size:14,class:"header-icon"}),d[2]||(d[2]=g("span",{class:"node-title"},"Textbox",-1)),g("button",{class:"node-collapse-btn",onClick:de(y,["stop"])},[te(N(rt),{size:14})])],4),g("div",i1,[g("div",a1,[te(N(ce),{id:"trigger",type:"target",position:N(ee).Left,style:Q({background:b("trigger")}),class:"port-handle"},null,8,["position","style"]),d[3]||(d[3]=g("span",{class:"port-label"},"Trigger",-1))]),g("div",{class:"textarea-wrapper",style:Q({height:p.value+"px"})},[nn(g("textarea",{"onUpdate:modelValue":d[0]||(d[0]=m=>c.value=m),class:"text-input",placeholder:"Enter text...",onMousedown:d[1]||(d[1]=de(()=>{},["stop"]))},null,544),[[wo,c.value]])],4),g("div",{class:"resize-handle",onMousedown:S},[...d[4]||(d[4]=[g("div",{class:"resize-grip"},null,-1)])],32),g("div",s1,[d[5]||(d[5]=g("span",{class:"output-label"},"Output:",-1)),g("span",r1,be(h.value),1),te(N(ce),{id:"text",type:"source",position:N(ee).Right,style:Q({background:b("string")}),class:"port-handle"},null,8,["position","style"])])])],2))}}),u1=Ae(l1,[["__scopeId","data-v-885536a0"]]),d1={class:"handles-column handles-right"},c1={class:"node-content"},p1={key:0,class:"node-body"},f1={class:"value-display"},h1={class:"value-number"},g1={class:"range-controls"},m1={class:"range-row"},v1=["value"],y1={class:"range-row"},b1=["value"],w1=xe({__name:"KnobNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(null),s=D(()=>{var x,h;const v=((x=t.data)==null?void 0:x.nodeType)??"knob";return o.getDefinition(v)??((h=t.data)==null?void 0:h.definition)??null}),r=D(()=>{var v;return s.value?((v=ze[s.value.category])==null?void 0:v.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),l=D({get:()=>{var v;return((v=t.data)==null?void 0:v.value)??.5},set:v=>{n.updateNodeData(t.id,{value:Math.max(0,Math.min(1,v))})}}),u=D({get:()=>{var v;return((v=t.data)==null?void 0:v.min)??0},set:v=>{n.updateNodeData(t.id,{min:v})}}),c=D({get:()=>{var v;return((v=t.data)==null?void 0:v.max)??1},set:v=>{n.updateNodeData(t.id,{max:v})}}),p=D(()=>u.value+l.value*(c.value-u.value));function y(){i.value=!i.value}function b(v){var x;return((x=Pe[v])==null?void 0:x.color)??"var(--color-neutral-400)"}function S(v){l.value=v}return(v,x)=>(z(),K("div",{class:ge(["knob-node",{selected:t.selected,collapsed:i.value}])},[g("div",d1,[g("div",{class:"handle-slot",onMouseenter:x[0]||(x[0]=h=>a.value="value"),onMouseleave:x[1]||(x[1]=h=>a.value=null)},[te(N(ce),{id:"value",type:"source",position:N(ee).Right,style:Q({background:b("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value==="value"||t.selected}])},[x[7]||(x[7]=g("span",{class:"label-text"},"Value",-1)),g("span",{class:"label-type",style:Q({color:b("number")})},"float",4)],2)],32)]),g("div",c1,[g("div",{class:"node-header",style:Q({borderLeftColor:r.value})},[te(N(gu),{size:14,class:"header-icon"}),x[8]||(x[8]=g("span",{class:"node-title"},"Knob",-1)),g("button",{class:"node-collapse-btn",onClick:de(y,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?me("",!0):(z(),K("div",p1,[g("div",{class:"knob-container",onMousedown:x[2]||(x[2]=de(()=>{},["stop"]))},[te(Ke,{"model-value":l.value,min:0,max:1,step:.01,"accent-color":"#ff6b35",size:"medium","show-value":!1,"onUpdate:modelValue":S},null,8,["model-value"])],32),g("div",f1,[g("span",h1,be(p.value.toFixed(2)),1)]),g("div",g1,[g("div",m1,[x[9]||(x[9]=g("label",null,"Min",-1)),g("input",{type:"number",value:u.value,onInput:x[3]||(x[3]=h=>u.value=parseFloat(h.target.value)||0),onMousedown:x[4]||(x[4]=de(()=>{},["stop"]))},null,40,v1)]),g("div",y1,[x[10]||(x[10]=g("label",null,"Max",-1)),g("input",{type:"number",value:c.value,onInput:x[5]||(x[5]=h=>c.value=parseFloat(h.target.value)||1),onMousedown:x[6]||(x[6]=de(()=>{},["stop"]))},null,40,b1)])])]))])],2))}}),x1=Ae(w1,[["__scopeId","data-v-e35b1359"]]),S1={id:"knob",name:"Knob",version:"1.0.0",category:"inputs",description:"Rotary knob control (0-1)",icon:"disc",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"value",type:"slider",label:"Value",default:.5,exposable:!0,props:{min:0,max:1,step:.01}},{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}],info:{overview:"A rotary knob that outputs a numeric value within a configurable range. The default range is 0 to 1 but can be adjusted with the min and max controls. The knob value can be exposed for direct manipulation on the node surface.",tips:["Set custom min/max to output frequency or gain values directly without a downstream map-range.","Use the exposable option to adjust the knob without opening the node inspector.","Knobs work well for parameters you rotate slowly, while sliders suit fast sweeps."],pairsWith:["gain","filter","oscillator","map-range"]}},_1={id:"keyboard",name:"Keyboard",version:"1.0.0",category:"inputs",description:"Virtual piano keyboard for MIDI note input",icon:"piano",platforms:["web","electron"],inputs:[],outputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"noteOn",type:"trigger",label:"Note On"},{id:"gate",type:"boolean",label:"Gate"}],controls:[{id:"numKeys",type:"select",label:"Keys",default:"25",props:{options:["25","49","61","88"]}},{id:"startOctave",type:"number",label:"Start Octave",default:3,props:{min:0,max:8}},{id:"octaveShift",type:"number",label:"Key Shift",default:0,props:{min:-4,max:4}},{id:"includeBlackKeys",type:"toggle",label:"Black Keys",default:!0},{id:"velocitySensitive",type:"toggle",label:"Velocity",default:!0}],info:{overview:"Provides an on-screen piano keyboard that outputs MIDI note numbers, velocity, note-on triggers, and a gate signal. You can configure the key range, starting octave, and whether black keys are visible. It works standalone or alongside a physical MIDI controller.",tips:["Use the gate output to control an envelope node for shaping audio amplitude.","Set velocity sensitivity to false for uniform note-on values when precision is not needed.","Connect the note output to an oscillator frequency input through a MIDI-to-frequency expression."],pairsWith:["oscillator","envelope","midi-input","gate"]}},k1={class:"node-header"},C1={class:"handles-column"},N1=["onMouseenter"],$1={class:"label-text"},E1=20,M1=xe({__name:"KeyboardNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=re(null),i=re(new Set),a=re(!1),s=re(null),r=re({width:0,height:0}),l=re({x:0,y:0}),u=D({get:()=>{var R;return((R=t.data)==null?void 0:R._width)??400},set:R=>{n.updateNodeData(t.id,{_width:R})}}),c=D({get:()=>{var R;return((R=t.data)==null?void 0:R._height)??140},set:R=>{n.updateNodeData(t.id,{_height:R})}}),p=D(()=>{var R;return parseInt(((R=t.data)==null?void 0:R.numKeys)??"25")}),y=D(()=>{var R;return((R=t.data)==null?void 0:R.startOctave)??3}),b=D(()=>{var R;return((R=t.data)==null?void 0:R.octaveShift)??0}),S=D(()=>{var R;return((R=t.data)==null?void 0:R.includeBlackKeys)??!0}),v=D(()=>{var R;return((R=t.data)==null?void 0:R.velocitySensitive)??!0}),x=D(()=>u.value-18),h=D(()=>c.value-E1);function f(R,j){i.value.add(R),n.updateNodeData(t.id,{note:R,velocity:j,gate:!0,noteOn:!0}),setTimeout(()=>{n.updateNodeData(t.id,{noteOn:!1})},50)}function d(R){i.value.delete(R),i.value.size===0&&n.updateNodeData(t.id,{gate:!1})}function m(R){var j;return((j=Pe[R])==null?void 0:j.color)??"var(--color-neutral-400)"}function _(R,j){R.preventDefault(),R.stopPropagation(),a.value=!0,s.value=j,r.value={width:u.value,height:c.value},l.value={x:R.clientX,y:R.clientY},document.addEventListener("mousemove",C),document.addEventListener("mouseup",L)}function C(R){if(!a.value)return;const j=R.clientX-l.value.x,Y=R.clientY-l.value.y;(s.value==="right"||s.value==="corner")&&(u.value=Math.max(200,Math.min(1e3,r.value.width+j))),(s.value==="bottom"||s.value==="corner")&&(c.value=Math.max(100,Math.min(400,r.value.height+Y)))}function L(){a.value=!1,s.value=null,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",L)}return Ye(()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",L)}),(R,j)=>(z(),K("div",{class:ge(["keyboard-node",{selected:t.selected,resizing:a.value}]),style:Q({width:u.value+"px",height:c.value+"px"})},[g("div",k1,[te(N(bu),{size:14,class:"drag-icon"}),j[5]||(j[5]=g("span",{class:"header-label"},"KEYBOARD",-1))]),g("div",{class:"keyboard-wrapper",onMousedown:j[0]||(j[0]=de(()=>{},["stop"]))},[te(iu,{"num-keys":p.value,"start-octave":y.value,"octave-shift":b.value,"include-black-keys":S.value,"velocity-sensitive":v.value,width:x.value,height:h.value,onNoteOn:f,onNoteOff:d},null,8,["num-keys","start-octave","octave-shift","include-black-keys","velocity-sensitive","width","height"])],32),g("div",C1,[(z(),K(ke,null,De([{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"noteOn",type:"trigger",label:"Note On"},{id:"gate",type:"boolean",label:"Gate"}],Y=>g("div",{key:Y.id,class:"handle-slot",onMouseenter:O=>o.value=Y.id,onMouseleave:j[1]||(j[1]=O=>o.value=null)},[te(N(ce),{id:Y.id,type:"source",position:N(ee).Right,style:Q({background:m(Y.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label",{visible:o.value===Y.id||t.selected}])},[g("span",$1,be(Y.label),1)],2)],40,N1)),64))]),g("div",{class:"resize-handle resize-right",onMousedown:j[2]||(j[2]=Y=>_(Y,"right"))},null,32),g("div",{class:"resize-handle resize-bottom",onMousedown:j[3]||(j[3]=Y=>_(Y,"bottom"))},null,32),g("div",{class:"resize-handle resize-corner",onMousedown:j[4]||(j[4]=Y=>_(Y,"corner"))},null,32)],6))}}),T1=Ae(M1,[["__scopeId","data-v-ec958a64"]]),I1={id:"midi-input",name:"MIDI Input",version:"1.0.0",category:"inputs",description:"Receive MIDI messages from devices",icon:"music",platforms:["web","electron"],inputs:[],outputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"noteOn",type:"boolean",label:"Note On"},{id:"cc",type:"number",label:"CC Number"},{id:"ccValue",type:"number",label:"CC Value"},{id:"connected",type:"boolean",label:"Connected"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"channel",type:"number",label:"Channel (-1=all)",default:-1,props:{min:-1,max:15}}],info:{overview:"Receives MIDI messages from connected hardware or virtual MIDI devices. Outputs include note number, velocity, note on/off state, and control change values. Set the channel to -1 to listen on all channels at once.",tips:["Set the channel to -1 to receive messages from all MIDI channels simultaneously.","Use the CC Value output to map hardware knobs and faders to parameters in your flow.","Pair with a MIDI Output node to build MIDI processing chains."],pairsWith:["midi-output","gain","oscillator","expression","monitor"]}},P1={id:"webcam",name:"Webcam",version:"1.0.0",category:"inputs",description:"Capture video from camera",icon:"camera",platforms:["web","electron"],inputs:[],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"video",type:"video",label:"Video"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"device",type:"select",label:"Device",default:"default",props:{deviceType:"video-input"}}],info:{overview:"Streams live video from a camera and outputs it as a continuously updating texture. Also provides a raw video element and the current resolution. This is the primary node for getting real-time camera input into a visual flow.",tips:["Disable the node when not in use to release the camera and free system resources.","If you have multiple cameras, use the device selector to pick a specific one rather than relying on the default.","The video element output can be fed into both shader and blend nodes simultaneously for parallel processing."],pairsWith:["shader","blend","color-correction","displacement","texture-display"]}},A1=[S0,_0,S1,k0,C0,z0,t1,_1,I1,P1],D1={id:"console",name:"Console",version:"1.0.0",category:"debug",description:"Log value to console",icon:"terminal",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[],controls:[{id:"label",type:"text",label:"Label",default:"Log"},{id:"logOnChange",type:"toggle",label:"On Change",default:!0}],info:{overview:"Prints the incoming value to the browser developer console. Useful for quick debugging when you need to inspect raw data flowing through a connection. Set a label to distinguish logs from different Console nodes.",tips:['Disable "On Change" to stop continuous logging of high-frequency signals like audio or LFOs.',"Open the browser DevTools console to see the output since it does not display inside the node itself."],pairsWith:["monitor","json-parse","json-stringify","type-of"]}},R1={id:"monitor",name:"Monitor",version:"1.0.0",category:"debug",description:"Display input values",icon:"eye",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"value",type:"any",label:"Pass"}],controls:[],info:{overview:"Displays the current value of any input directly on the node. It also passes the value through to its output, so you can insert it inline without breaking a connection. The simplest way to see what a signal is doing.",tips:["Insert a Monitor between two connected nodes to inspect values without rewiring anything.","Works with any data type including numbers, strings, booleans, and objects."],pairsWith:["console","graph","oscilloscope","changed","type-of"]}},z1={class:"handle-left"},V1={class:"handle-right"},L1={class:"node-content"},O1={class:"monitor-value"},B1=xe({__name:"MonitorNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var v;return((v=ze.debug)==null?void 0:v.color)??"var(--color-neutral-400)"}),a=re(!1),s=D(()=>{var v;return((v=t.data)==null?void 0:v.width)??180}),r=D(()=>{var v;return((v=t.data)==null?void 0:v.height)??120}),l=re([]),u=D(()=>{var f,d;const v=n.nodeMetrics.get(t.id),x=(f=v==null?void 0:v.outputValues)==null?void 0:f.display,h=(d=v==null?void 0:v.outputValues)==null?void 0:d.value;return x??h??null}),c=D(()=>{const v=u.value;return v==null?"":typeof v=="number"?Number.isInteger(v)?v.toString():v.toFixed(4):typeof v=="boolean"?v?"true":"false":typeof v=="string"?v:Array.isArray(v)?JSON.stringify(v,null,2):v instanceof WebGLTexture?"[Texture]":typeof v=="object"?JSON.stringify(v,null,2):String(v)}),p=D(()=>{const v=u.value;return v==null?"null":typeof v=="number"?"number":typeof v=="boolean"?"boolean":typeof v=="string"?"string":Array.isArray(v)?"array":v instanceof WebGLTexture?"texture":typeof v=="object"?"object":"unknown"});function y(v){var x;return((x=Pe[v])==null?void 0:x.color)??"var(--color-neutral-400)"}function b(){l.value=[];const v=n.nodeMetrics.get(t.id);v&&n.updateNodeMetrics(t.id,{outputValues:{...v.outputValues,display:null,value:null}})}function S(v){v.preventDefault(),v.stopPropagation(),a.value=!0;const x=v.clientX,h=v.clientY,f=s.value,d=r.value,m=C=>{const L=C.clientX-x,R=C.clientY-h,j=Math.max(140,f+L),Y=Math.max(80,d+R);o.updateNodeData(t.id,{width:j,height:Y})},_=()=>{a.value=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",_)}return(v,x)=>(z(),K("div",{class:ge(["monitor-node",{selected:t.selected,resizing:a.value}]),style:Q({width:`${s.value}px`})},[g("div",z1,[te(N(ce),{id:"value",type:"target",position:N(ee).Left,style:Q({background:y("any")}),class:"port-handle"},null,8,["position","style"])]),g("div",V1,[te(N(ce),{id:"value",type:"source",position:N(ee).Right,style:Q({background:y("any")}),class:"port-handle"},null,8,["position","style"])]),g("div",L1,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(Rs),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),x[1]||(x[1]=g("span",{class:"node-title"},"Monitor",-1)),g("button",{class:"clear-btn",title:"Clear",onClick:de(b,["stop"]),onMousedown:x[0]||(x[0]=de(()=>{},["stop"]))},[te(N(Vl),{size:12})],32)],4),g("div",{class:ge(["monitor-display",p.value]),style:Q({height:`${r.value-36}px`})},[g("pre",O1,be(c.value),1)],6),g("div",{class:"resize-handle",onMousedown:S},null,32)])],6))}}),F1=Ae(B1,[["__scopeId","data-v-db31ba46"]]),W1={id:"oscilloscope",name:"Oscilloscope",version:"1.0.0",category:"debug",description:"Visualize signal waveform over time",icon:"activity",platforms:["web","electron"],inputs:[{id:"signal",type:"number",label:"Signal"},{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"timeScale",type:"slider",label:"Time Scale",default:1,props:{min:.25,max:4,step:.25}},{id:"amplitude",type:"slider",label:"Amplitude",default:1,props:{min:.1,max:2,step:.1}}],info:{overview:"Draws a scrolling waveform of a numeric signal or audio input over time. Use it to inspect the shape and timing of any continuous signal. Accepts both plain number values and audio connections.",tips:["Increase the time scale to see more of the waveform history in the display.","Lower the amplitude if the signal clips beyond the visible area.","Connect the audio input for Web Audio signals and the signal input for regular numeric streams."],pairsWith:["lfo","oscillator","audio-analyzer","equalizer","envelope"]}},U1={class:"handles-column handles-left"},q1={class:"handle-slot"},H1={class:"handle-slot"},Y1={class:"node-content"},G1={class:"scope-display"},j1={class:"scope-controls"},X1={class:"control-row"},Z1=["value"],K1={class:"control-row"},J1=["value"],Cs=128,Q1=xe({__name:"OscilloscopeNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var h;return((h=ze.debug)==null?void 0:h.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=re([]),l=D(()=>{var h;return((h=t.data)==null?void 0:h.timeScale)??1}),u=D(()=>{var h;return((h=t.data)==null?void 0:h.amplitude)??1});function c(h){o.updateNodeData(t.id,{timeScale:h})}function p(h){o.updateNodeData(t.id,{amplitude:h})}let y=null;function b(){var R,j,Y;if(!a.value||!s.value)return;const h=a.value.width,f=a.value.height,d=s.value;d.fillStyle="#0a0a0a",d.fillRect(0,0,h,f),d.strokeStyle="#1a3a1a",d.lineWidth=1,d.beginPath(),d.moveTo(0,f/2),d.lineTo(h,f/2),d.stroke();for(let O=0;O<8;O++){const k=h/8*O;d.beginPath(),d.moveTo(k,0),d.lineTo(k,f),d.stroke()}const m=n.nodeMetrics.get(t.id),_=((R=m==null?void 0:m.outputValues)==null?void 0:R._mode)??"signal",C=(j=m==null?void 0:m.outputValues)==null?void 0:j._input_waveform,L=((Y=m==null?void 0:m.outputValues)==null?void 0:Y._input_signal)??0;if(_==="audio"&&C&&C.length>0){d.strokeStyle="#22c55e",d.lineWidth=2,d.beginPath();const O=h/C.length;for(let k=0;k<C.length;k++){const J=k*O,w=f/2-C[k]*u.value*(f/2-10);k===0?d.moveTo(J,w):d.lineTo(J,w)}d.stroke(),d.shadowColor="#22c55e",d.shadowBlur=4,d.stroke(),d.shadowBlur=0,d.fillStyle="#22c55e",d.font="10px monospace",d.fillText("AUDIO",4,12)}else{if(r.value.push(L),r.value.length>Cs&&r.value.shift(),r.value.length>1){d.strokeStyle="#22c55e",d.lineWidth=2,d.beginPath();const O=r.value,k=h/(Cs*l.value);for(let J=0;J<O.length;J++){const w=J*k,I=f/2-O[J]*u.value*(f/2-10);J===0?d.moveTo(w,I):d.lineTo(w,I)}d.stroke(),d.shadowColor="#22c55e",d.shadowBlur=4,d.stroke(),d.shadowBlur=0}d.fillStyle="#22c55e",d.font="10px monospace",d.fillText(`${L.toFixed(3)}`,4,12)}y=requestAnimationFrame(b)}function S(){y===null&&b()}function v(){y!==null&&(cancelAnimationFrame(y),y=null)}_e(()=>n.isRunning,h=>{h?S():v()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?S():s.value&&(s.value.fillStyle="#0a0a0a",s.value.fillRect(0,0,a.value.width,a.value.height),s.value.fillStyle="#333",s.value.font="10px monospace",s.value.fillText("NO SIGNAL",50,50)))}),Ye(()=>{v()});function x(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}return(h,f)=>(z(),K("div",{class:ge(["oscilloscope-node",{selected:t.selected}])},[g("div",U1,[g("div",q1,[te(N(ce),{id:"signal",type:"target",position:N(ee).Left,style:Q({background:x("number")}),class:"port-handle"},null,8,["position","style"]),f[4]||(f[4]=g("span",{class:"port-label"},"SIG",-1))]),g("div",H1,[te(N(ce),{id:"audio",type:"target",position:N(ee).Left,style:Q({background:x("audio")}),class:"port-handle"},null,8,["position","style"]),f[5]||(f[5]=g("span",{class:"port-label"},"AUD",-1))])]),g("div",Y1,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(Rs),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),f[6]||(f[6]=g("span",{class:"node-title"},"Scope",-1))],4),g("div",G1,[g("canvas",{ref_key:"canvas",ref:a,width:"180",height:"100",class:"scope-canvas"},null,512)]),g("div",j1,[g("div",X1,[f[7]||(f[7]=g("label",null,"TIME",-1)),g("input",{type:"range",value:l.value,min:"0.25",max:"4",step:"0.25",onInput:f[0]||(f[0]=d=>c(parseFloat(d.target.value))),onMousedown:f[1]||(f[1]=de(()=>{},["stop"]))},null,40,Z1)]),g("div",K1,[f[8]||(f[8]=g("label",null,"AMP",-1)),g("input",{type:"range",value:u.value,min:"0.1",max:"2",step:"0.1",onInput:f[2]||(f[2]=d=>p(parseFloat(d.target.value))),onMousedown:f[3]||(f[3]=de(()=>{},["stop"]))},null,40,J1)])])])],2))}}),ew=Ae(Q1,[["__scopeId","data-v-e4c9663a"]]),tw={id:"graph",name:"Graph",version:"1.0.0",category:"debug",description:"Plot X/Y values with dynamic point inputs",icon:"line-chart",platforms:["web","electron"],inputs:[{id:"x0",type:"number",label:"X"},{id:"y0",type:"number",label:"Y"}],outputs:[],controls:[{id:"pointCount",type:"number",label:"Points",default:1,props:{min:1,max:8}},{id:"displayMode",type:"select",label:"Mode",default:"line",props:{options:["line","scatter"]}},{id:"showGrid",type:"toggle",label:"Grid",default:!0},{id:"autoScale",type:"toggle",label:"Auto Scale",default:!0}],info:{overview:"Plots one or more X/Y data points on a 2D chart. Supports line and scatter modes. Use it to visualize the relationship between two signals or to trace a path over time.",tips:["Increase the point count control to add more input pairs for comparing multiple data series.","Disable auto scale and set manual axis ranges when you need a fixed reference frame.","Feed an LFO into X and another into Y to visualize Lissajous figures."],pairsWith:["oscillator","lfo","smooth","map-range","xy-pad"]}},nw={class:"handles-column handles-left"},ow={class:"handle-slot"},iw={class:"port-label"},aw={class:"handle-slot"},sw={class:"port-label"},rw={class:"node-content"},lw={class:"point-controls"},uw=["disabled"],dw={class:"point-count"},cw=["disabled"],pw={class:"graph-display"},fw={class:"graph-controls"},hw={class:"control-row"},gw=["value"],mw={class:"control-row"},vw=["checked"],yw=["checked"],bw=50,ww=xe({__name:"GraphNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var m;return((m=ze.debug)==null?void 0:m.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var m;return((m=t.data)==null?void 0:m.pointCount)??3}),l=D(()=>{var m;return((m=t.data)==null?void 0:m.displayMode)??"line"}),u=D(()=>{var m;return((m=t.data)==null?void 0:m.showGrid)??!0}),c=D(()=>{var m;return((m=t.data)==null?void 0:m.autoScale)??!0}),p=re(new Map);let y=null;function b(m,_){o.updateNodeData(t.id,{[m]:_})}function S(){r.value<8&&b("pointCount",r.value+1)}function v(){r.value>1&&(b("pointCount",r.value-1),p.value.delete(r.value-1))}function x(){var $,V;if(!a.value||!s.value)return;const m=a.value.width,_=a.value.height,C=s.value;C.fillStyle="#0f0f0f",C.fillRect(0,0,m,_);const L=n.nodeMetrics.get(t.id),R=[];for(let M=0;M<r.value;M++){const U=(($=L==null?void 0:L.outputValues)==null?void 0:$[`_point${M}_x`])??0,W=((V=L==null?void 0:L.outputValues)==null?void 0:V[`_point${M}_y`])??0;R.push({x:U,y:W,index:M}),p.value.has(M)||p.value.set(M,[]);const ne=p.value.get(M);ne.push({x:U,y:W}),ne.length>bw&&ne.shift()}let j=0,Y=1,O=0,k=1;if(c.value&&R.length>0){const M=Array.from(p.value.values()).flat();if(M.length>0){j=Math.min(...M.map(ne=>ne.x)),Y=Math.max(...M.map(ne=>ne.x)),O=Math.min(...M.map(ne=>ne.y)),k=Math.max(...M.map(ne=>ne.y));const U=(Y-j)*.1||.5,W=(k-O)*.1||.5;j-=U,Y+=U,O-=W,k+=W}}const J=M=>(M-j)/(Y-j)*m,w=M=>_-(M-O)/(k-O)*_;if(u.value){C.strokeStyle="#1a2a1a",C.lineWidth=1;for(let M=0;M<=8;M++){const U=m/8*M;C.beginPath(),C.moveTo(U,0),C.lineTo(U,_),C.stroke()}for(let M=0;M<=6;M++){const U=_/6*M;C.beginPath(),C.moveTo(0,U),C.lineTo(m,U),C.stroke()}if(C.strokeStyle="#2a4a2a",C.lineWidth=1.5,j<=0&&Y>=0){const M=J(0);C.beginPath(),C.moveTo(M,0),C.lineTo(M,_),C.stroke()}if(O<=0&&k>=0){const M=w(0);C.beginPath(),C.moveTo(0,M),C.lineTo(m,M),C.stroke()}}const I=["#22c55e","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];if(l.value==="line")for(let M=0;M<r.value;M++){const U=p.value.get(M)??[];if(!(U.length<2)){C.strokeStyle=I[M%I.length],C.lineWidth=2,C.beginPath();for(let W=0;W<U.length;W++){const ne=J(U[W].x),ae=w(U[W].y);W===0?C.moveTo(ne,ae):C.lineTo(ne,ae)}C.stroke()}}else if(l.value==="scatter")for(let M=0;M<r.value;M++){const U=p.value.get(M)??[];C.fillStyle=I[M%I.length];for(let W=0;W<U.length;W++){const ne=(W+1)/U.length;C.globalAlpha=ne*.8;const ae=J(U[W].x),pe=w(U[W].y);C.beginPath(),C.arc(ae,pe,3,0,Math.PI*2),C.fill()}C.globalAlpha=1}for(let M=0;M<R.length;M++){const U=J(R[M].x),W=w(R[M].y);C.fillStyle=I[M%I.length],C.shadowColor=I[M%I.length],C.shadowBlur=8,C.beginPath(),C.arc(U,W,5,0,Math.PI*2),C.fill(),C.shadowBlur=0,C.fillStyle="#fff",C.beginPath(),C.arc(U,W,2,0,Math.PI*2),C.fill()}C.fillStyle="#666",C.font="9px monospace",C.fillText(`X: ${j.toFixed(1)}..${Y.toFixed(1)}`,4,10),C.fillText(`Y: ${O.toFixed(1)}..${k.toFixed(1)}`,4,22),y=requestAnimationFrame(x)}function h(){y===null&&x()}function f(){y!==null&&(cancelAnimationFrame(y),y=null)}_e(()=>n.isRunning,m=>{m?h():f()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?h():s.value&&(s.value.fillStyle="#0f0f0f",s.value.fillRect(0,0,a.value.width,a.value.height),s.value.fillStyle="#333",s.value.font="10px monospace",s.value.fillText("NO DATA",70,60)))}),Ye(()=>{f()});function d(m){var _;return((_=Pe[m])==null?void 0:_.color)??"var(--color-neutral-400)"}return(m,_)=>(z(),K("div",{class:ge(["graph-node",{selected:t.selected}])},[g("div",nw,[(z(!0),K(ke,null,De(r.value,C=>(z(),K(ke,{key:`point-${C}`},[g("div",ow,[te(N(ce),{id:`x${C-1}`,type:"target",position:N(ee).Left,style:Q({background:d("number")}),class:"port-handle"},null,8,["id","position","style"]),g("span",iw,"X"+be(C),1)]),g("div",aw,[te(N(ce),{id:`y${C-1}`,type:"target",position:N(ee).Left,style:Q({background:d("number")}),class:"port-handle"},null,8,["id","position","style"]),g("span",sw,"Y"+be(C),1)])],64))),128))]),g("div",rw,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(wu),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),_[8]||(_[8]=g("span",{class:"node-title"},"Graph",-1)),g("div",lw,[g("button",{class:"point-btn",disabled:r.value<=1,onClick:de(v,["stop"]),onMousedown:_[0]||(_[0]=de(()=>{},["stop"]))},[te(N(_u),{size:12})],40,uw),g("span",dw,be(r.value),1),g("button",{class:"point-btn",disabled:r.value>=8,onClick:de(S,["stop"]),onMousedown:_[1]||(_[1]=de(()=>{},["stop"]))},[te(N(zs),{size:12})],40,cw)])],4),g("div",pw,[g("canvas",{ref_key:"canvas",ref:a,width:"200",height:"120",class:"graph-canvas"},null,512)]),g("div",fw,[g("div",hw,[_[10]||(_[10]=g("label",null,"MODE",-1)),g("select",{value:l.value,onChange:_[2]||(_[2]=C=>b("displayMode",C.target.value)),onMousedown:_[3]||(_[3]=de(()=>{},["stop"]))},[..._[9]||(_[9]=[g("option",{value:"line"}," Line ",-1),g("option",{value:"scatter"}," Scatter ",-1)])],40,gw)]),g("div",mw,[g("label",{class:"toggle-label",onMousedown:_[5]||(_[5]=de(()=>{},["stop"]))},[g("input",{type:"checkbox",checked:u.value,onChange:_[4]||(_[4]=C=>b("showGrid",C.target.checked))},null,40,vw),_[11]||(_[11]=gi(" Grid ",-1))],32),g("label",{class:"toggle-label",onMousedown:_[7]||(_[7]=de(()=>{},["stop"]))},[g("input",{type:"checkbox",checked:c.value,onChange:_[6]||(_[6]=C=>b("autoScale",C.target.checked))},null,40,yw),_[12]||(_[12]=gi(" Auto ",-1))],32)])])])],2))}}),xw=Ae(ww,[["__scopeId","data-v-abffbb02"]]),Sw={id:"equalizer",name:"Equalizer",version:"1.0.0",category:"debug",description:"Visualize audio frequency spectrum as bars",icon:"bar-chart-3",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"barCount",type:"slider",label:"Bars",default:16,props:{min:8,max:32,step:4}},{id:"colorMode",type:"select",label:"Color",default:"gradient",props:{options:["gradient","spectrum","solid"]}},{id:"smoothing",type:"slider",label:"Smooth",default:.8,props:{min:0,max:.95,step:.05}}],info:{overview:"Shows the frequency spectrum of an audio signal as animated bars. Connect any audio source to see a real-time breakdown of low, mid, and high frequencies. Helpful for verifying filter or EQ behavior at a glance.",tips:["Lower the smoothing value to make the bars react faster to transients.",'Use "spectrum" color mode to map bar color to frequency, making it easier to spot dominant bands.'],pairsWith:["audio-analyzer","filter","parametric-eq","audio-input","oscilloscope"]}},_w={class:"handles-column handles-left"},kw={class:"handle-slot"},Cw={class:"node-content"},Nw={class:"eq-display"},$w={class:"eq-controls"},Ew={class:"control-row"},Mw=["value"],Tw={class:"value-label"},Iw={class:"control-row"},Pw=["value"],Aw=xe({__name:"EqualizerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var f;return((f=ze.debug)==null?void 0:f.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var f;return((f=t.data)==null?void 0:f.barCount)??16}),l=D(()=>{var f;return((f=t.data)==null?void 0:f.colorMode)??"gradient"}),u=D(()=>{var f;return((f=t.data)==null?void 0:f.smoothing)??.8}),c=re([]);let p=null;function y(f,d){o.updateNodeData(t.id,{[f]:d})}function b(){var O;if(!a.value||!s.value)return;const f=a.value.width,d=a.value.height,m=s.value;m.fillStyle="#0a0a0a",m.fillRect(0,0,f,d);const _=n.nodeMetrics.get(t.id),C=(O=_==null?void 0:_.outputValues)==null?void 0:O._fft_data;if(!C||C.length===0){m.fillStyle="#1a1a1a";const k=(f-(r.value+1)*2)/r.value;for(let J=0;J<r.value;J++){const w=2+J*(k+2);m.fillRect(w,d-10,k,8)}p=requestAnimationFrame(b);return}c.value.length!==r.value&&(c.value=new Array(r.value).fill(0));const L=Math.floor(C.length/r.value),R=[];for(let k=0;k<r.value;k++){let J=0;const w=k*L,I=Math.min(w+L,C.length);for(let $=w;$<I;$++){const V=(C[$]+100)/100;J+=Math.max(0,Math.min(1,V))}R.push(J/L)}for(let k=0;k<r.value;k++){const J=R[k]??0;c.value[k]=c.value[k]*u.value+J*(1-u.value)}const j=(f-(r.value+1)*2)/r.value,Y=d-8;for(let k=0;k<r.value;k++){const J=c.value[k],w=Math.max(4,J*Y),I=2+k*(j+2),$=d-w-2;if(l.value==="gradient"){const V=120-J*120;m.fillStyle=`hsl(${V}, 80%, 50%)`}else if(l.value==="spectrum"){const V=k/r.value*300;m.fillStyle=`hsl(${V}, 80%, 55%)`}else m.fillStyle="#22d3ee";m.beginPath(),m.roundRect(I,$,j,w,[2,2,0,0]),m.fill(),J>.5&&(m.shadowColor=m.fillStyle,m.shadowBlur=J*10,m.fill(),m.shadowBlur=0)}p=requestAnimationFrame(b)}function S(){p===null&&b()}function v(){p!==null&&(cancelAnimationFrame(p),p=null)}function x(){if(!a.value||!s.value)return;const f=a.value.width,d=a.value.height,m=s.value;m.fillStyle="#0a0a0a",m.fillRect(0,0,f,d),m.fillStyle="#1a1a1a";const _=(f-(r.value+1)*2)/r.value;for(let C=0;C<r.value;C++){const L=2+C*(_+2);m.fillRect(L,d-10,_,8)}m.fillStyle="#333",m.font="10px monospace",m.textAlign="center",m.fillText("NO SIGNAL",f/2,d/2),m.textAlign="left"}_e(()=>n.isRunning,f=>{s.value&&(v(),f?S():x())}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?S():x())}),Ye(()=>{v()});function h(f){var d;return((d=Pe[f])==null?void 0:d.color)??"var(--color-neutral-400)"}return(f,d)=>(z(),K("div",{class:ge(["equalizer-node",{selected:t.selected}])},[g("div",_w,[g("div",kw,[te(N(ce),{id:"audio",type:"target",position:N(ee).Left,style:Q({background:h("audio")}),class:"port-handle"},null,8,["position","style"]),d[4]||(d[4]=g("span",{class:"port-label"},"IN",-1))])]),g("div",Cw,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(du),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),d[5]||(d[5]=g("span",{class:"node-title"},"EQ",-1))],4),g("div",Nw,[g("canvas",{ref_key:"canvas",ref:a,width:"180",height:"80",class:"eq-canvas"},null,512)]),g("div",$w,[g("div",Ew,[d[6]||(d[6]=g("label",null,"BARS",-1)),g("input",{type:"range",value:r.value,min:"8",max:"32",step:"4",onInput:d[0]||(d[0]=m=>y("barCount",parseInt(m.target.value))),onMousedown:d[1]||(d[1]=de(()=>{},["stop"]))},null,40,Mw),g("span",Tw,be(r.value),1)]),g("div",Iw,[d[8]||(d[8]=g("label",null,"COLOR",-1)),g("select",{value:l.value,onChange:d[2]||(d[2]=m=>y("colorMode",m.target.value)),onMousedown:d[3]||(d[3]=de(()=>{},["stop"]))},[...d[7]||(d[7]=[g("option",{value:"gradient"}," Gradient ",-1),g("option",{value:"spectrum"}," Spectrum ",-1),g("option",{value:"solid"}," Solid ",-1)])],40,Pw)])])])],2))}}),Dw=Ae(Aw,[["__scopeId","data-v-fe68f897"]]),Rw=[D1,R1,W1,tw,Sw],zw={id:"add",name:"Add",version:"1.0.0",category:"math",description:"Add two numbers",icon:"plus",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[],info:{overview:"Adds two numbers together and outputs the sum. This is one of the core arithmetic operations. Use it to combine values, apply offsets, or accumulate totals.",tips:["Chain with a constant node to add a fixed offset to a signal.","Pair with multiply to build linear transformations (multiply then add)."],pairsWith:["subtract","multiply","constant","smooth"]}},Vw={id:"subtract",name:"Subtract",version:"1.0.0",category:"math",description:"Subtract two numbers",icon:"minus",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[],info:{overview:"Subtracts the second input from the first and outputs the difference. This is one of the core arithmetic operations. Use it to compute offsets, deltas, or distances between values.",tips:["Follow with abs to get the unsigned distance between two values.","Use to compute frame-to-frame deltas by subtracting the previous value from the current."],pairsWith:["add","abs","multiply","smooth"]}},Lw={id:"multiply",name:"Multiply",version:"1.0.0",category:"math",description:"Multiply two numbers",icon:"x",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[],info:{overview:"Multiplies two numbers together and outputs the product. This is one of the core arithmetic operations. Use it for scaling values, applying gain, or computing areas and rates.",tips:["Multiply by -1 to negate a signal without using a subtract node.","Chain with add to build linear equations of the form (a * x + b)."],pairsWith:["add","divide","constant","clamp"]}},Ow={id:"divide",name:"Divide",version:"1.0.0",category:"math",description:"Divide two numbers",icon:"divide",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[],info:{overview:"Divides the first input by the second and outputs the quotient. This is standard numeric division. Be aware that dividing by zero will produce Infinity or NaN.",tips:["Use a compare node to guard against division by zero before this node.","Combine with modulo to get both the quotient and remainder of a division."],pairsWith:["multiply","modulo","compare","clamp"]}},Bw={id:"clamp",name:"Clamp",version:"1.0.0",category:"math",description:"Clamp a value between min and max",icon:"shrink",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}],info:{overview:"Constrains a value to stay within a minimum and maximum range. Values below the minimum are raised to the minimum, and values above the maximum are lowered to the maximum. Values already within range pass through unchanged.",tips:["Place after map-range to ensure the output never exceeds the target bounds.","Use with lerp to keep interpolation parameters in the 0 to 1 range."],pairsWith:["map-range","lerp","smooth","in-range","wrap"]}},Fw={id:"abs",name:"Absolute",version:"1.0.0",category:"math",description:"Get absolute value",icon:"flip-horizontal",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[],info:{overview:"Returns the absolute value of the input, converting negative numbers to positive. Zero and positive values pass through unchanged. Commonly used to get magnitude without regard to sign.",tips:["Use after subtract to get the distance between two values.","Combine with compare to check if a value exceeds a threshold in either direction."],pairsWith:["subtract","compare","clamp","smooth"]}},Ww={id:"random",name:"Random",version:"1.0.0",category:"math",description:"Generate random number",icon:"shuffle",platforms:["web","electron"],inputs:[{id:"seed",type:"number",label:"Seed"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}],info:{overview:"Generates a random number within a configurable minimum and maximum range. An optional seed input allows for reproducible random sequences. Each evaluation produces a new random value unless the seed is held constant.",tips:["Set a fixed seed to get the same random sequence every time for testing.","Use clamp after this node if downstream logic requires strict bounds."],pairsWith:["clamp","quantize","map-range","trigger"]}},Uw={id:"map-range",name:"Map Range",version:"1.0.0",category:"math",description:"Remap a value from one range to another",icon:"arrow-right-left",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value",required:!0}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"inMin",type:"number",label:"In Min",default:0},{id:"inMax",type:"number",label:"In Max",default:1},{id:"outMin",type:"number",label:"Out Min",default:0},{id:"outMax",type:"number",label:"Out Max",default:100}],info:{overview:"Rescales a value from one numeric range to another. For example, an input in the 0-1 range can be mapped to 0-100. The mapping is linear and does not clamp, so values outside the input range will extrapolate.",tips:["Follow with a clamp node if you need to prevent extrapolation beyond the output range.","Use remap instead if you need built-in clamping and easing options."],pairsWith:["clamp","remap","lerp","smooth","in-range"]}},qw={id:"smooth",name:"Smooth",version:"1.0.0",category:"math",description:"Smooth value changes over time",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"factor",type:"slider",label:"Factor",default:.1,props:{min:.01,max:1,step:.01}}],info:{overview:"Applies exponential smoothing to a value, gradually moving the output toward the input over time. Lower factor values produce slower, smoother transitions while higher values track the input more closely. Useful for dampening noisy or jittery signals.",tips:["Start with a factor around 0.1 and adjust based on how responsive you need the output to be.","Place after any sensor or rapidly changing input to remove noise."],pairsWith:["lerp","clamp","map-range","lfo","remap"]}},Hw={id:"trig",name:"Trig",version:"1.0.0",category:"math",description:"Trigonometric functions",icon:"waves",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"function",type:"select",label:"Function",default:"sin",props:{options:["sin","cos","tan","asin","acos","atan","sinh","cosh","tanh"]}},{id:"degrees",type:"toggle",label:"Use Degrees",default:!1}],info:{overview:"Applies trigonometric functions including sin, cos, tan, and their inverses and hyperbolic variants. The input is treated as radians by default, but a toggle lets you work in degrees instead. Useful for circular motion, oscillation, and angle calculations.",tips:["Enable Use Degrees if your angle source provides values in degrees rather than radians.","Feed a time-based ramp into sin or cos to generate smooth oscillations."],pairsWith:["multiply","add","time","lfo","power"]}},Yw={id:"power",name:"Power/Root",version:"1.0.0",category:"math",description:"Power, root, and logarithm functions",icon:"superscript",platforms:["web","electron"],inputs:[{id:"base",type:"number",label:"Base"},{id:"exponent",type:"number",label:"Exponent"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"operation",type:"select",label:"Operation",default:"Power",props:{options:["Power","Sqrt","Cbrt","Log","Log10","Ln","Exp"]}},{id:"exponent",type:"number",label:"Exponent",default:2}],info:{overview:"Applies power, root, and logarithmic functions to numeric values. Includes power, square root, cube root, natural log, log base 10, and exponential operations. Select the desired operation from the dropdown.",tips:["Use Sqrt for distance calculations after summing squared components.","Apply Log or Ln to compress large value ranges into smaller ones."],pairsWith:["multiply","abs","map-range","trig"]}},Gw={id:"vector-math",name:"Vector Math",version:"1.0.0",category:"math",description:"3D vector operations",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"ax",type:"number",label:"A.x"},{id:"ay",type:"number",label:"A.y"},{id:"az",type:"number",label:"A.z"},{id:"bx",type:"number",label:"B.x"},{id:"by",type:"number",label:"B.y"},{id:"bz",type:"number",label:"B.z"}],outputs:[{id:"x",type:"number",label:"X"},{id:"y",type:"number",label:"Y"},{id:"z",type:"number",label:"Z"},{id:"magnitude",type:"number",label:"Magnitude"}],controls:[{id:"operation",type:"select",label:"Operation",default:"Add",props:{options:["Add","Subtract","Cross","Normalize","Scale","Lerp","Dot"]}},{id:"scalar",type:"number",label:"Scalar",default:1}],info:{overview:"Performs 3D vector operations on two input vectors, including addition, subtraction, cross product, normalization, scaling, interpolation, and dot product. Also outputs the magnitude of the result. Select the operation from the dropdown.",tips:["Use Normalize to get a unit-length direction vector from any input.","Use Dot to measure the alignment between two direction vectors."],pairsWith:["add","multiply","lerp","trig","smooth"]}},jw={id:"modulo",name:"Modulo",version:"1.0.0",category:"math",description:"Modulo (remainder) operation",icon:"percent",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"},{id:"divisor",type:"number",label:"Divisor"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"divisor",type:"number",label:"Divisor",default:1},{id:"mode",type:"select",label:"Mode",default:"Standard",props:{options:["Standard","Positive","Floor"]}}],info:{overview:"Computes the remainder after dividing a value by a divisor. Supports standard, positive-only, and floor modes for different remainder conventions. Useful for creating repeating patterns and cyclic behavior from increasing values.",tips:["Use Positive mode to ensure the result is always non-negative.","Combine with time to create looping counters or repeating animations."],pairsWith:["divide","wrap","time","quantize"]}},Xw={id:"lerp",name:"Lerp",version:"1.0.0",category:"math",description:"Linear interpolation between two values",icon:"git-commit-horizontal",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"},{id:"t",type:"number",label:"T"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[],tags:["lerp","interpolate","blend","mix"],info:{overview:"Performs linear interpolation between values A and B using parameter T. When T is 0, the output equals A. When T is 1, the output equals B. Values of T between 0 and 1 produce a proportional blend.",tips:["Clamp T to the 0-1 range to prevent extrapolation beyond A and B.","Feed an LFO or time-based signal into T for animated transitions."],pairsWith:["clamp","smooth","map-range","lfo","time"]}},Zw={id:"step",name:"Step",version:"1.0.0",category:"math",description:"Returns 0 if value < edge, otherwise 1",icon:"stairs",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"edge",type:"number",label:"Edge",default:.5}],tags:["step","threshold","binary","heaviside"],info:{overview:"Outputs 0 when the input is below the edge value and 1 when it is at or above the edge. This is a hard threshold function, also known as the Heaviside step. Useful for converting continuous signals into binary on/off states.",tips:["Use smoothstep instead if you need a gradual transition around the threshold.","Feed the output into a gate or switch to control flow based on a threshold."],pairsWith:["smoothstep","compare","gate","quantize"]}},Kw={id:"smoothstep",name:"Smoothstep",version:"1.0.0",category:"math",description:"Hermite interpolation between 0 and 1",icon:"wave",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"edge0",type:"number",label:"Edge 0",default:0},{id:"edge1",type:"number",label:"Edge 1",default:1}],tags:["smoothstep","ease","hermite","smooth"],info:{overview:"Applies Hermite interpolation to produce a smooth S-curve between 0 and 1. Values below edge0 output 0, values above edge1 output 1, and values between are smoothly interpolated. This is the classic smoothstep function from shader programming.",tips:["Use as a softer alternative to step when you want gradual transitions instead of hard cutoffs.","Set edge0 and edge1 to control where the transition begins and ends."],pairsWith:["step","lerp","remap","clamp","smooth"]}},Jw={id:"remap",name:"Remap",version:"1.0.0",category:"math",description:"Remap value with clamping and easing",icon:"sliders-horizontal",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"inMin",type:"number",label:"In Min",default:0},{id:"inMax",type:"number",label:"In Max",default:1},{id:"outMin",type:"number",label:"Out Min",default:0},{id:"outMax",type:"number",label:"Out Max",default:100},{id:"clamp",type:"toggle",label:"Clamp",default:!0},{id:"easing",type:"select",label:"Easing",default:"linear",props:{options:["linear","ease-in","ease-out","ease-in-out"]}}],tags:["remap","map","range","scale","easing"],info:{overview:"Rescales a value from one range to another with optional clamping and easing. Unlike map-range, this node can clamp the output to the target range and apply ease-in, ease-out, or ease-in-out curves. Good for shaping sensor data or animation curves.",tips:["Enable Clamp to prevent output from exceeding the target range.","Use ease-in-out for natural-feeling transitions between value ranges."],pairsWith:["map-range","smooth","lerp","clamp","smoothstep"]}},Qw={id:"quantize",name:"Quantize",version:"1.0.0",category:"math",description:"Round value to nearest step",icon:"grid",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"step",type:"number",label:"Step",default:1}],tags:["quantize","snap","round","grid","step"],info:{overview:"Rounds a value to the nearest multiple of the specified step size. For example, with a step of 0.25, the value 0.3 becomes 0.25 and 0.4 becomes 0.5. Useful for snapping continuous signals to discrete levels.",tips:["Set the step to 1 for standard integer rounding.","Use with smooth to get stepped output that still transitions smoothly between levels."],pairsWith:["smooth","map-range","step","select","clamp"]}},ex={id:"wrap",name:"Wrap",version:"1.0.0",category:"math",description:"Wrap value to stay within range",icon:"repeat",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1}],tags:["wrap","modulo","loop","cycle","circular"],info:{overview:"Wraps a value so it always stays within the specified min/max range, looping around when it exceeds a boundary. Unlike clamp, which stops at the edges, wrap cycles the value back to the other end of the range. Ideal for circular quantities like angles or repeating patterns.",tips:["Use for angle values that need to stay in the 0-360 or -180 to 180 range.","Combine with an incrementing counter to create a looping index."],pairsWith:["clamp","modulo","time","add","map-range"]}},tx=[zw,Vw,Lw,Ow,Bw,Fw,Ww,Uw,qw,Hw,Yw,Gw,jw,Xw,Zw,Kw,Jw,Qw,ex],nx={id:"time",name:"Time",version:"1.0.0",category:"timing",description:"Current time and frame info",icon:"clock",platforms:["web","electron"],inputs:[],outputs:[{id:"time",type:"number",label:"Time"},{id:"delta",type:"number",label:"Delta"},{id:"frame",type:"number",label:"Frame"}],controls:[],info:{overview:"Outputs the current elapsed time in seconds, the delta time between frames, and the current frame number. These values update every frame and are the primary way to drive continuous animations.",tips:["Use the delta output to make animations frame-rate independent by multiplying movement values by it.","The time output grows without bound, so use modulo via an expression node if you need a repeating cycle.","Feed the frame output into a modulo expression to trigger something every Nth frame."],pairsWith:["expression","shader","lfo","smooth","map-range"]}},ox={id:"lfo",name:"LFO",version:"1.0.0",category:"timing",description:"Low frequency oscillator",icon:"waves",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"number",label:"Value"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:1},{id:"amplitude",type:"number",label:"Amplitude",default:1},{id:"offset",type:"number",label:"Offset",default:0},{id:"waveform",type:"select",label:"Waveform",default:"sine",props:{options:["sine","square","triangle","sawtooth"]}}],info:{overview:"Generates a continuous oscillating value at a given frequency, amplitude, and offset. Supports sine, square, triangle, and sawtooth waveforms. Commonly used to animate parameters like color, position, or shader uniforms over time.",tips:["Use the offset control to shift the output range so it stays positive when feeding into parameters that do not accept negative values.","Square waveform at low frequency works well as an on/off toggle signal.","Connect the output to a map-range node to rescale the LFO to any arbitrary range."],pairsWith:["map-range","shader","smooth","blend","color-correction"]}},ix={id:"start",name:"Start",version:"1.0.0",category:"timing",description:"Fires once when flow starts running",icon:"play",platforms:["web","electron"],inputs:[],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[],info:{overview:"Fires a single trigger when the flow begins running. This is useful for initialization tasks like loading assets, setting default values, or kicking off a sequence that should begin automatically.",tips:["Connect to a delay node if you need initialization to happen slightly after startup rather than immediately.","Use it to trigger an image-loader or video-player so media is ready as soon as the flow starts.","Only fires once per flow start; stopping and restarting the flow will fire it again."],pairsWith:["delay","image-loader","video-player","toggle","counter"]}},ax={id:"interval",name:"Interval",version:"1.0.0",category:"timing",description:"Fires at regular intervals",icon:"timer",platforms:["web","electron"],inputs:[{id:"enabled",type:"boolean",label:"Enabled"}],outputs:[{id:"trigger",type:"trigger",label:"Trigger"}],controls:[{id:"interval",type:"number",label:"Interval (ms)",default:1e3,props:{min:10,max:6e4}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}],info:{overview:"Emits a trigger output repeatedly at a fixed time interval. The interval is adjustable in milliseconds and can be toggled on and off. This is the go-to node for polling, periodic updates, or any repeating action.",tips:["Very short intervals (under 50ms) can cause performance issues if the downstream chain is expensive.","Use the enabled input to gate the interval from another node rather than removing connections.","Pair with counter to build a simple clock that tracks how many ticks have elapsed."],pairsWith:["counter","delay","trigger","toggle","expression"]}},sx={id:"delay",name:"Delay",version:"1.0.0",category:"timing",description:"Delays a value by specified time",icon:"clock",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"value",type:"any",label:"Delayed"}],controls:[{id:"delay",type:"number",label:"Delay (ms)",default:500,props:{min:0,max:1e4}}],info:{overview:"Passes any incoming value through to its output after a configurable delay in milliseconds. Useful for staggering events, creating echo-like timing patterns, or offsetting signals in a chain.",tips:["Chain multiple delay nodes with different times to create a spread of staggered triggers from a single source.","Set delay to 0 to use it as a simple pass-through for debugging signal flow.","Feeding a trigger through delay and back into the same chain can create repeating loops, but watch for runaway feedback."],pairsWith:["trigger","interval","lfo","smooth","counter"]}},rx={id:"timer",name:"Timer",version:"1.0.0",category:"timing",description:"Stopwatch timer with start/stop/reset",icon:"timer",platforms:["web","electron"],inputs:[{id:"start",type:"trigger",label:"Start"},{id:"stop",type:"trigger",label:"Stop"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"elapsed",type:"number",label:"Elapsed (s)"},{id:"running",type:"boolean",label:"Running"}],controls:[],info:{overview:"A stopwatch-style timer that counts elapsed seconds when running. It can be started, stopped, and reset via trigger inputs. The running output indicates whether the timer is currently active.",tips:["Use the elapsed output with a clamp node to create a one-shot animation that plays for a fixed duration.","Send a reset trigger followed by a start trigger to cleanly restart the timer from zero.","Combine with an expression node to convert elapsed seconds into a countdown by subtracting from a target duration."],pairsWith:["clamp","expression","start","trigger","map-range"]}},lx={id:"metronome",name:"Metronome",version:"1.0.0",category:"timing",description:"Musical tempo source with beats and bars",icon:"timer",platforms:["web","electron"],inputs:[{id:"start",type:"trigger",label:"Start"},{id:"stop",type:"trigger",label:"Stop"},{id:"bpm",type:"number",label:"BPM"}],outputs:[{id:"beat",type:"trigger",label:"Beat"},{id:"bar",type:"trigger",label:"Bar"},{id:"beatNum",type:"number",label:"Beat #"},{id:"barNum",type:"number",label:"Bar #"},{id:"phase",type:"number",label:"Phase (0-1)"}],controls:[{id:"bpm",type:"number",label:"BPM",default:120,props:{min:20,max:300,step:1}},{id:"beatsPerBar",type:"number",label:"Beats/Bar",default:4,props:{min:1,max:16,step:1}},{id:"subdivision",type:"select",label:"Subdivision",default:"1",props:{options:["1","1/2","1/4","1/8","1/16"]}},{id:"swing",type:"slider",label:"Swing",default:0,props:{min:0,max:100,step:1}},{id:"running",type:"toggle",label:"Running",default:!0}],info:{overview:"A musical clock that emits beat and bar triggers at a given BPM. It outputs the current beat number, bar number, and a phase value from 0 to 1 within each beat. Subdivision and swing controls let you dial in rhythmic feel.",tips:["Use the phase output with a map-range node to create smooth animations that lock to the beat.","Swing only affects subdivided beats, so set subdivision to 1/8 or 1/16 to hear its effect.","Feed the bar trigger into a step-sequencer reset input to keep patterns aligned across changes."],pairsWith:["step-sequencer","beat-detect","envelope","counter","lfo"]}},ux={id:"step-sequencer",name:"Step Sequencer",version:"1.0.0",category:"timing",description:"Step-based pattern sequencer for rhythm and automation",icon:"grid-3x3",platforms:["web","electron"],inputs:[{id:"clock",type:"trigger",label:"Clock"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"gate",type:"trigger",label:"Gate"},{id:"value",type:"number",label:"Value"},{id:"step",type:"number",label:"Step #"}],controls:[{id:"steps",type:"number",label:"Steps",default:8,props:{min:1,max:64,step:1}},{id:"mode",type:"select",label:"Mode",default:"Forward",props:{options:["Forward","Backward","Ping-Pong","Random"]}},{id:"stepValues",type:"data",label:"Step Values",default:[]}],info:{overview:"A pattern sequencer that advances through a configurable number of steps on each incoming clock trigger. Each step holds a value and a gate state. Supports forward, backward, ping-pong, and random playback modes.",tips:["Feed the clock input from a metronome beat output to keep the sequence locked to tempo.","Use the value output to drive shader uniforms or color parameters for rhythmic visual changes.","Ping-pong mode doubles the effective pattern length without needing twice as many steps."],pairsWith:["metronome","shader","envelope","counter","lfo"]}},dx={class:"handles-column handles-left"},cx={class:"handles-column handles-right"},px={class:"node-content"},fx={key:0,class:"node-body"},hx={class:"controls-row"},gx=["value"],mx=["value"],vx={class:"step-grid"},yx=["onClick","onMousedown"],bx={class:"step-number"},wx=xe({__name:"StepSequencerNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(null),s=D(()=>{var f,d;const h=((f=t.data)==null?void 0:f.nodeType)??"step-sequencer";return o.getDefinition(h)??((d=t.data)==null?void 0:d.definition)??null}),r=D(()=>{var h;return s.value?((h=ze[s.value.category])==null?void 0:h.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),l=D({get:()=>{var h;return((h=t.data)==null?void 0:h.steps)??8},set:h=>{var _;const f=Math.max(1,Math.min(64,h));n.updateNodeData(t.id,{steps:f});const m=[...((_=t.data)==null?void 0:_.stepValues)??[]];for(;m.length<f;)m.push(.5);for(;m.length>f;)m.pop();n.updateNodeData(t.id,{stepValues:m})}}),u=D({get:()=>{var h;return((h=t.data)==null?void 0:h.mode)??"Forward"},set:h=>{n.updateNodeData(t.id,{mode:h})}}),c=D({get:()=>{var d;const f=[...((d=t.data)==null?void 0:d.stepValues)??[]];for(;f.length<l.value;)f.push(.5);return f},set:h=>{n.updateNodeData(t.id,{stepValues:h})}}),p=D(()=>{var f;const h=(f=t.data)==null?void 0:f._outputs;return h?h instanceof Map?h.get("step")??-1:h.step??-1:-1});_e(()=>t.id,()=>{var h;if(!((h=t.data)!=null&&h.stepValues)||t.data.stepValues.length===0){const f=Array(l.value).fill(.5);n.updateNodeData(t.id,{stepValues:f})}},{immediate:!0});function y(h){const f=[...c.value];f[h]=f[h]>.5?0:1,c.value=f}function b(h,f){const d=[...c.value];d[h]=Math.max(0,Math.min(1,f)),c.value=d}function S(h,f){const d=f.clientY,m=c.value[h],_=L=>{const j=(d-L.clientY)/100;b(h,m+j)},C=()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",C)}function v(){i.value=!i.value}function x(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}return(h,f)=>(z(),K("div",{class:ge(["stepseq-node",{selected:t.selected,collapsed:i.value}])},[g("div",dx,[g("div",{class:"handle-slot",onMouseenter:f[0]||(f[0]=d=>a.value="clock"),onMouseleave:f[1]||(f[1]=d=>a.value=null)},[te(N(ce),{id:"clock",type:"target",position:N(ee).Left,style:Q({background:x("trigger")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:a.value==="clock"||t.selected}])},[...f[14]||(f[14]=[g("span",{class:"label-text"},"Clock",-1)])],2)],32),g("div",{class:"handle-slot",onMouseenter:f[2]||(f[2]=d=>a.value="reset"),onMouseleave:f[3]||(f[3]=d=>a.value=null)},[te(N(ce),{id:"reset",type:"target",position:N(ee).Left,style:Q({background:x("trigger")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:a.value==="reset"||t.selected}])},[...f[15]||(f[15]=[g("span",{class:"label-text"},"Reset",-1)])],2)],32)]),g("div",cx,[g("div",{class:"handle-slot",onMouseenter:f[4]||(f[4]=d=>a.value="gate"),onMouseleave:f[5]||(f[5]=d=>a.value=null)},[te(N(ce),{id:"gate",type:"source",position:N(ee).Right,style:Q({background:x("trigger")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value==="gate"||t.selected}])},[...f[16]||(f[16]=[g("span",{class:"label-text"},"Gate",-1)])],2)],32),g("div",{class:"handle-slot",onMouseenter:f[6]||(f[6]=d=>a.value="value"),onMouseleave:f[7]||(f[7]=d=>a.value=null)},[te(N(ce),{id:"value",type:"source",position:N(ee).Right,style:Q({background:x("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value==="value"||t.selected}])},[...f[17]||(f[17]=[g("span",{class:"label-text"},"Value",-1)])],2)],32),g("div",{class:"handle-slot",onMouseenter:f[8]||(f[8]=d=>a.value="step"),onMouseleave:f[9]||(f[9]=d=>a.value=null)},[te(N(ce),{id:"step",type:"source",position:N(ee).Right,style:Q({background:x("number")}),class:"port-handle"},null,8,["position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value==="step"||t.selected}])},[...f[18]||(f[18]=[g("span",{class:"label-text"},"Step #",-1)])],2)],32)]),g("div",px,[g("div",{class:"node-header",style:Q({borderLeftColor:r.value})},[te(N(yu),{size:14,class:"header-icon"}),f[19]||(f[19]=g("span",{class:"node-title"},"Step Seq",-1)),g("button",{class:"node-collapse-btn",onClick:de(v,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?me("",!0):(z(),K("div",fx,[g("div",hx,[f[21]||(f[21]=g("label",null,"Steps",-1)),g("input",{type:"number",value:l.value,min:"1",max:"64",onInput:f[10]||(f[10]=d=>l.value=parseInt(d.target.value)||8),onMousedown:f[11]||(f[11]=de(()=>{},["stop"]))},null,40,gx),f[22]||(f[22]=g("label",null,"Mode",-1)),g("select",{value:u.value,onChange:f[12]||(f[12]=d=>u.value=d.target.value),onMousedown:f[13]||(f[13]=de(()=>{},["stop"]))},[...f[20]||(f[20]=[g("option",{value:"Forward"},"  ",-1),g("option",{value:"Backward"},"  ",-1),g("option",{value:"Ping-Pong"},"  ",-1),g("option",{value:"Random"}," ? ",-1)])],40,mx)]),g("div",vx,[(z(!0),K(ke,null,De(c.value.slice(0,l.value),(d,m)=>(z(),K("div",{key:m,class:ge(["step-cell",{active:d>.5,current:p.value===m+1}]),onClick:de(_=>y(m),["stop"]),onMousedown:de(_=>S(m,_),["stop"])},[g("div",{class:"step-bar",style:Q({height:`${d*100}%`})},null,4),g("span",bx,be(m+1),1)],42,yx))),128))])]))])],2))}}),xx=Ae(wx,[["__scopeId","data-v-35e7b411"]]),Sx=[nx,ox,ix,ax,sx,rx,lx,ux],_x={id:"compare",name:"Compare",version:"1.0.0",category:"logic",description:"Compare two values",icon:"git-compare",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"operator",type:"select",label:"Op",default:"==",props:{options:["==","!=",">",">=","<","<="]}},{id:"a",type:"number",label:"A",default:0},{id:"b",type:"number",label:"B",default:0}],info:{overview:"Compares two numeric values using a selectable operator and outputs a boolean result. Supports equality, inequality, greater-than, and less-than checks. Use this for threshold detection and conditional branching.",tips:["Feed the boolean result into a gate or switch to route values based on the comparison.","Use the >= or <= operators for inclusive threshold checks."],pairsWith:["gate","switch","in-range","clamp","equals"]}},kx={id:"and",name:"And",version:"1.0.0",category:"logic",description:"Logical AND",icon:"circle-dot",platforms:["web","electron"],inputs:[{id:"a",type:"boolean",label:"A"},{id:"b",type:"boolean",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"a",type:"toggle",label:"A",default:!1},{id:"b",type:"toggle",label:"B",default:!1}],info:{overview:"Outputs true only when both inputs are true. This is the standard boolean AND operation used to require multiple conditions to be satisfied simultaneously.",tips:["Chain multiple And nodes together to require more than two conditions.","Combine with Not to build NAND logic."],pairsWith:["or","not","gate","compare"]}},Cx={id:"or",name:"Or",version:"1.0.0",category:"logic",description:"Logical OR",icon:"circle",platforms:["web","electron"],inputs:[{id:"a",type:"boolean",label:"A"},{id:"b",type:"boolean",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"a",type:"toggle",label:"A",default:!1},{id:"b",type:"toggle",label:"B",default:!1}],info:{overview:"Outputs true when at least one of the two inputs is true. This is the standard boolean OR operation. Use it to allow multiple conditions to independently trigger the same behavior.",tips:["Chain multiple Or nodes to combine more than two conditions.","Combine with Not to create NOR logic."],pairsWith:["and","not","gate","compare"]}},Nx={id:"not",name:"Not",version:"1.0.0",category:"logic",description:"Logical NOT",icon:"circle-off",platforms:["web","electron"],inputs:[{id:"value",type:"boolean",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[],info:{overview:"Inverts a boolean value, turning true into false and false into true. This is the standard logical NOT operation. Use it to negate conditions or reverse the behavior of boolean signals.",tips:["Place after compare or equals to invert a condition without changing the operator.","Combine with And to build NAND logic gates."],pairsWith:["and","or","compare","equals","gate"]}},$x={id:"gate",name:"Gate",version:"1.0.0",category:"logic",description:"Pass or block value",icon:"door-open",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"gate",type:"boolean",label:"Gate"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"open",type:"toggle",label:"Open",default:!0},{id:"value",type:"text",label:"Value",default:""}],info:{overview:"Passes a value through when the gate is open and blocks it when the gate is closed. The gate state is controlled by the boolean Gate input or the Open toggle. This is the simplest way to conditionally allow or stop data flow.",tips:["Connect a compare or equals node to the Gate input for dynamic control.","Use the toggle control to manually override the gate during testing."],pairsWith:["compare","and","or","pass-if","latch"]}},Ex={id:"switch",name:"Switch",version:"1.0.0",category:"logic",description:"Select between two values",icon:"git-branch",platforms:["web","electron"],inputs:[{id:"condition",type:"boolean",label:"Condition"},{id:"true",type:"any",label:"True"},{id:"false",type:"any",label:"False"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[],info:{overview:"Outputs one of two values depending on a boolean condition. When the condition is true, the True input is forwarded. When false, the False input is forwarded. This is the basic if/else building block for data flow.",tips:["Feed the output of compare or equals into the condition input for threshold-based switching.","Use select instead when you need to choose from more than two options."],pairsWith:["compare","equals","select","gate","not"]}},Mx={id:"select",name:"Select",version:"1.0.0",category:"logic",description:"Select one of multiple inputs by index",icon:"list",platforms:["web","electron"],inputs:[{id:"index",type:"number",label:"Index"},{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[],info:{overview:"Picks one of up to four inputs based on a numeric index. Index 0 selects input A, index 1 selects B, and so on. This is useful for cycling through values or building lookup-style selection from a numeric source.",tips:["Use modulo before the index input to cycle through inputs in a loop.","Combine with quantize to snap a continuous signal to discrete selection steps."],pairsWith:["switch","modulo","quantize","compare"]}},Tx={id:"is-null",name:"Is Null",version:"1.0.0",category:"logic",description:"Check if value is null or undefined",icon:"circle-off",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[],tags:["null","undefined","check","empty","missing"],info:{overview:"Tests whether a value is strictly null or undefined. Outputs true if the value is missing and false for all other values, including empty strings, zero, and false. Use this when you need to distinguish between missing data and legitimate falsy values.",tips:["Prefer is-empty if you also want to catch empty strings and arrays.","Feed the result into gate or pass-if to filter out null values."],pairsWith:["is-empty","default-value","coalesce","gate"]}},Ix={id:"is-empty",name:"Is Empty",version:"1.0.0",category:"logic",description:"Check if value is null, undefined, empty string, or empty array",icon:"box",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"},{id:"type",type:"string",label:"Type"}],controls:[],tags:["null","undefined","empty","check","array","string"],info:{overview:"Checks if a value is null, undefined, an empty string, or an empty array. Outputs a boolean result and also reports the detected type of the value. Broader than is-null because it also catches empty collections and strings.",tips:["Use the Type output to inspect what kind of value arrived.","Pair with default-value to replace empty inputs with a fallback."],pairsWith:["is-null","default-value","coalesce","pass-if"]}},Px={id:"pass-if",name:"Pass If",version:"1.0.0",category:"logic",description:"Pass value through only if condition is met",icon:"filter",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"condition",type:"boolean",label:"Condition"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"mode",type:"select",label:"Mode",default:"when-true",props:{options:["when-true","when-false","when-not-null","when-not-empty"]}}],tags:["conditional","filter","gate","pass","block"],info:{overview:"Forwards the input value only when a condition is met, blocking it otherwise. Supports multiple modes including when-true, when-false, when-not-null, and when-not-empty. More flexible than a basic gate because it can filter on data presence, not just booleans.",tips:["Use when-not-null mode to filter out missing values without a separate is-null check.","Switch to when-false mode to pass values only when a condition fails."],pairsWith:["gate","compare","is-null","is-empty","switch"]}},Ax={id:"default-value",name:"Default",version:"1.0.0",category:"logic",description:"Return input value, or default if null/undefined/empty",icon:"shield-check",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"default",type:"text",label:"Default",default:""},{id:"treatEmptyAsNull",type:"toggle",label:"Empty=Null",default:!0}],tags:["fallback","default","null","coalesce"],info:{overview:"Passes the input value through unchanged unless it is null, undefined, or optionally empty. When the value is missing, it outputs the configured default instead. Helpful for ensuring downstream nodes always receive usable data.",tips:["Enable Empty=Null to treat empty strings the same as null.","Use this after external data sources that may return incomplete values."],pairsWith:["coalesce","is-null","is-empty","pass-if"]}},Dx={id:"coalesce",name:"Coalesce",version:"1.0.0",category:"logic",description:"Return first non-null/undefined value",icon:"layers",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[],tags:["nullish","fallback","default","first"],info:{overview:"Returns the first input that is not null or undefined, checking inputs A through D in order. This works like the nullish coalescing operator and is useful for building fallback chains where you want the first valid value.",tips:["Put your preferred source in input A and fallbacks in B, C, D.","Use with default-value when you also need to handle empty strings."],pairsWith:["default-value","is-null","switch","select"]}},Rx={id:"equals",name:"Equals",version:"1.0.0",category:"logic",description:"Type-agnostic equality comparison",icon:"equal",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"strict",type:"toggle",label:"Strict (===)",default:!0},{id:"a",type:"text",label:"A",default:""},{id:"b",type:"text",label:"B",default:""}],tags:["compare","equal","match","same"],info:{overview:"Checks whether two values of any type are equal and outputs a boolean. Supports both strict (===) and loose (==) comparison modes. Unlike Compare, this works with strings, booleans, and other non-numeric types.",tips:["Use strict mode to avoid unexpected type coercion.","Pair with switch to branch on exact value matches."],pairsWith:["compare","switch","gate","not","pass-if"]}},zx={id:"changed",name:"Changed",version:"1.0.0",category:"logic",description:"Only output when value changes from previous",icon:"diff",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"any",label:"Result"},{id:"changed",type:"boolean",label:"Changed"}],controls:[],tags:["detect","change","state","difference"],info:{overview:"Passes the input value through only when it differs from the previous value. Also outputs a boolean indicating whether the value changed. Useful for triggering downstream logic only when data actually updates.",tips:["Use the Changed boolean output to trigger other nodes selectively.","Place before expensive operations to avoid redundant processing."],pairsWith:["gate","sample-hold","pass-if","trigger"]}},Vx={id:"type-of",name:"Type Of",version:"1.0.0",category:"logic",description:"Get the type of a value",icon:"tag",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"type",type:"string",label:"Type"}],controls:[],tags:["type","typeof","check","inspect"],info:{overview:'Reports the JavaScript type of the input value as a string, such as "number", "string", "boolean", or "object". Useful for debugging flows or for branching logic based on the kind of data arriving at a node.',tips:["Feed the output into an equals node to branch based on specific types.","Use during development to verify that connections are carrying the expected data types."],pairsWith:["equals","switch","is-null","is-empty"]}},Lx={id:"in-range",name:"In Range",version:"1.0.0",category:"logic",description:"Check if number is within a range",icon:"arrow-left-right",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"value",type:"number",label:"Value",default:0},{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:1},{id:"inclusive",type:"toggle",label:"Inclusive",default:!0}],tags:["range","between","threshold","bounds"],info:{overview:"Tests whether a number falls within a specified minimum and maximum range. Returns true if the value is inside the range and false otherwise. The inclusive toggle controls whether the boundary values themselves count as in-range.",tips:["Use with gate to only pass values that fall within acceptable bounds.","Combine two In Range nodes with Or to check for values in multiple zones."],pairsWith:["compare","clamp","gate","map-range"]}},Ox={id:"sample-hold",name:"Sample & Hold",version:"1.0.0",category:"logic",description:"Sample value when triggered, hold until next trigger",icon:"pin",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"trigger",type:"trigger",label:"Trigger"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[],tags:["sample","hold","latch","capture"],info:{overview:"Captures the current input value when triggered and holds that value until the next trigger arrives. Between triggers, the output stays constant regardless of input changes. Useful for snapshotting a value at a specific moment.",tips:["Connect a periodic trigger to sample at regular intervals.","Use with changed to capture values only when something else in the flow updates."],pairsWith:["trigger","latch","changed","time"]}},Bx={id:"latch",name:"Latch",version:"1.0.0",category:"logic",description:"Flip-flop style latch with set and reset inputs",icon:"toggle-left",platforms:["web","electron"],inputs:[{id:"set",type:"trigger",label:"Set"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"initialState",type:"toggle",label:"Initial",default:!1}],tags:["flip-flop","toggle","state","memory"],info:{overview:"A flip-flop that holds a boolean state. The Set trigger turns the output to true, and the Reset trigger turns it back to false. The state persists between evaluations, making it useful for toggle behavior and stateful control.",tips:["Use the Initial toggle to choose whether the latch starts in the on or off state.","Connect the output to a gate to create a controllable on/off valve for data flow."],pairsWith:["gate","trigger","sample-hold","switch"]}},Fx={id:"match-value",name:"Match Value",version:"1.0.0",category:"logic",description:"Check if input equals a specific value",icon:"check-circle",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Match"},{id:"value",type:"any",label:"Value"}],controls:[{id:"target",type:"text",label:"Target Value",default:""},{id:"type",type:"select",label:"Compare As",default:"auto",props:{options:["auto","number","string","boolean"]}}],tags:["match","compare","equal","check","filter"],info:{overview:"Tests whether an input value matches a specific target value you type in. Supports automatic type detection or explicit type coercion. Passes the original value through so you can chain it with gates or other logic.",tips:['Use "auto" mode to let the node guess the type  it tries number first, then boolean, then string.',"The value output passes the input through unchanged, making it easy to chain with a gate."],pairsWith:["gate","switch","compare","equals","pass-if"]}},Wx={id:"dispatch",name:"Dispatch",version:"1.0.0",category:"logic",description:"Route to outputs based on multiple conditions",icon:"git-fork",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"out-0",type:"any",label:" 1"}],controls:[{id:"conditions",type:"data",label:"Conditions",default:JSON.stringify([{operator:"==",value:"",type:"number"}])},{id:"property",type:"text",label:"Property Path",default:""},{id:"checkAll",type:"toggle",label:"Check All Rules",default:!1}],tags:["dispatch","route","switch","conditional","branch","filter"],info:{overview:"Routes an input value to one or more outputs based on a list of conditions you define. Each condition maps to its own output port. Similar to a switch statement or Node-RED switch node. By default, stops at the first matching condition.",tips:['Enable "Check All Rules" to send the value to every matching output, not just the first.','Use the Property Path to check a nested value (e.g. "payload.value") while still passing the full input through.','Add an "otherwise" condition at the end to catch unmatched values.'],pairsWith:["compare","gate","switch","equals","match-value"]}},Ux={class:"handles-column handles-left"},qx={class:"handles-column handles-right"},Hx={class:"node-content"},Yx={class:"node-title"},Gx={class:"dispatch-body"},jx=["value","onChange"],Xx=["value"],Zx=["value","onInput"],Kx={class:"cond-output"},Jx=["onClick"],Qx=xe({__name:"DispatchNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=ze.logic.color,i=D(()=>{var S;try{const v=(S=t.data)==null?void 0:S.conditions;if(v)return JSON.parse(v)}catch{}return[{operator:"==",value:"",type:"number"}]}),a=["==","!=",">",">=","<","<=","contains","matches regex","is true","is empty","is type","otherwise"],s=D(()=>i.value.map((S,v)=>({id:`out-${v}`,type:"any",label:` ${v+1}`})));_e(s,S=>{var f;const v=(f=t.data)==null?void 0:f._dynamicOutputs,x=S.map(d=>d.id).join(","),h=(v==null?void 0:v.map(d=>d.id).join(","))??"";x!==h&&n.updateNodeData(t.id,{_dynamicOutputs:S})},{immediate:!0});function r(S){n.updateNodeData(t.id,{conditions:JSON.stringify(S)})}function l(S,v,x){const h=[...i.value];h[S]={...h[S],[v]:x},r(h)}function u(){const S=[...i.value,{operator:"==",value:"",type:"number"}];r(S)}function c(S){if(i.value.length<=1)return;const v=i.value.filter((x,h)=>h!==S);r(v)}const p={"==":"=","!=":"",">":">",">=":"","<":"<","<=":"",contains:"","matches regex":"~","is true":"","is empty":"","is type":"T",otherwise:""},y=[{id:"value",type:"any",label:"Value"}];function b(S){var v;return((v=Pe[S])==null?void 0:v.color)??"var(--color-neutral-400)"}return(S,v)=>{var x;return z(),K("div",{class:ge(["dispatch-node",{selected:t.selected}])},[g("div",Ux,[(z(),K(ke,null,De(y,h=>g("div",{key:h.id,class:"handle-slot"},[te(N(ce),{id:h.id,type:"target",position:N(ee).Left,style:Q({background:b(h.type)}),class:"port-handle"},null,8,["id","position","style"])])),64))]),g("div",qx,[(z(!0),K(ke,null,De(s.value,h=>(z(),K("div",{key:h.id,class:"handle-slot"},[te(N(ce),{id:h.id,type:"source",position:N(ee).Right,style:Q({background:b(h.type)}),class:"port-handle"},null,8,["id","position","style"])]))),128))]),g("div",Hx,[g("div",{class:"node-header",style:Q({borderLeftColor:N(o)})},[te(N(vu),{size:14,class:"node-icon",style:Q({color:N(o)})},null,8,["style"]),g("span",Yx,be(((x=t.data)==null?void 0:x.label)??"Dispatch"),1)],4),g("div",Gx,[(z(!0),K(ke,null,De(i.value,(h,f)=>(z(),K("div",{key:f,class:"condition-row"},[g("select",{class:"cond-operator",value:h.operator,onChange:d=>l(f,"operator",d.target.value),onMousedown:v[0]||(v[0]=de(()=>{},["stop"]))},[(z(),K(ke,null,De(a,d=>g("option",{key:d,value:d},be(p[d]??d),9,Xx)),64))],40,jx),h.operator!=="is true"&&h.operator!=="is empty"&&h.operator!=="otherwise"?(z(),K("input",{key:0,class:"cond-value",type:"text",value:h.value,placeholder:"value",onInput:d=>l(f,"value",d.target.value),onMousedown:v[1]||(v[1]=de(()=>{},["stop"]))},null,40,Zx)):me("",!0),g("span",Kx," "+be(f+1),1),i.value.length>1?(z(),K("button",{key:1,class:"cond-remove",onClick:de(d=>c(f),["stop"]),onMousedown:v[2]||(v[2]=de(()=>{},["stop"]))},[te(N(Ll),{size:10})],40,Jx)):me("",!0)]))),128)),g("button",{class:"add-condition",onClick:de(u,["stop"]),onMousedown:v[3]||(v[3]=de(()=>{},["stop"]))},[te(N(zs),{size:10}),v[4]||(v[4]=g("span",null,"Add",-1))],32)])])],2)}}}),e2=Ae(Qx,[["__scopeId","data-v-d746ebf6"]]),t2=[_x,kx,Cx,Nx,$x,Ex,Mx,Tx,Ix,Px,Ax,Dx,Rx,zx,Vx,Lx,Ox,Bx,Fx,Wx],n2={id:"oscillator",name:"Oscillator",version:"1.0.0",category:"audio",description:"Generate audio waveform",icon:"waves",platforms:["web","electron"],inputs:[{id:"frequency",type:"number",label:"Freq"},{id:"detune",type:"number",label:"Detune"}],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"frequency",type:"number",label:"Freq"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:440},{id:"detune",type:"number",label:"Detune",default:0},{id:"waveform",type:"select",label:"Waveform",default:"sine",props:{options:["sine","square","triangle","sawtooth"]}},{id:"volume",type:"number",label:"Volume (dB)",default:-6}],info:{overview:"Generates a continuous audio waveform at a specified frequency. Supports sine, square, triangle, and sawtooth shapes. This is a fundamental building block for synthesis, test tones, and modulation sources.",tips:["Use sine for pure tones and sub-bass; use sawtooth for harmonically rich leads and basses.","Connect the frequency input from a MIDI node or envelope to play melodic pitches.","Detune two oscillators slightly against each other for a thick, chorused sound."],pairsWith:["gain","filter","envelope","audio-output","audio-analyzer"]}},o2={id:"audio-output",name:"Audio Output",version:"1.0.0",category:"audio",description:"Output audio to speakers",icon:"volume-2",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[],controls:[{id:"volume",type:"number",label:"Volume (dB)",default:0},{id:"mute",type:"toggle",label:"Mute",default:!1}],info:{overview:"Routes audio to the system speakers or headphones. This is the final destination node in any audio chain. Volume is set in decibels and a mute toggle silences output without disconnecting the graph.",tips:["Start with the volume at -12 dB or lower to avoid unexpected loud output.","Use the mute toggle for quick A/B testing without tearing down connections.","Only one audio output node is needed per patch; connect a gain node before it for master volume control."],pairsWith:["gain","reverb","filter","audio-player"]}},i2={id:"audio-analyzer",name:"Audio Analyzer",version:"1.0.0",category:"audio",description:"Analyze audio levels and frequencies",icon:"bar-chart-2",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[{id:"level",type:"number",label:"Level"},{id:"bass",type:"number",label:"Bass"},{id:"mid",type:"number",label:"Mid"},{id:"high",type:"number",label:"High"}],controls:[{id:"smoothing",type:"number",label:"Smoothing",default:.8}],info:{overview:"Splits an incoming audio signal into level, bass, mid, and high frequency bands as numeric outputs. Use it to drive visuals, animations, or any parameter that should react to sound.",tips:["Increase smoothing (closer to 1) for slower, more stable readings; decrease it for snappier response.","Map the bass output to scale or brightness for kick-driven visual effects.","Place this after a gain node to control the analysis input level independently of the output volume."],pairsWith:["audio-player","gain","oscillator","beat-detect"]}},a2={id:"gain",name:"Gain",version:"1.0.0",category:"audio",description:"Adjust audio volume",icon:"volume-1",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"gain",type:"number",label:"Gain"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"gain",type:"number",label:"Gain",default:1}],info:{overview:"Multiplies the audio signal amplitude by a gain factor. A value of 1 passes audio unchanged, values below 1 attenuate, and values above 1 amplify. This is the primary volume control node in any audio chain.",tips:["Connect an envelope output to the gain input for amplitude modulation.","Place a gain node right before audio output as a master volume control.","Use a gain of 0 as a quick mute, or connect an LFO for tremolo effects."],pairsWith:["audio-output","oscillator","filter","envelope","audio-player"]}},s2={id:"filter",name:"Filter",version:"1.0.0",category:"audio",description:"Filter audio frequencies",icon:"sliders",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"frequency",type:"number",label:"Freq"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:1e3},{id:"Q",type:"number",label:"Q",default:1},{id:"type",type:"select",label:"Type",default:"lowpass",props:{options:["lowpass","highpass","bandpass","notch"]}}],info:{overview:"A standard biquad filter that removes or emphasizes frequencies in the audio signal. Supports lowpass, highpass, bandpass, and notch modes. The Q parameter controls the sharpness of the filter curve around the cutoff frequency.",tips:["Automate the frequency input with an envelope or LFO for classic filter sweep effects.","Use bandpass mode with a high Q to isolate a narrow frequency band.","Chain two filters in series for a steeper rolloff (24 dB/octave instead of 12)."],pairsWith:["oscillator","gain","envelope","audio-output","svf-filter"]}},r2={id:"audio-delay",name:"Delay",version:"1.0.0",category:"audio",description:"Add delay/echo effect",icon:"repeat",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"time",type:"number",label:"Time"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"time",type:"number",label:"Delay (s)",default:.25},{id:"feedback",type:"number",label:"Feedback",default:.5},{id:"wet",type:"number",label:"Wet",default:.5}],info:{overview:"Adds a delay or echo effect to the audio signal. The feedback control determines how many times the delayed signal repeats, and the wet control blends between dry and delayed audio.",tips:["Set feedback below 0.5 for a clean slapback echo, or above 0.7 for long, building repeats.","Automate the delay time input for tape-style pitch warble effects.","Use a short delay (under 30ms) with no feedback to create a simple doubling or comb filter effect."],pairsWith:["reverb","gain","filter","audio-output"]}},l2={id:"beat-detect",name:"Beat Detect",version:"1.0.0",category:"audio",description:"Detect beats and estimate BPM",icon:"activity",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio",required:!0}],outputs:[{id:"beat",type:"trigger",label:"Beat"},{id:"bpm",type:"number",label:"BPM"},{id:"energy",type:"number",label:"Energy"}],controls:[{id:"sensitivity",type:"slider",label:"Sensitivity",default:1.5,props:{min:1,max:3,step:.1}},{id:"minInterval",type:"number",label:"Min Interval (ms)",default:200,props:{min:50,max:500}},{id:"decayRate",type:"slider",label:"Decay Rate",default:.95,props:{min:.8,max:.99,step:.01}}],info:{overview:"Analyzes an audio signal to detect rhythmic beats and estimate the tempo in BPM. Outputs a trigger on each detected beat, the current BPM estimate, and the instantaneous energy level.",tips:["Lower sensitivity to reduce false triggers on complex, busy audio material.","Increase min interval to reject double-triggers on fast transients.","Connect the beat trigger to an envelope or visual parameter for beat-synced animations."],pairsWith:["audio-player","audio-analyzer","envelope","gain"]}},u2={id:"audio-player",name:"Audio Player",version:"1.0.0",category:"audio",description:"Play audio files from URL",icon:"play-circle",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"play",type:"trigger",label:"Play"},{id:"stop",type:"trigger",label:"Stop"}],outputs:[{id:"audio",type:"audio",label:"Audio"},{id:"playing",type:"boolean",label:"Playing"},{id:"duration",type:"number",label:"Duration"},{id:"loading",type:"boolean",label:"Loading"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:""},{id:"loop",type:"toggle",label:"Loop",default:!1},{id:"autoplay",type:"toggle",label:"Autoplay",default:!1},{id:"volume",type:"slider",label:"Volume (dB)",default:0,props:{min:-40,max:6,step:1}},{id:"playbackRate",type:"slider",label:"Speed",default:1,props:{min:.5,max:2,step:.1}}],info:{overview:"Loads and plays audio files from a URL. Supports looping, autoplay, volume, and playback speed controls. Outputs the audio signal along with playback state information like duration and loading status.",tips:["Enable loop for continuous background music or ambient sound beds.","Use the playing and duration outputs to synchronize other nodes with the audio timeline.","Check the error output to detect broken URLs or unsupported formats."],pairsWith:["audio-output","gain","audio-analyzer","reverb","beat-detect"]}},d2={id:"envelope",name:"Envelope (ADSR)",version:"1.0.0",category:"audio",description:"ADSR amplitude envelope",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"},{id:"release",type:"trigger",label:"Release"}],outputs:[{id:"envelope",type:"audio",label:"Envelope"},{id:"value",type:"number",label:"Value"}],controls:[{id:"attack",type:"slider",label:"Attack",default:.01,props:{min:.001,max:2,step:.001}},{id:"decay",type:"slider",label:"Decay",default:.1,props:{min:.001,max:2,step:.001}},{id:"sustain",type:"slider",label:"Sustain",default:.5,props:{min:0,max:1,step:.01}},{id:"release",type:"slider",label:"Release",default:.3,props:{min:.001,max:5,step:.001}}],info:{overview:"Generates a standard ADSR (Attack, Decay, Sustain, Release) amplitude envelope. When triggered, it ramps up through attack and decay to the sustain level, then ramps down on release. The envelope output can modulate volume, filter cutoff, or any other parameter.",tips:["Use a very short attack (under 5ms) for percussive sounds and longer values (50ms+) for pads.","Connect the value output to non-audio parameters like visual brightness for synced animations.","Pair with an oscillator and gain to build a basic subtractive synth voice from scratch."],pairsWith:["oscillator","gain","filter","synth","beat-detect"]}},c2={id:"reverb",name:"Reverb",version:"1.0.0",category:"audio",description:"Add reverb effect",icon:"waves",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio",required:!0}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"decay",type:"slider",label:"Decay",default:1.5,props:{min:.1,max:10,step:.1}},{id:"wet",type:"slider",label:"Wet",default:.5,props:{min:0,max:1,step:.01}},{id:"preDelay",type:"slider",label:"Pre-Delay",default:.01,props:{min:0,max:.1,step:.001}}],info:{overview:"Simulates the reflections of a physical space by applying a reverb tail to the audio signal. The decay control sets how long the reverb rings out, and the wet control blends between dry and reverberant audio.",tips:["Keep wet below 0.3 for subtle room ambience, or push above 0.7 for atmospheric wash effects.","Increase pre-delay slightly to preserve transient clarity before the reverb tail begins.","Place reverb after delay in the signal chain for a cleaner echo-into-space effect."],pairsWith:["audio-delay","gain","audio-output","filter"]}},p2={id:"svf-filter",name:"SVF Filter",version:"1.0.0",category:"audio",description:"State Variable Filter with multiple outputs",icon:"filter",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"cutoff",type:"number",label:"Cutoff"},{id:"resonance",type:"number",label:"Resonance"}],outputs:[{id:"lowpass",type:"audio",label:"Lowpass"},{id:"highpass",type:"audio",label:"Highpass"},{id:"bandpass",type:"audio",label:"Bandpass"},{id:"notch",type:"audio",label:"Notch"}],controls:[{id:"cutoff",type:"number",label:"Cutoff (Hz)",default:1e3,props:{min:20,max:2e4,step:1}},{id:"resonance",type:"slider",label:"Resonance",default:.5,props:{min:0,max:1,step:.01}},{id:"drive",type:"slider",label:"Drive",default:0,props:{min:0,max:2,step:.01}}],info:{overview:"A state variable filter that provides simultaneous lowpass, highpass, bandpass, and notch outputs from a single input. This lets you tap multiple filter shapes at once without duplicating nodes. Includes a drive control for mild saturation.",tips:["Use the bandpass output for vocal or instrument isolation in a specific frequency range.","Increase drive for warm saturation before the filter stage.","Modulate the cutoff input with an LFO or envelope for evolving timbral movement."],pairsWith:["oscillator","gain","envelope","filter","audio-output"]}},f2={id:"pitch-detect",name:"Pitch Detect",version:"1.0.0",category:"audio",description:"Detect pitch from audio input",icon:"music",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[{id:"frequency",type:"number",label:"Frequency (Hz)"},{id:"note",type:"string",label:"Note"},{id:"octave",type:"number",label:"Octave"},{id:"midi",type:"number",label:"MIDI"},{id:"confidence",type:"number",label:"Confidence"}],controls:[{id:"minFreq",type:"number",label:"Min Freq",default:50,props:{min:20,max:1e3,step:1}},{id:"maxFreq",type:"number",label:"Max Freq",default:2e3,props:{min:100,max:1e4,step:1}}],info:{overview:"Analyzes an audio signal to estimate its fundamental pitch. Outputs the detected frequency in Hz, the musical note name, octave number, MIDI note value, and a confidence score indicating detection reliability.",tips:["Narrow the min/max frequency range to improve accuracy for a known instrument or voice.","Use the confidence output to gate downstream processing so only strong detections pass through.","Feed the MIDI output into a synth node to create a pitch-following harmonizer."],pairsWith:["audio-player","audio-analyzer","synth","oscillator"]}},h2={class:"handles-column handles-left"},g2=["onMouseenter"],m2={class:"label-text"},v2={class:"handles-column handles-right"},y2=["onMouseenter"],b2={class:"label-text"},w2={class:"node-content"},x2={key:0,class:"node-body"},S2=xe({__name:"EnvelopeVisualNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(null),s=D(()=>{var v,x;const S=((v=t.data)==null?void 0:v.nodeType)??"envelope-visual";return o.getDefinition(S)??((x=t.data)==null?void 0:x.definition)??null}),r=D(()=>{var S;return s.value?((S=ze[s.value.category])==null?void 0:S.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),l=D(()=>{var S;return((S=s.value)==null?void 0:S.inputs)??[]}),u=D(()=>{var S;return((S=s.value)==null?void 0:S.outputs)??[]}),c=D({get:()=>{var S,v,x,h;return{attack:((S=t.data)==null?void 0:S.attack)??.01,decay:((v=t.data)==null?void 0:v.decay)??.1,sustain:((x=t.data)==null?void 0:x.sustain)??.5,release:((h=t.data)==null?void 0:h.release)??.3}},set:S=>{n.updateNodeData(t.id,{attack:S.attack,decay:S.decay,sustain:S.sustain,release:S.release})}});function p(){i.value=!i.value}function y(S){var v;return((v=Pe[S])==null?void 0:v.color)??"var(--color-neutral-400)"}function b(S){c.value=S}return(S,v)=>(z(),K("div",{class:ge(["envelope-node",{selected:t.selected,collapsed:i.value}]),style:Q({"--port-count":Math.max(l.value.length,u.value.length,1)})},[g("div",h2,[(z(!0),K(ke,null,De(l.value,x=>(z(),K("div",{key:x.id,class:"handle-slot",onMouseenter:h=>a.value=`in-${x.id}`,onMouseleave:v[0]||(v[0]=h=>a.value=null)},[te(N(ce),{id:x.id,type:"target",position:N(ee).Left,style:Q({background:y(x.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:a.value===`in-${x.id}`||t.selected}])},[g("span",m2,be(x.label),1),g("span",{class:"label-type",style:Q({color:y(x.type)})},be(x.type),5)],2)],40,g2))),128))]),g("div",v2,[(z(!0),K(ke,null,De(u.value,x=>(z(),K("div",{key:x.id,class:"handle-slot",onMouseenter:h=>a.value=`out-${x.id}`,onMouseleave:v[1]||(v[1]=h=>a.value=null)},[te(N(ce),{id:x.id,type:"source",position:N(ee).Right,style:Q({background:y(x.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value===`out-${x.id}`||t.selected}])},[g("span",b2,be(x.label),1),g("span",{class:"label-type",style:Q({color:y(x.type)})},be(x.type),5)],2)],40,y2))),128))]),g("div",w2,[g("div",{class:"node-header",style:Q({borderLeftColor:r.value})},[te(N(Iu),{size:14,class:"header-icon"}),v[3]||(v[3]=g("span",{class:"node-title"},"Envelope",-1)),g("button",{class:"node-collapse-btn",onClick:de(p,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?me("",!0):(z(),K("div",x2,[g("div",{class:"envelope-container",onMousedown:v[2]||(v[2]=de(()=>{},["stop"]))},[te(au,{"model-value":c.value,width:180,height:80,"accent-color":"#22c55e","onUpdate:modelValue":b},null,8,["model-value"])],32)]))])],6))}}),_2=Ae(S2,[["__scopeId","data-v-2f5477a5"]]),k2={id:"envelope-visual",name:"Envelope Editor",version:"1.0.0",category:"audio",description:"Visual ADSR envelope with draggable curve control points",icon:"trending-up",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Trigger"},{id:"release",type:"trigger",label:"Release"}],outputs:[{id:"envelope",type:"audio",label:"Envelope"},{id:"value",type:"number",label:"Value"}],controls:[{id:"attack",type:"number",label:"Attack",default:.01,props:{min:.001,max:2,step:.001}},{id:"decay",type:"number",label:"Decay",default:.1,props:{min:.001,max:2,step:.001}},{id:"sustain",type:"number",label:"Sustain",default:.5,props:{min:0,max:1,step:.01}},{id:"release",type:"number",label:"Release",default:.3,props:{min:.001,max:5,step:.001}}],info:{overview:"A visual ADSR envelope editor with draggable control points for shaping attack, decay, sustain, and release curves. Functions identically to the standard Envelope node but adds an interactive graphical display for intuitive editing.",tips:["Drag the control points directly on the curve for faster, more intuitive shaping than typing numbers.","Use this node in place of the plain Envelope when you want visual feedback during design.","Connect the value output to visual parameters for real-time envelope monitoring."],pairsWith:["oscillator","gain","filter","synth","beat-detect"]}},C2={class:"handles-column handles-left"},N2=["onMouseenter"],$2={class:"label-text"},E2={class:"handles-column handles-right"},M2=["onMouseenter"],T2={class:"label-text"},I2={class:"node-content"},P2={key:0,class:"node-body"},A2=xe({__name:"ParametricEqNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(null),s=D(()=>{var v,x;const S=((v=t.data)==null?void 0:v.nodeType)??"parametric-eq";return o.getDefinition(S)??((x=t.data)==null?void 0:x.definition)??null}),r=D(()=>{var S;return s.value?((S=ze[s.value.category])==null?void 0:S.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),l=D(()=>{var S;return((S=s.value)==null?void 0:S.inputs)??[]}),u=D(()=>{var S;return((S=s.value)==null?void 0:S.outputs)??[]}),c=D({get:()=>{var S,v,x,h,f,d,m,_,C;return{bands:[{frequency:((S=t.data)==null?void 0:S.freq1)??200,gain:((v=t.data)==null?void 0:v.gain1)??0,q:((x=t.data)==null?void 0:x.q1)??1},{frequency:((h=t.data)==null?void 0:h.freq2)??1e3,gain:((f=t.data)==null?void 0:f.gain2)??0,q:((d=t.data)==null?void 0:d.q2)??1},{frequency:((m=t.data)==null?void 0:m.freq3)??5e3,gain:((_=t.data)==null?void 0:_.gain3)??0,q:((C=t.data)==null?void 0:C.q3)??1}]}},set:S=>{n.updateNodeData(t.id,{freq1:S.bands[0].frequency,gain1:S.bands[0].gain,q1:S.bands[0].q,freq2:S.bands[1].frequency,gain2:S.bands[1].gain,q2:S.bands[1].q,freq3:S.bands[2].frequency,gain3:S.bands[2].gain,q3:S.bands[2].q})}});function p(){i.value=!i.value}function y(S){var v;return((v=Pe[S])==null?void 0:v.color)??"var(--color-neutral-400)"}function b(S){c.value=S}return(S,v)=>(z(),K("div",{class:ge(["eq-node",{selected:t.selected,collapsed:i.value}]),style:Q({"--port-count":Math.max(l.value.length,u.value.length,1)})},[g("div",C2,[(z(!0),K(ke,null,De(l.value,x=>(z(),K("div",{key:x.id,class:"handle-slot",onMouseenter:h=>a.value=`in-${x.id}`,onMouseleave:v[0]||(v[0]=h=>a.value=null)},[te(N(ce),{id:x.id,type:"target",position:N(ee).Left,style:Q({background:y(x.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:a.value===`in-${x.id}`||t.selected}])},[g("span",$2,be(x.label),1),g("span",{class:"label-type",style:Q({color:y(x.type)})},be(x.type),5)],2)],40,N2))),128))]),g("div",E2,[(z(!0),K(ke,null,De(u.value,x=>(z(),K("div",{key:x.id,class:"handle-slot",onMouseenter:h=>a.value=`out-${x.id}`,onMouseleave:v[1]||(v[1]=h=>a.value=null)},[te(N(ce),{id:x.id,type:"source",position:N(ee).Right,style:Q({background:y(x.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value===`out-${x.id}`||t.selected}])},[g("span",T2,be(x.label),1),g("span",{class:"label-type",style:Q({color:y(x.type)})},be(x.type),5)],2)],40,M2))),128))]),g("div",I2,[g("div",{class:"node-header",style:Q({borderLeftColor:r.value})},[te(N(Mu),{size:14,class:"header-icon"}),v[4]||(v[4]=g("span",{class:"node-title"},"Parametric EQ",-1)),g("button",{class:"node-collapse-btn",onClick:de(p,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?me("",!0):(z(),K("div",P2,[g("div",{class:"eq-container",onPointerdown:v[2]||(v[2]=de(()=>{},["stop"])),onTouchstart:v[3]||(v[3]=de(()=>{},["stop"]))},[te(su,{"model-value":c.value,width:220,height:100,"accent-color":"#a855f7","onUpdate:modelValue":b},null,8,["model-value"])],32)]))])],6))}}),D2=Ae(A2,[["__scopeId","data-v-6bf8044c"]]),R2={id:"parametric-eq",name:"Parametric EQ",version:"1.0.0",category:"audio",description:"3-band parametric equalizer with visual frequency response and draggable bands",icon:"sliders-horizontal",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"freq1",type:"number",label:"Freq 1",default:200,props:{min:20,max:2e4,step:1}},{id:"gain1",type:"number",label:"Gain 1",default:0,props:{min:-24,max:24,step:.1}},{id:"q1",type:"number",label:"Q 1",default:1,props:{min:.1,max:10,step:.1}},{id:"freq2",type:"number",label:"Freq 2",default:1e3,props:{min:20,max:2e4,step:1}},{id:"gain2",type:"number",label:"Gain 2",default:0,props:{min:-24,max:24,step:.1}},{id:"q2",type:"number",label:"Q 2",default:1,props:{min:.1,max:10,step:.1}},{id:"freq3",type:"number",label:"Freq 3",default:5e3,props:{min:20,max:2e4,step:1}},{id:"gain3",type:"number",label:"Gain 3",default:0,props:{min:-24,max:24,step:.1}},{id:"q3",type:"number",label:"Q 3",default:1,props:{min:.1,max:10,step:.1}}],info:{overview:"A 3-band parametric equalizer with a visual frequency response display and draggable band controls. Each band has independent frequency, gain, and Q settings for precise tonal shaping across the low, mid, and high ranges.",tips:["Drag the band handles in the visual display for quick, intuitive adjustments.","Cut narrow bands (high Q, negative gain) to remove problem frequencies rather than boosting others.","Use gentle broad boosts (low Q, small positive gain) for overall tonal warmth or brightness."],pairsWith:["audio-player","gain","audio-output","reverb","filter"]}},z2={class:"handles-column handles-left"},V2=["onMouseenter"],L2={class:"label-text"},O2={class:"handles-column handles-right"},B2=["onMouseenter"],F2={class:"label-text"},W2={class:"node-content"},U2={key:0,class:"node-body"},q2=["value"],H2=["value"],Y2={class:"value"},G2=xe({__name:"WavetableNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(null),s=D(()=>{var f,d;const h=((f=t.data)==null?void 0:f.nodeType)??"wavetable";return o.getDefinition(h)??((d=t.data)==null?void 0:d.definition)??null}),r=D(()=>{var h;return s.value?((h=ze[s.value.category])==null?void 0:h.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),l=D(()=>{var h;return((h=s.value)==null?void 0:h.inputs)??[]}),u=D(()=>{var h;return((h=s.value)==null?void 0:h.outputs)??[]}),c=D({get:()=>{var d,m;const h=((d=t.data)==null?void 0:d.preset)??"sine";return{samples:((m=t.data)==null?void 0:m.waveform)??p(h),preset:h}},set:h=>{n.updateNodeData(t.id,{waveform:h.samples,preset:h.preset})}});function p(h){const d={sine:(_,C)=>Math.sin(_/C*Math.PI*2),square:(_,C)=>_<C/2?1:-1,sawtooth:(_,C)=>2*(_/C)-1,triangle:(_,C)=>{const L=_/C;return L<.5?4*L-1:3-4*L}},m=d[h]??d.sine;return Array.from({length:64},(_,C)=>m(C,64))}const y=D({get:()=>{var h;return((h=t.data)==null?void 0:h.frequency)??440},set:h=>{n.updateNodeData(t.id,{frequency:h})}}),b=D({get:()=>{var h;return((h=t.data)==null?void 0:h.volume)??.5},set:h=>{n.updateNodeData(t.id,{volume:h})}});function S(){i.value=!i.value}function v(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}function x(h){c.value=h}return(h,f)=>(z(),K("div",{class:ge(["wavetable-node",{selected:t.selected,collapsed:i.value}]),style:Q({"--port-count":Math.max(l.value.length,u.value.length,1)})},[g("div",z2,[(z(!0),K(ke,null,De(l.value,d=>(z(),K("div",{key:d.id,class:"handle-slot",onMouseenter:m=>a.value=`in-${d.id}`,onMouseleave:f[0]||(f[0]=m=>a.value=null)},[te(N(ce),{id:d.id,type:"target",position:N(ee).Left,style:Q({background:v(d.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:a.value===`in-${d.id}`||t.selected}])},[g("span",L2,be(d.label),1),g("span",{class:"label-type",style:Q({color:v(d.type)})},be(d.type),5)],2)],40,V2))),128))]),g("div",O2,[(z(!0),K(ke,null,De(u.value,d=>(z(),K("div",{key:d.id,class:"handle-slot",onMouseenter:m=>a.value=`out-${d.id}`,onMouseleave:f[1]||(f[1]=m=>a.value=null)},[te(N(ce),{id:d.id,type:"source",position:N(ee).Right,style:Q({background:v(d.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value===`out-${d.id}`||t.selected}])},[g("span",F2,be(d.label),1),g("span",{class:"label-type",style:Q({color:v(d.type)})},be(d.type),5)],2)],40,B2))),128))]),g("div",W2,[g("div",{class:"node-header",style:Q({borderLeftColor:r.value})},[te(N(Au),{size:14,class:"header-icon"}),f[7]||(f[7]=g("span",{class:"node-title"},"Wavetable",-1)),g("button",{class:"node-collapse-btn",onClick:de(S,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?me("",!0):(z(),K("div",U2,[g("div",{class:"waveform-container",onMousedown:f[2]||(f[2]=de(()=>{},["stop"]))},[te(ru,{"model-value":c.value,width:180,height:70,"accent-color":"#22c55e","sample-count":64,"onUpdate:modelValue":x},null,8,["model-value"])],32),g("div",{class:"control-row",onMousedown:f[4]||(f[4]=de(()=>{},["stop"]))},[f[8]||(f[8]=g("label",null,"Freq",-1)),g("input",{type:"number",value:y.value,min:"20",max:"2000",step:"1",onInput:f[3]||(f[3]=d=>y.value=parseFloat(d.target.value)||440)},null,40,q2),f[9]||(f[9]=g("span",{class:"unit"},"Hz",-1))],32),g("div",{class:"control-row",onMousedown:f[6]||(f[6]=de(()=>{},["stop"]))},[f[10]||(f[10]=g("label",null,"Vol",-1)),g("input",{type:"range",value:b.value,min:"0",max:"1",step:"0.01",onInput:f[5]||(f[5]=d=>b.value=parseFloat(d.target.value))},null,40,H2),g("span",Y2,be((b.value*100).toFixed(0))+"%",1)],32)]))])],6))}}),j2=Ae(G2,[["__scopeId","data-v-1c80b5ad"]]),X2={id:"wavetable",name:"Wavetable",version:"1.0.0",category:"audio",description:"Wavetable oscillator with drawable/editable waveform",icon:"waves",platforms:["web","electron"],inputs:[{id:"frequency",type:"number",label:"Freq"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"frequency",type:"number",label:"Frequency",default:440,props:{min:20,max:2e3,step:1}},{id:"volume",type:"slider",label:"Volume",default:.5,props:{min:0,max:1,step:.01}},{id:"preset",type:"select",label:"Preset",default:"sine",props:{options:["sine","square","sawtooth","triangle","custom"]}}],info:{overview:"A wavetable oscillator that lets you select from preset waveforms or draw a custom waveshape. The drawn waveform is stored as a wavetable and played back at the specified frequency, giving you full control over the harmonic content.",tips:["Select the custom preset and draw directly on the waveform display to create unique timbres.","Start from a preset waveform and modify it slightly for variations on familiar sounds.","Modulate the frequency input with an LFO for vibrato or with a MIDI source for melodic play."],pairsWith:["gain","filter","envelope","audio-output","svf-filter"]}},Z2={class:"handles-column handles-left"},K2=["onMouseenter"],J2={class:"label-text"},Q2={class:"handles-column handles-right"},eS=["onMouseenter"],tS={class:"label-text"},nS={class:"node-content"},oS={key:0,class:"node-body"},iS={class:"control-row instrument-row"},aS={class:"status-row"},sS={class:"status-value"},rS={key:1,class:"collapsed-info"},lS=xe({__name:"SynthNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),i=re(!1),a=re(null);let s=null,r=null,l=new Map;const u=D(()=>{var Z,X;const B=((Z=t.data)==null?void 0:Z.nodeType)??"synth";return o.getDefinition(B)??((X=t.data)==null?void 0:X.definition)??null}),c=D(()=>{var B;return u.value?((B=ze[u.value.category])==null?void 0:B.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),p=D(()=>{var B;return((B=u.value)==null?void 0:B.inputs)??[]}),y=D(()=>{var B;return((B=u.value)==null?void 0:B.outputs)??[]}),b=D({get:()=>{var B;return((B=t.data)==null?void 0:B.instrument)??"sine"},set:B=>n.updateNodeData(t.id,{instrument:B})}),S=D({get:()=>{var B;return((B=t.data)==null?void 0:B.volume)??-6},set:B=>n.updateNodeData(t.id,{volume:B})}),v=D({get:()=>{var B;return((B=t.data)==null?void 0:B.attack)??.01},set:B=>n.updateNodeData(t.id,{attack:B})}),x=D({get:()=>{var B;return((B=t.data)==null?void 0:B.decay)??.1},set:B=>n.updateNodeData(t.id,{decay:B})}),h=D({get:()=>{var B;return((B=t.data)==null?void 0:B.sustain)??.7},set:B=>n.updateNodeData(t.id,{sustain:B})}),f=D({get:()=>{var B;return((B=t.data)==null?void 0:B.release)??.3},set:B=>n.updateNodeData(t.id,{release:B})}),d=D({get:()=>{var B;return((B=t.data)==null?void 0:B.cutoff)??2e3},set:B=>n.updateNodeData(t.id,{cutoff:B})}),m=D({get:()=>{var B;return((B=t.data)==null?void 0:B.resonance)??1},set:B=>n.updateNodeData(t.id,{resonance:B})}),_=D({get:()=>{var B;return((B=t.data)==null?void 0:B.filterEnv)??.5},set:B=>n.updateNodeData(t.id,{filterEnv:B})}),C=D({get:()=>{var B;return((B=t.data)==null?void 0:B.brightness)??.5},set:B=>n.updateNodeData(t.id,{brightness:B})}),L=D({get:()=>{var B;return((B=t.data)==null?void 0:B.damping)??.5},set:B=>n.updateNodeData(t.id,{damping:B})}),R=D({get:()=>{var B;return((B=t.data)==null?void 0:B.detune)??10},set:B=>n.updateNodeData(t.id,{detune:B})}),j=D({get:()=>{var B;return((B=t.data)==null?void 0:B.voices)??3},set:B=>n.updateNodeData(t.id,{voices:B})}),Y=D(()=>{var B;return((B=t.data)==null?void 0:B.note)??60}),O=D(()=>{var B;return((B=t.data)==null?void 0:B.velocity)??100}),k=D(()=>{var B;return((B=t.data)==null?void 0:B.gate)??!1}),J={sine:"Sine",moog:"Moog Bass",piano:"Piano",organ:"Organ",pluck:"Pluck",pad:"Pad"},w={sine:["volume","attack","decay","sustain","release"],moog:["volume","attack","decay","sustain","release","cutoff","resonance","filterEnv"],piano:["volume","attack","decay","sustain","release","brightness"],organ:["volume","attack","release"],pluck:["volume","brightness","damping"],pad:["volume","attack","release","detune","voices"]},I=D(()=>w[b.value]??["volume"]);function $(){i.value=!i.value}function V(B){var Z;return((Z=Pe[B])==null?void 0:Z.color)??"var(--color-neutral-400)"}function M(B){return 440*Math.pow(2,(B-69)/12)}function U(B){return Math.pow(10,B/20)}function W(){s||(s=new AudioContext,r=s.createGain(),r.connect(s.destination),r.gain.value=U(S.value)),s.state==="suspended"&&s.resume()}function ne(B,Z){if(W(),!s||!r)throw new Error("Audio not initialized");const X=M(B),P=Z/127,H=s.currentTime,F=s.createGain();F.gain.setValueAtTime(0,H);const ie=[];let oe;switch(b.value){case"sine":{const E=s.createOscillator();E.type="sine",E.frequency.value=X,E.connect(F),E.start(),ie.push(E);break}case"moog":{const E=s.createOscillator();E.type="sawtooth",E.frequency.value=X,oe=s.createBiquadFilter(),oe.type="lowpass",oe.frequency.value=d.value,oe.Q.value=m.value;const A=d.value+(2e4-d.value)*_.value;oe.frequency.setValueAtTime(d.value*.5,H),oe.frequency.linearRampToValueAtTime(A,H+v.value),oe.frequency.linearRampToValueAtTime(d.value,H+v.value+x.value),E.connect(oe),oe.connect(F),E.start(),ie.push(E);break}case"piano":{if(["triangle","sine"].forEach((A,G)=>{const q=s.createOscillator();q.type=A,q.frequency.value=X*(1+(G-.5)*.002),q.connect(F),q.start(),ie.push(q)}),C.value>.3){const A=s.createOscillator();A.type="sine",A.frequency.value=X*2;const G=s.createGain();G.gain.value=C.value*.3,A.connect(G),G.connect(F),A.start(),ie.push(A)}break}case"organ":{const E=[1,2,3,4,6,8],A=[1,.5,.3,.25,.2,.15];E.forEach((G,q)=>{const le=s.createOscillator();le.type="sine",le.frequency.value=X*G;const ue=s.createGain();ue.gain.value=A[q],le.connect(ue),ue.connect(F),le.start(),ie.push(le)});break}case"pluck":{const E=s.sampleRate/X,A=s.createBuffer(1,Math.ceil(E),s.sampleRate),G=A.getChannelData(0);for(let ve=0;ve<G.length;ve++)G[ve]=Math.random()*2-1;const q=s.createBufferSource();q.buffer=A,oe=s.createBiquadFilter(),oe.type="lowpass",oe.frequency.value=X*(2+C.value*8),oe.Q.value=.5,oe.frequency.setValueAtTime(oe.frequency.value,H),oe.frequency.exponentialRampToValueAtTime(Math.max(20,X*(1-L.value)),H+.5+(1-L.value)),q.connect(oe),oe.connect(F),q.start();const le=s.createOscillator();le.type="sine",le.frequency.value=X;const ue=s.createGain();ue.gain.setValueAtTime(.3,H),ue.gain.exponentialRampToValueAtTime(.001,H+.3),le.connect(ue),ue.connect(F),le.start(),ie.push(le);break}case"pad":{const E=j.value,A=R.value;for(let G=0;G<E;G++){const q=s.createOscillator();q.type=G%2===0?"sawtooth":"triangle";const le=(G-(E-1)/2)/E*A;q.detune.value=le,q.frequency.value=X;const ue=s.createGain();ue.gain.value=1/E,q.connect(ue),ue.connect(F),q.start(),ie.push(q)}oe=s.createBiquadFilter(),oe.type="lowpass",oe.frequency.value=3e3,oe.Q.value=.5,F.disconnect(),F.connect(oe),oe.connect(r);break}}b.value!=="pad"&&F.connect(r);const se=P*U(S.value),T=se*h.value;return F.gain.setValueAtTime(0,H),F.gain.linearRampToValueAtTime(se,H+v.value),F.gain.linearRampToValueAtTime(T,H+v.value+x.value),{oscillators:ie,gainNode:F,filterNode:oe}}function ae(B,Z){pe(B);try{const X=ne(B,Z);l.set(B,X)}catch(X){console.error("Failed to create voice:",X)}}function pe(B){const Z=l.get(B);if(!Z||!s)return;Z.releaseTimeout&&clearTimeout(Z.releaseTimeout);const X=s.currentTime,P=f.value;Z.gainNode.gain.cancelScheduledValues(X),Z.gainNode.gain.setValueAtTime(Z.gainNode.gain.value,X),Z.gainNode.gain.linearRampToValueAtTime(0,X+P),Z.releaseTimeout=setTimeout(()=>{Z.oscillators.forEach(H=>{try{H.stop(),H.disconnect()}catch{}}),Z.gainNode.disconnect(),Z.filterNode&&Z.filterNode.disconnect(),l.delete(B)},(P+.1)*1e3)}function he(){l.forEach((B,Z)=>{pe(Z)})}return _e(k,(B,Z)=>{B&&!Z?ae(Y.value,O.value):!B&&Z&&pe(Y.value)}),_e(S,B=>{r&&(r.gain.value=U(B))}),Ye(()=>{he(),s&&(s.close(),s=null)}),(B,Z)=>(z(),K("div",{class:ge(["synth-node",{selected:t.selected,collapsed:i.value}])},[g("div",Z2,[(z(!0),K(ke,null,De(p.value,X=>(z(),K("div",{key:X.id,class:"handle-slot",onMouseenter:P=>a.value=`in-${X.id}`,onMouseleave:Z[0]||(Z[0]=P=>a.value=null)},[te(N(ce),{id:X.id,type:"target",position:N(ee).Left,style:Q({background:V(X.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:a.value===`in-${X.id}`||t.selected}])},[g("span",J2,be(X.label),1)],2)],40,K2))),128))]),g("div",Q2,[(z(!0),K(ke,null,De(y.value,X=>(z(),K("div",{key:X.id,class:"handle-slot",onMouseenter:P=>a.value=`out-${X.id}`,onMouseleave:Z[1]||(Z[1]=P=>a.value=null)},[te(N(ce),{id:X.id,type:"source",position:N(ee).Right,style:Q({background:V(X.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:a.value===`out-${X.id}`||t.selected}])},[g("span",tS,be(X.label),1)],2)],40,eS))),128))]),g("div",nS,[g("div",{class:"node-header",style:Q({borderLeftColor:c.value})},[te(N(Vs),{size:14,class:"header-icon"}),Z[17]||(Z[17]=g("span",{class:"node-title"},"Synth",-1)),g("button",{class:"node-collapse-btn",onClick:de($,["stop"])},[i.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))])],4),i.value?(z(),K("div",rS,be(J[b.value]),1)):(z(),K("div",oS,[g("div",iS,[Z[19]||(Z[19]=g("label",null,"Instrument",-1)),nn(g("select",{"onUpdate:modelValue":Z[2]||(Z[2]=X=>b.value=X),onMousedown:Z[3]||(Z[3]=de(()=>{},["stop"]))},[...Z[18]||(Z[18]=[Ds('<option value="sine" data-v-fbd644e7> Sine </option><option value="moog" data-v-fbd644e7> Moog Bass </option><option value="piano" data-v-fbd644e7> Piano </option><option value="organ" data-v-fbd644e7> Organ </option><option value="pluck" data-v-fbd644e7> Pluck </option><option value="pad" data-v-fbd644e7> Pad </option>',6)])],544),[[As,b.value]])]),g("div",{class:"knobs-grid",onMousedown:Z[16]||(Z[16]=de(()=>{},["stop"]))},[I.value.includes("volume")?(z(),we(Ke,{key:0,modelValue:S.value,"onUpdate:modelValue":Z[4]||(Z[4]=X=>S.value=X),min:-60,max:0,step:1,label:"Vol",size:"small","accent-color":"#f59e0b","value-format":X=>`${X}dB`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("attack")?(z(),we(Ke,{key:1,modelValue:v.value,"onUpdate:modelValue":Z[5]||(Z[5]=X=>v.value=X),min:.001,max:2,step:.001,label:"Atk",size:"small","accent-color":"#f59e0b","value-format":X=>`${X.toFixed(2)}s`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("decay")?(z(),we(Ke,{key:2,modelValue:x.value,"onUpdate:modelValue":Z[6]||(Z[6]=X=>x.value=X),min:.001,max:2,step:.001,label:"Dec",size:"small","accent-color":"#f59e0b","value-format":X=>`${X.toFixed(2)}s`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("sustain")?(z(),we(Ke,{key:3,modelValue:h.value,"onUpdate:modelValue":Z[7]||(Z[7]=X=>h.value=X),min:0,max:1,step:.01,label:"Sus",size:"small","accent-color":"#f59e0b","value-format":X=>`${Math.round(X*100)}%`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("release")?(z(),we(Ke,{key:4,modelValue:f.value,"onUpdate:modelValue":Z[8]||(Z[8]=X=>f.value=X),min:.001,max:5,step:.001,label:"Rel",size:"small","accent-color":"#f59e0b","value-format":X=>`${X.toFixed(2)}s`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("cutoff")?(z(),we(Ke,{key:5,modelValue:d.value,"onUpdate:modelValue":Z[9]||(Z[9]=X=>d.value=X),min:20,max:2e4,step:10,label:"Cut",size:"small","accent-color":"#ec4899","value-format":X=>X>=1e3?`${(X/1e3).toFixed(1)}k`:`${Math.round(X)}`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("resonance")?(z(),we(Ke,{key:6,modelValue:m.value,"onUpdate:modelValue":Z[10]||(Z[10]=X=>m.value=X),min:.1,max:30,step:.1,label:"Res",size:"small","accent-color":"#ec4899","value-format":X=>X.toFixed(1)},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("filterEnv")?(z(),we(Ke,{key:7,modelValue:_.value,"onUpdate:modelValue":Z[11]||(Z[11]=X=>_.value=X),min:0,max:1,step:.01,label:"FEnv",size:"small","accent-color":"#ec4899","value-format":X=>`${Math.round(X*100)}%`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("brightness")?(z(),we(Ke,{key:8,modelValue:C.value,"onUpdate:modelValue":Z[12]||(Z[12]=X=>C.value=X),min:0,max:1,step:.01,label:"Bright",size:"small","accent-color":"#22c55e","value-format":X=>`${Math.round(X*100)}%`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("damping")?(z(),we(Ke,{key:9,modelValue:L.value,"onUpdate:modelValue":Z[13]||(Z[13]=X=>L.value=X),min:0,max:1,step:.01,label:"Damp",size:"small","accent-color":"#22c55e","value-format":X=>`${Math.round(X*100)}%`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("detune")?(z(),we(Ke,{key:10,modelValue:R.value,"onUpdate:modelValue":Z[14]||(Z[14]=X=>R.value=X),min:0,max:50,step:1,label:"Detune",size:"small","accent-color":"#8b5cf6","value-format":X=>`${X}c`},null,8,["modelValue","value-format"])):me("",!0),I.value.includes("voices")?(z(),we(Ke,{key:11,modelValue:j.value,"onUpdate:modelValue":Z[15]||(Z[15]=X=>j.value=X),min:1,max:8,step:1,label:"Voices",size:"small","accent-color":"#8b5cf6","value-format":X=>`${X}`},null,8,["modelValue","value-format"])):me("",!0)],32),g("div",aS,[Z[20]||(Z[20]=g("span",{class:"status-label"},"Note:",-1)),g("span",sS,be(Y.value),1),g("span",{class:ge(["gate-indicator",{active:k.value}])},null,2)])]))])],2))}}),uS=Ae(lS,[["__scopeId","data-v-fbd644e7"]]),dS={id:"synth",name:"Synth",version:"1.0.0",category:"audio",description:"Synthesizer that plays MIDI notes with different instrument sounds",icon:"music",platforms:["web","electron"],inputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"gate",type:"boolean",label:"Gate"},{id:"trigger",type:"trigger",label:"Trigger"}],outputs:[{id:"audio",type:"audio",label:"Audio"}],controls:[{id:"instrument",type:"select",label:"Instrument",default:"sine",props:{options:["sine","moog","piano","organ","pluck","pad"]}},{id:"volume",type:"number",label:"Volume",default:-6,props:{min:-60,max:0,step:1}},{id:"attack",type:"number",label:"Attack",default:.01,props:{min:.001,max:2,step:.001}},{id:"decay",type:"number",label:"Decay",default:.1,props:{min:.001,max:2,step:.001}},{id:"sustain",type:"number",label:"Sustain",default:.01,props:{min:0,max:1,step:.01}},{id:"release",type:"number",label:"Release",default:.3,props:{min:.001,max:5,step:.001}},{id:"cutoff",type:"number",label:"Cutoff",default:2e3,props:{min:20,max:2e4,step:1}},{id:"resonance",type:"number",label:"Resonance",default:1,props:{min:.1,max:30,step:.1}},{id:"filterEnv",type:"number",label:"Filter Env",default:.5,props:{min:0,max:1,step:.01}},{id:"brightness",type:"number",label:"Brightness",default:.5,props:{min:0,max:1,step:.01}},{id:"damping",type:"number",label:"Damping",default:.5,props:{min:0,max:1,step:.01}},{id:"detune",type:"number",label:"Detune",default:10,props:{min:0,max:50,step:1}},{id:"voices",type:"number",label:"Voices",default:3,props:{min:1,max:8,step:1}}],info:{overview:"An all-in-one synthesizer that responds to MIDI note, velocity, and gate inputs. Includes six instrument presets ranging from simple sine to moog bass, piano, organ, pluck, and pad. Each preset exposes relevant parameters like filter cutoff, brightness, and voice count.",tips:["Use the gate input for held notes and the trigger input for one-shot percussive hits.","Switch to the moog preset and lower the cutoff for classic acid bass lines.","Increase voices and detune on the pad preset for wide, lush chord textures."],pairsWith:["midi-input","envelope","audio-output","reverb","gain"]}},cS=[n2,o2,i2,a2,s2,r2,l2,u2,d2,c2,p2,f2,k2,R2,X2,dS],pS={id:"shader",name:"Shader",version:"3.0.0",category:"visual",description:"Custom GLSL shader with dynamic uniform inputs. Uniforms in your code automatically become input ports.",icon:"code",platforms:["web","electron"],inputs:[{id:"iChannel0",type:"texture",label:"Channel 0"},{id:"iChannel1",type:"texture",label:"Channel 1"},{id:"iChannel2",type:"texture",label:"Channel 2"},{id:"iChannel3",type:"texture",label:"Channel 3"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"preset",type:"select",label:"Preset",default:"custom",props:{options:["custom","--- Generators ---","gradient","noise","plasma","circles","waves","voronoi","--- Effects ---","chromatic-aberration","pixelate","vignette","glitch","edge-detect","kaleidoscope","--- Utility ---","solid-color","uv-debug","passthrough","--- Artistic ---","watercolor","halftone"]}},{id:"code",type:"code",label:"Fragment Shader",default:`// Declare uniforms to create input ports:
// uniform float u_brightness;  -> creates a number input
// uniform vec3 u_color;        -> creates a color/data input
// uniform sampler2D u_image;   -> creates a texture input

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = fragCoord / iResolution.xy;
  vec3 col = 0.5 + 0.5 * cos(iTime + uv.xyx + vec3(0, 2, 4));
  fragColor = vec4(col, 1.0);
}`},{id:"vertexCode",type:"code",label:"Vertex Shader (optional)",default:""},{id:"shadertoy",type:"toggle",label:"Shadertoy Mode",default:!0}],info:{overview:"Runs custom GLSL fragment shaders with automatic uniform detection. Declared uniforms become input ports so other nodes can feed values into the shader. Includes Shadertoy compatibility mode and a library of built-in presets for common effects and generators.",tips:["Start with a preset and modify the code to learn how the uniform-to-port system works.","Disable Shadertoy mode if you want to write standard WebGL shaders with your own varying setup.","Texture inputs iChannel0 through iChannel3 are always available regardless of what uniforms you declare.","Connect a time node to a float uniform for animations that stay in sync with the rest of your flow."],pairsWith:["time","lfo","webcam","blend","texture-display"]}},fS={id:"webcam-snapshot",name:"Webcam Snapshot",version:"1.0.0",category:"visual",description:"Capture snapshots from webcam on trigger",icon:"camera",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Capture"}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"imageData",type:"data",label:"Image Data"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"captured",type:"trigger",label:"Captured"}],controls:[{id:"device",type:"select",label:"Camera",default:"default",props:{deviceType:"video-input"}},{id:"resolution",type:"select",label:"Resolution",default:"720p",props:{options:[{value:"480p",label:"480p (640x480)"},{value:"720p",label:"720p (1280x720)"},{value:"1080p",label:"1080p (1920x1080)"}]}},{id:"mirror",type:"toggle",label:"Mirror",default:!1}],info:{overview:"Captures a single still frame from the webcam each time it receives a trigger. Unlike the continuous webcam node, this only updates on demand. Outputs the captured texture, raw image data, and dimensions.",tips:["Connect an interval node to the trigger input to capture frames at a controlled rate lower than full video.","Use the captured trigger output to chain actions that should happen only after a new frame is taken.","The imageData output carries raw pixel data suitable for analysis nodes or the function node."],pairsWith:["interval","blend","shader","start","color-correction"]}},hS={id:"color",name:"Color",version:"1.0.0",category:"visual",description:"Create RGBA color value",icon:"palette",platforms:["web","electron"],inputs:[{id:"r",type:"number",label:"R"},{id:"g",type:"number",label:"G"},{id:"b",type:"number",label:"B"},{id:"a",type:"number",label:"A"}],outputs:[{id:"color",type:"data",label:"Color"},{id:"r",type:"number",label:"R"},{id:"g",type:"number",label:"G"},{id:"b",type:"number",label:"B"},{id:"a",type:"number",label:"A"}],controls:[{id:"r",type:"slider",label:"R",default:1,props:{min:0,max:1,step:.01}},{id:"g",type:"slider",label:"G",default:1,props:{min:0,max:1,step:.01}},{id:"b",type:"slider",label:"B",default:1,props:{min:0,max:1,step:.01}},{id:"a",type:"slider",label:"A",default:1,props:{min:0,max:1,step:.01}}],info:{overview:"Creates an RGBA color value from individual channel sliders or numeric inputs. Outputs both the combined color object and separate R, G, B, A channel values. Useful as a color source for shaders and visual effects.",tips:["Connect LFO nodes to individual channels to create animated color cycling without writing shader code.","Use the separate channel outputs to feed different parts of a flow with the same base color values.","Set alpha below 1.0 when using this as a tint layer through a blend node in normal mode."],pairsWith:["shader","blend","lfo","color-correction","map-range"]}},gS={id:"texture-display",name:"Texture Display",version:"1.0.0",category:"visual",description:"Display texture on canvas",icon:"monitor",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"}],outputs:[],controls:[],info:{overview:"Renders an input texture directly onto a visible canvas in the node. This is the simplest way to preview any texture output without routing it to the main output. It has no controls and no outputs.",tips:["Place one after each major processing step to visually debug your texture pipeline.","This node does not pass the texture through, so branch the connection if you also need to continue the chain.","Use it alongside the main-output node to compare intermediate results with the final render."],pairsWith:["shader","blend","webcam","main-output","color-correction"]}},mS={id:"blend",name:"Blend",version:"1.0.0",category:"visual",description:"Blend two textures together",icon:"layers",platforms:["web","electron"],inputs:[{id:"a",type:"texture",label:"A"},{id:"b",type:"texture",label:"B"},{id:"mix",type:"number",label:"Mix"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"mix",type:"slider",label:"Mix",default:.5,props:{min:0,max:1,step:.01}},{id:"mode",type:"select",label:"Mode",default:"normal",props:{options:["normal","add","multiply","screen","overlay"]}}],info:{overview:"Combines two texture inputs into a single output using a selectable blend mode and a mix slider. Supports normal, add, multiply, screen, and overlay modes. This is the standard way to layer visuals together.",tips:["Animate the mix value with an LFO to crossfade between two sources rhythmically.","Add mode is useful for combining bright elements on dark backgrounds without washing out the image.","Chain multiple blend nodes to composite more than two layers together."],pairsWith:["shader","webcam","color-correction","lfo","image-loader"]}},vS={id:"blur",name:"Blur",version:"1.0.0",category:"visual",description:"Apply Gaussian blur to texture",icon:"droplet",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"radius",type:"number",label:"Radius"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"radius",type:"slider",label:"Radius",default:5,props:{min:0,max:50,step:.5}},{id:"passes",type:"number",label:"Passes",default:2,props:{min:1,max:10}}],info:{overview:"Applies a Gaussian blur to the input texture. The radius controls how far the blur spreads, and the passes control determines quality. More passes produce a smoother result at the cost of performance.",tips:["Keep passes at 2 or 3 for a good balance between quality and speed; going above 5 rarely looks different.","Animate the radius with an LFO for a pulsing depth-of-field effect.","Use a small blur radius as a noise reduction step before feeding into edge detection or color correction."],pairsWith:["shader","blend","color-correction","lfo","displacement"]}},yS={id:"color-correction",name:"Color Correction",version:"1.0.0",category:"visual",description:"Adjust brightness, contrast, saturation, hue, and gamma",icon:"palette",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"brightness",type:"number",label:"Brightness"},{id:"contrast",type:"number",label:"Contrast"},{id:"saturation",type:"number",label:"Saturation"},{id:"hue",type:"number",label:"Hue"},{id:"gamma",type:"number",label:"Gamma"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"brightness",type:"slider",label:"Brightness",default:0,props:{min:-1,max:1,step:.01}},{id:"contrast",type:"slider",label:"Contrast",default:1,props:{min:0,max:3,step:.01}},{id:"saturation",type:"slider",label:"Saturation",default:1,props:{min:0,max:3,step:.01}},{id:"hue",type:"slider",label:"Hue",default:0,props:{min:-180,max:180,step:1}},{id:"gamma",type:"slider",label:"Gamma",default:1,props:{min:.1,max:3,step:.01}}],info:{overview:"Adjusts brightness, contrast, saturation, hue, and gamma of an input texture. All parameters can be driven by external inputs, making it easy to animate color grading in real time.",tips:["Drive the hue input with an LFO for a continuously shifting color palette effect.","Set saturation to 0 to convert any texture to grayscale before further processing.","Small gamma adjustments (0.8 to 1.2) can significantly improve perceived contrast without clipping highlights."],pairsWith:["webcam","blend","shader","lfo","image-loader"]}},bS={id:"displacement",name:"Displacement",version:"1.0.0",category:"visual",description:"Displace texture using displacement map",icon:"move",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"displacement",type:"texture",label:"Displacement Map"},{id:"strength",type:"number",label:"Strength"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"strength",type:"slider",label:"Strength",default:.1,props:{min:0,max:1,step:.01}},{id:"channel",type:"select",label:"Channel",default:"rg",props:{options:["r","rg","rgb"]}}],info:{overview:"Warps the input texture by using a second texture as a displacement map. The brightness values of the displacement map shift pixel positions in the source. Strength controls how far pixels are moved, and channel selects which map channels drive the displacement axes.",tips:["Feed a noise shader into the displacement map input for organic, fluid-like distortion.","Animate the strength value with an LFO to pulse the distortion in and out.","The rg channel mode gives independent horizontal and vertical displacement; use r for horizontal only."],pairsWith:["shader","blur","webcam","lfo","blend"]}},wS={id:"transform-2d",name:"Transform 2D",version:"1.0.0",category:"visual",description:"Apply 2D transforms (scale, rotate, translate)",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"},{id:"scaleX",type:"number",label:"Scale X"},{id:"scaleY",type:"number",label:"Scale Y"},{id:"rotate",type:"number",label:"Rotation"},{id:"translateX",type:"number",label:"Translate X"},{id:"translateY",type:"number",label:"Translate Y"}],outputs:[{id:"texture",type:"texture",label:"Texture"}],controls:[{id:"scaleX",type:"slider",label:"Scale X",default:1,props:{min:.1,max:5,step:.01}},{id:"scaleY",type:"slider",label:"Scale Y",default:1,props:{min:.1,max:5,step:.01}},{id:"rotate",type:"slider",label:"Rotation",default:0,props:{min:-180,max:180,step:1}},{id:"translateX",type:"slider",label:"Translate X",default:0,props:{min:-1,max:1,step:.01}},{id:"translateY",type:"slider",label:"Translate Y",default:0,props:{min:-1,max:1,step:.01}}],info:{overview:"Applies scale, rotation, and translation transforms to a texture. All parameters accept external inputs so they can be animated. This is the standard way to reposition or resize a texture layer before blending or display.",tips:["Drive the rotation input with an LFO for a continuously spinning texture effect.","Scale values below 1.0 shrink the texture, revealing the border; combine with blend to composite over a background.","Translation values are normalized, so 0.5 moves the texture halfway across the frame."],pairsWith:["blend","shader","lfo","webcam","displacement"]}},xS={id:"image-loader",name:"Image Loader",version:"1.1.0",category:"visual",description:"Load images from URL, file, or asset library",icon:"image",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"trigger",type:"trigger",label:"Reload"}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"assetId",type:"asset-picker",label:"Asset",default:null,props:{assetType:"image"}},{id:"url",type:"text",label:"Or URL",default:""},{id:"crossOrigin",type:"select",label:"Cross Origin",default:"anonymous",props:{options:["anonymous","use-credentials","none"]}}],info:{overview:"Loads a still image from a URL, local file, or the built-in asset library and outputs it as a texture. Also provides the image dimensions and a loading state. Supports reload via trigger input.",tips:["Use the reload trigger input to swap images at runtime without rebuilding connections.","Set cross-origin to none when loading local files to avoid unnecessary CORS restrictions.","The loading output can gate downstream nodes so they only process after the image is ready."],pairsWith:["blend","shader","displacement","color-correction","start"]}},SS={id:"video-player",name:"Video Player",version:"1.0.0",category:"visual",description:"Play video from URL or file",icon:"play-circle",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"play",type:"trigger",label:"Play"},{id:"pause",type:"trigger",label:"Pause"},{id:"seek",type:"number",label:"Seek (s)"}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"video",type:"video",label:"Video Element"},{id:"playing",type:"boolean",label:"Playing"},{id:"time",type:"number",label:"Current Time"},{id:"duration",type:"number",label:"Duration"},{id:"progress",type:"number",label:"Progress (0-1)"}],controls:[{id:"url",type:"text",label:"Video URL",default:""},{id:"autoplay",type:"toggle",label:"Autoplay",default:!1},{id:"loop",type:"toggle",label:"Loop",default:!0},{id:"playbackRate",type:"number",label:"Playback Rate",default:1,props:{min:.25,max:4,step:.25}},{id:"volume",type:"slider",label:"Volume",default:.5,props:{min:0,max:1,step:.01}}],info:{overview:"Plays a video file from a URL and outputs its frames as a texture. Provides playback controls including play, pause, seek, loop, and playback rate. Also outputs current time, duration, and a normalized progress value.",tips:["Use the progress output (0 to 1) with map-range to sync other parameters to the video timeline.","Set loop to true and connect a metronome to the seek input to create rhythmic video scrubbing.","The video element output can be shared with other nodes that accept raw video for additional processing."],pairsWith:["blend","shader","color-correction","metronome","texture-display"]}},_S=[pS,fS,hS,gS,mS,vS,yS,bS,wS,xS,SS],kS={id:"text-generation",name:"Text Generate",version:"1.0.0",category:"ai",description:"Generate text using local language models",icon:"message-square",platforms:["web","electron"],inputs:[{id:"prompt",type:"string",label:"Prompt"},{id:"trigger",type:"trigger",label:"Generate"}],outputs:[{id:"text",type:"string",label:"Generated Text"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"prompt",type:"text",label:"Prompt",default:"Once upon a time"},{id:"maxTokens",type:"number",label:"Max Tokens",default:50,props:{min:10,max:200}},{id:"temperature",type:"slider",label:"Temperature",default:.7,props:{min:.1,max:2,step:.1}}],info:{overview:"Generates text using a local language model running in the browser. Takes a prompt and produces a completion with configurable length and temperature. Good for creative text, dialogue, or data augmentation tasks.",tips:["Lower the temperature toward 0.1 for more predictable, deterministic outputs.","Use String Template to build structured prompts from multiple inputs before feeding them in."],pairsWith:["string-template","sentiment-analysis","speech-recognition","monitor"]}},CS={id:"image-classification",name:"Classify Image",version:"1.0.0",category:"ai",description:"Classify images using Vision Transformer",icon:"scan",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Classify"}],outputs:[{id:"labels",type:"data",label:"Labels"},{id:"topLabel",type:"string",label:"Top Label"},{id:"topScore",type:"number",label:"Top Score"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"topK",type:"number",label:"Top K",default:5,props:{min:1,max:10}},{id:"interval",type:"number",label:"Frame Interval",default:30,props:{min:1,max:120}}],info:{overview:"Classifies images using a Vision Transformer model and returns ranked labels with confidence scores. Outputs the top K predictions along with the highest-scoring label and its score. Useful for sorting, filtering, or reacting to visual content.",tips:["Lower the Top K value to reduce noise when you only care about the most likely class.","Connect the topLabel output to a Gate node to trigger actions only when a specific class is detected."],pairsWith:["webcam","object-detection","image-captioning","gate"]}},NS={id:"sentiment-analysis",name:"Sentiment",version:"1.0.0",category:"ai",description:"Analyze text sentiment (positive/negative)",icon:"smile",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Text"},{id:"trigger",type:"trigger",label:"Analyze"}],outputs:[{id:"sentiment",type:"string",label:"Sentiment"},{id:"score",type:"number",label:"Score"},{id:"positive",type:"number",label:"Positive"},{id:"negative",type:"number",label:"Negative"},{id:"loading",type:"boolean",label:"Loading"}],controls:[],info:{overview:"Analyzes text and classifies it as positive or negative, outputting both a label and numeric scores. Returns separate positive and negative confidence values. Useful for monitoring tone in chat messages, reviews, or transcribed speech.",tips:["Connect this after Speech to Text to get real-time sentiment from spoken input.","Use the score output with an Expression node to create custom thresholds for sentiment-based branching."],pairsWith:["speech-recognition","text-generation","string-template","expression"]}},$S={id:"image-captioning",name:"Caption Image",version:"1.0.0",category:"ai",description:"Generate captions for images",icon:"image",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Caption"}],outputs:[{id:"caption",type:"string",label:"Caption"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"interval",type:"number",label:"Frame Interval",default:60,props:{min:1,max:300}}],info:{overview:"Generates a natural language description of an image using a vision-language model. Takes image data as input and produces a text caption. The frame interval control limits how often captioning runs on video streams.",tips:["Increase the frame interval when processing live video to reduce CPU and memory usage.","Feed the caption output into Text Generate or Sentiment Analysis for further language processing."],pairsWith:["webcam","image-classification","text-generation","sentiment-analysis"]}},ES={id:"feature-extraction",name:"Text Embed",version:"1.0.0",category:"ai",description:"Convert text to embedding vectors",icon:"hash",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Text"},{id:"trigger",type:"trigger",label:"Extract"}],outputs:[{id:"embedding",type:"data",label:"Embedding"},{id:"dimensions",type:"number",label:"Dimensions"},{id:"loading",type:"boolean",label:"Loading"}],controls:[],info:{overview:"Converts text into a numeric embedding vector using a transformer model. The resulting high-dimensional vector captures semantic meaning, making it useful for similarity comparisons and clustering. Runs entirely in the browser.",tips:["Connect the trigger input to control when extraction runs, since it can be computationally expensive.","Use the dimensions output to verify the embedding size matches what downstream nodes expect."],pairsWith:["sentiment-analysis","string-template","text-generation","monitor"]}},MS={id:"object-detection",name:"Detect Objects",version:"1.0.0",category:"ai",description:"Detect and locate objects in images",icon:"box",platforms:["web","electron"],inputs:[{id:"image",type:"data",label:"Image"},{id:"trigger",type:"trigger",label:"Detect"}],outputs:[{id:"objects",type:"data",label:"Objects"},{id:"count",type:"number",label:"Count"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"threshold",type:"slider",label:"Threshold",default:.5,props:{min:.1,max:1,step:.05}},{id:"interval",type:"number",label:"Frame Interval",default:30,props:{min:1,max:120}}],info:{overview:"Detects and locates objects in images using a transformer-based model. Returns a list of detected objects with bounding boxes, labels, and confidence scores. The threshold control filters out low-confidence detections.",tips:["Lower the threshold to catch more objects at the cost of more false positives.","Use the count output to trigger logic only when a certain number of objects are in the scene."],pairsWith:["webcam","image-classification","mediapipe-object","gate"]}},TS={id:"speech-recognition",name:"Speech to Text",version:"2.0.0",category:"ai",description:"Transcribe audio to text using Whisper with manual, continuous, or VAD modes",icon:"mic",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"},{id:"trigger",type:"trigger",label:"Transcribe"}],outputs:[{id:"text",type:"string",label:"Transcribed Text"},{id:"partial",type:"string",label:"Partial Text"},{id:"speaking",type:"boolean",label:"Speaking"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"mode",type:"select",label:"Mode",default:"manual",props:{options:[{value:"manual",label:"Manual (on trigger)"},{value:"continuous",label:"Continuous (auto-chunk)"},{value:"vad",label:"VAD (voice detection)"}]}},{id:"bufferDuration",type:"number",label:"Buffer Duration (s)",default:5,props:{min:1,max:30,step:1}},{id:"vadThreshold",type:"number",label:"VAD Threshold",default:.01,props:{min:.001,max:.1,step:.001}},{id:"vadSilenceDuration",type:"number",label:"Silence Duration (ms)",default:500,props:{min:100,max:2e3,step:50}},{id:"chunkInterval",type:"number",label:"Chunk Interval (ms)",default:3e3,props:{min:1e3,max:1e4,step:500}}],info:{overview:"Transcribes audio to text using the Whisper model. Supports three modes: manual transcription on trigger, continuous auto-chunking, and voice activity detection (VAD) that listens for speech and transcribes automatically. Runs entirely in the browser.",tips:["Use VAD mode for hands-free transcription that only processes audio when someone is speaking.","Increase the buffer duration in continuous mode to get longer, more coherent transcription chunks."],pairsWith:["audio-input","sentiment-analysis","text-generation","string-template"]}},IS={id:"text-transformation",name:"Text Transform",version:"1.0.0",category:"ai",description:"Transform text - summarize, translate, or rewrite using T5/Flan models",icon:"refresh-cw",platforms:["web","electron"],inputs:[{id:"text",type:"string",label:"Input Text"},{id:"trigger",type:"trigger",label:"Transform"}],outputs:[{id:"result",type:"string",label:"Transformed Text"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"text",type:"text",label:"Input Text",default:""},{id:"task",type:"select",label:"Task",default:"summarize",props:{options:[{value:"summarize",label:"Summarize"},{value:"translate",label:"Translate to French"},{value:"paraphrase",label:"Paraphrase"}]}},{id:"maxTokens",type:"number",label:"Max Tokens",default:100,props:{min:10,max:500}}],info:{overview:"Transforms text using T5/Flan models for summarization, translation, or paraphrasing. Select a task and the model rewrites the input accordingly. Runs locally in the browser with no external API calls.",tips:["Increase max tokens for longer summaries or translations.","Chain with String Template to add task-specific prefixes before the input text."],pairsWith:["string-template","text-generation","sentiment-analysis","speech-recognition"]}},PS={id:"mediapipe-hand",name:"Hand Tracking",version:"1.0.0",category:"ai",description:"Detect and track hand landmarks using MediaPipe",icon:"hand",platforms:["web","electron"],inputs:[{id:"video",type:"video",label:"Video"}],outputs:[{id:"landmarks",type:"data",label:"Landmarks"},{id:"worldLandmarks",type:"data",label:"World Landmarks"},{id:"handedness",type:"string",label:"Handedness"},{id:"confidence",type:"number",label:"Confidence"},{id:"gestureType",type:"string",label:"Gesture"},{id:"fingerTips",type:"data",label:"Finger Tips"},{id:"handCount",type:"number",label:"Hand Count"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"handIndex",type:"slider",label:"Hand Index",default:0,props:{min:0,max:1,step:1}},{id:"showOverlay",type:"toggle",label:"Overlay",default:!0},{id:"vizMode",type:"select",label:"Style",default:"skeleton",props:{options:[{value:"skeleton",label:"Skeleton"},{value:"mesh",label:"Mesh"},{value:"both",label:"Both"},{value:"bbox",label:"Bounding Box"}]}},{id:"overlayColor",type:"color",label:"Color",default:"#00ff00"},{id:"lineWidth",type:"slider",label:"Line Width",default:2,props:{min:1,max:5,step:.5}},{id:"pointSize",type:"slider",label:"Point Size",default:4,props:{min:2,max:10,step:1}},{id:"colorByHand",type:"toggle",label:"Color by Hand",default:!0}],info:{overview:"Tracks hand landmarks in real time from a video feed using MediaPipe. Outputs 21 landmark points per hand, world-space coordinates, handedness, and fingertip positions. Supports multiple visualization modes including skeleton, mesh, and bounding box.",tips:["Use the fingerTips output to get just the five fingertip positions without parsing the full landmark array.",'Enable "Color by Hand" to visually distinguish left and right hands in the overlay.'],pairsWith:["webcam","mediapipe-gesture","mediapipe-pose","shader"]}},bl=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]],AS=[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,23],[12,24],[23,24],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[23,25],[25,27],[27,29],[27,31],[29,31],[24,26],[26,28],[28,30],[28,32],[30,32]],DS=[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109,10],RS=[263,249,390,373,374,380,381,382,362,263],zS=[33,7,163,144,145,153,154,155,133,33],VS=[276,283,282,295,285],LS=[46,53,52,65,55],OS=[61,146,91,181,84,17,314,405,321,375,291,409,270,269,267,0,37,39,40,185,61],BS=[78,95,88,178,87,14,317,402,318,324,308,415,310,311,312,13,82,81,80,191,78],FS=[168,6,197,195,5,4,1,19,94,2],WS={oval:DS,leftEye:RS,rightEye:zS,leftEyebrow:VS,rightEyebrow:LS,lipsOuter:OS,lipsInner:BS,nose:FS},US=[[10,338,297],[10,297,332],[10,332,284],[10,284,251],[10,109,67],[10,67,103],[10,103,54],[10,54,21],[10,21,162],[10,162,127],[10,127,234],[10,234,93],[234,93,132],[132,93,58],[58,172,136],[136,150,149],[149,176,148],[148,152,377],[377,400,378],[378,379,365],[127,162,21],[21,54,103],[103,67,109],[389,251,284],[284,332,297],[297,338,10],[356,454,323],[323,361,288],[168,6,197],[197,195,5],[5,4,1],[1,19,94],[263,249,390],[390,373,374],[374,380,381],[381,382,362],[33,7,163],[163,144,145],[145,153,154],[154,155,133],[61,146,91],[91,181,84],[84,17,314],[314,405,321],[321,375,291],[78,95,88],[88,178,87],[87,14,317],[152,148,176],[176,149,150],[150,136,172],[172,58,132],[397,365,379],[379,378,400],[400,377,152],[288,361,323],[323,454,356]],qS=[[0,1,5],[0,5,9],[0,9,13],[0,13,17],[5,9,6],[9,13,10],[13,17,14],[5,6,9],[6,9,10],[9,10,13],[10,13,14],[13,14,17],[14,17,18],[1,2,5],[2,3,6],[3,4,7],[5,6,7],[6,7,8],[9,10,11],[10,11,12],[13,14,15],[14,15,16],[17,18,19],[18,19,20]];function gn(e,t,n,o){e.drawImage(t,0,0,n,o)}function tt(e,t,n,o="#0a0a0a"){e.fillStyle=o,e.fillRect(0,0,t,n)}function Ko(e,t,n,o,i={}){const{color:a="#00ff00",pointSize:s=4,alpha:r=1}=i;e.save(),e.globalAlpha=r,e.fillStyle=a;for(const l of t){if(!l||typeof l.x!="number"||typeof l.y!="number")continue;const u=l.x*n,c=l.y*o;(l.visibility??1)<.3||(e.beginPath(),e.arc(u,c,s/2,0,Math.PI*2),e.fill())}e.restore()}function wl(e,t,n,o,i,a={}){const{color:s="#00ff00",lineWidth:r=2,alpha:l=1}=a;e.save(),e.globalAlpha=l,e.strokeStyle=s,e.lineWidth=r,e.lineCap="round";for(const[u,c]of n){const p=t[u],y=t[c];if(!p||!y||typeof p.x!="number"||typeof y.x!="number")continue;const b=p.visibility??1,S=y.visibility??1;b<.3&&S<.3||(e.beginPath(),e.moveTo(p.x*o,p.y*i),e.lineTo(y.x*o,y.y*i),e.stroke())}e.restore()}function HS(e,t,n,o,i,a={}){const{color:s="#00ff00",lineWidth:r=1,alpha:l=1}=a;if(n.length<2)return;e.save(),e.globalAlpha=l,e.strokeStyle=s,e.lineWidth=r,e.lineCap="round",e.lineJoin="round",e.beginPath();const u=t[n[0]];if(!u){e.restore();return}e.moveTo(u.x*o,u.y*i);for(let c=1;c<n.length;c++){const p=t[n[c]];p&&e.lineTo(p.x*o,p.y*i)}e.stroke(),e.restore()}function YS(e,t,n,o,i,a,s={}){const{color:r="#00ff00",lineWidth:l=2,alpha:u=1}=s,c=t.originX*n,p=t.originY*o,y=t.width*n,b=t.height*o;if(e.save(),e.globalAlpha=u,e.strokeStyle=r,e.lineWidth=l,e.setLineDash([]),e.strokeRect(c,p,y,b),i){const S=a!==void 0?`${i} ${(a*100).toFixed(0)}%`:i;e.font="bold 12px monospace";const v=e.measureText(S),x=14,h=4;e.fillStyle=r,e.fillRect(c,p-x-h,v.width+h*2,x+h),e.fillStyle="#000",e.fillText(S,c+h,p-h)}e.restore()}function Fe(e,t,n,o,i={}){const{color:a="#00ff00",alpha:s=1}=i;e.save(),e.globalAlpha=s,e.fillStyle=a,e.font="bold 14px monospace",e.fillText(t,n,o),e.restore()}function xl(e,t){const n=e.toLowerCase();return n==="left"?"#ff6b6b":n==="right"?"#4ecdc4":t}function GS(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function jS(e,t){const n=GS(e);return n?`rgba(${n.r}, ${n.g}, ${n.b}, ${t})`:`rgba(0, 255, 0, ${t})`}function Sl(e,t,n,o,i,a={}){const{color:s="#00ff00",lineWidth:r=.5,alpha:l=.3,fillAlpha:u=.15,wireframe:c=!0}=a;e.save(),e.fillStyle=jS(s,u);for(const[p,y,b]of n){const S=t[p],v=t[y],x=t[b];!S||!v||!x||(e.beginPath(),e.moveTo(S.x*o,S.y*i),e.lineTo(v.x*o,v.y*i),e.lineTo(x.x*o,x.y*i),e.closePath(),e.fill())}if(c){e.globalAlpha=l,e.strokeStyle=s,e.lineWidth=r;for(const[p,y,b]of n){const S=t[p],v=t[y],x=t[b];!S||!v||!x||(e.beginPath(),e.moveTo(S.x*o,S.y*i),e.lineTo(v.x*o,v.y*i),e.lineTo(x.x*o,x.y*i),e.closePath(),e.stroke())}}e.restore()}function XS(e,t,n){if(e.length===0)return null;let o=1/0,i=1/0,a=-1/0,s=-1/0;for(const r of e){const l=r.x*t,u=r.y*n;o=Math.min(o,l),i=Math.min(i,u),a=Math.max(a,l),s=Math.max(s,u)}return{x:o,y:i,w:a-o,h:s-i}}function da(e,t,n,o,i={}){const{color:a="#00ff00",lineWidth:s=2,alpha:r=1,padding:l=5}=i,u=XS(t,n,o);u&&(e.save(),e.globalAlpha=r,e.strokeStyle=a,e.lineWidth=s,e.setLineDash([4,4]),e.strokeRect(u.x-l,u.y-l,u.w+l*2,u.h+l*2),e.restore())}const ZS={class:"handles-column handles-left"},KS={class:"handle-slot"},JS={class:"node-content"},QS={class:"video-display"},e_={class:"handles-column handles-right"},t_={class:"handle-slot"},n_={class:"handle-slot"},o_={class:"handle-slot"},i_={class:"handle-slot"},a_=xe({__name:"MediaPipeHandNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var d;return((d=ze.ai)==null?void 0:d.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var d;return((d=t.data)==null?void 0:d.showOverlay)??!0}),l=D(()=>{var d;return((d=t.data)==null?void 0:d.vizMode)??"skeleton"}),u=D(()=>{var d;return((d=t.data)==null?void 0:d.overlayColor)??"#00ff00"}),c=D(()=>{var d;return((d=t.data)==null?void 0:d.lineWidth)??2}),p=D(()=>{var d;return((d=t.data)==null?void 0:d.pointSize)??4}),y=D(()=>{var d;return((d=t.data)==null?void 0:d.colorByHand)??!0});let b=null;function S(){const m=o.activeEdges.find(R=>R.target===t.id&&R.targetHandle==="video");if(!m)return null;const C=at().getNodeOutputs(m.source);if(!C)return null;const L=C.get(m.sourceHandle??"video");return L instanceof HTMLVideoElement?L:null}function v(){if(!a.value||!s.value)return;const d=a.value.width,m=a.value.height,_=s.value,C=S();if(!C||C.readyState<2){tt(_,d,m,"#1a1a1a"),_.fillStyle="#666",_.font="10px monospace",_.textAlign="center",_.fillText("No Video",d/2,m/2),b=requestAnimationFrame(v);return}gn(_,C,d,m);const L=n.nodeMetrics.get(t.id);if(!L){b=requestAnimationFrame(v);return}const R=L.outputValues??{},j=R.detected,Y=R.loading,O=R.allHands,k=R.gestureType,J=R.handCount;if(Y?Fe(_,"Loading...",8,18,{color:"#ffcc00"}):j||Fe(_,"No hands",8,18,{color:"#ff6666"}),r.value&&j&&O&&O.length>0){const w=l.value;for(const V of O){const M=V.landmarks;if(!M||M.length===0)continue;const U=y.value&&V.handedness?xl(V.handedness,u.value):u.value;(w==="mesh"||w==="both")&&Sl(_,M,qS,d,m,{color:U,lineWidth:c.value*.5,fillAlpha:.2,alpha:.5,wireframe:!0}),(w==="skeleton"||w==="both")&&(wl(_,M,bl,d,m,{color:U,lineWidth:c.value}),Ko(_,M,d,m,{color:U,pointSize:p.value})),w==="bbox"&&da(_,M,d,m,{color:U,lineWidth:c.value,padding:10})}const I=m-6,$=O.map(V=>{var M;return((M=V.handedness)==null?void 0:M.toUpperCase())||"?"}).join(" ");$&&Fe(_,$,8,I,{color:u.value}),k&&k!=="unknown"&&Fe(_,k,70,I,{color:"#ffffff"}),J!==void 0&&J>0&&Fe(_,`${J}`,d-16,14,{color:"#888888"})}b=requestAnimationFrame(v)}function x(){b===null&&v()}function h(){b!==null&&(cancelAnimationFrame(b),b=null)}_e(()=>n.isRunning,d=>{d?x():h()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?x():s.value&&(tt(s.value,a.value.width,a.value.height,"#1a1a1a"),s.value.fillStyle="#666",s.value.font="10px monospace",s.value.textAlign="center",s.value.fillText("Stopped",a.value.width/2,a.value.height/2)))}),Ye(()=>{h()});function f(d){var m;return((m=Pe[d])==null?void 0:m.color)??"var(--color-neutral-400)"}return(d,m)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",ZS,[g("div",KS,[te(N(ce),{id:"video",type:"target",position:N(ee).Left,style:Q({background:f("video")}),class:"port-handle"},null,8,["position","style"]),m[0]||(m[0]=g("span",{class:"port-label port-label-left"},"Video",-1))])]),g("div",JS,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(Os),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),m[1]||(m[1]=g("span",{class:"node-title"},"Hand Tracking",-1))],4),g("div",QS,[g("canvas",{ref_key:"canvas",ref:a,width:"240",height:"180",class:"video-canvas"},null,512)])]),g("div",e_,[g("div",t_,[te(N(ce),{id:"landmarks",type:"source",position:N(ee).Right,style:Q({background:f("data")}),class:"port-handle"},null,8,["position","style"]),m[2]||(m[2]=g("span",{class:"port-label port-label-right"},"Landmarks",-1))]),g("div",n_,[te(N(ce),{id:"handedness",type:"source",position:N(ee).Right,style:Q({background:f("string")}),class:"port-handle"},null,8,["position","style"]),m[3]||(m[3]=g("span",{class:"port-label port-label-right"},"Hand",-1))]),g("div",o_,[te(N(ce),{id:"gestureType",type:"source",position:N(ee).Right,style:Q({background:f("string")}),class:"port-handle"},null,8,["position","style"]),m[4]||(m[4]=g("span",{class:"port-label port-label-right"},"Gesture",-1))]),g("div",i_,[te(N(ce),{id:"detected",type:"source",position:N(ee).Right,style:Q({background:f("boolean")}),class:"port-handle"},null,8,["position","style"]),m[5]||(m[5]=g("span",{class:"port-label port-label-right"},"Detected",-1))])])],2))}}),s_=Ae(a_,[["__scopeId","data-v-aec72cac"]]),r_={id:"mediapipe-face",name:"Face Mesh",version:"1.0.0",category:"ai",description:"Detect face landmarks and blendshapes using MediaPipe",icon:"smile",platforms:["web","electron"],inputs:[{id:"video",type:"video",label:"Video"}],outputs:[{id:"landmarks",type:"data",label:"Landmarks (468 pts)"},{id:"blendshapes",type:"data",label:"Blendshapes"},{id:"headRotation",type:"data",label:"Head Rotation"},{id:"pitch",type:"number",label:"Pitch"},{id:"yaw",type:"number",label:"Yaw"},{id:"roll",type:"number",label:"Roll"},{id:"faceBox",type:"data",label:"Face Box"},{id:"mouthOpen",type:"number",label:"Mouth Open"},{id:"eyeBlinkLeft",type:"number",label:"Eye Blink L"},{id:"eyeBlinkRight",type:"number",label:"Eye Blink R"},{id:"browRaise",type:"number",label:"Brow Raise"},{id:"smile",type:"number",label:"Smile"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"showOverlay",type:"toggle",label:"Overlay",default:!0},{id:"overlayColor",type:"color",label:"Color",default:"#00ff00"},{id:"lineWidth",type:"slider",label:"Line Width",default:1,props:{min:.5,max:3,step:.5}},{id:"meshMode",type:"select",label:"Style",default:"mesh",props:{options:[{value:"mesh",label:"Mesh"},{value:"contours",label:"Contours"},{value:"points",label:"Points"},{value:"bbox",label:"Bounding Box"}]}},{id:"showExpressions",type:"toggle",label:"Show Expressions",default:!0}],info:{overview:"Detects 468 face landmarks and blendshapes from a video feed using MediaPipe Face Mesh. Provides head rotation angles, individual expression values like mouth open and eye blink, and multiple visualization styles. Runs in real time in the browser.",tips:["Use the blendshape outputs like smile or mouthOpen to drive parameters in a Shader node.",'Switch the overlay style to "contours" for a cleaner visualization that highlights facial outlines only.'],pairsWith:["webcam","mediapipe-hand","mediapipe-pose","shader"]}},l_={class:"handles-column handles-left"},u_={class:"handle-slot"},d_={class:"node-content"},c_={class:"video-display"},p_={class:"handles-column handles-right"},f_={class:"handle-slot"},h_={class:"handle-slot"},g_={class:"handle-slot"},m_={class:"handle-slot"},v_={class:"handle-slot"},y_=xe({__name:"MediaPipeFaceNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var m;return((m=ze.ai)==null?void 0:m.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var m;return((m=t.data)==null?void 0:m.showOverlay)??!0}),l=D(()=>{var m;return((m=t.data)==null?void 0:m.overlayColor)??"#00ff00"}),u=D(()=>{var m;return((m=t.data)==null?void 0:m.lineWidth)??1}),c=D(()=>{var m;return((m=t.data)==null?void 0:m.meshMode)??"contours"}),p=D(()=>{var m;return((m=t.data)==null?void 0:m.showExpressions)??!0});let y=null;function b(){const _=o.activeEdges.find(j=>j.target===t.id&&j.targetHandle==="video");if(!_)return null;const L=at().getNodeOutputs(_.source);if(!L)return null;const R=L.get(_.sourceHandle??"video");return R instanceof HTMLVideoElement?R:null}function S(m,_,C,L,R,j){const Y={oval:R,leftEye:"#4ecdc4",rightEye:"#4ecdc4",leftEyebrow:"#ffd93d",rightEyebrow:"#ffd93d",lipsOuter:"#ff6b6b",lipsInner:"#ff6b6b",nose:"#a29bfe"};for(const[O,k]of Object.entries(WS))HS(m,_,k,C,L,{color:Y[O]||R,lineWidth:j})}function v(m,_,C,L,R,j,Y){const w=Y-60,I=12,$=[{label:"MOUTH",value:_,color:"#ff6b6b"},{label:"L EYE",value:1-C,color:"#4ecdc4"},{label:"R EYE",value:1-L,color:"#4ecdc4"},{label:"SMILE",value:R,color:"#ffd93d"}];m.save(),m.font="11px monospace",$.forEach((V,M)=>{const U=w+M*I;m.fillStyle="#888",m.fillText(V.label,8,U),m.fillStyle="#333",m.fillRect(43,U-4,40,4),m.fillStyle=V.color,m.fillRect(43,U-4,40*Math.min(1,V.value),4)}),m.restore()}function x(){if(!a.value||!s.value)return;const m=a.value.width,_=a.value.height,C=s.value,L=b();if(!L||L.readyState<2){tt(C,m,_,"#1a1a1a"),C.fillStyle="#666",C.font="10px monospace",C.textAlign="center",C.fillText("No Video",m/2,_/2),y=requestAnimationFrame(x);return}gn(C,L,m,_);const R=n.nodeMetrics.get(t.id);if(!R){y=requestAnimationFrame(x);return}const j=R.outputValues??{},Y=j.detected,O=j.loading,k=j.landmarks,J=j.mouthOpen??0,w=j.eyeBlinkLeft??0,I=j.eyeBlinkRight??0,$=j.smile??0;if(O?Fe(C,"Loading...",8,18,{color:"#ffcc00"}):Y||Fe(C,"No face",8,18,{color:"#ff6666"}),r.value&&Y&&k&&k.length>0){const V=c.value;if(V==="mesh")Sl(C,k,US,m,_,{color:l.value,lineWidth:u.value*.5,fillAlpha:.15,alpha:.6,wireframe:!0});else if(V==="contours")S(C,k,m,_,l.value,u.value);else if(V==="points"){const M=k.filter((U,W)=>W%3===0);Ko(C,M,m,_,{color:l.value,pointSize:2})}else V==="bbox"&&da(C,k,m,_,{color:l.value,lineWidth:u.value,padding:10});p.value&&v(C,J,w,I,$,m,_),Fe(C,"FACE",8,18,{color:l.value})}y=requestAnimationFrame(x)}function h(){y===null&&x()}function f(){y!==null&&(cancelAnimationFrame(y),y=null)}_e(()=>n.isRunning,m=>{m?h():f()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?h():s.value&&(tt(s.value,a.value.width,a.value.height,"#1a1a1a"),s.value.fillStyle="#666",s.value.font="10px monospace",s.value.textAlign="center",s.value.fillText("Stopped",a.value.width/2,a.value.height/2)))}),Ye(()=>{f()});function d(m){var _;return((_=Pe[m])==null?void 0:_.color)??"var(--color-neutral-400)"}return(m,_)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",l_,[g("div",u_,[te(N(ce),{id:"video",type:"target",position:N(ee).Left,style:Q({background:d("video")}),class:"port-handle"},null,8,["position","style"]),_[0]||(_[0]=g("span",{class:"port-label port-label-left"},"Video",-1))])]),g("div",d_,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(Tu),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),_[1]||(_[1]=g("span",{class:"node-title"},"Face Mesh",-1))],4),g("div",c_,[g("canvas",{ref_key:"canvas",ref:a,width:"240",height:"180",class:"video-canvas"},null,512)])]),g("div",p_,[g("div",f_,[te(N(ce),{id:"landmarks",type:"source",position:N(ee).Right,style:Q({background:d("data")}),class:"port-handle"},null,8,["position","style"]),_[2]||(_[2]=g("span",{class:"port-label port-label-right"},"Landmarks",-1))]),g("div",h_,[te(N(ce),{id:"blendshapes",type:"source",position:N(ee).Right,style:Q({background:d("data")}),class:"port-handle"},null,8,["position","style"]),_[3]||(_[3]=g("span",{class:"port-label port-label-right"},"Blendshapes",-1))]),g("div",g_,[te(N(ce),{id:"mouthOpen",type:"source",position:N(ee).Right,style:Q({background:d("number")}),class:"port-handle"},null,8,["position","style"]),_[4]||(_[4]=g("span",{class:"port-label port-label-right"},"Mouth",-1))]),g("div",m_,[te(N(ce),{id:"smile",type:"source",position:N(ee).Right,style:Q({background:d("number")}),class:"port-handle"},null,8,["position","style"]),_[5]||(_[5]=g("span",{class:"port-label port-label-right"},"Smile",-1))]),g("div",v_,[te(N(ce),{id:"detected",type:"source",position:N(ee).Right,style:Q({background:d("boolean")}),class:"port-handle"},null,8,["position","style"]),_[6]||(_[6]=g("span",{class:"port-label port-label-right"},"Detected",-1))])])],2))}}),b_=Ae(y_,[["__scopeId","data-v-223e74b4"]]),w_={id:"mediapipe-pose",name:"Pose Estimation",version:"1.0.0",category:"ai",description:"Detect body pose landmarks using MediaPipe",icon:"accessibility",platforms:["web","electron"],inputs:[{id:"video",type:"video",label:"Video"}],outputs:[{id:"landmarks",type:"data",label:"Landmarks (33 pts)"},{id:"worldLandmarks",type:"data",label:"World Landmarks"},{id:"visibility",type:"data",label:"Visibility"},{id:"nose",type:"data",label:"Nose"},{id:"leftShoulder",type:"data",label:"Left Shoulder"},{id:"rightShoulder",type:"data",label:"Right Shoulder"},{id:"leftElbow",type:"data",label:"Left Elbow"},{id:"rightElbow",type:"data",label:"Right Elbow"},{id:"leftWrist",type:"data",label:"Left Wrist"},{id:"rightWrist",type:"data",label:"Right Wrist"},{id:"leftHip",type:"data",label:"Left Hip"},{id:"rightHip",type:"data",label:"Right Hip"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"showOverlay",type:"toggle",label:"Overlay",default:!0},{id:"vizMode",type:"select",label:"Style",default:"skeleton",props:{options:[{value:"skeleton",label:"Skeleton"},{value:"points",label:"Points"},{value:"bbox",label:"Bounding Box"}]}},{id:"overlayColor",type:"color",label:"Color",default:"#00ff00"},{id:"lineWidth",type:"slider",label:"Line Width",default:2,props:{min:1,max:5,step:.5}},{id:"pointSize",type:"slider",label:"Point Size",default:4,props:{min:2,max:10,step:1}},{id:"showVisibility",type:"toggle",label:"Fade by Visibility",default:!0}],info:{overview:"Detects 33 body pose landmarks from a video feed using MediaPipe Pose. Provides both normalized and world-space coordinates, per-landmark visibility scores, and convenient outputs for key body points like shoulders, elbows, and hips.",tips:['Enable "Fade by Visibility" to make occluded or low-confidence landmarks less prominent in the overlay.',"Use the individual joint outputs like leftWrist directly instead of parsing the full landmarks array."],pairsWith:["webcam","mediapipe-hand","mediapipe-face","shader"]}},x_={class:"handles-column handles-left"},S_={class:"handle-slot"},__={class:"node-content"},k_={class:"video-display"},C_={class:"handles-column handles-right"},N_={class:"handle-slot"},$_={class:"handle-slot"},E_={class:"handle-slot"},M_={class:"handle-slot"},T_={class:"handle-slot"},I_=xe({__name:"MediaPipePoseNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var _;return((_=ze.ai)==null?void 0:_.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var _;return((_=t.data)==null?void 0:_.showOverlay)??!0}),l=D(()=>{var _;return((_=t.data)==null?void 0:_.vizMode)??"skeleton"}),u=D(()=>{var _;return((_=t.data)==null?void 0:_.overlayColor)??"#00ff00"}),c=D(()=>{var _;return((_=t.data)==null?void 0:_.lineWidth)??2}),p=D(()=>{var _;return((_=t.data)==null?void 0:_.pointSize)??4}),y=D(()=>{var _;return((_=t.data)==null?void 0:_.showVisibility)??!0});let b=null;function S(){const C=o.activeEdges.find(Y=>Y.target===t.id&&Y.targetHandle==="video");if(!C)return null;const R=at().getNodeOutputs(C.source);if(!R)return null;const j=R.get(C.sourceHandle??"video");return j instanceof HTMLVideoElement?j:null}function v(_,C,L,R,j){const{color:Y="#00ff00",lineWidth:O=2}=j;_.save(),_.strokeStyle=Y,_.lineWidth=O,_.lineCap="round";for(const[k,J]of AS){const w=C[k],I=C[J];if(!w||!I)continue;const $=w.visibility??1,V=I.visibility??1;if($<.3&&V<.3)continue;const M=y.value?Math.min(1,($+V)/2+.3):1;_.globalAlpha=M,_.beginPath(),_.moveTo(w.x*L,w.y*R),_.lineTo(I.x*L,I.y*R),_.stroke()}_.restore()}function x(_,C,L,R,j){const{color:Y="#00ff00",pointSize:O=4}=j;_.save(),_.fillStyle=Y;for(const k of C){const J=k.visibility??1;if(J<.3)continue;const w=y.value?Math.min(1,J+.3):1;_.globalAlpha=w;const I=k.x*L,$=k.y*R;_.beginPath(),_.arc(I,$,O/2,0,Math.PI*2),_.fill()}_.restore()}function h(){if(!a.value||!s.value)return;const _=a.value.width,C=a.value.height,L=s.value,R=S();if(!R||R.readyState<2){tt(L,_,C,"#1a1a1a"),L.fillStyle="#666",L.font="10px monospace",L.textAlign="center",L.fillText("No Video",_/2,C/2),b=requestAnimationFrame(h);return}gn(L,R,_,C);const j=n.nodeMetrics.get(t.id);if(!j){b=requestAnimationFrame(h);return}const Y=j.outputValues??{},O=Y.detected,k=Y.loading,J=Y.landmarks;if(k?Fe(L,"Loading...",8,18,{color:"#ffcc00"}):O||Fe(L,"No pose",8,18,{color:"#ff6666"}),r.value&&O&&J&&J.length>0){const w={color:u.value,lineWidth:c.value,pointSize:p.value},I=l.value;I==="skeleton"?(v(L,J,_,C,w),x(L,J,_,C,w)):I==="points"?Ko(L,J,_,C,w):I==="bbox"&&da(L,J,_,C,{color:u.value,lineWidth:c.value,padding:10}),Fe(L,"POSE",8,C-8,{color:u.value})}b=requestAnimationFrame(h)}function f(){b===null&&h()}function d(){b!==null&&(cancelAnimationFrame(b),b=null)}_e(()=>n.isRunning,_=>{_?f():d()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?f():s.value&&(tt(s.value,a.value.width,a.value.height,"#1a1a1a"),s.value.fillStyle="#666",s.value.font="10px monospace",s.value.textAlign="center",s.value.fillText("Stopped",a.value.width/2,a.value.height/2)))}),Ye(()=>{d()});function m(_){var C;return((C=Pe[_])==null?void 0:C.color)??"var(--color-neutral-400)"}return(_,C)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",x_,[g("div",S_,[te(N(ce),{id:"video",type:"target",position:N(ee).Left,style:Q({background:m("video")}),class:"port-handle"},null,8,["position","style"]),C[0]||(C[0]=g("span",{class:"port-label port-label-left"},"Video",-1))])]),g("div",__,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(lu),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),C[1]||(C[1]=g("span",{class:"node-title"},"Pose",-1))],4),g("div",k_,[g("canvas",{ref_key:"canvas",ref:a,width:"240",height:"180",class:"video-canvas"},null,512)])]),g("div",C_,[g("div",N_,[te(N(ce),{id:"landmarks",type:"source",position:N(ee).Right,style:Q({background:m("data")}),class:"port-handle"},null,8,["position","style"]),C[2]||(C[2]=g("span",{class:"port-label port-label-right"},"Landmarks",-1))]),g("div",$_,[te(N(ce),{id:"nose",type:"source",position:N(ee).Right,style:Q({background:m("data")}),class:"port-handle"},null,8,["position","style"]),C[3]||(C[3]=g("span",{class:"port-label port-label-right"},"Nose",-1))]),g("div",E_,[te(N(ce),{id:"leftWrist",type:"source",position:N(ee).Right,style:Q({background:m("data")}),class:"port-handle"},null,8,["position","style"]),C[4]||(C[4]=g("span",{class:"port-label port-label-right"},"L Wrist",-1))]),g("div",M_,[te(N(ce),{id:"rightWrist",type:"source",position:N(ee).Right,style:Q({background:m("data")}),class:"port-handle"},null,8,["position","style"]),C[5]||(C[5]=g("span",{class:"port-label port-label-right"},"R Wrist",-1))]),g("div",T_,[te(N(ce),{id:"detected",type:"source",position:N(ee).Right,style:Q({background:m("boolean")}),class:"port-handle"},null,8,["position","style"]),C[6]||(C[6]=g("span",{class:"port-label port-label-right"},"Detected",-1))])])],2))}}),P_=Ae(I_,[["__scopeId","data-v-9fea0ec8"]]),A_={id:"mediapipe-object",name:"Object Detection (MediaPipe)",version:"1.0.0",category:"ai",description:"Detect objects in video using MediaPipe EfficientDet",icon:"scan",platforms:["web","electron"],inputs:[{id:"video",type:"video",label:"Video"}],outputs:[{id:"detections",type:"data",label:"Detections"},{id:"count",type:"number",label:"Count"},{id:"filtered",type:"data",label:"Filtered"},{id:"topLabel",type:"string",label:"Top Label"},{id:"topConfidence",type:"number",label:"Top Confidence"},{id:"topBox",type:"data",label:"Top Bounding Box"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"minConfidence",type:"slider",label:"Min Confidence",default:.5,props:{min:0,max:1,step:.05}},{id:"maxResults",type:"slider",label:"Max Results",default:10,props:{min:1,max:20,step:1}},{id:"labelFilter",type:"text",label:"Label Filter",default:"",props:{placeholder:"e.g., person, car"}},{id:"showOverlay",type:"toggle",label:"Overlay",default:!0},{id:"overlayColor",type:"color",label:"Color",default:"#00ff00"},{id:"lineWidth",type:"slider",label:"Line Width",default:2,props:{min:1,max:5,step:.5}},{id:"showLabels",type:"toggle",label:"Show Labels",default:!0}],info:{overview:"Detects objects in a video stream using the MediaPipe EfficientDet model. Returns bounding boxes, labels, and confidence scores for each detected object. Includes a label filter to focus on specific object categories.",tips:['Use the label filter to restrict detections to only the categories you care about, like "person" or "car".',"Connect the topBox output to a Shader node to highlight the most confident detection visually."],pairsWith:["webcam","object-detection","image-classification","gate"]}},D_={class:"handles-column handles-left"},R_={class:"handle-slot"},z_={class:"node-content"},V_={class:"video-display"},L_={class:"handles-column handles-right"},O_={class:"handle-slot"},B_={class:"handle-slot"},F_={class:"handle-slot"},W_={class:"handle-slot"},U_=xe({__name:"MediaPipeObjectNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var d;return((d=ze.ai)==null?void 0:d.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var d;return((d=t.data)==null?void 0:d.showOverlay)??!0}),l=D(()=>{var d;return((d=t.data)==null?void 0:d.overlayColor)??"#00ff00"}),u=D(()=>{var d;return((d=t.data)==null?void 0:d.lineWidth)??2}),c=D(()=>{var d;return((d=t.data)==null?void 0:d.showLabels)??!0}),p=["#ff6b6b","#4ecdc4","#ffd93d","#6c5ce7","#a29bfe","#fd79a8","#00b894","#e17055","#0984e3"];function y(d,m){let _=0;for(let L=0;L<d.length;L++)_=d.charCodeAt(L)+((_<<5)-_);const C=[m,...p];return C[Math.abs(_)%C.length]}let b=null;function S(){const m=o.activeEdges.find(R=>R.target===t.id&&R.targetHandle==="video");if(!m)return null;const C=at().getNodeOutputs(m.source);if(!C)return null;const L=C.get(m.sourceHandle??"video");return L instanceof HTMLVideoElement?L:null}function v(){if(!a.value||!s.value)return;const d=a.value.width,m=a.value.height,_=s.value,C=S();if(!C||C.readyState<2){tt(_,d,m,"#1a1a1a"),_.fillStyle="#666",_.font="10px monospace",_.textAlign="center",_.fillText("No Video",d/2,m/2),b=requestAnimationFrame(v);return}gn(_,C,d,m);const L=n.nodeMetrics.get(t.id);if(!L){b=requestAnimationFrame(v);return}const R=L.outputValues??{},j=R.detected,Y=R.loading,O=R.detections,k=R.count;if(Y?Fe(_,"Loading...",8,18,{color:"#ffcc00"}):j||Fe(_,"No objects",8,18,{color:"#ff6666"}),r.value&&j&&O&&O.length>0){for(const J of O){const w=J.categories[0];if(!w)continue;const I=y(w.categoryName,l.value);YS(_,J.boundingBox,d,m,c.value?w.categoryName:void 0,c.value?w.score:void 0,{color:I,lineWidth:u.value})}k!==void 0&&k>0&&Fe(_,`${k} object${k>1?"s":""}`,d-70,14,{color:"#888888"})}b=requestAnimationFrame(v)}function x(){b===null&&v()}function h(){b!==null&&(cancelAnimationFrame(b),b=null)}_e(()=>n.isRunning,d=>{d?x():h()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?x():s.value&&(tt(s.value,a.value.width,a.value.height,"#1a1a1a"),s.value.fillStyle="#666",s.value.font="10px monospace",s.value.textAlign="center",s.value.fillText("Stopped",a.value.width/2,a.value.height/2)))}),Ye(()=>{h()});function f(d){var m;return((m=Pe[d])==null?void 0:m.color)??"var(--color-neutral-400)"}return(d,m)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",D_,[g("div",R_,[te(N(ce),{id:"video",type:"target",position:N(ee).Left,style:Q({background:f("video")}),class:"port-handle"},null,8,["position","style"]),m[0]||(m[0]=g("span",{class:"port-label port-label-left"},"Video",-1))])]),g("div",z_,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N($u),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),m[1]||(m[1]=g("span",{class:"node-title"},"Object Detect",-1))],4),g("div",V_,[g("canvas",{ref_key:"canvas",ref:a,width:"240",height:"180",class:"video-canvas"},null,512)])]),g("div",L_,[g("div",O_,[te(N(ce),{id:"detections",type:"source",position:N(ee).Right,style:Q({background:f("data")}),class:"port-handle"},null,8,["position","style"]),m[2]||(m[2]=g("span",{class:"port-label port-label-right"},"Detections",-1))]),g("div",B_,[te(N(ce),{id:"count",type:"source",position:N(ee).Right,style:Q({background:f("number")}),class:"port-handle"},null,8,["position","style"]),m[3]||(m[3]=g("span",{class:"port-label port-label-right"},"Count",-1))]),g("div",F_,[te(N(ce),{id:"topLabel",type:"source",position:N(ee).Right,style:Q({background:f("string")}),class:"port-handle"},null,8,["position","style"]),m[4]||(m[4]=g("span",{class:"port-label port-label-right"},"Top Label",-1))]),g("div",W_,[te(N(ce),{id:"detected",type:"source",position:N(ee).Right,style:Q({background:f("boolean")}),class:"port-handle"},null,8,["position","style"]),m[5]||(m[5]=g("span",{class:"port-label port-label-right"},"Detected",-1))])])],2))}}),q_=Ae(U_,[["__scopeId","data-v-eb542886"]]),H_={id:"mediapipe-segmentation",name:"Selfie Segmentation",version:"1.0.0",category:"ai",description:"Segment person from background using MediaPipe",icon:"layers",platforms:["web","electron"],inputs:[{id:"video",type:"video",label:"Video"}],outputs:[{id:"mask",type:"data",label:"Mask"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"showOverlay",type:"toggle",label:"Show Overlay",default:!0},{id:"overlayMode",type:"select",label:"Overlay Mode",default:"mask",props:{options:[{value:"mask",label:"Mask Only"},{value:"cutout",label:"Cutout"},{value:"blur",label:"Blur BG"}]}},{id:"overlayColor",type:"color",label:"Mask Color",default:"#00ff00"},{id:"maskOpacity",type:"slider",label:"Mask Opacity",default:.5,props:{min:0,max:1,step:.05}}],info:{overview:"Separates a person from the background in a video feed using MediaPipe Selfie Segmentation. Outputs a mask that can be used for cutout effects, background blur, or custom compositing. Runs in real time in the browser.",tips:['Use the "Blur BG" overlay mode for a quick virtual background effect without additional nodes.',"Adjust mask opacity to blend the segmentation visualization with the original video."],pairsWith:["webcam","shader","mediapipe-pose","mediapipe-face"]}},Y_={class:"handles-column handles-left"},G_={class:"handle-slot"},j_={class:"node-content"},X_={class:"video-display"},Z_={class:"handles-column handles-right"},K_={class:"handle-slot"},J_={class:"handle-slot"},Q_=xe({__name:"MediaPipeSegmentationNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var d;return((d=ze.ai)==null?void 0:d.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var d;return((d=t.data)==null?void 0:d.showOverlay)??!0}),l=D(()=>{var d;return((d=t.data)==null?void 0:d.overlayMode)??"mask"}),u=D(()=>{var d;return((d=t.data)==null?void 0:d.overlayColor)??"#00ff00"}),c=D(()=>{var d;return((d=t.data)==null?void 0:d.maskOpacity)??.5});let p=null;function y(){const m=o.activeEdges.find(R=>R.target===t.id&&R.targetHandle==="video");if(!m)return null;const C=at().getNodeOutputs(m.source);if(!C)return null;const L=C.get(m.sourceHandle??"video");return L instanceof HTMLVideoElement?L:null}function b(d){const m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return m?{r:parseInt(m[1],16),g:parseInt(m[2],16),b:parseInt(m[3],16)}:{r:0,g:255,b:0}}function S(d,m,_,C,L,R,j,Y){const O=document.createElement("canvas");O.width=m.width,O.height=m.height;const k=O.getContext("2d"),J=b(j),w=k.createImageData(m.width,m.height),I=m.data,$=w.data;for(let V=0;V<I.length;V+=4){const M=I[V]>128;R==="mask"?M?($[V]=J.r,$[V+1]=J.g,$[V+2]=J.b,$[V+3]=Math.round(255*Y)):$[V+3]=0:R==="cutout"?M?$[V+3]=0:($[V]=0,$[V+1]=0,$[V+2]=0,$[V+3]=Math.round(255*.8)):R==="blur"&&(M?$[V+3]=0:($[V]=0,$[V+1]=0,$[V+2]=0,$[V+3]=Math.round(255*.6)))}k.putImageData(w,0,0),d.drawImage(O,0,0,C,L)}function v(){if(!a.value||!s.value)return;const d=a.value.width,m=a.value.height,_=s.value,C=y();if(!C||C.readyState<2){tt(_,d,m,"#1a1a1a"),_.fillStyle="#666",_.font="10px monospace",_.textAlign="center",_.fillText("No Video",d/2,m/2),p=requestAnimationFrame(v);return}gn(_,C,d,m);const L=n.nodeMetrics.get(t.id);if(!L){p=requestAnimationFrame(v);return}const R=L.outputValues??{},j=R.detected,Y=R.loading,O=R.mask;Y?Fe(_,"Loading...",8,18,{color:"#ffcc00"}):j||Fe(_,"No segment",8,18,{color:"#ff6666"}),r.value&&j&&O&&(S(_,O,C,d,m,l.value,u.value,c.value),Fe(_,l.value.toUpperCase(),8,m-8,{color:u.value})),p=requestAnimationFrame(v)}function x(){p===null&&v()}function h(){p!==null&&(cancelAnimationFrame(p),p=null)}_e(()=>n.isRunning,d=>{d?x():h()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?x():s.value&&(tt(s.value,a.value.width,a.value.height,"#1a1a1a"),s.value.fillStyle="#666",s.value.font="10px monospace",s.value.textAlign="center",s.value.fillText("Stopped",a.value.width/2,a.value.height/2)))}),Ye(()=>{h()});function f(d){var m;return((m=Pe[d])==null?void 0:m.color)??"var(--color-neutral-400)"}return(d,m)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",Y_,[g("div",G_,[te(N(ce),{id:"video",type:"target",position:N(ee).Left,style:Q({background:f("video")}),class:"port-handle"},null,8,["position","style"]),m[0]||(m[0]=g("span",{class:"port-label port-label-left"},"Video",-1))])]),g("div",j_,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(Ls),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),m[1]||(m[1]=g("span",{class:"node-title"},"Segmentation",-1))],4),g("div",X_,[g("canvas",{ref_key:"canvas",ref:a,width:"240",height:"180",class:"video-canvas"},null,512)])]),g("div",Z_,[g("div",K_,[te(N(ce),{id:"mask",type:"source",position:N(ee).Right,style:Q({background:f("data")}),class:"port-handle"},null,8,["position","style"]),m[2]||(m[2]=g("span",{class:"port-label port-label-right"},"Mask",-1))]),g("div",J_,[te(N(ce),{id:"detected",type:"source",position:N(ee).Right,style:Q({background:f("boolean")}),class:"port-handle"},null,8,["position","style"]),m[3]||(m[3]=g("span",{class:"port-label port-label-right"},"Detected",-1))])])],2))}}),ek=Ae(Q_,[["__scopeId","data-v-313c157d"]]),tk={id:"mediapipe-gesture",name:"Gesture Recognition",version:"1.0.0",category:"ai",description:"Recognize hand gestures using MediaPipe",icon:"hand",platforms:["web","electron"],inputs:[{id:"video",type:"video",label:"Video"}],outputs:[{id:"gesture",type:"string",label:"Gesture"},{id:"confidence",type:"number",label:"Confidence"},{id:"landmarks",type:"data",label:"Landmarks"},{id:"handedness",type:"string",label:"Hand"},{id:"handCount",type:"number",label:"Hand Count"},{id:"allGestures",type:"data",label:"All Gestures"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"showOverlay",type:"toggle",label:"Show Overlay",default:!0},{id:"overlayColor",type:"color",label:"Overlay Color",default:"#00ff00"},{id:"lineWidth",type:"slider",label:"Line Width",default:2,props:{min:1,max:5,step:.5}},{id:"confidenceThreshold",type:"slider",label:"Min Confidence",default:.5,props:{min:0,max:1,step:.05}}],info:{overview:"Recognizes hand gestures from a video feed using MediaPipe. Identifies common gestures like thumbs up, open palm, and pointing, and outputs the gesture name, confidence, and hand landmarks. Can track multiple hands simultaneously.",tips:["Increase the min confidence threshold to reduce false positives in noisy environments.","Use the gesture string output with a Gate node to trigger different actions for different gestures."],pairsWith:["webcam","mediapipe-hand","gate","monitor"]}},nk={class:"handles-column handles-left"},ok={class:"handle-slot"},ik={class:"node-content"},ak={class:"video-display"},sk={class:"handles-column handles-right"},rk={class:"handle-slot"},lk={class:"handle-slot"},uk={class:"handle-slot"},dk={class:"handle-slot"},ck=xe({__name:"MediaPipeGestureNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ve(),i=D(()=>{var h;return((h=ze.ai)==null?void 0:h.color)??"var(--color-neutral-400)"}),a=re(null),s=re(null),r=D(()=>{var h;return((h=t.data)==null?void 0:h.showOverlay)??!0}),l=D(()=>{var h;return((h=t.data)==null?void 0:h.overlayColor)??"#00ff00"}),u=D(()=>{var h;return((h=t.data)==null?void 0:h.lineWidth)??2}),c={Thumb_Up:"THUMBS UP",Thumb_Down:"THUMBS DOWN",Victory:"PEACE",Open_Palm:"OPEN",Closed_Fist:"FIST",Pointing_Up:"POINT",ILoveYou:"I LOVE YOU",None:"-"};let p=null;function y(){const f=o.activeEdges.find(C=>C.target===t.id&&C.targetHandle==="video");if(!f)return null;const m=at().getNodeOutputs(f.source);if(!m)return null;const _=m.get(f.sourceHandle??"video");return _ instanceof HTMLVideoElement?_:null}function b(){if(!a.value||!s.value)return;const h=a.value.width,f=a.value.height,d=s.value,m=y();if(!m||m.readyState<2){tt(d,h,f,"#1a1a1a"),d.fillStyle="#666",d.font="10px monospace",d.textAlign="center",d.fillText("No Video",h/2,f/2),p=requestAnimationFrame(b);return}gn(d,m,h,f);const _=n.nodeMetrics.get(t.id);if(!_){p=requestAnimationFrame(b);return}const C=_.outputValues??{},L=C.detected,R=C.loading,j=C.gesture,Y=C.confidence,O=C.allGestures,k=C.handCount;if(R?Fe(d,"Loading...",8,18,{color:"#ffcc00"}):L||Fe(d,"No gesture",8,18,{color:"#ff6666"}),r.value&&L&&O&&O.length>0){for(const w of O){const I=w.landmarks;if(!I||I.length===0)continue;const $=xl(w.handedness,l.value);wl(d,I,bl,h,f,{color:$,lineWidth:u.value}),Ko(d,I,h,f,{color:$,pointSize:4})}const J=f-6;if(j&&j!=="None"){const w=c[j]||j,I=Y?` ${Math.round((Y??0)*100)}%`:"";Fe(d,`${w}${I}`,8,J,{color:l.value})}k!==void 0&&k>0&&Fe(d,`${k}`,h-16,14,{color:"#888888"})}p=requestAnimationFrame(b)}function S(){p===null&&b()}function v(){p!==null&&(cancelAnimationFrame(p),p=null)}_e(()=>n.isRunning,h=>{h?S():v()},{immediate:!0}),Oe(()=>{a.value&&(s.value=a.value.getContext("2d"),n.isRunning?S():s.value&&(tt(s.value,a.value.width,a.value.height,"#1a1a1a"),s.value.fillStyle="#666",s.value.font="10px monospace",s.value.textAlign="center",s.value.fillText("Stopped",a.value.width/2,a.value.height/2)))}),Ye(()=>{v()});function x(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}return(h,f)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",nk,[g("div",ok,[te(N(ce),{id:"video",type:"target",position:N(ee).Left,style:Q({background:x("video")}),class:"port-handle"},null,8,["position","style"]),f[0]||(f[0]=g("span",{class:"port-label port-label-left"},"Video",-1))])]),g("div",ik,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value})},[te(N(Os),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),f[1]||(f[1]=g("span",{class:"node-title"},"Gesture",-1))],4),g("div",ak,[g("canvas",{ref_key:"canvas",ref:a,width:"240",height:"180",class:"video-canvas"},null,512)])]),g("div",sk,[g("div",rk,[te(N(ce),{id:"gesture",type:"source",position:N(ee).Right,style:Q({background:x("string")}),class:"port-handle"},null,8,["position","style"]),f[2]||(f[2]=g("span",{class:"port-label port-label-right"},"Gesture",-1))]),g("div",lk,[te(N(ce),{id:"confidence",type:"source",position:N(ee).Right,style:Q({background:x("number")}),class:"port-handle"},null,8,["position","style"]),f[3]||(f[3]=g("span",{class:"port-label port-label-right"},"Conf",-1))]),g("div",uk,[te(N(ce),{id:"landmarks",type:"source",position:N(ee).Right,style:Q({background:x("data")}),class:"port-handle"},null,8,["position","style"]),f[4]||(f[4]=g("span",{class:"port-label port-label-right"},"Landmarks",-1))]),g("div",dk,[te(N(ce),{id:"detected",type:"source",position:N(ee).Right,style:Q({background:x("boolean")}),class:"port-handle"},null,8,["position","style"]),f[5]||(f[5]=g("span",{class:"port-label port-label-right"},"Detected",-1))])])],2))}}),pk=Ae(ck,[["__scopeId","data-v-021f13fe"]]),fk={id:"mediapipe-audio",name:"Audio Classifier",version:"1.0.0",category:"ai",description:"Classify audio using MediaPipe YamNet model",icon:"audio-waveform",platforms:["web","electron"],inputs:[{id:"audio",type:"audio",label:"Audio"}],outputs:[{id:"category",type:"string",label:"Category"},{id:"confidence",type:"number",label:"Confidence"},{id:"categories",type:"data",label:"All Categories"},{id:"isSpeech",type:"boolean",label:"Is Speech"},{id:"isMusic",type:"boolean",label:"Is Music"},{id:"detected",type:"boolean",label:"Detected"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"classifyInterval",type:"number",label:"Interval (ms)",default:500,props:{min:100,max:5e3,step:100}},{id:"maxResults",type:"slider",label:"Max Results",default:5,props:{min:1,max:20,step:1}},{id:"scoreThreshold",type:"slider",label:"Min Score",default:.3,props:{min:0,max:1,step:.05}}],info:{overview:"Classifies audio input using the MediaPipe YamNet model, identifying sounds like speech, music, and environmental noise. Outputs the top category, confidence score, and convenience booleans for speech and music detection.",tips:["Raise the min score threshold to filter out low-confidence classifications.","Use the isSpeech output to trigger speech recognition only when someone is actually talking."],pairsWith:["audio-input","speech-recognition","gate","monitor"]}},hk={class:"handles-column handles-left"},gk={class:"handle-slot"},mk={class:"node-content"},vk={class:"audio-display"},yk={class:"handles-column handles-right"},bk={class:"handle-slot"},wk={class:"handle-slot"},xk={class:"handle-slot"},Sk={class:"handle-slot"},_k=xe({__name:"MediaPipeAudioNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=D(()=>{var b;return((b=ze.ai)==null?void 0:b.color)??"var(--color-neutral-400)"}),i=re(null),a=re(null);let s=null;const r={Speech:"#4ecdc4",Music:"#ff6b6b",Singing:"#ffd93d",Animal:"#a29bfe",Dog:"#fd79a8",Cat:"#fd79a8",Bird:"#fd79a8",Vehicle:"#6c5ce7",Silence:"#636e72"};function l(b){for(const[S,v]of Object.entries(r))if(b.toLowerCase().includes(S.toLowerCase()))return v;return"#00b894"}function u(){if(!i.value||!a.value)return;const b=i.value.width,S=i.value.height,v=a.value;v.fillStyle="#1a1a1a",v.fillRect(0,0,b,S);const x=n.nodeMetrics.get(t.id);if(!x){v.fillStyle="#666",v.font="10px monospace",v.textAlign="center",v.fillText("No Audio",b/2,S/2),s=requestAnimationFrame(u);return}const h=x.outputValues??{},f=h.detected,d=h.loading,m=h.categories,_=h.category;if(d){v.fillStyle="#ffcc00",v.font="10px monospace",v.textAlign="left",v.fillText("Loading...",8,16),s=requestAnimationFrame(u);return}if(!f||!m||m.length===0){v.fillStyle="#666",v.font="10px monospace",v.textAlign="center",v.fillText("Listening...",b/2,S/2),s=requestAnimationFrame(u);return}const C=16,L=4,R=Math.min(m.length,5),j=8;v.font="9px monospace",v.textAlign="left";for(let Y=0;Y<R;Y++){const O=m[Y],k=j+Y*(C+L),J=(b-16)*O.score,w=l(O.categoryName);v.fillStyle="#333",v.fillRect(8,k,b-16,C),v.fillStyle=w,v.fillRect(8,k,J,C),v.fillStyle="#fff";const I=O.categoryName.length>12?O.categoryName.substring(0,12)+"...":O.categoryName;v.fillText(`${I} ${Math.round(O.score*100)}%`,12,k+11)}_&&(v.fillStyle=l(_),v.font="10px monospace",v.textAlign="right",v.fillText(_.toUpperCase(),b-8,S-8)),s=requestAnimationFrame(u)}function c(){s===null&&u()}function p(){s!==null&&(cancelAnimationFrame(s),s=null)}_e(()=>n.isRunning,b=>{b?c():p()},{immediate:!0}),Oe(()=>{i.value&&(a.value=i.value.getContext("2d"),n.isRunning?c():a.value&&(a.value.fillStyle="#1a1a1a",a.value.fillRect(0,0,i.value.width,i.value.height),a.value.fillStyle="#666",a.value.font="10px monospace",a.value.textAlign="center",a.value.fillText("Stopped",i.value.width/2,i.value.height/2)))}),Ye(()=>{p()});function y(b){var S;return((S=Pe[b])==null?void 0:S.color)??"var(--color-neutral-400)"}return(b,S)=>(z(),K("div",{class:ge(["mediapipe-node",{selected:t.selected}])},[g("div",hk,[g("div",gk,[te(N(ce),{id:"audio",type:"target",position:N(ee).Left,style:Q({background:y("audio")}),class:"port-handle"},null,8,["position","style"]),S[0]||(S[0]=g("span",{class:"port-label port-label-left"},"Audio",-1))])]),g("div",mk,[g("div",{class:"node-header",style:Q({borderLeftColor:o.value})},[te(N(uu),{size:14,class:"node-icon",style:Q({color:o.value})},null,8,["style"]),S[1]||(S[1]=g("span",{class:"node-title"},"Audio Classify",-1))],4),g("div",vk,[g("canvas",{ref_key:"canvas",ref:i,width:"240",height:"120",class:"audio-canvas"},null,512)])]),g("div",yk,[g("div",bk,[te(N(ce),{id:"category",type:"source",position:N(ee).Right,style:Q({background:y("string")}),class:"port-handle"},null,8,["position","style"]),S[2]||(S[2]=g("span",{class:"port-label port-label-right"},"Category",-1))]),g("div",wk,[te(N(ce),{id:"confidence",type:"source",position:N(ee).Right,style:Q({background:y("number")}),class:"port-handle"},null,8,["position","style"]),S[3]||(S[3]=g("span",{class:"port-label port-label-right"},"Confidence",-1))]),g("div",xk,[te(N(ce),{id:"isSpeech",type:"source",position:N(ee).Right,style:Q({background:y("boolean")}),class:"port-handle"},null,8,["position","style"]),S[4]||(S[4]=g("span",{class:"port-label port-label-right"},"Speech",-1))]),g("div",Sk,[te(N(ce),{id:"isMusic",type:"source",position:N(ee).Right,style:Q({background:y("boolean")}),class:"port-handle"},null,8,["position","style"]),S[5]||(S[5]=g("span",{class:"port-label port-label-right"},"Music",-1))])])],2))}}),kk=Ae(_k,[["__scopeId","data-v-ba4e65cb"]]),Ck=[kS,CS,NS,$S,ES,MS,TS,IS,PS,r_,w_,A_,H_,tk,fk],Nk={id:"http-request",name:"HTTP Request",version:"2.0.0",category:"connectivity",description:"Make HTTP/REST API requests with optional template support",icon:"globe",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection"},{id:"templateId",type:"string",label:"Template"},{id:"params",type:"data",label:"Params"},{id:"url",type:"string",label:"URL"},{id:"headers",type:"data",label:"Headers"},{id:"body",type:"data",label:"Body"},{id:"trigger",type:"trigger",label:"Fetch"}],outputs:[{id:"response",type:"data",label:"Response"},{id:"status",type:"number",label:"Status"},{id:"error",type:"string",label:"Error"},{id:"loading",type:"boolean",label:"Loading"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"http",placeholder:"Select HTTP connection..."}},{id:"templateId",type:"template-select",label:"Template",default:"",props:{connectionControlId:"connectionId",allowInline:!0}},{id:"url",type:"text",label:"URL",default:"",props:{placeholder:"/path or https://...",showWhen:{templateId:""}}},{id:"method",type:"select",label:"Method",default:"GET",props:{options:["GET","POST","PUT","DELETE","PATCH"],showWhen:{templateId:""}}},{id:"timeout",type:"number",label:"Timeout (ms)",default:3e4,props:{min:1e3,max:12e4,step:1e3}}],info:{overview:"Makes HTTP and REST API requests with support for all standard methods and optional request templates. You can use a shared connection for base URL and authentication, or specify a full URL directly. Responses are output as parsed data along with the status code.",tips:["Use a connection with templates for APIs you call repeatedly to avoid duplicating URL and header configuration.","Connect a trigger node to control when the request fires rather than letting it run on every input change.","Check the Loading output to show a spinner or disable controls while a request is in flight."],pairsWith:["json-parse","json-stringify","trigger","function","console"]}},$k={id:"websocket",name:"WebSocket",version:"2.0.0",category:"connectivity",description:"Real-time WebSocket connection using ConnectionManager",icon:"radio",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection"},{id:"send",type:"data",label:"Send"},{id:"trigger",type:"trigger",label:"Send Trigger"}],outputs:[{id:"message",type:"data",label:"Message"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"websocket",placeholder:"Select WebSocket connection..."}}],info:{overview:"Opens a persistent WebSocket connection for real-time bidirectional messaging. Uses a shared connection from the ConnectionManager so multiple nodes can share the same socket. Incoming messages appear on the Message output and you can send data through the Send input.",tips:["Use a shared connection ID to let multiple WebSocket nodes share a single socket.","Connect a trigger to the Send Trigger input to control when outgoing messages are dispatched.","Pair with json-parse to decode structured messages arriving as JSON strings."],pairsWith:["json-parse","json-stringify","mqtt","trigger","console"]}},Ek={id:"midi-output",name:"MIDI Output",version:"1.0.0",category:"connectivity",description:"Send MIDI messages to devices",icon:"music",platforms:["web","electron"],inputs:[{id:"note",type:"number",label:"Note"},{id:"velocity",type:"number",label:"Velocity"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"connected",type:"boolean",label:"Connected"}],controls:[{id:"channel",type:"number",label:"Channel",default:0,props:{min:0,max:15}}],info:{overview:"Sends MIDI note messages to connected hardware or virtual MIDI devices. Provide a note number and velocity, then trigger the send. Useful for controlling synthesizers, lighting rigs, or any MIDI-compatible equipment from a flow.",tips:["Connect a trigger node to control the exact timing of note events.","Use velocity values between 0 and 127 to control note dynamics.","Combine with a MIDI Input node to create MIDI filtering or remapping flows."],pairsWith:["midi-input","trigger","expression","oscillator","function"]}},Mk={id:"mqtt",name:"MQTT",version:"2.0.0",category:"connectivity",description:"MQTT pub/sub messaging using ConnectionManager",icon:"radio",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection"},{id:"topic",type:"string",label:"Topic"},{id:"publish",type:"data",label:"Publish"},{id:"trigger",type:"trigger",label:"Publish Trigger"}],outputs:[{id:"message",type:"data",label:"Message"},{id:"topic",type:"string",label:"Topic"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"mqtt",placeholder:"Select MQTT connection..."}},{id:"topic",type:"text",label:"Topic",default:"clasp/data",props:{placeholder:"topic/subtopic"}},{id:"qos",type:"select",label:"QoS",default:0,props:{options:[0,1,2]}}],info:{overview:"Publishes and subscribes to MQTT topics using a shared connection. Incoming messages appear on the Message output along with the topic they arrived on. Supports QoS levels 0, 1, and 2 for different delivery guarantees.",tips:["Use QoS 0 for high-throughput sensor data where occasional lost messages are acceptable.","Use QoS 2 when every message must be delivered exactly once.","Connect the Topic output to a monitor node to debug which topics are active."],pairsWith:["json-parse","json-stringify","monitor","console","trigger"]}},Tk={id:"osc",name:"OSC",version:"1.0.0",category:"connectivity",description:"Open Sound Control over WebSocket",icon:"radio-tower",platforms:["web","electron"],inputs:[{id:"host",type:"string",label:"Host"},{id:"port",type:"number",label:"Port"},{id:"address",type:"string",label:"Address"},{id:"send",type:"data",label:"Send"}],outputs:[{id:"address",type:"string",label:"Address"},{id:"args",type:"data",label:"Arguments"},{id:"value",type:"number",label:"Value"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"host",type:"text",label:"Host",default:"localhost"},{id:"port",type:"number",label:"Port",default:8080,props:{min:1,max:65535}},{id:"address",type:"text",label:"Address",default:"/clasp",props:{placeholder:"/path/to/param"}},{id:"connect",type:"toggle",label:"Connect",default:!0}],info:{overview:"Sends and receives Open Sound Control messages over a WebSocket bridge. You specify a host, port, and OSC address pattern. Incoming messages are split into their address and argument components for easy downstream processing.",tips:["Make sure an OSC-to-WebSocket bridge is running on the target host and port.","Use address patterns like /mixer/fader1 to target specific parameters.","Connect the Value output to a gain or expression node for real-time parameter control."],pairsWith:["midi-input","expression","gain","monitor","console"]}},Ik={id:"serial",name:"Serial Port",version:"1.0.0",category:"connectivity",description:"Serial port communication (Web Serial API)",icon:"usb",platforms:["web","electron"],inputs:[{id:"send",type:"string",label:"Send"}],outputs:[{id:"data",type:"string",label:"Raw Data"},{id:"line",type:"string",label:"Last Line"},{id:"value",type:"number",label:"Value"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"baudRate",type:"select",label:"Baud Rate",default:9600,props:{options:[9600,19200,38400,57600,115200]}},{id:"connect",type:"toggle",label:"Connect",default:!1}],info:{overview:"Communicates with hardware over a serial port using the Web Serial API. Received data is available as raw bytes, parsed lines, or a numeric value. Common uses include reading from Arduino boards, microcontrollers, and other serial peripherals.",tips:["Select 115200 baud when working with modern Arduino boards that default to that speed.","Use the Last Line output for line-delimited protocols like those from many sensor boards.","Send text commands through the Send input to control serial devices interactively."],pairsWith:["json-parse","expression","monitor","console","trigger"]}},Pk={id:"ble",name:"Bluetooth LE",version:"1.0.0",category:"connectivity",description:"Bluetooth Low Energy communication (Web Bluetooth API)",icon:"bluetooth",platforms:["web","electron"],inputs:[{id:"send",type:"data",label:"Send"}],outputs:[{id:"value",type:"number",label:"Value"},{id:"text",type:"string",label:"Text"},{id:"rawValue",type:"data",label:"Raw Value"},{id:"deviceName",type:"string",label:"Device Name"},{id:"connected",type:"boolean",label:"Connected"},{id:"error",type:"string",label:"Error"}],controls:[{id:"serviceUUID",type:"text",label:"Service UUID",default:"",props:{placeholder:"e.g., heart_rate or 0000180d-..."}},{id:"characteristicUUID",type:"text",label:"Characteristic UUID",default:"",props:{placeholder:"UUID"}},{id:"connect",type:"toggle",label:"Connect",default:!1}],info:{overview:"A simplified all-in-one Bluetooth LE node that handles scanning, connecting, and reading a single characteristic. Good for quick prototyping when you only need one value from one device. For more complex setups with multiple characteristics, use the dedicated BLE Scanner, Device, and Characteristic nodes instead.",tips:["Enter both the service UUID and characteristic UUID before toggling Connect.","Use the dedicated BLE Scanner and BLE Characteristic nodes for multi-characteristic workflows."],pairsWith:["ble-scanner","ble-device","ble-characteristic","monitor"]}},Ak={id:"ble-scanner",name:"BLE Scanner",version:"1.0.0",category:"connectivity",description:"Scan for Bluetooth LE devices and select one to connect",icon:"bluetooth-searching",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Scan"}],outputs:[{id:"device",type:"data",label:"Device"},{id:"deviceName",type:"string",label:"Device Name"},{id:"deviceId",type:"string",label:"Device ID"},{id:"scanning",type:"boolean",label:"Scanning"},{id:"status",type:"string",label:"Status"},{id:"error",type:"string",label:"Error"}],controls:[{id:"serviceFilter",type:"select",label:"Service Filter",default:"any",props:{options:[{label:"Any Device",value:"any"},{label:"--- Standard Services ---",value:"---standard"},{label:"Heart Rate Monitor",value:"180d"},{label:"Battery Service",value:"180f"},{label:"Device Information",value:"180a"},{label:"Environmental Sensing",value:"181a"},{label:"Cycling Speed & Cadence",value:"1816"},{label:"Running Speed & Cadence",value:"1814"},{label:"--- Custom ---",value:"---custom"},{label:"Custom UUID",value:"custom"}]}},{id:"customServiceUUID",type:"text",label:"Custom Service UUID",default:"",props:{placeholder:"e.g., 0000180d-0000-1000-8000-00805f9b34fb"}},{id:"nameFilter",type:"text",label:"Name Filter",default:"",props:{placeholder:"Optional device name prefix"}}],info:{overview:"Scans for nearby Bluetooth LE devices and lets the user select one. You can filter by standard service types, a custom UUID, or a device name prefix. The selected device reference is passed to a BLE Device node for connection.",tips:["Use a service filter to narrow results to relevant devices and speed up discovery.","Set a name prefix filter when multiple devices of the same type are nearby.","Trigger a new scan whenever you need to refresh the list of available devices."],pairsWith:["ble-device","ble-characteristic","trigger","console"]}},Dk={id:"ble-device",name:"BLE Device",version:"1.0.0",category:"connectivity",description:"Connect to a Bluetooth LE device and enumerate its services",icon:"bluetooth-connected",platforms:["web","electron"],inputs:[{id:"device",type:"data",label:"Device"},{id:"connect",type:"trigger",label:"Connect"},{id:"disconnect",type:"trigger",label:"Disconnect"}],outputs:[{id:"services",type:"data",label:"Services"},{id:"characteristics",type:"data",label:"Characteristics"},{id:"deviceName",type:"string",label:"Device Name"},{id:"deviceId",type:"string",label:"Device ID"},{id:"connected",type:"boolean",label:"Connected"},{id:"status",type:"string",label:"Status"},{id:"error",type:"string",label:"Error"}],controls:[{id:"autoConnect",type:"toggle",label:"Auto Connect",default:!1},{id:"autoReconnect",type:"toggle",label:"Auto Reconnect",default:!0},{id:"serviceUUID",type:"text",label:"Service UUID (optional)",default:"",props:{placeholder:"Filter to specific service"}}],info:{overview:"Connects to a specific Bluetooth LE device and enumerates its services and characteristics. Pass in a device reference from a BLE Scanner node, and this node manages the connection lifecycle including optional auto-reconnect.",tips:["Enable Auto Reconnect to recover from dropped connections without manual intervention.","Use the Service UUID filter to limit enumeration to a single service for faster discovery.","Check the Connected output to gate downstream logic on active connection state."],pairsWith:["ble-scanner","ble-characteristic","monitor","gate"]}},Rk={id:"ble-characteristic",name:"BLE Characteristic",version:"1.0.0",category:"connectivity",description:"Read, write, and subscribe to BLE characteristic values",icon:"radio-receiver",platforms:["web","electron"],inputs:[{id:"device",type:"data",label:"Device"},{id:"read",type:"trigger",label:"Read"},{id:"write",type:"data",label:"Write Data"},{id:"writeTrigger",type:"trigger",label:"Write Trigger"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"rawValue",type:"data",label:"Raw Value"},{id:"text",type:"string",label:"Text"},{id:"formatted",type:"string",label:"Formatted"},{id:"notified",type:"trigger",label:"Notified"},{id:"properties",type:"data",label:"Properties"},{id:"error",type:"string",label:"Error"}],controls:[{id:"serviceUUID",type:"text",label:"Service UUID",default:"",props:{placeholder:"e.g., 180d or 0000180d-..."}},{id:"characteristicUUID",type:"text",label:"Characteristic UUID",default:"",props:{placeholder:"e.g., 2a37 or 00002a37-..."}},{id:"dataFormat",type:"select",label:"Data Format",default:"auto",props:{options:[{label:"Auto (Use Profile)",value:"auto"},{label:"Unsigned 8-bit",value:"uint8"},{label:"Signed 8-bit",value:"int8"},{label:"Unsigned 16-bit",value:"uint16"},{label:"Signed 16-bit",value:"int16"},{label:"Unsigned 32-bit",value:"uint32"},{label:"Signed 32-bit",value:"int32"},{label:"Float 32-bit",value:"float32"},{label:"Float 64-bit",value:"float64"},{label:"UTF-8 String",value:"utf8"},{label:"Raw Bytes",value:"raw"}]}},{id:"enableNotifications",type:"toggle",label:"Enable Notifications",default:!0},{id:"continuous",type:"toggle",label:"Continuous Read",default:!1}],info:{overview:"Reads, writes, and subscribes to individual BLE characteristic values on a connected device. You specify the service and characteristic UUIDs, pick a data format, and the node handles encoding and decoding automatically. Notifications push updated values as they arrive.",tips:["Enable notifications to receive continuous updates without polling.","Use the Auto data format when working with standard Bluetooth SIG profiles.","Connect a BLE Device node to the Device input before attempting reads or writes."],pairsWith:["ble-device","ble-scanner","monitor","json-parse"]}},zk=[Nk,$k,Ek,Mk,Tk,Ik,Pk,Ak,Dk,Rk],Vk={id:"clasp-connection",name:"CLASP Connection",version:"1.0.0",category:"clasp",description:"Manage a named CLASP connection (can be shared across nodes)",icon:"network",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"connect",type:"trigger",label:"Connect"},{id:"disconnect",type:"trigger",label:"Disconnect"}],outputs:[{id:"connected",type:"boolean",label:"Connected"},{id:"status",type:"string",label:"Status"},{id:"error",type:"string",label:"Error"},{id:"session",type:"string",label:"Session ID"},{id:"connectionId",type:"string",label:"Connection ID"}],controls:[{id:"connectionId",type:"text",label:"Connection ID",default:"default",props:{placeholder:"Unique ID to reference this connection"}},{id:"url",type:"text",label:"URL",default:"ws://localhost:7330",props:{placeholder:"ws://host:port"}},{id:"name",type:"text",label:"Client Name",default:"latch"},{id:"token",type:"text",label:"Token",default:"",props:{placeholder:"cpsk_... or empty for open"}},{id:"autoConnect",type:"toggle",label:"Auto Connect",default:!0},{id:"autoReconnect",type:"toggle",label:"Auto Reconnect",default:!0},{id:"reconnectDelay",type:"number",label:"Reconnect Delay (ms)",default:5e3,props:{min:1e3,max:6e4}}],tags:["clasp","protocol","connection","websocket"],info:{overview:"Establishes and manages a named CLASP WebSocket connection that other CLASP nodes can share. Each connection has a unique ID so multiple nodes can reference the same session. Supports token-based authentication and automatic reconnection.",tips:["Give each connection a meaningful ID so other CLASP nodes can find it easily.","Enable Auto Reconnect for long-running installations that need to survive network interruptions.","Use the Token field when connecting to a server that requires authentication."],pairsWith:["clasp-subscribe","clasp-set","clasp-emit","clasp-get","clasp-stream"]}},Lk={id:"clasp-subscribe",name:"CLASP Subscribe",version:"1.0.0",category:"clasp",description:"Subscribe to CLASP address patterns and receive values",icon:"bell",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"pattern",type:"string",label:"Pattern"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"address",type:"string",label:"Address"},{id:"type",type:"string",label:"Signal Type"},{id:"revision",type:"number",label:"Revision"},{id:"subscribed",type:"boolean",label:"Subscribed"},{id:"updated",type:"boolean",label:"Updated"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"pattern",type:"text",label:"Pattern",default:"/**",props:{placeholder:"/lights/** or /param/*"}},{id:"types",type:"select",label:"Signal Types",default:"all",props:{options:["all","param","event","stream","gesture"]}},{id:"maxRate",type:"number",label:"Max Rate (Hz)",default:0,props:{min:0,max:120,step:1}},{id:"epsilon",type:"number",label:"Change Threshold",default:0,props:{min:0,max:1,step:.01}}],tags:["clasp","subscribe","listen","receive"],info:{overview:"Subscribes to one or more CLASP addresses using glob-style patterns and outputs values as they change. You can filter by signal type and throttle the update rate. The node stays subscribed for as long as the connection is active.",tips:["Use wildcard patterns like /lights/** to subscribe to an entire address subtree.","Set a Max Rate to throttle high-frequency updates and reduce CPU load.","Use the Change Threshold (epsilon) to ignore updates smaller than a given delta."],pairsWith:["clasp-connection","clasp-set","clasp-emit","monitor","json-parse"]}},Ok={id:"clasp-set",name:"CLASP Set",version:"1.0.0",category:"clasp",description:"Set a CLASP parameter value (persistent state)",icon:"edit-3",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"value",type:"any",label:"Value"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"address",type:"text",label:"Address",default:"/param",props:{placeholder:"/lights/strip1/brightness"}}],tags:["clasp","set","parameter","send"],info:{overview:"Writes a value to a CLASP parameter address. The value persists on the server until changed again, making this the right choice for durable state like brightness levels or configuration values. Pair with CLASP Subscribe on other clients to observe the change.",tips:["Use the trigger input to control exactly when the value is written.","Combine with an expression node to transform values before sending.","Use CLASP Emit instead when you need a fire-and-forget event that does not persist."],pairsWith:["clasp-connection","clasp-get","clasp-subscribe","expression"]}},Bk={id:"clasp-emit",name:"CLASP Emit",version:"1.0.0",category:"clasp",description:"Emit a CLASP event (one-time trigger)",icon:"zap",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"payload",type:"any",label:"Payload"},{id:"trigger",type:"trigger",label:"Emit"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"address",type:"text",label:"Event Address",default:"/event",props:{placeholder:"/cue/fire"}}],tags:["clasp","emit","event","trigger"],info:{overview:"Sends a one-shot CLASP event to a specified address. Events are fire-and-forget signals that do not persist state on the server. Use this for cues, triggers, and other momentary actions.",tips:["Connect a trigger input to control exactly when the event fires.","Use address patterns like /cue/fire to organize events by category.","Attach a payload for events that need to carry data along with the trigger."],pairsWith:["clasp-connection","clasp-subscribe","trigger","function"]}},Fk={id:"clasp-get",name:"CLASP Get",version:"1.0.0",category:"clasp",description:"Get current value of a CLASP parameter",icon:"download",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"trigger",type:"trigger",label:"Get"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"address",type:"text",label:"Address",default:"/param",props:{placeholder:"/lights/strip1/brightness"}}],tags:["clasp","get","read","fetch"],info:{overview:"Fetches the current value of a single CLASP parameter on demand. Unlike Subscribe, this performs a one-time read each time it is triggered. Use it when you need a snapshot of a parameter rather than continuous updates.",tips:["Connect a trigger node to poll the value at specific intervals or on user action.","Use CLASP Subscribe instead if you need real-time continuous updates.","Check the Error output to handle cases where the address does not exist."],pairsWith:["clasp-connection","clasp-set","clasp-subscribe","trigger"]}},Wk={id:"clasp-stream",name:"CLASP Stream",version:"1.0.0",category:"clasp",description:"Stream high-rate data (continuous updates)",icon:"activity",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"address",type:"string",label:"Address"},{id:"value",type:"any",label:"Value"}],outputs:[{id:"sent",type:"boolean",label:"Sent"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"address",type:"text",label:"Address",default:"/stream",props:{placeholder:"/sensor/temperature"}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}],tags:["clasp","stream","continuous","high-rate"],info:{overview:"Sends high-rate continuous data to a CLASP address. Unlike Set, stream messages are optimized for throughput and do not guarantee persistence. Use this for sensor feeds, animation data, or any value that updates many times per second.",tips:["Disable the Enabled toggle to pause streaming without disconnecting.","Use CLASP Set instead when the value needs to persist on the server.","Keep the address consistent so subscribers can reliably receive the stream."],pairsWith:["clasp-connection","clasp-subscribe","oscillator","expression"]}},Uk={id:"clasp-bundle",name:"CLASP Bundle",version:"1.0.0",category:"clasp",description:"Send atomic bundles of operations",icon:"package",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"messages",type:"data",label:"Messages"},{id:"at",type:"number",label:"Schedule At (us)"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[{id:"sent",type:"boolean",label:"Sent"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}}],tags:["clasp","bundle","atomic","batch"],info:{overview:"Sends multiple CLASP messages as a single atomic bundle so they are applied together on the server. You can optionally schedule the bundle to execute at a specific timestamp for sample-accurate coordination. This is useful when several parameters must change in lockstep.",tips:["Use the Schedule At input to synchronize bundle execution with other timed events.","Build the messages array using upstream nodes before connecting it to the Messages input.","Pair with a CLASP Connection node to supply the Connection ID."],pairsWith:["clasp-connection","clasp-set","clasp-emit","trigger"]}},qk={id:"clasp-video-receive",name:"CLASP Video Receive",version:"1.0.0",category:"clasp",description:"Receive video stream from a CLASP relay room or direct address",icon:"monitor",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"room",type:"string",label:"Room"},{id:"peerId",type:"string",label:"Peer ID"},{id:"address",type:"string",label:"Address"}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"video",type:"video",label:"Video"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"fps",type:"number",label:"FPS"},{id:"receiving",type:"boolean",label:"Receiving"},{id:"peers",type:"array",label:"Peers"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"videoMode",type:"select",label:"Mode",default:"room",props:{options:[{label:"Room",value:"room"},{label:"Direct Address",value:"direct"}]}},{id:"room",type:"text",label:"Room",default:"default",visibleWhen:{controlId:"videoMode",value:"room"},props:{placeholder:"default"}},{id:"peerId",type:"text",label:"Peer ID",default:"",visibleWhen:{controlId:"videoMode",value:"room"},props:{placeholder:"Auto-select first broadcaster"}},{id:"address",type:"text",label:"Address",default:"",visibleWhen:{controlId:"videoMode",value:"direct"},props:{placeholder:"/video/relay/myroom/stream/abc123"}},{id:"enabled",type:"toggle",label:"Enabled",default:!0}],tags:["clasp","video","receive","stream","relay"],info:{overview:"Receives a video stream from a CLASP relay room or direct address and outputs it as a texture. In Room mode, the node discovers peers and connects to the first broadcaster unless a specific Peer ID is set. In Direct Address mode, it subscribes directly to any CLASP stream address.",tips:["Leave Peer ID blank to auto-select the first available broadcaster.","Use Direct Address mode to subscribe to any CLASP stream address without room discovery.","Use the Peers output to list all participants in the room.","Disable the Enabled toggle to stop receiving without leaving the room."],pairsWith:["clasp-connection","clasp-video-send","monitor","console"]}},Hk={id:"clasp-video-send",name:"CLASP Video Send",version:"1.0.0",category:"clasp",description:"Send video stream to a CLASP relay room",icon:"cast",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"},{id:"texture",type:"texture",label:"Texture"},{id:"video",type:"video",label:"Video"},{id:"room",type:"string",label:"Room"},{id:"start",type:"trigger",label:"Start"},{id:"stop",type:"trigger",label:"Stop"}],outputs:[{id:"broadcasting",type:"boolean",label:"Broadcasting"},{id:"fps",type:"number",label:"FPS"},{id:"bitrate",type:"number",label:"Bitrate"},{id:"address",type:"string",label:"Address"},{id:"error",type:"string",label:"Error"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"room",type:"text",label:"Room",default:"default",props:{placeholder:"default"}},{id:"streamAddress",type:"text",label:"Stream Address",default:"",props:{placeholder:"Auto-generated from room + session",monospace:!0}},{id:"quality",type:"select",label:"Quality",default:"medium",props:{options:[{label:"Low (480p)",value:"low"},{label:"Medium (720p)",value:"medium"},{label:"High (1080p)",value:"high"}]}},{id:"enabled",type:"toggle",label:"Enabled",default:!0},{id:"autoStart",type:"toggle",label:"Auto Start",default:!1}],tags:["clasp","video","send","stream","relay","broadcast"],info:{overview:"Broadcasts a video or texture source to a CLASP relay room so other clients can receive it. Supports configurable quality presets from 480p to 1080p. You can feed in a texture or a video element as the source.",tips:["Choose a lower quality preset on constrained networks to maintain a stable frame rate.","Enable Auto Start to begin broadcasting as soon as the connection is established.","Use the FPS and Bitrate outputs to monitor stream health in real time.","The Stream Address field auto-fills when broadcasting starts. You can customize it to use a specific address."],pairsWith:["clasp-connection","clasp-video-receive","monitor","console"]}},Yk={id:"clasp-gesture",name:"CLASP Gesture",version:"1.0.0",category:"clasp",description:"Receive gesture signals (touch/pen/motion) from CLASP",icon:"hand",color:"#6366f1",platforms:["web","electron"],inputs:[{id:"connectionId",type:"string",label:"Connection ID"}],outputs:[{id:"x",type:"number",label:"X"},{id:"y",type:"number",label:"Y"},{id:"pressure",type:"number",label:"Pressure"},{id:"phase",type:"string",label:"Phase"},{id:"pointerType",type:"string",label:"Pointer Type"},{id:"updated",type:"boolean",label:"Updated"}],controls:[{id:"connectionId",type:"connection",label:"Connection",default:"",props:{protocol:"clasp",placeholder:"Select CLASP connection..."}},{id:"pattern",type:"text",label:"Pattern",default:"/gesture/**",props:{placeholder:"/gesture/**"}}],tags:["clasp","gesture","touch","pen","motion","input"],info:{overview:"Receives gesture input signals such as touch, pen, and motion events from a CLASP server. Outputs include X/Y coordinates, pressure, pointer phase, and pointer type. Use it to build interactive control surfaces or visualizations driven by remote input.",tips:["Use the pattern field to filter for specific gesture paths like /gesture/pen/**.","Check the Phase output to distinguish between start, move, and end events.","Combine pressure output with a gain node to create pressure-sensitive controls."],pairsWith:["clasp-connection","clasp-subscribe","expression","monitor"]}},Gk=[Vk,Lk,Ok,Bk,Fk,Wk,Uk,qk,Hk,Yk],jk={id:"json-parse",name:"JSON Parse",version:"1.0.0",category:"data",description:"Parse JSON string to object",icon:"braces",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"JSON String"}],outputs:[{id:"output",type:"data",label:"Object"},{id:"error",type:"string",label:"Error"}],controls:[{id:"path",type:"text",label:"Path",default:"",props:{placeholder:"e.g., data.items[0]"}}],info:{overview:"Parses a JSON string into a structured object. Optionally extracts a nested value using a dot-notation path. If parsing fails, the error output provides the reason.",tips:["Use the path field to drill into deeply nested responses without needing separate Object Get nodes.","Connect the error output to a Monitor node to debug malformed JSON from external sources."],pairsWith:["json-stringify","object-get","http-request","monitor"]}},Xk={id:"json-stringify",name:"JSON Stringify",version:"1.0.0",category:"data",description:"Convert object to JSON string",icon:"braces",platforms:["web","electron"],inputs:[{id:"input",type:"data",label:"Object"}],outputs:[{id:"output",type:"string",label:"JSON String"}],controls:[{id:"pretty",type:"toggle",label:"Pretty Print",default:!1}],info:{overview:"Converts a JavaScript object into a JSON string. Supports pretty-printed output with indentation for readability. Useful for preparing data to send over HTTP, WebSocket, or MQTT connections.",tips:["Enable pretty print when sending output to a Monitor or Console for easier debugging.","Pair with HTTP Request to serialize request bodies as JSON."],pairsWith:["json-parse","http-request","websocket","mqtt"]}},Zk={id:"texture-to-data",name:"Texture to Data",version:"1.0.0",category:"data",description:"Convert texture to image data for AI processing",icon:"image-down",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture",required:!0},{id:"trigger",type:"trigger",label:"Capture"}],outputs:[{id:"data",type:"data",label:"Image Data"},{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"}],controls:[{id:"format",type:"select",label:"Format",default:"imageData",props:{options:["imageData","base64","blob"]}},{id:"continuous",type:"toggle",label:"Continuous",default:!1}],info:{overview:"Converts a GPU texture into CPU-accessible image data in one of several formats: raw ImageData, base64, or blob. Supports both single-shot capture via trigger and continuous frame extraction. Also outputs the image dimensions.",tips:["Enable continuous mode for real-time frame analysis, but be mindful of performance costs.","Use base64 format when the image data needs to be sent as a string over HTTP or WebSocket."],pairsWith:["http-request","json-stringify","websocket","expression"]}},Kk={id:"array-length",name:"Array Length",version:"1.0.0",category:"data",description:"Get length of array",icon:"list",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"length",type:"number",label:"Length"},{id:"isEmpty",type:"boolean",label:"Is Empty"}],controls:[],tags:["array","length","count","size"],info:{overview:"Returns the number of elements in an array and a boolean indicating whether the array is empty. This is a lightweight way to check the size of any list before processing it.",tips:["Use the isEmpty output with a Gate to skip processing on empty arrays.","Combine with Counter to track how array sizes change over time."],pairsWith:["array-filter-nulls","gate","compare","counter"]}},Jk={id:"array-get",name:"Array Get",version:"1.0.0",category:"data",description:"Get element at index",icon:"list-ordered",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"},{id:"index",type:"number",label:"Index"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"found",type:"boolean",label:"Found"}],controls:[{id:"default",type:"text",label:"Default",default:""}],tags:["array","get","index","element","access"],info:{overview:"Retrieves the element at a specific index in an array. Outputs the value and a boolean indicating whether the index was valid. You can set a default value to use when the index is out of bounds.",tips:["Use negative indices to count from the end of the array.","Set a meaningful default value to avoid passing undefined downstream."],pairsWith:["array-length","array-contains","counter","expression"]}},Qk={id:"array-first-last",name:"Array First/Last",version:"1.0.0",category:"data",description:"Get first and last elements",icon:"move-horizontal",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"first",type:"any",label:"First"},{id:"last",type:"any",label:"Last"},{id:"length",type:"number",label:"Length"}],controls:[],tags:["array","first","last","head","tail"],info:{overview:"Extracts the first and last elements from an array and outputs them individually. Also provides the array length. This is a quick way to peek at the boundaries of a list without indexing manually.",tips:["Use this after Array Sort to grab the minimum and maximum values in one step.","Check the length output to guard against empty arrays before using the element values."],pairsWith:["array-sort","array-reverse","array-length","compare"]}},e3={id:"array-contains",name:"Array Contains",version:"1.0.0",category:"data",description:"Check if array contains a value",icon:"search",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"},{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"},{id:"index",type:"number",label:"Index"}],controls:[],tags:["array","contains","includes","find","search"],info:{overview:"Checks whether a given value exists in an array. Returns a boolean result and the index where the value was found, or -1 if it was not found.",tips:["Use the index output to feed directly into Array Get when you need the matched element.","Connect the boolean result to a Gate node to conditionally pass data based on membership."],pairsWith:["array-get","array-filter-nulls","gate","compare"]}},t3={id:"array-slice",name:"Array Slice",version:"1.0.0",category:"data",description:"Get subset of array",icon:"scissors",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"result",type:"array",label:"Result"}],controls:[{id:"start",type:"number",label:"Start",default:0},{id:"end",type:"number",label:"End",default:-1}],tags:["array","slice","subset","range"],info:{overview:"Extracts a portion of an array from a start index to an end index. Returns a new array containing only the selected elements. Negative indices count from the end of the array.",tips:["Set end to -1 to slice from the start index through the last element.","Use this to implement pagination by adjusting start and end based on page size."],pairsWith:["array-length","array-range","counter","array-reverse"]}},n3={id:"array-join",name:"Array Join",version:"1.0.0",category:"data",description:"Join array elements into string",icon:"link",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"separator",type:"text",label:"Separator",default:","}],tags:["array","join","concat","string"],info:{overview:"Joins all elements of an array into a single string using a configurable separator. This is the inverse of splitting a string into an array. Useful for building comma-separated lists, paths, or display text from array data.",tips:["Use a newline character in the separator field to produce multi-line output.",'Filter nulls before joining to avoid "null" or "undefined" appearing in the result string.'],pairsWith:["to-array","array-filter-nulls","to-string","json-stringify"]}},o3={id:"array-reverse",name:"Array Reverse",version:"1.0.0",category:"data",description:"Reverse array order",icon:"arrow-down-up",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"result",type:"array",label:"Result"}],controls:[],tags:["array","reverse","flip","invert"],info:{overview:"Reverses the order of elements in an array. The first element becomes the last, and the last becomes the first. This does not modify the original array.",tips:["Combine with Array Sort to quickly switch between ascending and descending order.","Use after Array Slice to reverse just a portion of the original array."],pairsWith:["array-sort","array-slice","array-first-last","array-join"]}},i3={id:"array-push",name:"Array Push",version:"1.0.0",category:"data",description:"Add element(s) to array",icon:"plus-circle",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"},{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"array",label:"Result"}],controls:[{id:"position",type:"select",label:"Position",default:"end",props:{options:["end","start"]}}],tags:["array","push","add","append","prepend"],info:{overview:"Adds an element to an array at either the start or end position. Returns a new array with the element included. Use this to build up lists incrementally from individual values.",tips:['Set position to "start" when you need a stack-like (LIFO) structure.',"Chain multiple Array Push nodes together to append several values in sequence."],pairsWith:["array-length","array-unique","array-contains","to-array"]}},a3={id:"array-filter-nulls",name:"Filter Nulls",version:"1.0.0",category:"data",description:"Remove null/undefined/empty values from array",icon:"filter-x",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"result",type:"array",label:"Result"},{id:"removed",type:"number",label:"Removed"}],controls:[{id:"removeEmpty",type:"toggle",label:"Remove Empty Strings",default:!0}],tags:["array","filter","null","clean","compact"],info:{overview:"Removes null, undefined, and optionally empty string values from an array. Returns the cleaned array along with a count of how many elements were removed. Useful for sanitizing data before further processing.",tips:["Enable the Remove Empty Strings toggle when working with user input or CSV data.","Chain this before Array Length to get an accurate count of meaningful values."],pairsWith:["array-length","array-unique","json-parse","to-array"]}},s3={id:"array-unique",name:"Array Unique",version:"1.0.0",category:"data",description:"Remove duplicate values",icon:"fingerprint",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"result",type:"array",label:"Result"}],controls:[],tags:["array","unique","distinct","dedupe"],info:{overview:"Removes duplicate values from an array, keeping only the first occurrence of each value. Useful for deduplicating lists of IDs, tags, or any repeated data.",tips:["Apply this after Array Push when accumulating values that may repeat.","Combine with Array Length to compare the count before and after deduplication."],pairsWith:["array-push","array-length","array-sort","array-filter-nulls"]}},r3={id:"array-sort",name:"Array Sort",version:"1.0.0",category:"data",description:"Sort array values",icon:"arrow-up-down",platforms:["web","electron"],inputs:[{id:"array",type:"array",label:"Array"}],outputs:[{id:"result",type:"array",label:"Result"}],controls:[{id:"direction",type:"select",label:"Direction",default:"ascending",props:{options:["ascending","descending"]}},{id:"type",type:"select",label:"Type",default:"auto",props:{options:["auto","numeric","alphabetic"]}}],tags:["array","sort","order","ascending","descending"],info:{overview:"Sorts the elements of an array in ascending or descending order. Supports auto-detection of type as well as explicit numeric or alphabetic sorting. Returns a new sorted array.",tips:['Use the "numeric" type when sorting strings that contain numbers to avoid lexicographic ordering.',"Chain with Array First/Last to quickly extract the minimum or maximum value."],pairsWith:["array-first-last","array-reverse","array-unique","array-slice"]}},l3={id:"array-range",name:"Array Range",version:"1.0.0",category:"data",description:"Generate an array of sequential numbers",icon:"list-tree",platforms:["web","electron"],inputs:[],outputs:[{id:"result",type:"array",label:"Result"}],controls:[{id:"start",type:"number",label:"Start",default:0},{id:"end",type:"number",label:"End",default:10},{id:"step",type:"number",label:"Step",default:1}],tags:["array","range","sequence","generate"],info:{overview:"Generates an array of sequential numbers from a start value to an end value with a configurable step. Useful for creating index lists, iteration sequences, or evenly spaced numeric data.",tips:["Use a fractional step value like 0.1 to generate fine-grained numeric sequences.","Feed the output into Array Get to iterate over another array by index."],pairsWith:["array-get","expression","counter","array-length"]}},u3={id:"object-get",name:"Object Get",version:"1.0.0",category:"data",description:"Get property from object by path",icon:"braces",platforms:["web","electron"],inputs:[{id:"object",type:"data",label:"Object"},{id:"path",type:"string",label:"Path"}],outputs:[{id:"value",type:"any",label:"Value"},{id:"found",type:"boolean",label:"Found"}],controls:[{id:"defaultPath",type:"text",label:"Path",default:"",props:{placeholder:"data.items[0].name"}},{id:"default",type:"text",label:"Default",default:""}],tags:["object","get","property","path","access"],info:{overview:'Reads a value from an object using a dot-notation path such as "data.items[0].name". Returns the value and a boolean indicating whether the path resolved successfully. A default value can be specified for missing paths.',tips:['Use bracket notation in the path to access array indices, like "items[2].id".',"Check the found output before using the value to handle missing data gracefully."],pairsWith:["object-set","object-has","json-parse","gate"]}},d3={id:"object-set",name:"Object Set",version:"1.0.0",category:"data",description:"Set property on object (returns new object)",icon:"pen-square",platforms:["web","electron"],inputs:[{id:"object",type:"data",label:"Object"},{id:"path",type:"string",label:"Path"},{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"data",label:"Result"}],controls:[{id:"defaultPath",type:"text",label:"Path",default:"",props:{placeholder:"data.name"}}],tags:["object","set","property","path","modify"],info:{overview:"Sets a property on an object at a given dot-notation path and returns a new object with the change applied. The original object is not mutated. Intermediate path segments are created automatically if they do not exist.",tips:['Use dot-notation paths like "user.settings.theme" to set deeply nested values in one step.',"Chain with Object Get to read, modify, and write back a single property."],pairsWith:["object-get","object-merge","object-create","json-stringify"]}},c3={id:"object-keys",name:"Object Keys",version:"1.0.0",category:"data",description:"Get array of object keys",icon:"key",platforms:["web","electron"],inputs:[{id:"object",type:"data",label:"Object"}],outputs:[{id:"keys",type:"array",label:"Keys"},{id:"count",type:"number",label:"Count"}],controls:[],tags:["object","keys","properties","enumerate"],info:{overview:"Extracts all property names from an object and returns them as an array of strings. Also outputs the total number of keys. Useful for inspecting object structure or iterating over properties.",tips:["Feed the keys array into Array Contains to check for a specific property by name.","Use the count output to detect empty objects without inspecting individual keys."],pairsWith:["object-values","object-entries","array-contains","array-length"]}},p3={id:"object-values",name:"Object Values",version:"1.0.0",category:"data",description:"Get array of object values",icon:"list-collapse",platforms:["web","electron"],inputs:[{id:"object",type:"data",label:"Object"}],outputs:[{id:"values",type:"array",label:"Values"},{id:"count",type:"number",label:"Count"}],controls:[],tags:["object","values","enumerate"],info:{overview:"Extracts all property values from an object and returns them as an array. Also outputs the total count of values. Useful when you need the data from an object without its keys.",tips:["Use this with Array Sort to rank the values extracted from an object.","Combine with Object Keys to create parallel arrays of keys and values for processing."],pairsWith:["object-keys","object-entries","array-sort","array-length"]}},f3={id:"object-has",name:"Object Has",version:"1.0.0",category:"data",description:"Check if object has property",icon:"check-square",platforms:["web","electron"],inputs:[{id:"object",type:"data",label:"Object"},{id:"path",type:"string",label:"Path"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"defaultPath",type:"text",label:"Path",default:"",props:{placeholder:"data.name"}}],tags:["object","has","property","exists","check"],info:{overview:"Checks whether an object contains a property at a given dot-notation path. Returns true if the path exists, false otherwise. Useful for validating data shape before accessing values.",tips:["Use this before Object Get to avoid passing undefined into downstream nodes.","Connect the result to a Gate to conditionally route data based on property existence."],pairsWith:["object-get","gate","compare","json-parse"]}},h3={id:"object-merge",name:"Object Merge",version:"1.0.0",category:"data",description:"Merge two objects (shallow merge)",icon:"combine",platforms:["web","electron"],inputs:[{id:"a",type:"data",label:"A"},{id:"b",type:"data",label:"B"}],outputs:[{id:"result",type:"data",label:"Result"}],controls:[],tags:["object","merge","combine","spread"],info:{overview:"Performs a shallow merge of two objects, with properties from object B overriding those in object A when keys collide. Returns a new merged object. This is equivalent to a JavaScript spread operation.",tips:["Use Object Create to build partial objects, then merge them together.","Chain multiple Object Merge nodes to combine more than two objects."],pairsWith:["object-create","object-set","object-keys","json-stringify"]}},g3={id:"object-create",name:"Object Create",version:"1.0.0",category:"data",description:"Create object from key/value pairs",icon:"plus-square",platforms:["web","electron"],inputs:[{id:"key1",type:"string",label:"Key 1"},{id:"value1",type:"any",label:"Value 1"},{id:"key2",type:"string",label:"Key 2"},{id:"value2",type:"any",label:"Value 2"},{id:"key3",type:"string",label:"Key 3"},{id:"value3",type:"any",label:"Value 3"}],outputs:[{id:"result",type:"data",label:"Result"}],controls:[],tags:["object","create","build","construct"],info:{overview:"Builds a new object from up to three key/value pairs. Each key is a string input and each value can be any type. Unused pairs are omitted from the output.",tips:["Leave key inputs empty to skip those pairs and create objects with fewer properties.","Chain with Object Merge to combine the result with an existing object."],pairsWith:["object-merge","object-set","json-stringify","http-request"]}},m3={id:"object-entries",name:"Object Entries",version:"1.0.0",category:"data",description:"Get array of [key, value] pairs",icon:"table",platforms:["web","electron"],inputs:[{id:"object",type:"data",label:"Object"}],outputs:[{id:"entries",type:"array",label:"Entries"},{id:"count",type:"number",label:"Count"}],controls:[],tags:["object","entries","pairs","iterate"],info:{overview:"Converts an object into an array of [key, value] pairs. Also outputs the total count of entries. This is useful for iterating over object properties or transforming objects into tabular data.",tips:["Use Array Get on the entries output to access specific key/value pairs by position.","Combine with Array Length to verify the number of properties before processing."],pairsWith:["object-keys","object-values","array-get","array-length"]}},v3={id:"router",name:"Router",version:"1.0.0",category:"data",description:"Route value to one of multiple outputs based on index",icon:"git-branch",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"route",type:"number",label:"Route"}],outputs:[{id:"out0",type:"any",label:"Out 0"},{id:"out1",type:"any",label:"Out 1"},{id:"out2",type:"any",label:"Out 2"},{id:"out3",type:"any",label:"Out 3"}],controls:[],tags:["router","demux","switch","route","split"],info:{overview:"Routes an input value to one of four outputs based on a numeric route index. Only the selected output receives the value; all others remain inactive. Useful for demultiplexing data streams or directing flow based on state.",tips:["Connect a Counter node to the route input to cycle through outputs sequentially.","Use an Expression node to compute the route index dynamically from input data."],pairsWith:["counter","select","switch","gate"]}},y3={id:"counter",name:"Counter",version:"1.0.0",category:"data",description:"Count triggers with optional min/max bounds",icon:"plus-minus",platforms:["web","electron"],inputs:[{id:"increment",type:"trigger",label:"Increment"},{id:"decrement",type:"trigger",label:"Decrement"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"count",type:"number",label:"Count"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:100},{id:"wrap",type:"toggle",label:"Wrap",default:!1},{id:"initial",type:"number",label:"Initial",default:0}],tags:["counter","count","increment","decrement"],info:{overview:"Maintains a numeric count that responds to increment, decrement, and reset triggers. Supports configurable min/max bounds and optional wrapping. Useful for sequencing, stepping through arrays, or tracking events.",tips:["Enable wrap mode to cycle through a fixed range of values continuously.","Connect the count output to Array Get to step through array elements one at a time."],pairsWith:["array-get","gate","compare","router"]}},b3={id:"debounce",name:"Debounce",version:"1.0.0",category:"data",description:"Only output value after it stops changing for a period",icon:"timer",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"delay",type:"number",label:"Delay (ms)",default:300}],tags:["debounce","delay","wait","settle"],info:{overview:"Delays passing a value through until it stops changing for a specified duration. Only the most recent value is emitted once the quiet period elapses. Ideal for handling rapid user input or noisy sensor data.",tips:["Set the delay to 300ms or more for text input to avoid excessive downstream updates.","Use Throttle instead if you need regular updates at a fixed interval rather than waiting for silence."],pairsWith:["throttle","http-request","expression","gate"]}},w3={id:"throttle",name:"Throttle",version:"1.0.0",category:"data",description:"Limit how often value is output",icon:"gauge",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"any",label:"Result"}],controls:[{id:"interval",type:"number",label:"Interval (ms)",default:100}],tags:["throttle","limit","rate","frequency"],info:{overview:"Limits how frequently a value passes through by enforcing a minimum time interval between outputs. Unlike debounce, throttle emits at regular intervals even while the input keeps changing. Good for rate-limiting high-frequency data.",tips:["Set the interval to match your target frame rate when throttling visual updates.","Use Debounce instead if you only care about the final settled value after input stops."],pairsWith:["debounce","counter","expression","monitor"]}},x3={id:"to-string",name:"To String",version:"1.0.0",category:"data",description:"Convert any value to string",icon:"type",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"format",type:"select",label:"Format",default:"default",props:{options:["default","json","fixed"]}},{id:"precision",type:"number",label:"Precision",default:2}],tags:["convert","string","format","stringify"],info:{overview:"Converts any value to a string representation. Supports default conversion, JSON serialization, and fixed-precision numeric formatting. The precision control applies only in fixed mode.",tips:["Use json format mode for objects and arrays to get a complete string representation.","Use fixed mode with a precision of 0 to display whole numbers without decimal places."],pairsWith:["to-number","json-stringify","format-number","array-join"]}},S3={id:"to-number",name:"To Number",version:"1.0.0",category:"data",description:"Convert value to number",icon:"hash",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"},{id:"valid",type:"boolean",label:"Valid"}],controls:[{id:"default",type:"number",label:"Default",default:0}],tags:["convert","number","parse","cast"],info:{overview:"Converts any value to a number. Strings are parsed, booleans become 0 or 1, and invalid values fall back to the configurable default. The valid output indicates whether the conversion succeeded.",tips:["Set a sensible default to prevent NaN from propagating through math operations.","Use Parse Int or Parse Float instead when you need more control over the parsing behavior."],pairsWith:["parse-int","parse-float","format-number","expression"]}},_3={id:"to-boolean",name:"To Boolean",version:"1.0.0",category:"data",description:"Convert value to boolean (truthy/falsy)",icon:"toggle-right",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"boolean",label:"Result"}],controls:[{id:"mode",type:"select",label:"Mode",default:"truthy",props:{options:["truthy","strict"]}}],tags:["convert","boolean","truthy","cast"],info:{overview:'Converts any value to a boolean. In truthy mode, standard JavaScript truthiness rules apply. In strict mode, only the values true and "true" produce true. Useful for normalizing toggle states from various data sources.',tips:["Use strict mode when parsing string-based boolean values from JSON or query parameters.","Connect the output to a Gate node to open or close data flow based on the converted value."],pairsWith:["gate","compare","to-number","select"]}},k3={id:"parse-int",name:"Parse Int",version:"1.0.0",category:"data",description:"Parse string to integer with radix support",icon:"binary",platforms:["web","electron"],inputs:[{id:"value",type:"string",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"},{id:"valid",type:"boolean",label:"Valid"}],controls:[{id:"radix",type:"number",label:"Radix",default:10},{id:"default",type:"number",label:"Default",default:0}],tags:["parse","integer","hex","binary","convert"],info:{overview:"Parses a string into an integer with configurable radix (base). Supports decimal, hexadecimal, binary, and other bases. Returns the parsed integer and a validity flag.",tips:["Set the radix to 16 to parse hexadecimal color codes or other hex strings.","Use the valid output to catch and handle non-numeric input before it reaches downstream nodes."],pairsWith:["parse-float","to-number","format-number","expression"]}},C3={id:"parse-float",name:"Parse Float",version:"1.0.0",category:"data",description:"Parse string to floating point number",icon:"percent",platforms:["web","electron"],inputs:[{id:"value",type:"string",label:"Value"}],outputs:[{id:"result",type:"number",label:"Result"},{id:"valid",type:"boolean",label:"Valid"}],controls:[{id:"default",type:"number",label:"Default",default:0}],tags:["parse","float","decimal","convert"],info:{overview:"Parses a string into a floating-point number. Returns the parsed value and a boolean indicating whether the conversion was valid. A configurable default is returned when parsing fails.",tips:["Use the valid output to filter out non-numeric strings before performing math.","Prefer this over To Number when you specifically need decimal precision from string input."],pairsWith:["format-number","to-number","expression","compare"]}},N3={id:"to-array",name:"To Array",version:"1.0.0",category:"data",description:"Wrap value in array, or split string to array",icon:"brackets",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[{id:"result",type:"array",label:"Result"}],controls:[{id:"mode",type:"select",label:"Mode",default:"wrap",props:{options:["wrap","split","from"]}},{id:"separator",type:"text",label:"Separator",default:","}],tags:["convert","array","wrap","split"],info:{overview:"Converts a value into an array using one of three modes: wrap places the value inside a single-element array, split divides a string by a separator, and from attempts to convert iterable values. Useful for normalizing input into array form.",tips:["Use split mode with a comma separator to turn CSV-style strings into arrays.","Use wrap mode to ensure a value is always an array before feeding it to array-processing nodes."],pairsWith:["array-join","array-filter-nulls","array-push","json-parse"]}},$3={id:"format-number",name:"Format Number",version:"1.0.0",category:"data",description:"Format number with locale and options",icon:"coins",platforms:["web","electron"],inputs:[{id:"value",type:"number",label:"Value"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"style",type:"select",label:"Style",default:"decimal",props:{options:["decimal","percent","currency"]}},{id:"currency",type:"text",label:"Currency",default:"USD"},{id:"decimals",type:"number",label:"Decimals",default:2}],tags:["format","number","currency","percent","locale"],info:{overview:"Formats a number as a locale-aware string with support for decimal, percent, and currency styles. You can control the number of decimal places and the currency code. The output is a display-ready string.",tips:['Set the style to "currency" and specify a currency code like "EUR" or "JPY" for localized money formatting.',"Use the decimals control to round values for cleaner display output."],pairsWith:["to-number","parse-float","expression","to-string"]}},E3=[jk,Xk,Zk,Kk,Jk,Qk,e3,t3,n3,o3,i3,a3,s3,r3,l3,u3,d3,c3,p3,f3,h3,g3,m3,v3,y3,b3,w3,x3,S3,_3,k3,C3,N3,$3],M3={id:"function",name:"Function",version:"1.0.0",category:"code",description:"Custom JavaScript function with sandboxed execution",icon:"code-2",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"any",label:"Result"},{id:"error",type:"string",label:"Error"}],controls:[{id:"code",type:"code",label:"Code",default:`// Access inputs via: inputs.a, inputs.b, etc.
// Access time via: time, deltaTime, frame
// Use state: getState('key', default), setState('key', value)
// Return a value or object with multiple outputs

return inputs.a + inputs.b;`}],info:{overview:"Runs custom JavaScript code in a sandboxed environment with up to four generic inputs. You can maintain state across frames and return values to downstream nodes. The error output fires when your code throws, making it possible to handle failures gracefully.",tips:["Use getState/setState to persist values between frames instead of relying on closures.","Return an object with named keys to populate multiple outputs from a single function.","Connect the error output to a console node during development to surface runtime issues quickly."],pairsWith:["console","expression","trigger","monitor"]}},T3={class:"handles-column handles-left"},I3={class:"port-label"},P3={class:"node-content"},A3={key:0,class:"error-indicator",title:"Error in function"},D3={key:0,class:"editor-container"},R3={key:0,class:"error-display"},z3={class:"handles-column handles-right"},V3={class:"port-label port-label-right"},L3=xe({__name:"FunctionNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=je(),i=D(()=>{var h;return((h=ze.code)==null?void 0:h.color)??"var(--color-neutral-400)"}),a=re(null),s=_t(null),r=re(!1),l=D(()=>{var h;return((h=t.data)==null?void 0:h.code)??`// Access inputs via: inputs.a, inputs.b, etc.
// Access time via: time, deltaTime, frame
// Return a value or object

return inputs.a + inputs.b;`}),u=D(()=>{var h;return((h=t.data)==null?void 0:h.inputs)??[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}]}),c=D(()=>{var h;return((h=t.data)==null?void 0:h.outputs)??[{id:"result",type:"any",label:"Result"},{id:"error",type:"string",label:"Error"}]}),p=D(()=>{var f;const h=o.nodeMetrics.get(t.id);return(f=h==null?void 0:h.outputValues)==null?void 0:f.error});function y(h){n.updateNodeData(t.id,{code:h})}function b(){!a.value||s.value||(s.value=Bl.create(a.value,{value:l.value,language:"javascript",theme:"vs-dark",minimap:{enabled:!1},lineNumbers:"off",scrollBeyondLastLine:!1,folding:!1,glyphMargin:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:6,horizontalScrollbarSize:6},fontSize:11,fontFamily:"var(--font-mono, monospace)",automaticLayout:!0,wordWrap:"on",tabSize:2,padding:{top:4,bottom:4}}),s.value.onDidChangeModelContent(()=>{var f;const h=((f=s.value)==null?void 0:f.getValue())??"";y(h)}),a.value.addEventListener("mousedown",h=>{h.stopPropagation()}),a.value.addEventListener("pointerdown",h=>{h.stopPropagation()}))}function S(){s.value&&(s.value.dispose(),s.value=null)}_e(l,h=>{s.value&&s.value.getValue()!==h&&s.value.setValue(h)}),_e(r,h=>{h?S():setTimeout(()=>{!s.value&&a.value&&b()},50)}),Oe(()=>{r.value||b()}),Ye(()=>{S()});function v(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}function x(){r.value=!r.value}return(h,f)=>(z(),K("div",{class:ge(["function-node",{selected:t.selected,collapsed:r.value}])},[g("div",T3,[(z(!0),K(ke,null,De(u.value,d=>(z(),K("div",{key:d.id,class:"handle-slot"},[te(N(ce),{id:d.id,type:"target",position:N(ee).Left,style:Q({background:v(d.type)}),class:"port-handle"},null,8,["id","position","style"]),g("span",I3,be(d.label),1)]))),128))]),g("div",P3,[g("div",{class:"node-header",style:Q({borderLeftColor:i.value}),onDblclick:x},[te(N(Ol),{size:14,class:"node-icon",style:Q({color:i.value})},null,8,["style"]),f[2]||(f[2]=g("span",{class:"node-title"},"Function",-1)),p.value?(z(),K("span",A3,"!")):me("",!0)],36),r.value?me("",!0):(z(),K("div",D3,[g("div",{ref_key:"editorContainer",ref:a,class:"monaco-editor-wrapper",onPointerdown:f[0]||(f[0]=de(()=>{},["stop"])),onTouchstart:f[1]||(f[1]=de(()=>{},["stop"]))},null,544),p.value?(z(),K("div",R3,be(p.value),1)):me("",!0)]))]),g("div",z3,[(z(!0),K(ke,null,De(c.value,d=>(z(),K("div",{key:d.id,class:"handle-slot"},[te(N(ce),{id:d.id,type:"source",position:N(ee).Right,style:Q({background:v(d.type)}),class:"port-handle"},null,8,["id","position","style"]),g("span",V3,be(d.label),1)]))),128))])],2))}}),O3=Ae(L3,[["__scopeId","data-v-e5df02d8"]]),B3={id:"expression",name:"Expression",version:"1.0.0",category:"code",description:"Inline math expression evaluator",icon:"calculator",platforms:["web","electron"],inputs:[{id:"a",type:"number",label:"A"},{id:"b",type:"number",label:"B"},{id:"c",type:"number",label:"C"},{id:"d",type:"number",label:"D"}],outputs:[{id:"result",type:"number",label:"Result"},{id:"error",type:"string",label:"Error"}],controls:[{id:"expression",type:"text",label:"Expression",default:"a + b",props:{placeholder:"e.g., sin(t) * a + b"}}],info:{overview:"Evaluates a single-line math expression using up to four numeric inputs. Standard JavaScript Math functions like sin, cos, abs, and floor are available without the Math prefix. The built-in variable t provides elapsed time in seconds.",tips:["Use t for time-based expressions without needing an external oscillator.","Chain multiple expression nodes for staged calculations rather than writing one complicated expression.","The error output tells you about syntax problems at runtime, so connect it to a console during setup."],pairsWith:["constant","slider","oscillator","map-range"]}},F3={id:"template",name:"Template",version:"1.0.0",category:"code",description:"String template with variable interpolation",icon:"text-cursor-input",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"output",type:"string",label:"Output"}],controls:[{id:"template",type:"text",label:"Template",default:"Value: {{a}}",props:{placeholder:"Use {{varname}} for interpolation"}}],info:{overview:"Builds a string by replacing placeholders with live input values. Placeholders use double-brace syntax like {{a}} through {{d}}. Any input type is automatically converted to its string representation before insertion.",tips:["Use template output to drive a textbox or console node for formatted debug displays.","Combine with json-parse to build structured string payloads from multiple data sources.","Placeholders for disconnected inputs resolve to an empty string, so unused slots are safe to leave in the template."],pairsWith:["textbox","console","string-concat","json-parse"]}},W3={id:"counter",name:"Counter",version:"1.0.0",category:"code",description:"Increment/decrement counter with min/max",icon:"list-ordered",platforms:["web","electron"],inputs:[{id:"increment",type:"trigger",label:"Increment"},{id:"decrement",type:"trigger",label:"Decrement"},{id:"reset",type:"trigger",label:"Reset"},{id:"set",type:"number",label:"Set Value"}],outputs:[{id:"count",type:"number",label:"Count"},{id:"normalized",type:"number",label:"Normalized"},{id:"atMin",type:"boolean",label:"At Min"},{id:"atMax",type:"boolean",label:"At Max"}],controls:[{id:"min",type:"number",label:"Min",default:0},{id:"max",type:"number",label:"Max",default:100},{id:"step",type:"number",label:"Step",default:1},{id:"wrap",type:"toggle",label:"Wrap Around",default:!1}],info:{overview:"Maintains an integer count that responds to increment, decrement, and reset triggers. The normalized output gives a 0-1 value based on the min/max range. Wrap mode makes the counter loop back to the opposite bound when it exceeds a limit.",tips:["Connect a trigger node to increment for a manual step sequencer.","Enable wrap mode and use normalized output to drive cyclic animations.","Wire atMin and atMax to toggle or gate nodes to build conditional logic around boundaries."],pairsWith:["trigger","gate","switch","interval"]}},U3={id:"toggle",name:"Toggle",version:"1.0.0",category:"code",description:"Flip-flop toggle with set/reset",icon:"toggle-left",platforms:["web","electron"],inputs:[{id:"trigger",type:"trigger",label:"Toggle"},{id:"set",type:"trigger",label:"Set"},{id:"reset",type:"trigger",label:"Reset"}],outputs:[{id:"value",type:"boolean",label:"Value"},{id:"inverted",type:"boolean",label:"Inverted"},{id:"number",type:"number",label:"Number"}],controls:[{id:"initial",type:"toggle",label:"Initial Value",default:!1}],info:{overview:"A flip-flop that alternates between true and false each time its trigger fires. Separate set and reset inputs allow forcing the state directly. The number output emits 1 or 0, which is convenient for math operations downstream.",tips:["Use the inverted output to drive two mutually exclusive signal paths without an extra node.","Wire a beat-detect trigger into the toggle input for rhythm-synced on/off effects.","Combine with a gate node to let signals through only while the toggle is active."],pairsWith:["trigger","gate","beat-detect","switch"]}},q3={id:"sample-hold",name:"Sample & Hold",version:"1.0.0",category:"code",description:"Capture and hold value on trigger",icon:"clipboard",platforms:["web","electron"],inputs:[{id:"input",type:"any",label:"Input"},{id:"trigger",type:"trigger",label:"Sample"}],outputs:[{id:"output",type:"any",label:"Output"}],controls:[],info:{overview:"Captures the current value of its input only when the trigger fires, then holds that value until the next trigger. This is useful for freezing a continuously changing signal at a specific moment. The output stays constant between triggers regardless of input changes.",tips:["Pair with an interval node to sample a signal at a fixed rate.","Use with a random or oscillator source to generate stepped random sequences.","Chain multiple sample-hold nodes with offset triggers for a shift-register effect."],pairsWith:["trigger","interval","oscillator","lfo"]}},H3={id:"value-delay",name:"Value Delay",version:"1.0.0",category:"code",description:"Delay value by N frames",icon:"timer",platforms:["web","electron"],inputs:[{id:"input",type:"any",label:"Input"}],outputs:[{id:"output",type:"any",label:"Output"}],controls:[{id:"frames",type:"number",label:"Frames",default:1,props:{min:1,max:300}}],info:{overview:"Delays the pass-through of any value by a configurable number of frames. The node buffers incoming values and releases them after the specified frame count. This is useful for creating time-offset effects or comparing a signal with its past self.",tips:["Set frames to 1 to get the previous frame value, which is useful for computing velocity or change detection.","Chain several value-delay nodes at different frame counts to build a visual trail or echo effect.","Higher frame counts consume more memory, so keep the delay under 60 frames for complex flows."],pairsWith:["subtract","smooth","compare","expression"]}},Y3=[M3,B3,F3,W3,U3,q3,H3],G3={id:"subflow-input",name:"Subflow Input",version:"1.0.0",category:"subflows",description:"Input port for a subflow",icon:"log-in",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"any",label:"Value"}],controls:[{id:"portName",type:"text",label:"Port Name",default:"input"},{id:"portType",type:"select",label:"Type",default:"any",props:{options:["any","number","string","boolean","trigger","audio","texture","data"]}},{id:"defaultValue",type:"text",label:"Default",default:""}],info:{overview:"Defines an input port on a subflow. When a subflow is used as a node inside another flow, each Subflow Input becomes a visible input on that node. Set the port name and type so the parent flow knows what to connect.",tips:["The port name must be unique within the subflow or the inputs will collide.","Setting a default value lets the subflow work even when the parent leaves the input disconnected.",'Change the port type from "any" to a specific type to enforce connection compatibility.'],pairsWith:["subflow-output","function","expression","router"]}},j3={id:"subflow-output",name:"Subflow Output",version:"1.0.0",category:"subflows",description:"Output port for a subflow",icon:"log-out",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"}],outputs:[],controls:[{id:"portName",type:"text",label:"Port Name",default:"output"},{id:"portType",type:"select",label:"Type",default:"any",props:{options:["any","number","string","boolean","trigger","audio","texture","data"]}}],info:{overview:"Defines an output port on a subflow. When a subflow is used as a node inside another flow, each Subflow Output becomes a visible output on that node. Pair it with one or more Subflow Inputs to build reusable processing blocks.",tips:["Give each output a descriptive port name so the parent flow is easy to read.","You can have multiple outputs to return different signals from the same subflow."],pairsWith:["subflow-input","function","expression","router"]}},X3=[G3,j3],Z3={id:"scene-3d",name:"Scene 3D",version:"1.0.0",category:"3d",description:"Container for 3D objects",icon:"box",platforms:["web","electron"],inputs:[{id:"objects",type:"object3d",label:"Objects",multiple:!0}],outputs:[{id:"scene",type:"scene3d",label:"Scene"}],controls:[{id:"backgroundColor",type:"color",label:"Background",default:"#000000"},{id:"showGrid",type:"toggle",label:"Show Grid",default:!1}],info:{overview:"Acts as the root container that holds all 3D objects, lights, and groups. Every 3D pipeline starts here. Connect objects to the input and pass the scene output to Render 3D along with a camera.",tips:["Enable Show Grid during development to help with object placement and scale reference.","Set the background color to match your intended environment before adding lights.","Connect multiple objects to the objects input; the node accepts several connections."],pairsWith:["render-3d","camera-3d","ambient-light-3d","directional-light-3d"]}},K3={id:"camera-3d",name:"Camera 3D",version:"1.0.0",category:"3d",description:"Perspective or orthographic camera",icon:"camera",platforms:["web","electron"],inputs:[{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"},{id:"targetX",type:"number",label:"Target X"},{id:"targetY",type:"number",label:"Target Y"},{id:"targetZ",type:"number",label:"Target Z"}],outputs:[{id:"camera",type:"camera3d",label:"Camera"}],controls:[{id:"type",type:"select",label:"Type",default:"perspective",props:{options:["perspective","orthographic"]}},{id:"fov",type:"number",label:"FOV",default:50,props:{min:10,max:120}},{id:"near",type:"number",label:"Near",default:.1},{id:"far",type:"number",label:"Far",default:1e3},{id:"orthoSize",type:"number",label:"Ortho Size",default:5},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:2},{id:"posZ",type:"number",label:"Position Z",default:5},{id:"targetX",type:"number",label:"Target X",default:0},{id:"targetY",type:"number",label:"Target Y",default:0},{id:"targetZ",type:"number",label:"Target Z",default:0}],info:{overview:"Defines the viewpoint used to render a 3D scene. Supports both perspective projection, which mimics human vision with foreshortening, and orthographic projection, which preserves parallel lines. Connect it to Render 3D alongside a scene to produce an image.",tips:["Lower the FOV (30-40) for a telephoto look or raise it (90+) for a wide-angle feel.","Switch to orthographic mode for UI mockups or isometric game views.","Animate the position inputs with an LFO or time node to create camera sweeps."],pairsWith:["render-3d","scene-3d","transform-3d"]}},J3={id:"render-3d",name:"Render 3D",version:"1.0.0",category:"3d",description:"Render 3D scene to texture",icon:"image",platforms:["web","electron"],inputs:[{id:"scene",type:"scene3d",label:"Scene",required:!0},{id:"camera",type:"camera3d",label:"Camera",required:!0}],outputs:[{id:"texture",type:"texture",label:"Texture"},{id:"depth",type:"texture",label:"Depth"}],controls:[{id:"width",type:"number",label:"Width",default:512,props:{min:64,max:2048}},{id:"height",type:"number",label:"Height",default:512,props:{min:64,max:2048}},{id:"includeDepth",type:"toggle",label:"Include Depth",default:!1}],info:{overview:"Takes a scene and a camera and produces a rendered texture output. This is the final step in any 3D pipeline. It can also output a depth buffer for post-processing effects.",tips:["Increase width and height for sharper output, but watch performance on complex scenes.","Enable Include Depth to get a depth texture for fog, DOF, or edge-detection effects.","Connect the texture output to an image display or further processing nodes."],pairsWith:["scene-3d","camera-3d"]}},Q3={id:"box-3d",name:"Box 3D",version:"1.0.0",category:"3d",description:"Create a box/cube mesh",icon:"box",platforms:["web","electron"],inputs:[{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"depth",type:"number",label:"Depth"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"width",type:"number",label:"Width",default:1},{id:"height",type:"number",label:"Height",default:1},{id:"depth",type:"number",label:"Depth",default:1},{id:"color",type:"color",label:"Color",default:"#808080"}],info:{overview:"Creates a rectangular box mesh with configurable width, height, and depth. It is the most common primitive for building architectural elements, platforms, and placeholder geometry in a 3D scene.",tips:["Connect a Material 3D node to the material input to override the default flat color.","Set one dimension very small to approximate a wall or panel.","Use Transform 3D after this node to rotate or reposition the box without editing its own controls."],pairsWith:["material-3d","transform-3d","scene-3d","group-3d"]}},eC={id:"sphere-3d",name:"Sphere 3D",version:"1.0.0",category:"3d",description:"Create a sphere mesh",icon:"circle",platforms:["web","electron"],inputs:[{id:"radius",type:"number",label:"Radius"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radius",type:"number",label:"Radius",default:.5},{id:"widthSegments",type:"number",label:"Width Segs",default:32,props:{min:3,max:64}},{id:"heightSegments",type:"number",label:"Height Segs",default:16,props:{min:2,max:32}},{id:"color",type:"color",label:"Color",default:"#808080"}],info:{overview:"Creates a sphere mesh with configurable radius and segment counts. Higher segment values produce smoother surfaces. It is a good primitive for testing materials and lighting setups.",tips:["Use 32 width segments and 16 height segments as a balanced default for most use cases.","Lower segment counts intentionally for a faceted, low-poly look.","Connect a Material 3D with high metalness and low roughness to see clear environment reflections."],pairsWith:["material-3d","transform-3d","scene-3d","point-light-3d"]}},tC={id:"plane-3d",name:"Plane 3D",version:"1.0.0",category:"3d",description:"Create a plane mesh",icon:"square",platforms:["web","electron"],inputs:[{id:"width",type:"number",label:"Width"},{id:"height",type:"number",label:"Height"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"width",type:"number",label:"Width",default:1},{id:"height",type:"number",label:"Height",default:1},{id:"color",type:"color",label:"Color",default:"#808080"}],info:{overview:"Creates a flat rectangular surface. Planes are useful as ground floors, walls, backgrounds, or shadow-receiving surfaces beneath other objects.",tips:["Place a large plane at Y=0 to act as a ground that catches shadows from directional lights.","Set the material side to double so the plane is visible from both sides.","Scale up width and height rather than using Transform 3D scale to keep UV coordinates consistent."],pairsWith:["material-3d","scene-3d","directional-light-3d","transform-3d"]}},nC={id:"cylinder-3d",name:"Cylinder 3D",version:"1.0.0",category:"3d",description:"Create a cylinder mesh",icon:"cylinder",platforms:["web","electron"],inputs:[{id:"radiusTop",type:"number",label:"Radius Top"},{id:"radiusBottom",type:"number",label:"Radius Bottom"},{id:"height",type:"number",label:"Height"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radiusTop",type:"number",label:"Radius Top",default:.5},{id:"radiusBottom",type:"number",label:"Radius Bottom",default:.5},{id:"height",type:"number",label:"Height",default:1},{id:"radialSegments",type:"number",label:"Segments",default:32,props:{min:3,max:64}},{id:"color",type:"color",label:"Color",default:"#808080"}],info:{overview:"Generates a cylinder mesh with independent top and bottom radii. Setting one radius to zero produces a cone, making this node flexible for columns, pipes, and tapered shapes.",tips:["Set Radius Top to 0 to create a cone.","Increase the segment count for smoother silhouettes when the cylinder is large on screen.","Combine with Transform 3D to lay the cylinder on its side for log or pipe shapes."],pairsWith:["material-3d","transform-3d","scene-3d","group-3d"]}},oC={id:"torus-3d",name:"Torus 3D",version:"1.0.0",category:"3d",description:"Create a torus (donut) mesh",icon:"circle-dot",platforms:["web","electron"],inputs:[{id:"radius",type:"number",label:"Radius"},{id:"tube",type:"number",label:"Tube"},{id:"material",type:"material3d",label:"Material"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"radius",type:"number",label:"Radius",default:.5},{id:"tube",type:"number",label:"Tube",default:.2},{id:"radialSegments",type:"number",label:"Radial Segs",default:16,props:{min:2,max:32}},{id:"tubularSegments",type:"number",label:"Tubular Segs",default:100,props:{min:3,max:200}},{id:"color",type:"color",label:"Color",default:"#808080"}],info:{overview:"Creates a torus (donut-shaped) mesh defined by an outer radius and a tube radius. Segment controls let you balance visual smoothness against performance.",tips:["Set tube radius close to the main radius for a thick ring, or very small for a thin hoop.","Reduce radial segments to 6 or 8 for a stylized hexagonal or octagonal ring.","Apply a Transform 3D to tilt the torus for use as a ring, halo, or orbit path."],pairsWith:["material-3d","transform-3d","scene-3d","group-3d"]}},iC={id:"transform-3d",name:"Transform 3D",version:"1.0.0",category:"3d",description:"Apply position, rotation, and scale",icon:"move-3d",platforms:["web","electron"],inputs:[{id:"object",type:"object3d",label:"Object",required:!0},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"},{id:"rotX",type:"number",label:"Rot X"},{id:"rotY",type:"number",label:"Rot Y"},{id:"rotZ",type:"number",label:"Rot Z"},{id:"scaleX",type:"number",label:"Scale X"},{id:"scaleY",type:"number",label:"Scale Y"},{id:"scaleZ",type:"number",label:"Scale Z"}],outputs:[{id:"object",type:"object3d",label:"Object"},{id:"transform",type:"transform3d",label:"Transform"}],controls:[{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"rotX",type:"number",label:"Rotation X",default:0},{id:"rotY",type:"number",label:"Rotation Y",default:0},{id:"rotZ",type:"number",label:"Rotation Z",default:0},{id:"scaleX",type:"number",label:"Scale X",default:1},{id:"scaleY",type:"number",label:"Scale Y",default:1},{id:"scaleZ",type:"number",label:"Scale Z",default:1}],info:{overview:"Applies position, rotation, and scale to any 3D object without modifying the original geometry. Chain multiple transforms or drive inputs with animated values for motion. The transform output can also be reused by other nodes.",tips:["Connect an LFO or time node to rotation inputs for continuous spinning animations.","Stack transforms by feeding one transform output into the next for complex motion.","Use non-uniform scale (different X, Y, Z) to stretch primitives into new shapes."],pairsWith:["box-3d","sphere-3d","group-3d","gltf-loader","scene-3d"]}},aC={id:"material-3d",name:"Material 3D",version:"1.0.0",category:"3d",description:"Create a PBR material",icon:"palette",platforms:["web","electron"],inputs:[{id:"colorMap",type:"texture",label:"Color Map"},{id:"normalMap",type:"texture",label:"Normal Map"},{id:"roughnessMap",type:"texture",label:"Roughness Map"},{id:"metalnessMap",type:"texture",label:"Metalness Map"},{id:"metalness",type:"number",label:"Metalness"},{id:"roughness",type:"number",label:"Roughness"},{id:"opacity",type:"number",label:"Opacity"}],outputs:[{id:"material",type:"material3d",label:"Material"}],controls:[{id:"type",type:"select",label:"Type",default:"standard",props:{options:["standard","basic","phong","physical"]}},{id:"color",type:"color",label:"Color",default:"#808080"},{id:"metalness",type:"slider",label:"Metalness",default:0,props:{min:0,max:1,step:.01}},{id:"roughness",type:"slider",label:"Roughness",default:.5,props:{min:0,max:1,step:.01}},{id:"opacity",type:"slider",label:"Opacity",default:1,props:{min:0,max:1,step:.01}},{id:"wireframe",type:"toggle",label:"Wireframe",default:!1},{id:"side",type:"select",label:"Side",default:"front",props:{options:["front","back","double"]}},{id:"emissive",type:"color",label:"Emissive",default:"#000000"},{id:"emissiveIntensity",type:"number",label:"Emissive Int.",default:0,props:{min:0,max:10}}],info:{overview:"Creates a PBR (physically based rendering) material that controls how surfaces look under lighting. Supports metalness, roughness, opacity, emissive glow, wireframe mode, and texture map inputs for detailed surfaces.",tips:["Set metalness to 1 and roughness near 0 for a mirror-like chrome finish.","Use the physical type for the most accurate PBR response to lighting.","Connect texture maps to the color, normal, or roughness inputs for realistic detail without extra geometry."],pairsWith:["box-3d","sphere-3d","cylinder-3d","torus-3d","gltf-loader"]}},sC={id:"group-3d",name:"Group 3D",version:"1.0.0",category:"3d",description:"Combine multiple objects into a group",icon:"layers",platforms:["web","electron"],inputs:[{id:"objects",type:"object3d",label:"Objects",multiple:!0},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"}],controls:[{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0}],info:{overview:"Combines multiple 3D objects into a single group that can be positioned as one unit. Moving or transforming the group affects all children together, which simplifies scene organization.",tips:["Nest groups inside other groups to build a hierarchy for complex assemblies.","Apply a single Transform 3D to the group instead of transforming each child individually.","Connect several primitive shapes to the objects input to build compound objects."],pairsWith:["scene-3d","transform-3d","box-3d","sphere-3d","gltf-loader"]}},rC={id:"ambient-light-3d",name:"Ambient Light",version:"1.0.0",category:"3d",description:"Uniform lighting from all directions",icon:"sun",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:.5,props:{min:0,max:2,step:.01}}],info:{overview:"Adds a base layer of uniform light that illuminates all objects equally regardless of their position or orientation. Use it to prevent completely black shadows and ensure minimum visibility across the entire scene.",tips:["Keep intensity low (0.1 to 0.3) so directional and point lights can still define shape.","Pair with a directional light to simulate outdoor lighting with soft fill.","Tint the color slightly blue or warm orange to set the overall mood before adding other lights."],pairsWith:["scene-3d","directional-light-3d","point-light-3d","material-3d"]}},lC={id:"directional-light-3d",name:"Directional Light",version:"1.0.0",category:"3d",description:"Light from a specific direction (like sun)",icon:"sun-dim",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"posX",type:"number",label:"Position X",default:5},{id:"posY",type:"number",label:"Position Y",default:5},{id:"posZ",type:"number",label:"Position Z",default:5},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!0}],info:{overview:"Emits parallel light rays from a given direction, simulating a distant source like the sun. All objects receive the same angle of light regardless of their position. Supports shadow casting for grounded, realistic scenes.",tips:["Position the light high and to the side (e.g., 5, 5, 5) for classic three-quarter lighting.","Enable Cast Shadow and add a plane underneath objects to see ground shadows.","Combine with a low-intensity Ambient Light to fill in shadow areas."],pairsWith:["scene-3d","ambient-light-3d","material-3d","plane-3d"]}},uC={id:"point-light-3d",name:"Point Light",version:"1.0.0",category:"3d",description:"Light that radiates in all directions from a point",icon:"lightbulb",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"distance",type:"number",label:"Distance",default:0,props:{min:0}},{id:"decay",type:"number",label:"Decay",default:2,props:{min:0,max:5}},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:2},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!1}],info:{overview:"Emits light equally in all directions from a single point in space, similar to a bare light bulb. Intensity falls off with distance based on the decay setting. Works well for indoor scenes and localized highlights.",tips:["Set distance to 0 for infinite range, or use a positive value to limit the light radius.","Increase decay for a more realistic, physically based falloff.","Place several point lights at low intensity around a room for soft, even indoor illumination."],pairsWith:["scene-3d","ambient-light-3d","material-3d","spot-light-3d"]}},dC={id:"spot-light-3d",name:"Spot Light",version:"1.0.0",category:"3d",description:"Cone-shaped light like a spotlight",icon:"flashlight",platforms:["web","electron"],inputs:[{id:"intensity",type:"number",label:"Intensity"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"light",type:"light3d",label:"Light"},{id:"object",type:"object3d",label:"Object"}],controls:[{id:"color",type:"color",label:"Color",default:"#ffffff"},{id:"intensity",type:"slider",label:"Intensity",default:1,props:{min:0,max:5,step:.01}},{id:"distance",type:"number",label:"Distance",default:0,props:{min:0}},{id:"angle",type:"slider",label:"Angle",default:30,props:{min:1,max:90,step:1}},{id:"penumbra",type:"slider",label:"Penumbra",default:.1,props:{min:0,max:1,step:.01}},{id:"decay",type:"number",label:"Decay",default:2,props:{min:0,max:5}},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:5},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"targetX",type:"number",label:"Target X",default:0},{id:"targetY",type:"number",label:"Target Y",default:0},{id:"targetZ",type:"number",label:"Target Z",default:0},{id:"castShadow",type:"toggle",label:"Cast Shadow",default:!0}],info:{overview:"Projects a cone of light from a point toward a target, like a stage spotlight or flashlight. The angle and penumbra controls shape the cone edge. Supports shadow casting for dramatic, focused lighting.",tips:["Increase penumbra toward 1 for a soft-edged falloff at the cone boundary.","Narrow the angle to create a tight, focused beam for dramatic highlights.","Aim the target position at the object you want to emphasize in the scene."],pairsWith:["scene-3d","ambient-light-3d","material-3d","point-light-3d"]}},cC={id:"gltf-loader",name:"GLTF Loader",version:"1.0.0",category:"3d",description:"Load 3D models in GLTF/GLB format",icon:"file-box",platforms:["web","electron"],inputs:[{id:"url",type:"string",label:"URL"},{id:"posX",type:"number",label:"Pos X"},{id:"posY",type:"number",label:"Pos Y"},{id:"posZ",type:"number",label:"Pos Z"}],outputs:[{id:"object",type:"object3d",label:"Object"},{id:"loading",type:"boolean",label:"Loading"},{id:"error",type:"string",label:"Error"}],controls:[{id:"url",type:"text",label:"URL",default:""},{id:"posX",type:"number",label:"Position X",default:0},{id:"posY",type:"number",label:"Position Y",default:0},{id:"posZ",type:"number",label:"Position Z",default:0},{id:"scale",type:"number",label:"Scale",default:1,props:{min:.001,max:100}}],info:{overview:"Loads external 3D models in GLTF or GLB format from a URL and outputs them as scene objects. This is the primary way to bring complex, pre-built assets into the scene. The loading output lets you show progress feedback.",tips:["Use the scale control to normalize models that were exported at different unit scales.","Check the error output to catch missing or malformed URLs early.","Host GLB files on a CORS-enabled server or use local file paths in Electron."],pairsWith:["scene-3d","transform-3d","material-3d","group-3d"]}},pC=[Z3,K3,J3,Q3,eC,tC,nC,oC,iC,aC,sC,rC,lC,uC,dC,cC],fC={id:"main-output",name:"Main Output",version:"1.0.0",category:"outputs",description:"Final output viewer with large preview",icon:"monitor-play",platforms:["web","electron"],inputs:[{id:"texture",type:"texture",label:"Texture"}],outputs:[],controls:[],info:{overview:"Displays the final texture output as a large preview. Use this as the terminal node in any visual pipeline to see what your flow produces. Every flow that generates visuals should end with one of these.",tips:["Only one Main Output is needed per flow since additional instances will overwrite each other.","Connect a blend node before this to layer multiple texture sources together."],pairsWith:["shader","blend","webcam","texture-display","render-3d"]}},hC={class:"preview-area"},gC={class:"input-port"},mC={class:"node-footer"},vC={class:"status-text"},yC={class:"resolution-text"},bC=xe({__name:"MainOutputNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=je(),o=Ge(),i=re(null),a=re(!1),s=re({w:0,h:0}),r=D(()=>{var f,d;const h=((f=t.data)==null?void 0:f.nodeType)??"main-output";return o.getDefinition(h)??((d=t.data)==null?void 0:d.definition)??null}),l=D(()=>{var h;return r.value?((h=ze[r.value.category])==null?void 0:h.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),u=D(()=>a.value?320:200),c=D(()=>a.value?200:125);let p=null;function y(){if(!i.value)return;const h=i.value.getContext("2d");if(!h)return;const d=at().getNodeTexture(t.id);if(!d||!(d instanceof Fl)){h.fillStyle="#1a1a1a",h.fillRect(0,0,i.value.width,i.value.height),h.fillStyle="#666",h.font="12px monospace",h.textAlign="center",h.fillText("No Input",i.value.width/2,i.value.height/2);return}const m=d.image;if(m instanceof HTMLCanvasElement||m instanceof HTMLVideoElement){const C=m instanceof HTMLCanvasElement?m.width:m.videoWidth,L=m instanceof HTMLCanvasElement?m.height:m.videoHeight;C>0&&L>0&&(s.value={w:C,h:L}),h.drawImage(m,0,0,i.value.width,i.value.height);return}if(d.image){const C=d.image.width??d.image.videoWidth??0,L=d.image.height??d.image.videoHeight??0;C>0&&L>0&&(s.value={w:C,h:L})}Wl().renderToCanvas(d,i.value)}function b(){const h=()=>{n.isRunning&&y(),p=requestAnimationFrame(h)};h()}function S(){p!==null&&(cancelAnimationFrame(p),p=null)}function v(){a.value=!a.value}_e([u,c],()=>{i.value&&(i.value.width=u.value,i.value.height=c.value,y())}),Oe(()=>{i.value&&(i.value.width=u.value,i.value.height=c.value,y(),b())}),Ye(()=>{S()});function x(h){var f;return((f=Pe[h])==null?void 0:f.color)??"var(--color-neutral-400)"}return(h,f)=>(z(),K("div",{class:ge(["main-output-node",{selected:t.selected,expanded:a.value}])},[g("div",{class:"node-header",style:Q({borderLeftColor:l.value})},[f[0]||(f[0]=g("span",{class:"node-title"},"OUTPUT",-1)),g("button",{class:"expand-btn",onClick:de(v,["stop"])},[a.value?(z(),we(N(Su),{key:0,size:14})):(z(),we(N(xu),{key:1,size:14}))])],4),g("div",hC,[g("canvas",{ref_key:"previewCanvas",ref:i,class:"preview-canvas"},null,512),g("div",gC,[te(N(ce),{id:"texture",type:"target",position:N(ee).Left,style:Q({background:x("texture")}),class:"port-handle"},null,8,["position","style"]),f[1]||(f[1]=g("span",{class:"port-label"},"Texture",-1))])]),g("div",mC,[g("span",vC,be(N(n).isRunning?"Live":"Stopped"),1),g("span",yC,be(s.value.w>0?`${s.value.w} x ${s.value.h}`:""),1)])],2))}}),wC=Ae(bC,[["__scopeId","data-v-975574c6"]]),xC=[fC],SC={id:"string-concat",name:"String Concat",version:"1.0.0",category:"string",description:"Concatenate multiple strings",icon:"plus",platforms:["web","electron"],inputs:[{id:"a",type:"string",label:"A"},{id:"b",type:"string",label:"B"},{id:"c",type:"string",label:"C"},{id:"d",type:"string",label:"D"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"separator",type:"text",label:"Separator",default:""}],info:{overview:"Joins up to four strings together with an optional separator between them. Empty inputs are skipped. This is the simplest way to combine multiple text values into one output string.",tips:["Set the separator to a newline character to join lines of text.","Leave unused inputs disconnected and they will be ignored."],pairsWith:["string-template","string-split","string-trim","string-case"]}},_C={id:"string-split",name:"String Split",version:"1.0.0",category:"string",description:"Split string into parts",icon:"scissors",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"}],outputs:[{id:"parts",type:"array",label:"Parts"},{id:"first",type:"string",label:"First"},{id:"count",type:"number",label:"Count"}],controls:[{id:"separator",type:"text",label:"Separator",default:","},{id:"limit",type:"number",label:"Limit",default:0,props:{min:0}}],info:{overview:"Splits a string into an array of parts using a separator. Outputs the array, the first element, and the total count of parts. An optional limit controls the maximum number of splits.",tips:["Split by newline to break multi-line text into individual lines.","Use the count output to determine how many tokens were found before processing the array."],pairsWith:["string-concat","string-replace","string-contains","json-parse"]}},kC={id:"string-replace",name:"String Replace",version:"1.0.0",category:"string",description:"Replace text in a string",icon:"replace",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"},{id:"search",type:"string",label:"Search"},{id:"replace",type:"string",label:"Replace"}],outputs:[{id:"result",type:"string",label:"Result"},{id:"_error",type:"string",label:"Error"}],controls:[{id:"search",type:"text",label:"Search",default:""},{id:"replace",type:"text",label:"Replace",default:""},{id:"useRegex",type:"toggle",label:"Use Regex",default:!1},{id:"replaceAll",type:"toggle",label:"Replace All",default:!0}],info:{overview:"Replaces occurrences of a search string or regex pattern within the input. Can replace the first match or all matches. The search and replace values can come from either the controls or the connected inputs.",tips:["Enable the Use Regex toggle to use patterns like \\d+ for matching numbers.","Connect dynamic search and replace values from other nodes to do data-driven substitution."],pairsWith:["string-match","string-contains","string-template","string-concat"]}},CC={id:"string-slice",name:"String Slice",version:"1.0.0",category:"string",description:"Extract a portion of a string",icon:"slice",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"},{id:"start",type:"number",label:"Start"},{id:"end",type:"number",label:"End"}],outputs:[{id:"result",type:"string",label:"Result"},{id:"length",type:"number",label:"Length"}],controls:[{id:"start",type:"number",label:"Start",default:0},{id:"end",type:"number",label:"End",default:-1}],info:{overview:"Extracts a substring from the input using start and end indices. Negative indices count from the end of the string. Also outputs the length of the extracted portion.",tips:["Set end to -1 to slice from the start index through the rest of the string.","Combine with String Length to dynamically calculate slice boundaries."],pairsWith:["string-length","string-contains","string-split","expression"]}},NC={id:"string-case",name:"String Case",version:"1.0.0",category:"string",description:"Convert string case",icon:"case-upper",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"mode",type:"select",label:"Mode",default:"UPPER",props:{options:["UPPER","lower","Title","camelCase","snake_case","kebab-case"]}}],info:{overview:"Converts a string between different casing conventions. Supports uppercase, lowercase, title case, camelCase, snake_case, and kebab-case. Useful for formatting identifiers, labels, or display text.",tips:["Use snake_case or kebab-case modes to normalize user input into valid identifiers.","Chain with String Template to format case-converted values into larger strings."],pairsWith:["string-template","string-concat","string-replace","string-trim"]}},$C={id:"string-length",name:"String Length",version:"1.0.0",category:"string",description:"Get length of a string",icon:"ruler",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"}],outputs:[{id:"length",type:"number",label:"Length"},{id:"isEmpty",type:"boolean",label:"Is Empty"}],controls:[],tags:["length","count","size","characters"],info:{overview:"Returns the character count of a string and a boolean indicating whether the string is empty. Useful for validation, truncation decisions, or conditional branching based on input size.",tips:["Connect the isEmpty output to a Gate node to skip processing when there is no input.","Pair with String Slice to truncate strings that exceed a maximum length."],pairsWith:["string-slice","gate","string-contains","expression"]}},EC={id:"string-contains",name:"String Contains",version:"1.0.0",category:"string",description:"Check if string contains a substring",icon:"search",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"},{id:"search",type:"string",label:"Search"}],outputs:[{id:"result",type:"boolean",label:"Result"},{id:"index",type:"number",label:"Index"}],controls:[{id:"caseSensitive",type:"toggle",label:"Case Sensitive",default:!0}],tags:["contains","includes","search","find"],info:{overview:"Checks whether a string contains a given substring and outputs a boolean result along with the index of the first match. Supports both case-sensitive and case-insensitive searching.",tips:["Use the index output to find where the match starts, then feed it into String Slice to extract surrounding context.","Turn off case sensitivity when searching user-provided text."],pairsWith:["string-slice","string-match","string-replace","gate"]}},MC={id:"string-starts-ends",name:"Starts/Ends With",version:"1.0.0",category:"string",description:"Check if string starts or ends with substring",icon:"arrow-right-from-line",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"},{id:"search",type:"string",label:"Search"}],outputs:[{id:"startsWith",type:"boolean",label:"Starts With"},{id:"endsWith",type:"boolean",label:"Ends With"}],controls:[{id:"caseSensitive",type:"toggle",label:"Case Sensitive",default:!0}],tags:["prefix","suffix","starts","ends","begins"],info:{overview:"Tests whether a string starts or ends with a given substring. Outputs separate booleans for each check. Supports case-sensitive and case-insensitive comparison.",tips:['Use this to detect file extensions by checking if a path ends with ".png" or ".jpg".',"Connect the boolean outputs to a Gate node to route data based on prefix or suffix matches."],pairsWith:["string-contains","string-slice","gate","string-match"]}},TC={id:"string-trim",name:"String Trim",version:"1.0.0",category:"string",description:"Remove whitespace from string",icon:"scissors",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"mode",type:"select",label:"Mode",default:"both",props:{options:["both","start","end"]}}],tags:["trim","whitespace","clean","strip"],info:{overview:"Removes leading and trailing whitespace from a string. Can trim from both ends, only the start, or only the end. Helpful for cleaning up user input or text extracted from other sources.",tips:["Place this after Speech to Text or any text input to strip unwanted whitespace before further processing.",'Use the "start" or "end" mode when you only need to clean one side of the string.'],pairsWith:["string-replace","string-concat","string-case","speech-recognition"]}},IC={id:"string-pad",name:"String Pad",version:"1.0.0",category:"string",description:"Pad string to target length",icon:"space",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"length",type:"number",label:"Length",default:10},{id:"char",type:"text",label:"Char",default:" "},{id:"mode",type:"select",label:"Mode",default:"start",props:{options:["start","end"]}}],tags:["pad","fill","align","format"],info:{overview:"Pads a string to a target length by adding characters to the start or end. Commonly used to zero-pad numbers, align columns, or produce fixed-width output strings.",tips:['Set the char to "0" and mode to "start" to zero-pad numeric strings.',"Use this after converting a number to a string to ensure consistent formatting."],pairsWith:["string-concat","string-length","string-template","string-case"]}},PC={id:"string-template",name:"String Template",version:"1.0.0",category:"string",description:"String interpolation with placeholders",icon:"file-code",platforms:["web","electron"],inputs:[{id:"a",type:"any",label:"A"},{id:"b",type:"any",label:"B"},{id:"c",type:"any",label:"C"},{id:"d",type:"any",label:"D"}],outputs:[{id:"result",type:"string",label:"Result"}],controls:[{id:"template",type:"text",label:"Template",default:"Hello {a}!",props:{placeholder:"Hello {a}, you have {b} messages"}}],tags:["template","interpolation","format","placeholder"],info:{overview:"Builds a string by inserting input values into a template with {a}, {b}, {c}, and {d} placeholders. Accepts any input type and converts values to strings automatically. Good for composing messages, prompts, or formatted output.",tips:["Use this to build prompts for the Text Generate node by inserting dynamic values into a base template.","Placeholders that have no connected input are replaced with an empty string."],pairsWith:["text-generation","string-concat","string-case","string-replace"]}},AC={id:"string-match",name:"Regex Match",version:"1.0.0",category:"string",description:"Match string against regex pattern",icon:"regex",platforms:["web","electron"],inputs:[{id:"input",type:"string",label:"Input"}],outputs:[{id:"match",type:"boolean",label:"Match"},{id:"groups",type:"array",label:"Groups"},{id:"fullMatch",type:"string",label:"Full Match"}],controls:[{id:"pattern",type:"text",label:"Pattern",default:".*"},{id:"flags",type:"text",label:"Flags",default:""}],tags:["regex","pattern","match","extract"],info:{overview:"Tests a string against a regular expression pattern and outputs whether it matched, the full match text, and any captured groups. Supports standard JavaScript regex flags like g, i, and m.",tips:["Use capture groups in your pattern to extract specific parts of the input via the groups output.",'Add the "i" flag for case-insensitive matching.'],pairsWith:["string-replace","string-contains","string-split","gate"]}},DC=[SC,_C,kC,CC,NC,$C,EC,MC,TC,IC,PC,AC],RC={id:"send",name:"Send",version:"1.0.0",category:"messaging",description:"Send values to a named channel",icon:"send",platforms:["web","electron"],inputs:[{id:"value",type:"any",label:"Value"},{id:"trigger",type:"trigger",label:"Send"}],outputs:[],controls:[{id:"channel",type:"text",label:"Channel",default:"default"},{id:"sendOnChange",type:"toggle",label:"Send on Change",default:!0}],info:{overview:'Publishes a value to a named channel that any Receive node can pick up. Use it to avoid tangled connections across a large flow. With "Send on Change" enabled, it fires automatically whenever the input value updates.',tips:['Disable "Send on Change" and use the trigger input when you need precise control over timing.',"Pair with multiple Receive nodes to broadcast one value to many places at once."],pairsWith:["receive","trigger","changed","throttle"]}},zC={id:"receive",name:"Receive",version:"1.0.0",category:"messaging",description:"Receive values from a named channel",icon:"inbox",platforms:["web","electron"],inputs:[],outputs:[{id:"value",type:"any",label:"Value"},{id:"changed",type:"trigger",label:"Changed"}],controls:[{id:"channel",type:"text",label:"Channel",default:"default"}],info:{overview:'Listens on a named channel and outputs whatever value a Send node publishes to that channel. This lets you pass data between distant parts of a flow without drawing long connections. The "Changed" trigger fires each time a new value arrives.',tips:['The channel name is case-sensitive, so "Volume" and "volume" are different channels.',"Use descriptive channel names to keep large flows readable.","Multiple Receive nodes can listen on the same channel to fan out a value."],pairsWith:["send","gate","monitor","latch"]}},VC=[RC,zC],LC={key:0,class:"node-connection-status"},OC={class:"status-dots"},BC={key:0,class:"status-label"},FC={key:1,class:"status-label"},WC=xe({__name:"NodeConnectionStatus",props:{bindings:{}},setup(e){const t=e,n=Ul(),{connections:o,statuses:i}=ql(n),a=D(()=>{const l=[];for(const u of t.bindings){const c=o.value.find(y=>y.id===u.connectionId);if(!c)continue;const p=i.value.get(u.connectionId);l.push({connectionId:u.connectionId,connectionName:c.name,status:(p==null?void 0:p.status)??"disconnected",error:p==null?void 0:p.error,required:u.required??!1})}return l}),s=D(()=>a.value.length>0);function r(l){let u=`${l.connectionName}: ${l.status}`;return l.error&&(u+=` - ${l.error}`),l.required&&(u+=" (required)"),u}return(l,u)=>s.value?(z(),K("div",LC,[g("div",OC,[(z(!0),K(ke,null,De(a.value,c=>(z(),we(Hl,{key:c.connectionId,status:c.status,label:r(c),size:"sm"},null,8,["status","label"]))),128))]),a.value.length===1?(z(),K("span",BC,be(a.value[0].connectionName),1)):(z(),K("span",FC,be(a.value.length)+" connections ",1))])):me("",!0)}}),UC=Ae(WC,[["__scopeId","data-v-d8f48106"]]),qC={class:"handles-column handles-left"},HC=["onMouseenter"],YC={class:"label-text"},GC={class:"handles-column handles-right"},jC=["onMouseenter"],XC={class:"label-text"},ZC={class:"node-content"},KC={key:2,class:"node-body"},JC={key:0,class:"node-preview"},QC={key:1,class:"node-controls"},eN={class:"control-label"},tN={key:0,class:"control-slider"},nN=["value","min","max","step","onInput"],oN={class:"slider-value"},iN=["checked","onChange"],aN={class:"toggle-label"},sN=["value","onChange"],rN=["value"],lN=["value"],uN=["value","step","onInput"],dN=["value","placeholder","onInput"],cN=["value","onInput"],pN={class:"color-value"},fN=20,hN=xe({__name:"BaseNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=Ve(),o=Ge(),{audioInputDevices:i,audioOutputDevices:a,videoInputDevices:s}=Yl(),r=re(!1),l=re(null),u=re(!1),c=re(""),p=re(null),y=re(!1);let b=null;const S=D(()=>{var P;return((P=x.value)==null?void 0:P.outputs.some(H=>H.id==="loading"))??!1});function v(){if(!S.value)return;const H=at().getOutputValue(t.id,"loading");y.value=H===!0}Oe(()=>{S.value&&(b=window.setInterval(v,100))}),Ye(()=>{b&&clearInterval(b)});const x=D(()=>{var H,F;const P=(H=t.data)==null?void 0:H.nodeType;if(P){const ie=o.getDefinition(P);if(ie)return ie}return((F=t.data)==null?void 0:F.definition)??null}),h=D(()=>{var P,H;return((P=t.data)==null?void 0:P.label)??((H=t.data)==null?void 0:H.nodeType)??"Node"}),f={debug:eu,inputs:Ql,outputs:Jl,timing:fu,math:pu,logic:mu,audio:Vs,video:Kl,visual:Pu,shaders:Cu,data:hu,ai:Zl,code:Qo,"3d":cu,connectivity:Du,clasp:Xl,subflows:Ls,string:mi,messaging:Eu,custom:Nu},d=D(()=>x.value?f[x.value.category]??Qo:Qo),m=D(()=>{var P;return x.value?((P=ze[x.value.category])==null?void 0:P.color)??"var(--color-neutral-400)":"var(--color-neutral-400)"}),_=D(()=>{var oe,se;const P=((oe=x.value)==null?void 0:oe.inputs)??[],H=((se=t.data)==null?void 0:se._dynamicInputs)??[],F=new Set(P.map(T=>T.id)),ie=H.filter(T=>!F.has(T.id));return[...P,...ie]}),C=D(()=>{var oe,se;const P=((oe=x.value)==null?void 0:oe.outputs)??[],H=((se=t.data)==null?void 0:se._dynamicOutputs)??[],F=new Set(P.map(T=>T.id)),ie=H.filter(T=>!F.has(T.id));return[...P,...ie]}),L=D(()=>{var oe,se;const P=((oe=x.value)==null?void 0:oe.controls)??[],H=((se=t.data)==null?void 0:se._dynamicControls)??[],F=new Set(P.map(T=>T.id)),ie=H.filter(T=>!F.has(T.id));return[...P,...ie]}),R=D(()=>{var F,ie,oe,se;const P=[];for(const T of L.value)if(T.type==="connection"||T.type==="connection-select"){const E=(F=t.data)==null?void 0:F[T.id];E&&P.push({connectionId:E,controlId:T.id,required:(ie=T.props)==null?void 0:ie.required})}const H=((oe=x.value)==null?void 0:oe.connections)??[];for(const T of H){const E=(se=t.data)==null?void 0:se[T.controlId];E&&!P.some(A=>A.controlId===T.controlId)&&P.push({connectionId:E,controlId:T.controlId,required:T.required})}return P}),j=D(()=>x.value?x.value.outputs.some(P=>P.type==="texture"):!1),Y=D(()=>x.value?L.value.some(P=>P.type==="slider"||P.type==="toggle"||P.type==="select"||P.type==="number"||P.type==="text"||P.type==="color"):!1),O=D(()=>L.value.filter(P=>!(P.type==="code"||P.visibleWhen&&$.value[P.visibleWhen.controlId]!==P.visibleWhen.value))),k=D(()=>!j.value&&!Y.value),J=["slider","trigger","xy-pad","constant","lfo","monitor","oscilloscope"],w=["math","logic","3d","audio"],I=D(()=>{var H;if(!x.value)return!1;const P=(H=t.data)==null?void 0:H.nodeType;return J.includes(P)||j.value||!Y.value?!1:w.includes(x.value.category)}),$=D(()=>{var H;const P={};for(const F of L.value)P[F.id]=((H=t.data)==null?void 0:H[F.id])??F.default;return P});function V(P){var F,ie;const H=(F=P.props)==null?void 0:F.deviceType;if(H)switch(H){case"audio-input":return i.value;case"audio-output":return a.value;case"video-input":return s.value}return((ie=P.props)==null?void 0:ie.options)??[]}function M(P){return P.length>0&&typeof P[0]=="object"&&"value"in P[0]}const U=D(()=>Math.max(_.value.length,C.value.length,1));function W(P){var H;return((H=Pe[P])==null?void 0:H.color)??"var(--color-neutral-400)"}function ne(P,H){return P.includes("norm")||P.includes("Norm")||P.startsWith("0-1")||P.includes("normalized")?"01":P.includes("raw")||P.includes("Raw")?"raw":P==="pass"||P.includes("through")||P==="passthrough"?"pass":{boolean:"bool",trigger:"pulse",any:"any",number:"float",string:"str",texture:"tex",audio:"audio",data:"data",scene3d:"scene",object3d:"obj3d",geometry3d:"geo",material3d:"mat",camera3d:"cam",light3d:"light",transform3d:"xfm",video:"video"}[H]??H}function ae(P,H){n.updateNodeData(t.id,{[P]:H})}function pe(){r.value=!r.value}function he(){c.value=h.value,u.value=!0,ht(()=>{var P,H;(P=p.value)==null||P.focus(),(H=p.value)==null||H.select()})}function B(){if(u.value){const P=c.value.trim();P&&P!==h.value&&n.updateNodeData(t.id,{label:P}),u.value=!1}}function Z(){u.value=!1,c.value=""}function X(P){P.key==="Enter"?(P.preventDefault(),B()):P.key==="Escape"&&(P.preventDefault(),Z())}return(P,H)=>(z(),K("div",{class:ge(["base-node",{selected:t.selected,collapsed:r.value,"simple-node":k.value&&!r.value,"compact-node":I.value&&!r.value,"has-preview":j.value}]),style:Q({"--port-count":U.value,"--port-spacing":fN+"px"})},[g("div",qC,[(z(!0),K(ke,null,De(_.value,F=>(z(),K("div",{key:F.id,class:"handle-slot",onMouseenter:ie=>l.value=`in-${F.id}`,onMouseleave:H[0]||(H[0]=ie=>l.value=null)},[te(N(ce),{id:F.id,type:"target",position:N(ee).Left,style:Q({background:W(F.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-left",{visible:l.value===`in-${F.id}`||t.selected}])},[g("span",YC,be(F.label),1),g("span",{class:"label-type",style:Q({color:W(F.type)})},be(ne(F.id,F.type)),5)],2)],40,HC))),128))]),g("div",GC,[(z(!0),K(ke,null,De(C.value,F=>(z(),K("div",{key:F.id,class:"handle-slot",onMouseenter:ie=>l.value=`out-${F.id}`,onMouseleave:H[1]||(H[1]=ie=>l.value=null)},[te(N(ce),{id:F.id,type:"source",position:N(ee).Right,style:Q({background:W(F.type)}),class:"port-handle"},null,8,["id","position","style"]),g("div",{class:ge(["port-label port-label-right",{visible:l.value===`out-${F.id}`||t.selected}])},[g("span",XC,be(F.label),1),g("span",{class:"label-type",style:Q({color:W(F.type)})},be(ne(F.id,F.type)),5)],2)],40,jC))),128))]),g("div",ZC,[g("div",{class:"node-header",style:Q({borderLeftColor:m.value})},[(z(),we(xt(d.value),{size:14,class:"node-icon",style:Q({color:m.value})},null,8,["style"])),u.value?nn((z(),K("input",{key:0,ref_key:"labelInputRef",ref:p,"onUpdate:modelValue":H[2]||(H[2]=F=>c.value=F),type:"text",class:"node-title-input",onBlur:B,onKeydown:X,onMousedown:H[3]||(H[3]=de(()=>{},["stop"])),onClick:H[4]||(H[4]=de(()=>{},["stop"]))},null,544)),[[wo,c.value]]):(z(),K("span",{key:1,class:"node-title",title:"Double-click to edit label",onDblclick:de(he,["stop","prevent"])},be(h.value),33)),y.value?(z(),we(N(Gl),{key:2,size:12,class:"loading-indicator"})):me("",!0),k.value?me("",!0):(z(),K("button",{key:3,class:"node-collapse-btn",onClick:de(pe,["stop"])},[r.value?(z(),we(N(st),{key:1,size:14})):(z(),we(N(rt),{key:0,size:14}))]))],4),R.value.length>0&&!r.value?(z(),we(UC,{key:0,bindings:R.value},null,8,["bindings"])):me("",!0),I.value&&!r.value?(z(),K("div",{key:1,class:"compact-body",style:Q({background:m.value})},[(z(),we(xt(d.value),{size:32,class:"compact-icon"}))],4)):!k.value&&!r.value?(z(),K("div",KC,[j.value?(z(),K("div",JC,[te(jl,{"node-id":t.id,width:120,height:80,"show-placeholder":!0},null,8,["node-id"])])):me("",!0),Y.value&&O.value.length>0?(z(),K("div",QC,[(z(!0),K(ke,null,De(O.value,F=>{var ie,oe,se,T,E;return z(),K("div",{key:F.id,class:"inline-control"},[g("label",eN,be(F.label),1),F.type==="slider"?(z(),K("div",tN,[g("input",{type:"range",value:$.value[F.id]??0,min:((ie=F.props)==null?void 0:ie.min)??0,max:((oe=F.props)==null?void 0:oe.max)??1,step:((se=F.props)==null?void 0:se.step)??.01,onInput:A=>ae(F.id,parseFloat(A.target.value)),onMousedown:H[5]||(H[5]=de(()=>{},["stop"]))},null,40,nN),g("span",oN,be(($.value[F.id]??0).toFixed(2)),1)])):F.type==="toggle"?(z(),K("label",{key:1,class:"control-toggle",onMousedown:H[6]||(H[6]=de(()=>{},["stop"]))},[g("input",{type:"checkbox",checked:$.value[F.id],onChange:A=>ae(F.id,A.target.checked)},null,40,iN),H[11]||(H[11]=g("span",{class:"toggle-track"},[g("span",{class:"toggle-thumb"})],-1)),g("span",aN,be($.value[F.id]?"ON":"OFF"),1)],32)):F.type==="select"?(z(),K("select",{key:2,class:"control-select",value:$.value[F.id],onChange:A=>ae(F.id,A.target.value),onMousedown:H[7]||(H[7]=de(()=>{},["stop"]))},[M(V(F))?(z(!0),K(ke,{key:0},De(V(F),A=>(z(),K("option",{key:A.value,value:A.value},be(A.label),9,rN))),128)):(z(!0),K(ke,{key:1},De(V(F),A=>(z(),K("option",{key:A,value:A},be(A),9,lN))),128))],40,sN)):F.type==="number"?(z(),K("input",{key:3,type:"number",class:"control-number",value:$.value[F.id]??0,step:((T=F.props)==null?void 0:T.step)??1,onInput:A=>ae(F.id,parseFloat(A.target.value)||0),onMousedown:H[8]||(H[8]=de(()=>{},["stop"]))},null,40,uN)):F.type==="text"?(z(),K("input",{key:4,type:"text",class:"control-text",value:$.value[F.id]??"",placeholder:((E=F.props)==null?void 0:E.placeholder)??"",onInput:A=>ae(F.id,A.target.value),onMousedown:H[9]||(H[9]=de(()=>{},["stop"]))},null,40,dN)):F.type==="color"?(z(),K("div",{key:5,class:"control-color",onMousedown:H[10]||(H[10]=de(()=>{},["stop"]))},[g("input",{type:"color",value:$.value[F.id]??"#808080",onInput:A=>ae(F.id,A.target.value)},null,40,cN),g("span",pN,be($.value[F.id]),1)],32)):me("",!0)])}),128))])):me("",!0)])):me("",!0)])],6))}}),Ns=Ae(hN,[["__scopeId","data-v-ef89cb2f"]]),gN={default:$e(Ns),custom:$e(Ns),trigger:$e(R0),"xy-pad":$e(e1),textbox:$e(u1),knob:$e(x1),keyboard:$e(T1),monitor:$e(F1),oscilloscope:$e(ew),graph:$e(xw),equalizer:$e(Dw),"main-output":$e(wC),"step-sequencer":$e(xx),"envelope-visual":$e(_2),"parametric-eq":$e(D2),wavetable:$e(j2),synth:$e(uS),"mediapipe-hand":$e(s_),"mediapipe-face":$e(b_),"mediapipe-pose":$e(P_),"mediapipe-object":$e(q_),"mediapipe-segmentation":$e(ek),"mediapipe-gesture":$e(pk),"mediapipe-audio":$e(kk),function:$e(O3),dispatch:$e(e2)},$s=[...A1,...Rw,...tx,...Sx,...t2,...cS,..._S,...Ck,...zk,...Gk,...E3,...Y3,...X3,...pC,...xC,...DC,...VC];function mN(){const e=Ge();for(const t of $s)e.register(t);console.log(`[Registry] Registered ${$s.length} nodes`)}const vN={class:"editor-view"},yN={class:"panel-info"},bN={key:1,class:"empty-state"},wN={key:0,class:"connection-error"},xN=xe({__name:"EditorView",setup(e){const{canUndo:t,canRedo:n,undo:o,redo:i,startBatch:a,endBatch:s}=tu(),r=re(null);let l=null;const u=re(null),c=Ve(),p=nu(),y=Ge(),b=Re(),{onConnect:S,addEdges:v,onNodeDragStart:x,onNodeDragStop:h,onPaneReady:f,onPaneClick:d,onNodeClick:m,project:_,fitView:C,setViewport:L,getViewport:R,getSelectedEdges:j}=b,Y=re(null),O={animated:$e(g0)};mN();const k=re(!0);Oe(async()=>{c.activeFlow||!await c.loadSampleFlowIfFirstVisit()&&!c.activeFlow&&c.createFlow("My First Flow"),k.value=!1});function J(P){const H=y0(P,F=>y.getDefinition(F),F=>{var ie,oe;return(oe=(ie=c.activeFlow)==null?void 0:ie.nodes.find(se=>se.id===F))==null?void 0:oe.data});return!H.valid&&H.reason&&w(H.reason),H.valid}function w(P){r.value=P,l&&clearTimeout(l),l=setTimeout(()=>{r.value=null},2e3)}function I(P){var oe,se;const H=(oe=P.data)==null?void 0:oe.nodeType;if(!H)return"var(--color-neutral-400)";const F=y.getDefinition(H);if(!F)return"var(--color-neutral-400)";const ie=F.category;return((se=ze[ie])==null?void 0:se.color)??"var(--color-neutral-400)"}S(P=>{v([P]),c.activeFlow&&c.addEdge(P.source,P.sourceHandle??"",P.target,P.targetHandle??"")}),x(()=>{Y.value=a()}),h(({node:P})=>{c.updateNodePosition(P.id,P.position),Y.value&&(s(Y.value,"Move node"),Y.value=null)});function $(P){P.preventDefault(),P.dataTransfer&&(P.dataTransfer.dropEffect="copy")}function V(P){var E;const H=(E=P.dataTransfer)==null?void 0:E.getData("application/clasp-node");if(!H)return;const F=y.getDefinition(H);if(!F)return;const{left:ie,top:oe}=P.currentTarget.getBoundingClientRect(),se=_({x:P.clientX-ie,y:P.clientY-oe}),T=a();c.addNode(H,se,{label:F.name,nodeType:H,definition:F}),s(T,`Add ${F.name} node`)}_e(()=>p.zoom,P=>{const H=R();L({...H,zoom:P})}),f(()=>{c.activeNodes.length>0&&C({padding:.2})}),_e(()=>b.getSelectedNodes.value,P=>{const H=P.map(F=>F.id);p.selectNodes(H),H.length===1?p.setInspectedNode(H[0]):H.length===0&&p.setInspectedNode(null)}),d(()=>{p.clearSelection(),p.setInspectedNode(null)}),m(({node:P,event:H})=>{H.shiftKey||p.setInspectedNode(P.id)});function M(P){const H=P.filter(F=>F.type==="remove");if(H.length>0){const F=a();for(const ie of H)c.removeNode(ie.id),p.removeFromSelection(ie.id),p.inspectedNode===ie.id&&p.setInspectedNode(null);s(F,`Delete ${H.length} node${H.length>1?"s":""}`)}}function U(P){if(P.target instanceof HTMLInputElement||P.target instanceof HTMLTextAreaElement)return;const F=navigator.platform.toUpperCase().indexOf("MAC")>=0?P.metaKey:P.ctrlKey;if(F&&P.key==="z"&&!P.shiftKey){P.preventDefault(),t.value&&o();return}if(F&&P.key==="z"&&P.shiftKey||F&&P.key==="y"){P.preventDefault(),n.value&&i();return}if(F&&P.key==="a"){P.preventDefault();const ie=c.activeNodes.map(oe=>oe.id);p.selectNodes(ie),c.activeNodes.forEach(oe=>{oe.selected=!0});return}if(F&&P.key==="c"){P.preventDefault(),ne();return}if(F&&P.key==="x"){P.preventDefault(),ae();return}if(F&&P.key==="v"){P.preventDefault(),pe();return}if(F&&P.key==="d"){P.preventDefault(),he();return}if(F&&P.key==="g"){P.preventDefault(),B();return}if(F&&P.key==="e"){P.preventDefault(),Z();return}if(F&&P.shiftKey&&P.key==="G"){P.preventDefault(),X();return}if(P.key==="Delete"||P.key==="Backspace"){P.preventDefault(),W();return}}function W(){const P=p.selectedNodes,F=j.value.map(ie=>ie.id);if(!(P.length===0&&F.length===0)){if(P.length>0){c.removeNodes(P);const ie=c.activeNodes.map(oe=>oe.id);p.cleanupExposedControls(ie),p.clearSelection(),p.inspectedNode&&P.includes(p.inspectedNode)&&p.setInspectedNode(null)}F.length>0&&c.removeEdges(F)}}function ne(){const P=c.activeNodes.filter(ie=>p.selectedNodes.includes(ie.id));if(P.length===0)return;const H=Math.min(...P.map(ie=>ie.position.x)),F=Math.min(...P.map(ie=>ie.position.y));u.value={nodes:P.map(ie=>{var oe;return{nodeType:(oe=ie.data)==null?void 0:oe.nodeType,position:{x:ie.position.x-H,y:ie.position.y-F},data:{...ie.data}}}),copyOffset:{x:20,y:20}}}function ae(){if(ne(),u.value&&u.value.nodes.length>0){const P=a(),H=p.selectedNodes.slice();c.removeNodes(H),p.clearSelection(),s(P,`Cut ${H.length} node${H.length>1?"s":""}`)}}function pe(){if(!u.value||u.value.nodes.length===0)return;const P=a(),H=[],F=R(),ie=-F.x/F.zoom+100,oe=-F.y/F.zoom+100;for(const se of u.value.nodes){const T=y.getDefinition(se.nodeType);if(!T)continue;const E={x:ie+se.position.x+u.value.copyOffset.x,y:oe+se.position.y+u.value.copyOffset.y},A=c.addNode(se.nodeType,E,{...se.data,label:T.name,nodeType:se.nodeType,definition:T});A&&H.push(A.id)}u.value.copyOffset.x+=20,u.value.copyOffset.y+=20,p.selectNodes(H),c.activeNodes.forEach(se=>{se.selected=H.includes(se.id)}),s(P,`Paste ${H.length} node${H.length>1?"s":""}`)}function he(){var ie;const P=c.activeNodes.filter(oe=>p.selectedNodes.includes(oe.id));if(P.length===0)return;const H=a(),F=[];for(const oe of P){const se=(ie=oe.data)==null?void 0:ie.nodeType,T=y.getDefinition(se);if(!T)continue;const E={x:oe.position.x+20,y:oe.position.y+20},A=c.addNode(se,E,{...oe.data,label:T.name,nodeType:se,definition:T});A&&F.push(A.id)}p.selectNodes(F),c.activeNodes.forEach(oe=>{oe.selected=F.includes(oe.id)}),s(H,`Duplicate ${F.length} node${F.length>1?"s":""}`)}function B(){const P=p.selectedNodes;if(P.length<1){w("Select at least one node to create a subflow");return}const H=window.prompt("Enter name for the new subflow:","My Subflow");if(!H)return;const F=a(),ie=c.createSubflowFromSelection(P,H);ie?(p.clearSelection(),p.selectNodes([ie.instanceNodeId]),w(`Created subflow "${H}"`),s(F,`Create subflow "${H}"`)):w("Failed to create subflow")}function Z(){var oe;if(p.selectedNodes.length!==1){w("Select a single subflow instance to edit");return}const P=p.selectedNodes[0],H=c.activeNodes.find(se=>se.id===P);if(!H||((oe=H.data)==null?void 0:oe.nodeType)!=="subflow"){w("Selected node is not a subflow");return}const F=H.data.subflowId;if(!c.getFlowById(F)){w("Subflow not found");return}c.setActiveFlow(F)}function X(){var oe;if(p.selectedNodes.length!==1){w("Select a single subflow instance to unpack");return}const P=p.selectedNodes[0],H=c.activeNodes.find(se=>se.id===P);if(!H||((oe=H.data)==null?void 0:oe.nodeType)!=="subflow"){w("Selected node is not a subflow");return}const F=a(),ie=c.unpackSubflowInstance(P);ie&&ie.length>0?(p.clearSelection(),p.selectNodes(ie),c.activeNodes.forEach(se=>{se.selected=ie.includes(se.id)}),s(F,"Unpack subflow")):w("Failed to unpack subflow")}return Oe(async()=>{window.addEventListener("keydown",U);try{const P=x0();await P.initialize();const H=P.getLoadErrors();H.length>0&&console.warn("Custom node load errors:",H)}catch(P){console.error("Failed to initialize custom node loader:",P)}}),Ye(()=>{window.removeEventListener("keydown",U),l&&(clearTimeout(l),l=null)}),(P,H)=>(z(),K("div",vN,[N(c).activeFlow?(z(),we(N(Fg),{key:0,nodes:N(c).activeFlow.nodes,"onUpdate:nodes":H[0]||(H[0]=F=>N(c).activeFlow.nodes=F),edges:N(c).activeFlow.edges,"onUpdate:edges":H[1]||(H[1]=F=>N(c).activeFlow.edges=F),"node-types":N(gN),"edge-types":O,"default-edge-options":{type:"animated"},"is-valid-connection":J,"snap-to-grid":N(p).snapToGrid,"snap-grid":[N(p).gridSize,N(p).gridSize],"connection-line-style":{stroke:"var(--color-primary-400)",strokeWidth:2},"selection-key-code":null,"multi-selection-key-code":null,"delete-key-code":"Delete","edges-updatable":!0,"selectable-edges":!0,"fit-view-on-init":"",class:"flow-canvas",onDragover:$,onDrop:V,onNodesChange:M},{default:et(()=>[N(p).showGrid?(z(),we(N(Xg),{key:0,gap:N(p).gridSize,size:1,"pattern-color":"var(--color-neutral-300)"},null,8,["gap"])):me("",!0),te(N(Nm),{position:"bottom-right","show-zoom":!0,"show-fit-view":!0,"show-interactive":!1}),N(p).showMinimap?(z(),we(N(l0),{key:1,position:"bottom-right",style:{marginBottom:"50px"},pannable:!0,zoomable:!0,"node-color":I})):me("",!0),te(N(ta),{position:"top-right",class:"canvas-panel"},{default:et(()=>[g("div",yN,[g("span",null,be(N(c).activeNodes.length)+" nodes",1),g("span",null,be(N(c).activeEdges.length)+" connections",1)])]),_:1})]),_:1},8,["nodes","edges","node-types","snap-to-grid","snap-grid"])):me("",!0),N(c).activeNodes.length===0?(z(),K("div",bN,[...H[2]||(H[2]=[g("p",null,"Drag nodes from the sidebar to get started",-1)])])):me("",!0),te(ou,{name:"toast"},{default:et(()=>[r.value?(z(),K("div",wN,be(r.value),1)):me("",!0)]),_:1})]))}}),CN=Ae(xN,[["__scopeId","data-v-2e9443bf"]]);export{CN as default};
